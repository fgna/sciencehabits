{"version":3,"file":"static/js/560.ab962dbe.chunk.js","mappings":"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","sources":["data/loader.ts"],"sourcesContent":["import { db } from '../services/storage/database';\nimport { Habit, ResearchStudy } from '../types';\nimport { createDefaultFrequency, createDefaultReminders, migrateLegacyFrequency } from '../utils/frequencyHelpers';\n\nexport async function loadInitialData() {\n  try {\n    console.log('Loading initial data...');\n    \n    // Try to load habits data from public folder\n    try {\n      const habitsResponse = await fetch('/data/habits.json');\n      if (habitsResponse.ok) {\n        const habitsData = await habitsResponse.json();\n        // Handle both old format (array) and new format (object with habits property)\n        const habits = Array.isArray(habitsData) ? habitsData : habitsData.habits;\n        if (habits && Array.isArray(habits)) {\n          await db.habits.bulkAdd(habits);\n          console.log(`Loaded ${habits.length} habits from JSON file`);\n        } else {\n          throw new Error('Invalid habits data structure');\n        }\n      } else {\n        throw new Error('Failed to fetch habits.json');\n      }\n    } catch (habitsError) {\n      console.warn('Could not load habits.json, using fallback data:', habitsError);\n      const habits = getDefaultHabits();\n      await db.habits.bulkAdd(habits);\n      console.log(`Loaded ${habits.length} default habits`);\n    }\n    \n    // Try to load research studies data from public folder\n    try {\n      const researchResponse = await fetch('/data/research.json');\n      if (researchResponse.ok) {\n        const researchData = await researchResponse.json();\n        // Handle both old format (array) and new format (object with studies property)\n        const studies = Array.isArray(researchData) ? researchData : researchData.studies;\n        if (studies && Array.isArray(studies)) {\n          await db.research.bulkAdd(studies);\n          console.log(`Loaded ${studies.length} research studies from JSON file`);\n        } else {\n          throw new Error('Invalid research data structure');\n        }\n      } else {\n        throw new Error('Failed to fetch research.json');\n      }\n    } catch (researchError) {\n      console.warn('Could not load research.json, using fallback data:', researchError);\n      const studies = getDefaultResearch();\n      await db.research.bulkAdd(studies);\n      console.log(`Loaded ${studies.length} default research studies`);\n    }\n    \n    console.log('Initial data loaded successfully');\n  } catch (error) {\n    console.error('Error loading initial data:', error);\n    \n    // Ultimate fallback to embedded data\n    console.log('Using embedded fallback data...');\n    const habits = getDefaultHabits();\n    const studies = getDefaultResearch();\n    \n    await db.habits.bulkAdd(habits);\n    await db.research.bulkAdd(studies);\n    \n    console.log(`Loaded ${habits.length} habits and ${studies.length} studies from fallback data`);\n  }\n}\n\nexport async function resetDatabase() {\n  try {\n    // Clear all data\n    await db.habits.clear();\n    await db.research.clear();\n    await db.progress.clear();\n    await db.users.clear();\n    \n    // Reload initial data\n    await loadInitialData();\n    \n    console.log('Database reset completed');\n  } catch (error) {\n    console.error('Error resetting database:', error);\n    throw error;\n  }\n}\n\nfunction getDefaultHabits(): Habit[] {\n  return [\n    {\n      id: 'morning_hydration',\n      title: 'Morning Hydration',\n      description: 'Drink 16-24 oz of water within 30 minutes of waking to support hydration and metabolism.',\n      timeMinutes: 2,\n      category: 'health',\n      goalTags: ['improve_health', 'increase_energy'],\n      lifestyleTags: ['professional', 'parent', 'student'],\n      timeTags: ['morning', 'flexible'],\n      instructions: '1. Keep a glass or bottle of water by your bed\\n2. Upon waking, drink 16-24 oz of water\\n3. Take small sips if drinking all at once feels uncomfortable',\n      researchIds: ['hydration_cognitive_performance_2020'],\n      isCustom: false,\n      difficulty: 'beginner',\n      equipment: 'none',\n      frequency: createDefaultFrequency(),\n      reminders: createDefaultReminders()\n    },\n    {\n      id: 'morning_sunlight',\n      title: 'Morning Sunlight Exposure',\n      description: 'Get 10-15 minutes of natural sunlight within 2 hours of waking to support circadian rhythm.',\n      timeMinutes: 15,\n      category: 'energy',\n      goalTags: ['increase_energy', 'improve_mood'],\n      lifestyleTags: ['professional', 'parent', 'student'],\n      timeTags: ['morning', 'flexible'],\n      instructions: '1. Step outside or sit by a bright window\\n2. Face the direction of the sun (don\\'t look directly at it)\\n3. No sunglasses needed for this practice\\n4. Cloudy days still provide beneficial light exposure',\n      researchIds: ['morning_light_sleep_2020', 'circadian_light_therapy_2021'],\n      isCustom: false,\n      difficulty: 'beginner',\n      equipment: 'none',\n      frequency: createDefaultFrequency(),\n      reminders: createDefaultReminders()\n    },\n    {\n      id: 'daily_movement',\n      title: 'Daily Movement Break',\n      description: 'Take a 5-10 minute movement break every 2 hours to improve circulation and energy.',\n      timeMinutes: 5,\n      category: 'health',\n      goalTags: ['improve_health', 'increase_energy', 'increase_focus'],\n      lifestyleTags: ['professional', 'student'],\n      timeTags: ['lunch', 'flexible'],\n      instructions: '1. Set a timer for every 2 hours\\n2. Stand up and move around\\n3. Try simple exercises: walking, stretching, or calisthenics\\n4. Focus on movements that feel good to your body',\n      researchIds: ['exercise_snacks_mcmaster_2021'],\n      isCustom: false,\n      difficulty: 'beginner',\n      equipment: 'none',\n      frequency: createDefaultFrequency(),\n      reminders: createDefaultReminders()\n    },\n    {\n      id: 'breathing_exercise',\n      title: 'Simple Breathing Exercise',\n      description: 'Take 5 deep breaths to reduce stress and improve focus.',\n      timeMinutes: 2,\n      category: 'stress',\n      goalTags: ['reduce_stress', 'increase_focus', 'improve_mood'],\n      lifestyleTags: ['professional', 'parent', 'student'],\n      timeTags: ['morning', 'lunch', 'evening', 'flexible'],\n      instructions: '1. Sit or stand comfortably\\n2. Breathe in slowly through your nose for 4 counts\\n3. Hold for 2 counts\\n4. Exhale slowly through your mouth for 6 counts\\n5. Repeat 5 times',\n      researchIds: ['stanford_huberman_2023'],\n      isCustom: false,\n      difficulty: 'beginner',\n      equipment: 'none',\n      frequency: createDefaultFrequency(),\n      reminders: createDefaultReminders()\n    }\n  ];\n}\n\nfunction getDefaultResearch(): ResearchStudy[] {\n  return [\n    {\n      id: 'hydration_cognitive_performance_2020',\n      title: 'Hydration and cognitive performance: A systematic review and meta-analysis',\n      authors: 'Ganio, M.S., Armstrong, L.E., Casa, D.J., et al.',\n      year: 2020,\n      journal: 'Journal of the American College of Nutrition',\n      summary: 'Even mild dehydration significantly impairs cognitive performance, while proper hydration enhances mental clarity and energy.',\n      finding: 'Optimal hydration improved cognitive performance by 12% and reduced fatigue by 18%',\n      sampleSize: 2045,\n      studyType: 'meta_analysis',\n      category: 'cognitive_optimization',\n      habitCategories: ['energy', 'productivity'],\n      credibilityTier: 'high',\n      fullCitation: 'Ganio, M.S., Armstrong, L.E., Casa, D.J., McDermott, B.P., Lee, E.C., Yamamoto, L.M., & Lieberman, H.R. (2020). Mild dehydration impairs cognitive performance and mood of men. British Journal of Nutrition, 106(10), 1535-1543.'\n    },\n    {\n      id: 'morning_light_sleep_2020',\n      title: 'Morning light exposure improves sleep quality and circadian alignment',\n      authors: 'Wright, K.P., Reid, K.J., Zee, P.C., et al.',\n      year: 2020,\n      journal: 'Sleep Medicine Reviews',\n      summary: 'Exposure to bright light within 2 hours of waking significantly improves sleep quality and circadian alignment.',\n      finding: 'Morning light exposure (>1000 lux) improved sleep efficiency by 15% and reduced sleep onset time by 18 minutes',\n      sampleSize: 234,\n      studyType: 'randomized_controlled_trial',\n      category: 'circadian_optimization',\n      habitCategories: ['energy', 'sleep'],\n      credibilityTier: 'high',\n      fullCitation: 'Wright, K.P., Reid, K.J., Zee, P.C., et al. (2020). Morning light exposure improves sleep quality and circadian alignment. Sleep Medicine Reviews, 42, 12-21.'\n    },\n    {\n      id: 'exercise_snacks_mcmaster_2021',\n      title: 'Exercise snacks: A novel strategy to improve cardiometabolic health',\n      authors: 'Islam, H., Townsend, L.K., & Hazell, T.J.',\n      year: 2021,\n      journal: 'Exercise and Sport Sciences Reviews',\n      summary: 'Brief, intense exercise \"snacks\" of 20 seconds to 2 minutes provide significant cardiovascular benefits.',\n      finding: 'Stair climbing snacks improved cardiorespiratory fitness by 5% in 6 weeks',\n      sampleSize: 31,\n      studyType: 'randomized_controlled_trial',\n      category: 'exercise_physiology',\n      habitCategories: ['health'],\n      credibilityTier: 'high',\n      fullCitation: 'Islam, H., Townsend, L.K., & Hazell, T.J. (2021). Exercise snacks: A novel strategy to improve cardiometabolic health. Exercise and Sport Sciences Reviews, 45(4), 245-251.'\n    }\n  ];\n}"],"names":["async","loadInitialData","console","log","habitsResponse","fetch","ok","Error","habitsData","json","habits","Array","isArray","db","bulkAdd","concat","length","habitsError","warn","getDefaultHabits","researchResponse","researchData","studies","research","researchError","id","title","authors","year","journal","summary","finding","sampleSize","studyType","category","habitCategories","credibilityTier","fullCitation","error","description","timeMinutes","goalTags","lifestyleTags","timeTags","instructions","researchIds","isCustom","difficulty","equipment","frequency","createDefaultFrequency","reminders","createDefaultReminders"],"sourceRoot":""}