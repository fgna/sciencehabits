/*! For license information please see main.4242b842.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),D=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),F=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function S(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function B(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case x:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case D:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}var T=Array.isArray,I=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},R=[],L=-1;function O(e){return{current:e}}function z(e){0>L||(e.current=R[L],R[L]=null,L--)}function H(e,t){L++,R[L]=e.current,e.current=t}var q=O(null),U=O(null),V=O(null),W=O(null);function K(e,t){switch(H(V,t),H(U,e),H(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(q),H(q,e)}function G(){z(q),z(U),z(V)}function Y(e){null!==e.memoizedState&&H(W,e);var t=q.current,n=sd(t,e.type);t!==n&&(H(U,e),H(q,n))}function Q(e){U.current===e&&(z(q),z(U)),W.current===e&&(z(W),Yd._currentValue=M)}var $=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/pe|0)|0},fe=Math.log,pe=Math.LN2;var ge=256,ye=4194304;function xe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=xe(r):0!==(a&=o)?i=xe(a):n||0!==(n=o&~e)&&(i=xe(n)):0!==(o=r&~s)?i=xe(o):0!==a?i=xe(a):n||0!==(n=r&~e)&&(i=xe(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function De(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ce(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-me(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-me(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Se(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var _e=Math.random().toString(36).slice(2),Be="__reactFiber$"+_e,Te="__reactProps$"+_e,Ie="__reactContainer$"+_e,Pe="__reactEvents$"+_e,Me="__reactListeners$"+_e,Re="__reactHandles$"+_e,Le="__reactResources$"+_e,Oe="__reactMarker$"+_e;function ze(e){delete e[Be],delete e[Te],delete e[Pe],delete e[Me],delete e[Re]}function He(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Be])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Be]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ve(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Oe]=!0}var Ke=new Set,Ge={};function Ye(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var $e,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,$.call(et,i)||!$.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===$e)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$e+e+Je}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function pt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?xt(e,a,ct(t)):null!=n?xt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function vt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Dt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(T(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&jt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&jt(e,s,t[s])}function Ft(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var St=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Bt=null,Tt=null;function It(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[Te]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Te]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":vt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Pt=!1;function Mt(e,t,n){if(Pt)return e(t,n);Pt=!0;try{return e(t)}finally{if(Pt=!1,(null!==Bt||null!==Tt)&&(Hc(),Bt&&(t=Bt,e=Tt,Tt=Bt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Te]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Lt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ot=!1;if(Lt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Th){Ot=!1}var Ht=null,qt=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,n=qt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Ut=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Yt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Qt,$t,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Qt=e.screenX-Jt.screenX,$t=e.screenY-Jt.screenY):$t=Qt=0,Jt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),rn=Yt(nn),sn=Yt(h({},nn,{dataTransfer:0})),an=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return mn}var pn=Yt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),xn=Yt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vn=Yt(h({},Xt,{newState:0,oldState:0})),Dn=[9,13,27,32],wn=Lt&&"CompositionEvent"in window,Cn=null;Lt&&"documentMode"in document&&(Cn=document.documentMode);var jn=Lt&&"TextEvent"in window&&!Cn,kn=Lt&&(!wn||Cn&&8<Cn&&11>=Cn),Fn=String.fromCharCode(32),Nn=!1;function En(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Sn=!1;var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_n[e.type]:"textarea"===t}function Tn(e,t,n,r){Bt?Tt?Tt.push(r):Tt=[r]:Bt=r,0<(t=Vu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var In=null,Pn=null;function Mn(e){Mu(e,0)}function Rn(e){if(ht(Ue(e)))return e}function Ln(e,t){if("change"===e)return t}var On=!1;if(Lt){var zn;if(Lt){var Hn="oninput"in document;if(!Hn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Hn="function"===typeof qn.oninput}zn=Hn}else zn=!1;On=zn&&(!document.documentMode||9<document.documentMode)}function Un(){In&&(In.detachEvent("onpropertychange",Vn),Pn=In=null)}function Vn(e){if("value"===e.propertyName&&Rn(Pn)){var t=[];Tn(t,Pn,e,_t(e)),Mt(Mn,t)}}function Wn(e,t,n){"focusin"===e?(Un(),Pn=n,(In=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Un()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(Pn)}function Gn(e,t){if("click"===e)return Rn(t)}function Yn(e,t){if("input"===e||"change"===e)return Rn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Lt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==mt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&$n(sr,r)||(sr=r,0<(r=Vu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Lt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var mr=hr("animationend"),fr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),xr=hr("transitioncancel"),br=hr("transitionend"),vr=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){vr.set(e,t),Ye(t,[e])}Dr.push("scrollEnd");var Cr=new WeakMap;function jr(e,t){if("object"===typeof e&&null!==e){var n=Cr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Cr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var kr=[],Fr=0,Nr=0;function Er(){for(var e=Fr,t=Nr=Fr=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var i=kr[t];kr[t++]=null;var s=kr[t];if(kr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Br(n,i,s)}}function Ar(e,t,n,r){kr[Fr++]=e,kr[Fr++]=t,kr[Fr++]=n,kr[Fr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Sr(e,t,n,r){return Ar(e,t,n,r),Tr(e)}function _r(e,t){return Ar(e,null,null,t),Tr(e)}function Br(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-me(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Tr(e){if(50<Bc)throw Bc=0,Tc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ir={};function Pr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Pr(e,t,n,r)}function Rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Or(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Rr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Mr(31,n,t,i)).elementType=N,e.lanes=s,e;case g:return Hr(n.children,i,s,t);case y:o=8,i|=24;break;case x:return(e=Mr(12,n,t,2|i)).elementType=x,e.lanes=s,e;case C:return(e=Mr(13,n,t,i)).elementType=C,e.lanes=s,e;case j:return(e=Mr(19,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case D:o=10;break e;case v:o=9;break e;case w:o=11;break e;case k:o=14;break e;case F:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Hr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Wr=0,Kr=null,Gr=0,Yr=[],Qr=0,$r=null,Jr=1,Xr="";function Zr(e,t){Vr[Wr++]=Gr,Vr[Wr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Yr[Qr++]=Jr,Yr[Qr++]=Xr,Yr[Qr++]=$r,$r=e;var r=Jr;e=Xr;var i=32-me(r)-1;r&=~(1<<i),n+=1;var s=32-me(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jr=1<<32-me(t)+i|n<<i|r,Xr=s+e}else Jr=1<<s|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Vr[--Wr],Vr[Wr]=null,Gr=Vr[--Wr],Vr[Wr]=null;for(;e===$r;)$r=Yr[--Qr],Yr[Qr]=null,Xr=Yr[--Qr],Yr[Qr]=null,Jr=Yr[--Qr],Yr[Qr]=null}var ri=null,ii=null,si=!1,ai=null,oi=!1,li=Error(a(519));function ci(e){throw pi(jr(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Be]=e,t[Te]=r,n){case"dialog":Ru("cancel",t),Ru("close",t);break;case"iframe":case"object":case"embed":Ru("load",t);break;case"video":case"audio":for(n=0;n<Iu.length;n++)Ru(Iu[n],t);break;case"source":Ru("error",t);break;case"img":case"image":case"link":Ru("error",t),Ru("load",t);break;case"details":Ru("toggle",t);break;case"input":Ru("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Ru("invalid",t);break;case"textarea":Ru("invalid",t),Dt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||$u(t.textContent,n)?(null!=r.popover&&(Ru("beforetoggle",t),Ru("toggle",t)),null!=r.onScroll&&Ru("scroll",t),null!=r.onScrollEnd&&Ru("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,md(e.type)?(e=xd,xd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function mi(){ii=ri=null,si=!1}function fi(){var e=ai;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),ai=null),e}function pi(e){null===ai?ai=[e]:ai.push(e)}var gi=O(null),yi=null,xi=null;function bi(e,t,n){H(gi,t._currentValue),t._currentValue=n}function vi(e){e._currentValue=gi.current,z(gi)}function Di(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Di(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Di(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ci(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&wi(t,e,n,r),t.flags|=262144}function ji(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ki(e){yi=e,xi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Fi(e){return Ei(yi,e)}function Ni(e,t){return null===yi&&ki(e),Ei(e,t)}function Ei(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xi){if(null===e)throw Error(a(308));xi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xi=xi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Si=r.unstable_scheduleCallback,_i=r.unstable_NormalPriority,Bi={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ti(){return{controller:new Ai,data:new Map,refCount:0}}function Ii(e){e.refCount--,0===e.refCount&&Si(_i,function(){e.controller.abort()})}var Pi=null,Mi=0,Ri=0,Li=null;function Oi(){if(0===--Mi&&null!==Pi){null!==Li&&(Li.status="fulfilled");var e=Pi;Pi=null,Ri=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Pi){var n=Pi=[];Mi=0,Ri=Au(),Li={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(Oi,Oi)}(0,t),null!==zi&&zi(e,t)};var Hi=O(null);function qi(){var e=Hi.current;return null!==e?e:rc.pooledCache}function Ui(e,t){H(Hi,null===t?Hi.current:t.pool)}function Vi(){var e=qi();return null===e?null:{parent:Bi._currentValue,pool:e}}var Wi=Error(a(460)),Ki=Error(a(474)),Gi=Error(a(542)),Yi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $i(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($i,$i),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then($i,$i);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xi=t,Wi}}var Xi=null;function Zi(){if(null===Xi)throw Error(a(459));var e=Xi;return Xi=null,e}function es(e){if(e===Wi||e===Gi)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Tr(e),Br(e,null,n),t}return Ar(e,r,t,n),Tr(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Li)throw Li}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var m=-536870913&o.lane,f=m!==o.lane;if(f?(sc&m)===m:(r&m)===m){0!==m&&m===Ri&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;m=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,m);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=g.payload)?p.call(y,d,m):p)||void 0===m)break e;d=h({},d,m);break e;case 2:ts=!0}}null!==(m=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[m]:f.push(m))}else f={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=m;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var ms=O(null),fs=O(0);function ps(e,t){H(fs,e=dc),H(ms,t),dc=e|t.baseLanes}function gs(){H(fs,dc),H(ms,ms.current)}function ys(){dc=fs.current,z(ms),z(fs)}var xs=0,bs=null,vs=null,Ds=null,ws=!1,Cs=!1,js=!1,ks=0,Fs=0,Ns=null,Es=0;function As(){throw Error(a(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function _s(e,t,n,r,i,s){return xs=s,bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Wa:Ka,js=!1,s=n(r,i),js=!1,Cs&&(s=Ts(t,n,r,i)),Bs(e),s}function Bs(e){I.H=Va;var t=null!==vs&&null!==vs.next;if(xs=0,Ds=vs=bs=null,ws=!1,Fs=0,Ns=null,t)throw Error(a(300));null===e||No||null!==(e=e.dependencies)&&ji(e)&&(No=!0)}function Ts(e,t,n,r){bs=e;var i=0;do{if(Cs&&(Ns=null),Fs=0,Cs=!1,25<=i)throw Error(a(301));if(i+=1,Ds=vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}I.H=Ga,s=t(n,r)}while(Cs);return s}function Is(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==vs?vs.memoizedState:null)!==e&&(bs.flags|=1024),t}function Ps(){var e=0!==ks;return ks=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Rs(e){if(ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ws=!1}xs=0,Ds=vs=bs=null,Cs=!1,Fs=ks=0,Ns=null}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ds?bs.memoizedState=Ds=e:Ds=Ds.next=e,Ds}function Os(){if(null===vs){var e=bs.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===Ds?bs.memoizedState:Ds.next;if(null!==t)Ds=t,vs=e;else{if(null===e){if(null===bs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===Ds?bs.memoizedState=Ds=e:Ds=Ds.next=e}return Ds}function zs(e){var t=Fs;return Fs+=1,null===Ns&&(Ns=[]),e=Ji(Ns,e,t),t=bs,null===(null===Ds?t.memoizedState:Ds.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Wa:Ka),e}function Hs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===D)return Fi(e)}throw Error(a(438,String(e)))}function qs(e){var t=null,n=bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function Us(e,t){return"function"===typeof t?t(e):t}function Vs(e){return Ws(Os(),vs,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(xs&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ri&&(d=!0);else{if((xs&m)===m){u=u.next,m===Ri&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,bs.lanes|=m,mc|=m}h=u.action,js&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,o=s):c=c.next=m,bs.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Qn(s,e.memoizedState)&&(No=!0,d&&null!==(n=Li)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=Os(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Qn(s,t.memoizedState)||(No=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=bs,i=Os(),s=si;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Qn((vs||i).memoizedState,n);if(o&&(i.memoizedState=n,No=!0),i=i.queue,ga(2048,8,$s.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ds&&1&Ds.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===rc)throw Error(a(349));s||0!==(124&xs)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Js(t)&&Xs(e)}function $s(e,t,n){return n(function(){Js(t)&&Xs(e)})}function Js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Xs(e){var t=_r(e,2);null!==t&&Mc(t,e,2)}function Zs(e){var t=Ls();if("function"===typeof e){var n=e;if(e=n(),js){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Ws(e,vs,"function"===typeof r?r:Us)}function ta(e,t,n,r,i){if(Ha(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==I.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function na(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=I.T,a={};I.T=a;try{var o=n(i,r),l=I.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){sa(e,t,c)}finally{I.T=s}}else try{ra(e,t,s=n(i,r))}catch(u){sa(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return sa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function sa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=bs;if(si){if(ii){t:{for(var i=ii,s=oi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Ls()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=La.bind(null,bs,r),r.dispatch=n,r=Zs(!1),s=za.bind(null,bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Ls()).queue=i,n=ta.bind(null,bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Os(),vs,e)}function ua(e,t,n){if(t=Ws(e,t,oa)[0],e=Vs(Us)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zs(t)}catch(a){if(a===Wi)throw Gi;throw a}else r=t;var i=(t=Os()).queue,s=i.dispatch;return n!==t.memoizedState&&(bs.flags|=2048,ma(9,{destroy:void 0,resource:void 0},da.bind(null,i,n),null)),[r,s,e]}function da(e,t){e.action=t}function ha(e){var t=Os(),n=vs;if(null!==n)return ua(t,n,e);Os(),t=t.memoizedState;var r=(n=Os()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fa(){return Os().memoizedState}function pa(e,t,n,r){var i=Ls();r=void 0===r?null:r,bs.flags|=e,i.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var i=Os();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==vs&&null!==r&&Ss(r,vs.memoizedState.deps)?i.memoizedState=ma(t,s,n,r):(bs.flags|=e,i.memoizedState=ma(1|t,s,n,r))}function ya(e,t){pa(8390656,8,e,t)}function xa(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function va(e,t){return ga(4,4,e,t)}function Da(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function wa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,Da.bind(null,t,e),n)}function Ca(){}function ja(e,t){var n=Os();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=Os();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ss(t,r[1]))return r[0];if(r=e(),js){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Fa(e,t,n){return void 0===n||0!==(1073741824&xs)?e.memoizedState=t:(e.memoizedState=n,e=Pc(),bs.lanes|=e,mc|=e,n)}function Na(e,t,n,r){return Qn(n,t)?n:null!==ms.current?(e=Fa(e,n,r),Qn(e,t)||(No=!0),e):0===(42&xs)?(No=!0,e.memoizedState=n):(e=Pc(),bs.lanes|=e,mc|=e,t)}function Ea(e,t,n,r,i){var s=P.p;P.p=0!==s&&8>s?s:8;var a=I.T,o={};I.T=o,za(e,!1,t,n);try{var l=i(),c=I.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Oa(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Ic());else Oa(e,t,r,Ic())}catch(u){Oa(e,t,{then:function(){},status:"rejected",reason:u},Ic())}finally{P.p=s,I.T=a}}function Aa(){}function Sa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=_a(e).queue;Ea(e,i,t,M,null===n?Aa:function(){return Ba(e),n(r)})}function _a(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ba(e){Oa(e,_a(e).next.queue,{},Ic())}function Ta(){return Fi(Yd)}function Ia(){return Os().memoizedState}function Pa(){return Os().memoizedState}function Ma(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),r=ss(t,e=is(n),n);return null!==r&&(Mc(r,t,n),as(r,t,n)),t={cache:Ti()},void(e.payload=t)}t=t.return}}function Ra(e,t,n){var r=Ic();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ha(e)?qa(t,n):null!==(n=Sr(e,t,n,r))&&(Mc(n,e,r),Ua(n,t,r))}function La(e,t,n){Oa(e,t,n,Ic())}function Oa(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ha(e))qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Qn(o,a))return Ar(e,t,i,0),null===rc&&Er(),!1}catch(l){}if(null!==(n=Sr(e,t,i,r)))return Mc(n,e,r),Ua(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},Ha(e)){if(t)throw Error(a(479))}else null!==(t=Sr(e,n,r,2))&&Mc(t,e,2)}function Ha(e){var t=e.alternate;return e===bs||null!==t&&t===bs}function qa(e,t){Cs=ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ua(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var Va={readContext:Fi,use:Hs,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Wa={readContext:Fi,use:Hs,useCallback:function(e,t){return Ls().memoizedState=[e,void 0===t?null:t],e},useContext:Fi,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4194308,4,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Ls();t=void 0===t?null:t;var r=e();if(js){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ls();if(void 0!==n){var i=n(t);if(js){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ra.bind(null,bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ls().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=La.bind(null,bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ca,useDeferredValue:function(e,t){return Fa(Ls(),e,t)},useTransition:function(){var e=Zs(!1);return e=Ea.bind(null,bs,e.queue,!0,!1),Ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bs,i=Ls();if(si){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&sc)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ya($s.bind(null,r,s,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=Ls(),t=rc.identifierPrefix;if(si){var n=Xr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-me(Jr)-1)).toString(32)+n),0<(n=ks++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Es++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ta,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Ls().memoizedState=Ma.bind(null,bs)}},Ka={readContext:Fi,use:Hs,useCallback:ja,useContext:Fi,useEffect:xa,useImperativeHandle:wa,useInsertionEffect:ba,useLayoutEffect:va,useMemo:ka,useReducer:Vs,useRef:fa,useState:function(){return Vs(Us)},useDebugValue:Ca,useDeferredValue:function(e,t){return Na(Os(),vs.memoizedState,e,t)},useTransition:function(){var e=Vs(Us)[0],t=Os().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Gs,useId:Ia,useHostTransitionStatus:Ta,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Os(),0,e,t)},useMemoCache:qs,useCacheRefresh:Pa},Ga={readContext:Fi,use:Hs,useCallback:ja,useContext:Fi,useEffect:xa,useImperativeHandle:wa,useInsertionEffect:ba,useLayoutEffect:va,useMemo:ka,useReducer:Ks,useRef:fa,useState:function(){return Ks(Us)},useDebugValue:Ca,useDeferredValue:function(e,t){var n=Os();return null===vs?Fa(n,e,t):Na(n,vs.memoizedState,e,t)},useTransition:function(){var e=Ks(Us)[0],t=Os().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Gs,useId:Ia,useHostTransitionStatus:Ta,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Os();return null!==vs?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Pa},Ya=null,Qa=0;function $a(e){var t=Qa;return Qa+=1,null===Ya&&(Ya=[]),Ji(Ya,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===F&&Za(s)===t.type)?(Ja(t=i(t,n.props),n),t.return=e,t):(Ja(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Ja(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Ur(t,e.mode,n)).return=e,t;case F:return h(e,t=(0,t._init)(t._payload),n)}if(T(t)||S(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,$a(t),n);if(t.$$typeof===D)return h(e,Ni(e,t),n);Xa(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===i?c(e,t,n,r):null;case p:return n.key===i?u(e,t,n,r):null;case F:return m(e,t,n=(i=n._init)(n._payload),r)}if(T(n)||S(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,$a(n),r);if(n.$$typeof===D)return m(e,t,Ni(e,n),r);Xa(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case F:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(T(r)||S(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,$a(r),i);if(r.$$typeof===D)return y(e,t,n,Ni(t,r),i);Xa(t,r)}return null}function x(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===F&&Za(b)===c.type){n(l,c.sibling),Ja(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Ur(u,l.mode,d)).return=l,l=d}return o(l);case F:return x(l,c,u=(b=u._init)(u._payload),d)}if(T(u))return function(i,a,o,l){for(var c=null,u=null,d=a,f=a=0,p=null;null!==d&&f<o.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var g=m(i,d,o[f],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,f),null===u?c=g:u.sibling=g,u=g,d=p}if(f===o.length)return n(i,d),si&&Zr(i,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(i,o[f],l))&&(a=s(d,a,f),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,f),c}for(d=r(d);f<o.length;f++)null!==(p=y(d,i,f,o[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),a=s(p,a,f),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(i,e)}),si&&Zr(i,f),c}(l,c,u,d);if(S(u)){if("function"!==typeof(b=S(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,f=o,p=o=0,g=null,x=l.next();null!==f&&!x.done;p++,x=l.next()){f.index>p?(g=f,f=null):g=f.sibling;var b=m(i,f,x.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),o=s(b,o,p),null===d?u=b:d.sibling=b,d=b,f=g}if(x.done)return n(i,f),si&&Zr(i,p),u;if(null===f){for(;!x.done;p++,x=l.next())null!==(x=h(i,x.value,c))&&(o=s(x,o,p),null===d?u=x:d.sibling=x,d=x);return si&&Zr(i,p),u}for(f=r(f);!x.done;p++,x=l.next())null!==(x=y(f,i,p,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?p:x.key),o=s(x,o,p),null===d?u=x:d.sibling=x,d=x);return e&&f.forEach(function(e){return t(i,e)}),si&&Zr(i,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return x(l,c,$a(u),d);if(u.$$typeof===D)return x(l,c,Ni(l,u),d);Xa(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Qa=0;var i=x(e,t,n,r);return Ya=null,i}catch(a){if(a===Wi||a===Gi)throw a;var s=Mr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var to=eo(!0),no=eo(!1),ro=O(null),io=null;function so(e){var t=e.alternate;H(co,1&co.current),H(ro,e),null===io&&(null===t||null!==ms.current||null!==t.memoizedState)&&(io=e)}function ao(e){if(22===e.tag){if(H(co,co.current),H(ro,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else oo()}function oo(){H(co,co.current),H(ro,ro.current)}function lo(e){z(ro),io===e&&(io=null),z(co)}var co=O(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ic(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ic(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Mc(t,e,n),as(t,e,n))}};function fo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function po(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function xo(e){yo(e)}function bo(e){console.error(e)}function vo(e){yo(e)}function Do(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function wo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Co(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){Do(e,t)},n}function jo(e){return(e=is(e)).tag=3,e}function ko(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){wo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){wo(t,n,r),"function"!==typeof i&&(null===jc?jc=new Set([this]):jc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Fo=Error(a(461)),No=!1;function Eo(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Ao(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return ki(t),r=_s(e,t,n,a,s,i),o=Ps(),null===e||No?(si&&o&&ti(t),t.flags|=1,Eo(e,t,r,i),t.child):(Ms(e,t,i),Qo(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rr(s)||void 0!==s.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_o(e,t,s,r,i))}if(s=e.child,!$o(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,r)&&e.ref===t.ref)return Qo(e,t,i)}return t.flags|=1,(e=Lr(s,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(No=!1,t.pendingProps=r=s,!$o(e,i))return t.lanes=e.lanes,Qo(e,t,i);0!==(131072&e.flags)&&(No=!0)}}return Po(e,t,n,r,i)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return To(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,To(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ui(0,null!==s?s.cachePool:null),null!==s?ps(t,s):gs(),ao(t)}else null!==s?(Ui(0,s.cachePool),ps(t,s),oo(),t.memoizedState=null):(null!==e&&Ui(0,null),gs(),oo());return Eo(e,t,i,n),t.child}function To(e,t,n,r){var i=qi();return i=null===i?null:{parent:Bi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ui(0,null),gs(),ao(t),null!==e&&Ci(e,t,r,!0),null}function Io(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Po(e,t,n,r,i){return ki(t),n=_s(e,t,n,r,void 0,i),r=Ps(),null===e||No?(si&&r&&ti(t),t.flags|=1,Eo(e,t,n,i),t.child):(Ms(e,t,i),Qo(e,t,i))}function Mo(e,t,n,r,i,s){return ki(t),t.updateQueue=null,n=Ts(t,r,n,i),Bs(e),r=Ps(),null===e||No?(si&&r&&ti(t),t.flags|=1,Eo(e,t,n,s),t.child):(Ms(e,t,s),Qo(e,t,s))}function Ro(e,t,n,r,i){if(ki(t),null===t.stateNode){var s=Ir,a=n.contextType;"object"===typeof a&&null!==a&&(s=Fi(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=mo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Fi(a):Ir,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&mo.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=go(n,o);s.props=l;var c=s.context,u=n.contextType;a=Ir,"object"===typeof u&&null!==u&&(a=Fi(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&po(t,s,r,a),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,i),cs(),c=t.memoizedState,o||h!==c||ts?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ts||fo(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=go(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Ir,"object"===typeof c&&null!==c&&(l=Fi(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&po(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,i),cs();var m=t.memoizedState;a!==d||h!==m||ts||null!==e&&null!==e.dependencies&&ji(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),m=t.memoizedState),(u=ts||fo(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&ji(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Io(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,i),t.child=to(t,null,n,i)):Eo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qo(e,t,i),e}function Lo(e,t,n,r){return mi(),t.flags|=256,Eo(e,t,n,r),t.child}var Oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Vi()}}function Ho(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function qo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?so(t):oo(),si){var l,c=ii;if(l=c){e:{for(l=c,c=oi;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Jr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=i.children,i=i.fallback,s?(oo(),c=Vo({mode:"hidden",children:c},s=t.mode),i=Hr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=zo(n),s.childLanes=Ho(e,r,n),t.memoizedState=Oo,i):(so(t),Uo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=i.fallback,c=t.mode,i=Vo({mode:"visible",children:i.children},c),(s=Hr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,to(t,e.child,null,n),(i=t.child).memoizedState=zo(n),i.childLanes=Ho(e,r,n),t.memoizedState=Oo,t=s);else if(so(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,pi({value:i,source:null,stack:null}),t=Wo(e,t,n)}else if(No||Ci(e,t,n,!1),r=0!==(n&e.childLanes),No||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ee(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,_r(e,i),Mc(r,e,i),Fo;"$?"===c.data||Gc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,si=!0,ai=null,oi=!1,null!==e&&(Yr[Qr++]=Jr,Yr[Qr++]=Xr,Yr[Qr++]=$r,Jr=e.id,Xr=e.overflow,$r=t),(t=Uo(t,i.children)).flags|=4096);return t}return s?(oo(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Lr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Lr(u,s):(s=Hr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Bi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Vi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Ho(e,r,n),t.memoizedState=Oo,i):(so(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Uo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return to(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Di(e.return,t,n)}function Go(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Eo(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(H(co,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,s);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ci(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $o(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ji(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)No=!0;else{if(!$o(e,n)&&0===(128&t.flags))return No=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),bi(0,Bi,e.memoizedState.cache),mi();break;case 27:case 5:Y(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qo(e,t,n):(so(t),null!==(e=Qo(e,t,n))?e.sibling:null);so(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ci(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Bo(e,t,n);case 24:bi(0,Bi,e.memoizedState.cache)}return Qo(e,t,n)}(e,t,n);No=0!==(131072&e.flags)}else No=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===w){t.tag=11,t=Ao(null,t,r,e,n);break e}if(i===k){t.tag=14,t=So(null,t,r,e,n);break e}}throw t=B(r)||r,Error(a(306,t,""))}Rr(r)?(e=go(r,e),t.tag=1,t=Ro(null,t,r,e,n)):(t.tag=0,t=Po(null,t,r,e,n))}return t;case 0:return Po(e,t,t.type,t.pendingProps,n);case 1:return Ro(e,t,r=t.type,i=go(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bi(0,Bi,r),r!==s.cache&&wi(t,[Bi],n,!0),cs(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Lo(e,t,r,n);break e}if(r!==i){pi(i=jr(Error(a(424)),t)),t=Lo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,si=!0,ai=null,oi=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===i){t=Qo(e,t,n);break e}Eo(e,t,r,n)}t=t.child}return t;case 26:return Io(e,t),null===e?(n=Ed(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(V.current).createElement(n))[Be]=t,r[Te]=e,ed(r,n,e),We(r),t.stateNode=r):t.memoizedState=Ed(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&si&&(r=t.stateNode=vd(t.type,t.pendingProps,V.current),ri=t,oi=!0,i=ii,md(t.type)?(xd=i,ii=yd(r.firstChild)):ii=i),Eo(e,t,t.pendingProps.children,n),Io(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Oe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oi))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),oi=!1,i=!0):i=!1),i||ci(t)),Y(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==o&&ad(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=_s(e,t,Is,null,null,n),Yd._currentValue=i),Io(e,t),Eo(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,oi))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Eo(e,t,r,n),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Eo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,ki(t),r=r(i=Fi(i)),t.flags|=1,Eo(e,t,r,n),t.child;case 14:return So(e,t,t.type,t.pendingProps,n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Bo(e,t,n);case 24:return ki(t),r=Fi(Bi),null===e?(null===(i=qi())&&(i=rc,s=Ti(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),bi(0,Bi,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Bi,r)):(r=s.cache,bi(0,Bi,r),r!==i.cache&&wi(t,[Bi],n,!0))),Eo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Xo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=ro.current)&&((4194048&sc)===sc?null!==io:(62914560&sc)!==sc&&0===(536870912&sc)||t!==io))throw Xi=Yi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ce():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vi(Bi),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Xo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xo(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=V.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=q.current,hi(t)?ui(t):(e=vd(i,r,n),t.stateNode=e,Xo(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=q.current,hi(t))ui(t);else{switch(i=rd(V.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Be]=t,e[Te]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=V.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||$u(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Be]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Be]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=fi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return vi(t.type),nl(t),null;case 19:if(z(co),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Or(n,e),n=n.sibling;return H(co,1&co.current|2),t.child}e=e.sibling}null!==i.tail&&te()>wc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=co.current,H(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Hi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vi(Bi),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vi(Bi),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return G(),null;case 10:return vi(t.type),null;case 22:case 23:return lo(t),ys(),null!==e&&z(Hi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vi(Bi),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:vi(Bi),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:lo(t);break;case 19:z(co);break;case 10:vi(t.type);break;case 22:case 23:lo(t),ys(),null!==e&&z(Hi);break;case 24:vi(Bi)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Xu(e,t,f,null,r,h)}}for(var m in r){var f=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=f||null!=h))switch(m){case"type":s=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==h&&Xu(e,t,m,f,r,h)}}return void gt(e,o,l,c,u,d,s,i);case"select":for(s in f=o=l=m=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(s)||Xu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Xu(e,t,i,s,r,c)}return t=l,n=o,r=f,void(null!=m?bt(e,!!n,m,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=m=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xu(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":m=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Xu(e,t,o,i,r,s)}return void vt(e,m,f);case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&null!=m&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Xu(e,t,p,null,r,m);for(c in r)if(m=r[c],f=n[c],r.hasOwnProperty(c)&&m!==f&&(null!=m||null!=f))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Xu(e,t,c,m,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g)&&Xu(e,t,g,null,r,m);for(u in r)if(m=r[u],f=n[u],r.hasOwnProperty(u)&&m!==f&&(null!=m||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:Xu(e,t,u,m,r,f)}return;default:if(Ft(t)){for(var y in n)m=n[y],n.hasOwnProperty(y)&&void 0!==m&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,m);for(d in r)m=r[d],f=n[d],!r.hasOwnProperty(d)||m===f||void 0===m&&void 0===f||Zu(e,t,d,m,r,f);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&null!=m&&!r.hasOwnProperty(x)&&Xu(e,t,x,null,r,m);for(h in r)m=r[h],f=n[h],!r.hasOwnProperty(h)||m===f||null==m&&null==f||Xu(e,t,h,m,r,f)}(r,e.type,n,t),r[Te]=t}catch(i){uu(e,e.return,i)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function xl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Be]=e,t[Te]=n}catch(s){uu(e,e.return,s)}}var bl=!1,vl=!1,Dl=!1,wl="function"===typeof WeakSet?WeakSet:Set,Cl=null;function jl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Rl(e,n),4&r&&al(5,n);break;case 1:if(Rl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var i=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Rl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&xl(n);case 26:case 5:Rl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Rl(e,n);break;case 13:Rl(e,n),4&r&&Sl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=fu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||vl,i=bl;var s=vl;bl=r,(vl=t)&&!s?Ol(e,n,0!==(8772&n.subtreeFlags)):Rl(e,n),bl=i,vl=s}break;case 30:break;default:Rl(e,n)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fl=null,Nl=!1;function El(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:vl||dl(n,t),El(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:vl||dl(n,t);var r=Fl,i=Nl;md(n.type)&&(Fl=n.stateNode,Nl=!1),El(e,t,n),Dd(n.stateNode),Fl=r,Nl=i;break;case 5:vl||dl(n,t);case 6:if(r=Fl,i=Nl,Fl=null,El(e,t,n),Nl=i,null!==(Fl=r))if(Nl)try{(9===Fl.nodeType?Fl.body:"HTML"===Fl.nodeName?Fl.ownerDocument.body:Fl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Fl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Fl&&(Nl?(fd(9===(e=Fl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):fd(Fl,n.stateNode));break;case 4:r=Fl,i=Nl,Fl=n.stateNode.containerInfo,Nl=!0,El(e,t,n),Fl=r,Nl=i;break;case 0:case 11:case 14:case 15:vl||ol(2,n,t),vl||ol(4,n,t),El(e,t,n);break;case 1:vl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),El(e,t,n);break;case 21:El(e,t,n);break;case 22:vl=(r=vl)||null!==n.memoizedState,El(e,t,n),vl=r;break;default:El(e,t,n)}}function Sl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){uu(t,t.return,n)}}function _l(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Bl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Fl=l.stateNode,Nl=!1;break e}break;case 5:Fl=l.stateNode,Nl=!1;break e;case 3:case 4:Fl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Fl)throw Error(a(160));Al(s,o,i),Fl=null,Nl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Tl=null;function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bl(t,e),Pl(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Bl(t,e),Pl(e),512&r&&(vl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Tl;if(Bl(t,e),Pl(e),512&r&&(vl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Oe]||s[Be]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[Be]=e,We(s),r=s;break e;case"link":var o=Od("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=Od("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Be]=e,We(s),r=s}e.stateNode=r}else zd(i,e.type,e.stateNode);else e.stateNode=Id(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zd(i,e.type,e.stateNode):Id(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Bl(t,e),Pl(e),512&r&&(vl||null===n||dl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Bl(t,e),Pl(e),512&r&&(vl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{wt(i,"")}catch(f){uu(e,e.return,f)}}4&r&&null!=e.stateNode&&ml(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Dl=!0);break;case 6:if(Bl(t,e),Pl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){uu(e,e.return,f)}}break;case 3:if(Ld=null,i=Tl,Tl=jd(t.containerInfo),Bl(t,e),Tl=i,Pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(f){uu(e,e.return,f)}Dl&&(Dl=!1,Ml(e));break;case 4:r=Tl,Tl=jd(e.stateNode.containerInfo),Bl(t,e),Pl(e),Tl=r;break;case 12:default:Bl(t,e),Pl(e);break;case 13:Bl(t,e),Pl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_l(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=vl;if(bl=u||i,vl=d||c,Bl(t,e),vl=d,bl=u,Pl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||bl||vl||Ll(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,_l(e,n))));break;case 19:Bl(t,e),Pl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_l(e,r)));case 30:case 21:}}function Pl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(fl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,pl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(wt(s,""),n.flags&=-33),yl(e,pl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,pl(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ll(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ll(t);break;case 27:Dd(t.stateNode);case 26:case 5:dl(t,t.return),Ll(t);break;case 22:null===t.memoizedState&&Ll(t);break;default:Ll(t)}e=e.sibling}}function Ol(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ol(i,s,n),al(4,s);break;case 1:if(Ol(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(s),ul(s,s.return);break;case 27:xl(s);case 26:case 5:Ol(i,s,n),n&&null===r&&4&a&&hl(s),ul(s,s.return);break;case 12:Ol(i,s,n);break;case 13:Ol(i,s,n),n&&4&a&&Sl(i,s);break;case 22:null===s.memoizedState&&Ol(i,s,n),ul(s,s.return);break;case 30:break;default:Ol(i,s,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ii(n))}function Hl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ii(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ii(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Wl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Vl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&zl(a,t);break;case 24:ql(e,t,n,r),2048&i&&Hl(t.alternate,t)}}function Vl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(s,a,o,l,i),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Vl(s,a,o,l,i):Wl(s,a):(u._visibility|=2,Vl(s,a,o,l,i)),i&&2048&c&&zl(a.alternate,a);break;case 24:Vl(s,a,o,l,i),i&&2048&c&&Hl(a.alternate,a);break;default:Vl(s,a,o,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&zl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&Hl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(a(475));var r=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Sd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Vd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=_d(n),(i=wd.get(i))&&Md(n,i),We(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Vd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Tl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Tl;Tl=jd(e.stateNode.containerInfo),Gl(e),Tl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Cl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:$l(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:$l(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):$l(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Cl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Cl;){var n=Cl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ii(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Cl=r;else e:for(n=e;null!==Cl;){var i=(r=Cl).sibling,s=r.return;if(kl(r),r===n){Cl=null;break e}if(null!==i){i.return=s,Cl=i;break e}Cl=s}}}var ec={getCacheForType:function(e){var t=Fi(Bi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,mc=0,fc=0,pc=0,gc=0,yc=0,xc=null,bc=null,vc=!1,Dc=0,wc=1/0,Cc=null,jc=null,kc=0,Fc=null,Nc=null,Ec=0,Ac=0,Sc=null,_c=null,Bc=0,Tc=null;function Ic(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==I.T){return 0!==Ri?Ri:Au()}return Se()}function Pc(){0===gc&&(gc=0===(536870912&sc)||si?we():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Mc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Uc(e,0),zc(e,sc,gc,!1)),ke(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(fc|=n),4===hc&&zc(e,sc,gc,!1)),wu(e))}function Rc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Wc(),i=Kc();rc!==e||sc!==t?(Cc=null,wc=te()+500,Uc(e,t)):cc=ve(e,t);e:for(;;)try{if(0!==ac&&null!==ic){t=ic;var s=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,s,1);break;case 2:case 9:if(Qi(s)){ac=0,oc=null,Xc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),wu(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Qi(s)?(ac=0,oc=null,Xc(t)):(ac=0,oc=null,Zc(e,t,s,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||Hd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}ac=0,oc=null,Zc(e,t,s,5);break;case 6:ac=0,oc=null,Zc(e,t,s,6);break;case 8:qc(),hc=6;break e;default:throw Error(a(462))}}$c();break}catch(d){Vc(e,d)}return xi=yi=null,I.H=r,I.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Er(),hc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Oc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(Uc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,fc|=s,i=4;break e}s=bc,bc=i,null!==s&&(null===bc?bc=s:bc.push.apply(bc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){Uc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Dc+300-te())){if(zc(r,t,gc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Lc.bind(null,r,n,bc,Cc,vc,t,gc,fc,yc,lc,s,2,-0,0),i)}else Lc(r,n,bc,Cc,vc,t,gc,fc,yc,lc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}wu(e)}function Lc(e,t,n,r,i,s,o,l,c,u,d,h,m,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Ud},Yl(t),null!==(h=function(){if(null===qd)throw Error(a(475));var e=qd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,s,n,r,i,o,l,c,d,1,m,f)),void zc(e,s,o,!u);nu(e,t,s,n,r,i,o,l,c)}function Oc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~pc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-me(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Fe(e,n,t)}function Hc(){return 0!==(6&nc)||(Cu(0,!1),!1)}function qc(){if(null!==ic){if(0===ac)var e=ic.return;else xi=yi=null,Rs(e=ic),Ya=null,Qa=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),rc=e,ic=n=Lr(e.current,null),sc=t,ac=0,oc=null,lc=!1,cc=ve(e,t),uc=!1,yc=gc=pc=fc=mc=hc=0,bc=xc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-me(r),s=1<<i;t|=e[i],r&=~s}return dc=t,Er(),n}function Vc(e,t){bs=null,I.H=Va,t===Wi||t===Gi?(t=Zi(),ac=3):t===Ki?(t=Zi(),ac=4):ac=t===Fo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ic&&(hc=1,Do(e,jr(t,e.current)))}function Wc(){var e=I.H;return I.H=Va,null===e?Va:e}function Kc(){var e=I.A;return I.A=ec,e}function Gc(){hc=4,lc||(4194048&sc)!==sc&&null!==ro.current||(cc=!0),0===(134217727&mc)&&0===(134217727&fc)||null===rc||zc(rc,sc,gc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var i=Wc(),s=Kc();rc===e&&sc===t||(Cc=null,Uc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==ic){var o=ic,l=oc;switch(ac){case 8:qc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Qc(),a=hc;break}catch(u){Vc(e,u)}return t&&e.shellSuspendCounter++,xi=yi=null,nc=r,I.H=i,I.A=s,null===ic&&(rc=null,sc=0,Er()),a}function Qc(){for(;null!==ic;)Jc(ic)}function $c(){for(;null!==ic&&!Z();)Jc(ic)}function Jc(e){var t=Jo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Mo(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Mo(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Rs(t);default:sl(n,t),t=Jo(n,t=ic=Or(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){xi=yi=null,Rs(t),Ya=null,Qa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ci(t,n,i,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===io?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(a(435,n.tag))}return du(e,r,i),Gc(),!1}if(si)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&pi(jr(e=Error(a(422),{cause:r}),n))):(r!==li&&pi(jr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=jr(r,n),os(e,i=Co(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var s=Error(a(520),{cause:r});if(s=jr(s,n),null===xc?xc=[s]:xc.push(s),4!==hc&&(hc=2),null===t)return!0;r=jr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,os(n,e=Co(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===jc||!jc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,ko(i=jo(i),e,n,r),os(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return hc=1,Do(e,jr(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return hc=1,Do(e,jr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==kc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-me(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&Fe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Nr,o,l,c),e===rc&&(ic=rc=null,sc=0),Nc=t,Fc=e,Ec=n,Ac=s,Sc=i,_c=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=I.T,I.T=null,i=P.p,P.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===i&&(l=o),m===s&&++d===r&&(c=o),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Cl=t;null!==Cl;)if(e=(t=Cl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Cl=e;else for(;null!==Cl;){switch(s=(t=Cl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var p=go(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))pd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Cl=e;break}Cl=t.return}}(e,t)}finally{nc=o,P.p=i,I.T=r}}kc=1,ru(),iu(),su()}}function ru(){if(1===kc){kc=0;var e=Fc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=I.T,I.T=null;var r=P.p;P.p=2;var i=nc;nc|=4;try{Il(t,e);var s=nd,a=er(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),f=o.textContent.length,p=Math.min(l.start,f),g=void 0===l.end?p:Math.min(l.end,f);!m.extend&&p>g&&(a=g,g=p,p=a);var y=Xn(o,p),x=Xn(o,g);if(y&&x&&(1!==m.rangeCount||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var b=d.createRange();b.setStart(y.node,y.offset),m.removeAllRanges(),p>g?(m.addRange(b),m.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),m.addRange(b))}}}}for(d=[],m=o;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var v=d[o];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}nh=!!td,nd=td=null}finally{nc=i,P.p=r,I.T=n}}e.current=t,kc=2}}function iu(){if(2===kc){kc=0;var e=Fc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=I.T,I.T=null;var r=P.p;P.p=2;var i=nc;nc|=4;try{jl(e,t.alternate,t)}finally{nc=i,P.p=r,I.T=n}}kc=3}}function su(){if(4===kc||3===kc){kc=0,ee();var e=Fc,t=Nc,n=Ec,r=_c;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kc=5:(kc=0,Nc=Fc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(jc=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=I.T,i=P.p,P.p=2,I.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{I.T=t,P.p=i}}0!==(3&Ec)&&ou(),wu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Tc?Bc++:(Bc=0,Tc=e):Bc=0,Cu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ii(t)))}function ou(e){return ru(),iu(),su(),lu()}function lu(){if(5!==kc)return!1;var e=Fc,t=Ac;Ac=0;var n=Ae(Ec),r=I.T,i=P.p;try{P.p=32>n?32:n,I.T=null,n=Sc,Sc=null;var s=Fc,o=Ec;if(kc=0,Nc=Fc=null,Ec=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Jl(s.current),Ul(s,s.current,o,n),nc=l,Cu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{P.p=i,I.T=r,au(e,t)}}function cu(e,t,n){t=jr(n,t),null!==(e=ss(e,t=Co(e.stateNode,t,2),2))&&(ke(e,2),wu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))){e=jr(n,e),null!==(r=ss(t,n=jo(2),2))&&(ko(n,r,t,e),ke(r,2),wu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-Dc?0===(2&nc)&&Uc(e,0):pc|=n,yc===sc&&(yc=0)),wu(e)}function mu(e,t){0===t&&(t=Ce()),null!==(e=_r(e,t))&&(ke(e,t),wu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),mu(e,n)}var gu=null,yu=null,xu=!1,bu=!1,vu=!1,Du=0;function wu(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),bu=!0,xu||(xu=!0,dd(function(){0!==(6&nc)?J(re,ju):ku()}))}function Cu(e,t){if(!vu&&bu){vu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-me(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Eu(r,s))}else s=sc,0===(3&(s=be(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ve(r,s)||(n=!0,Eu(r,s));r=r.next}}while(n);vu=!1}}function ju(){ku()}function ku(){bu=xu=!1;var e=0;0!==Du&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=Du),Du=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,s=Fu(r,t);0===s?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(bu=!0)),r=i}Cu(e,!1)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-me(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=De(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sc,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ve(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Ae(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=oe}return r=Nu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==kc&&5!==kc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Rc(e,r,t),Fu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function Eu(e,t){if(ou())return null;Rc(e,t,!0)}function Au(){return 0===Du&&(Du=we()),Du}function Su(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function _u(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Bu=0;Bu<Dr.length;Bu++){var Tu=Dr[Bu];wr(Tu.toLowerCase(),"on"+(Tu[0].toUpperCase()+Tu.slice(1)))}wr(mr,"onAnimationEnd"),wr(fr,"onAnimationIteration"),wr(pr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(gr,"onTransitionRun"),wr(yr,"onTransitionStart"),wr(xr,"onTransitionCancel"),wr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}}}}function Ru(e,t){var n=t[Pe];void 0===n&&(n=t[Pe]=new Set);var r=e+"__bubble";n.has(r)||(Hu(t,e,2,!1),n.add(r))}function Lu(e,t,n){var r=0;t&&(r|=4),Hu(n,e,r,t)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Ou]){e[Ou]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Pu.has(t)||Lu(t,!1,e),Lu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ou]||(t[Ou]=!0,Lu("selectionchange",!1,t))}}function Hu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=He(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Mt(function(){var r=s,i=_t(n),a=[];e:{var o=vr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case mr:case fr:case pr:c=on;break;case br:c=xn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=vn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===m||null!=(g=Rt(p,m))&&d.push(Uu(p,g,f)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===St||!(u=n.relatedTarget||n.fromElement)||!He(u)&&!u[Ie])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?He(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",m="onPointerEnter",p="pointer"),h=null==c?o:Ue(c),f=null==u?o:Ue(u),(o=new d(g,p+"leave",c,n,i)).target=h,o.relatedTarget=f,g=null,He(i)===r&&((d=new d(m,p+"enter",u,n,i)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(m=u,p=0,f=d=c;f;f=Wu(f))p++;for(f=0,g=m;g;g=Wu(g))f++;for(;0<p-f;)d=Wu(d),p--;for(;0<f-p;)m=Wu(m),f--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Wu(d),m=Wu(m)}d=null}else d=null;null!==c&&Ku(a,o,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(o=r?Ue(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Ln;else if(Bn(o))if(On)y=Yn;else{y=Kn;var x=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Ft(r.elementType)&&(y=Ln):y=Gn;switch(y&&(y=y(e,r))?Tn(a,y,n,i):(x&&x(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),x=r?Ue(r):window,e){case"focusin":(Bn(x)||"true"===x.contentEditable)&&(rr=x,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var b;if(wn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Sn?En(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(kn&&"ko"!==n.locale&&(Sn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Sn&&(b=Vt()):(qt="value"in(Ht=i)?Ht.value:Ht.textContent,Sn=!0)),0<(x=Vu(r,v)).length&&(v=new cn(v,e,null,n,i),a.push({event:v,listeners:x}),b?v.data=b:null!==(b=An(n))&&(v.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Nn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Sn)return"compositionend"===e||!wn&&En(e,t)?(e=Vt(),Ut=qt=Ht=null,Sn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(v=Vu(r,"onBeforeInput")).length&&(x=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:x,listeners:v}),x.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Su((i[Te]||null).action),a=r.submitter;a&&null!==(t=(t=a[Te]||null)?Su(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Du){var e=a?_u(i,a):new FormData(i);Sa(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?_u(i,a):new FormData(i),Sa(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Mu(a,t)})}function Uu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Rt(e,n))&&r.unshift(Uu(e,i,s)),null!=(i=Rt(e,t))&&r.push(Uu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Rt(n,s))&&a.unshift(Uu(n,c,l)):i||null!=(c=Rt(n,s))&&a.push(Uu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Yu,"")}function $u(e,t){return t=Qu(t),Qu(e)===t}function Ju(){}function Xu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":kt(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Xu(e,t,"name",i.name,i,null),Xu(e,t,"formEncType",i.formEncType,i,null),Xu(e,t,"formMethod",i.formMethod,i,null),Xu(e,t,"formTarget",i.formTarget,i,null)):(Xu(e,t,"encType",i.encType,i,null),Xu(e,t,"method",i.method,i,null),Xu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Ru("scroll",e);break;case"onScrollEnd":null!=r&&Ru("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ru("beforetoggle",e),Ru("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Nt.get(n)||n,r)}}function Zu(e,t,n,r,i,s){switch(n){case"style":kt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Ru("scroll",e);break;case"onScrollEnd":null!=r&&Ru("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Te]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ru("error",e),Ru("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,r,o,n,null)}}return s&&Xu(e,t,"srcSet",n.srcSet,n,null),void(i&&Xu(e,t,"src",n.src,n,null));case"input":Ru("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Xu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,o,s,!1),void dt(e);case"select":for(s in Ru("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Xu(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(o in Ru("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Xu(e,t,o,l,n,null)}return Dt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Xu(e,t,c,i,n,null);return;case"dialog":Ru("beforetoggle",e),Ru("toggle",e),Ru("cancel",e),Ru("close",e);break;case"iframe":case"object":Ru("load",e);break;case"video":case"audio":for(i=0;i<Iu.length;i++)Ru(Iu[i],e);break;case"image":Ru("error",e),Ru("load",e);break;case"details":Ru("toggle",e);break;case"embed":case"source":case"link":Ru("error",e),Ru("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,u,i,n,null)}return;default:if(Ft(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Xu(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function fd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Dd(a.documentElement),2&n&&Dd(a.body),4&n)for(Dd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Oe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i)return e.removeChild(s),void Nh(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Nh(t)}function pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":pd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function vd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Dd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var wd=new Map,Cd=new Set;function jd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kd=P.d;P.d={f:function(){var e=kd.f(),t=Hc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Ba(t):kd.r(e)},D:function(e){kd.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){kd.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){kd.L(e,t,n);var r=Fd;if(r&&e&&t){var i='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+pt(n.imageSizes)+'"]')):i+='[href="'+pt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Bd(e)}wd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Sd(s))||"script"===t&&r.querySelector(Td(s))||(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){kd.m(e,t);var n=Fd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Bd(e)}if(!wd.has(s)&&(e=h({rel:"modulepreload",href:e},t),wd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Td(s)))return}ed(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){kd.X(e,t);var n=Fd;if(n&&e){var r=Ve(n).hoistableScripts,i=Bd(e),s=r.get(i);s||((s=n.querySelector(Td(i)))||(e=h({src:e,async:!0},t),(t=wd.get(i))&&Rd(e,t),We(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){kd.S(e,t,n);var r=Fd;if(r&&e){var i=Ve(r).hoistableStyles,s=Ad(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Sd(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(s))&&Md(e,n);var l=a=r.createElement("link");We(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Pd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){kd.M(e,t);var n=Fd;if(n&&e){var r=Ve(n).hoistableScripts,i=Bd(e),s=r.get(i);s||((s=n.querySelector(Td(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=wd.get(i))&&Rd(e,t),We(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Fd="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Fd;if(r&&"string"===typeof t&&t){var i=pt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Cd.has(i)||(Cd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ed(e,t,n,r){var i,s,o,l,c=(c=V.current)?jd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=Ve(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=Ve(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Sd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),ed(s,"link",o),We(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Bd(n),(r=(n=Ve(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+pt(e)+'"'}function Sd(e){return'link[rel="stylesheet"]['+e+"]"}function _d(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Bd(e){return'[src="'+pt(e)+'"]'}function Td(e){return"script[async]"+e}function Id(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Pd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Sd(i));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=_d(n),(i=wd.get(i))&&Md(r,i),We(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",r),t.state.loading|=4,Pd(s,n.precedence,e),t.instance=s;case"script":return s=Bd(n.src),(i=e.querySelector(Td(s)))?(t.instance=i,We(i),i):(r=n,(i=wd.get(s))&&Rd(r=h({},n),i),We(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Pd(r,n.precedence,e));return t.instance}function Pd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function Od(e,t,n){if(null===Ld){var r=new Map,i=Ld=new Map;i.set(n,r)}else(r=(i=Ld).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Oe]||s[Be]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Ud(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Gd,e),Wd=null,Vd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Vd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:D,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Qd(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function $d(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Qd(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ti()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Jd(e){return e?e=Ir:Ir}function Xd(e,t,n,r,i,s){i=Jd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Mc(n,0,t),as(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=_r(e,67108864);null!==t&&Mc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=I.T;I.T=null;var s=P.p;try{P.p=2,sh(e,t,n,r)}finally{P.p=s,I.T=i}}function ih(e,t,n,r){var i=I.T;I.T=null;var s=P.p;try{P.p=8,sh(e,t,n,r)}finally{P.p=s,I.T=i}}function sh(e,t,n,r){if(nh){var i=ah(r);if(null===i)qu(e,t,r,oh,n),xh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return mh=bh(mh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return fh.set(s,bh(fh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ph.set(s,bh(ph.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(xh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var s=qe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=xe(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-me(a);o.entanglements[1]|=l,a&=~l}wu(s),0===(6&nc)&&(wc=te()+500,Cu(0,!1))}}break;case 13:null!==(o=_r(s,2))&&Mc(o,0,2),Hc(),eh(s,2)}if(null===(s=ah(r))&&qu(e,t,r,oh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function ah(e){return lh(e=_t(e))}var oh=null;function lh(e){if(oh=null,null!==(e=He(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,mh=null,fh=new Map,ph=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(t.pointerId)}}function bh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=qe(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vh(e){var t=He(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}(e.priority,function(){if(13===n.tag){var e=Ic();e=Ee(e);var t=_r(n,e);null!==t&&Mc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);St=r,n.target.dispatchEvent(r),St=null,t.shift()}return!0}function wh(e,t,n){Dh(e)&&n.delete(t)}function Ch(){uh=!1,null!==dh&&Dh(dh)&&(dh=null),null!==hh&&Dh(hh)&&(hh=null),null!==mh&&Dh(mh)&&(mh=null),fh.forEach(wh),ph.forEach(wh)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ch)))}var kh=null;function Fh(e){kh!==e&&(kh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){kh===e&&(kh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=qe(n);null!==s&&(e.splice(t,3),t-=3,Sa(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Nh(e){function t(t){return jh(t,e)}null!==dh&&jh(dh,e),null!==hh&&jh(hh,e),null!==mh&&jh(mh,e),fh.forEach(t),ph.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)vh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Te]||null;if("function"===typeof s)a||Fh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Te]||null)o=a.formAction;else if(null!==lh(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Fh(n)}}}function Eh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Xd(t.current,Ic(),e,t,null,null)},Ah.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Hc(),t[Ie]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Se();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&vh(e)}};var Sh=i.version;if("19.1.1"!==Sh)throw Error(a(527,Sh,"19.1.1"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var _h={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{ue=Bh.inject(_h),de=Bh}catch(Ih){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=xo,s=bo,l=vo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=$d(e,1,!1,null,0,n,r,i,s,l,0,null),e[Ie]=t.current,zu(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=xo,l=bo,c=vo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=$d(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Jd(null),n=t.current,(i=is(r=Ee(r=Ic()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,ke(t,n),wu(t),e[Ie]=t.current,zu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},81:(e,t,n)=>{"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(0===n?-6:1);return t.setDate(r),t.toISOString().split("T")[0]}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(0===n?0:7);return t.setDate(r),t.toISOString().split("T")[0]}function s(e){const t=[],n=new Date(e);for(let r=0;r<7;r++){const e=new Date(n);e.setDate(n.getDate()+r),t.push(e.toISOString().split("T")[0])}return t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date);return e.find(e=>e.weekStart===t)||null}function o(){let e=arguments.length>1?arguments[1]:void 0;const t=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date);return!!t&&t.completedSessions>=e}function l(){let e=arguments.length>1?arguments[1]:void 0;const t=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date),n=(null===t||void 0===t?void 0:t.completedSessions)||0;return Math.max(0,e-n)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),n=new Date(i(e)).getTime()-t.getTime(),r=Math.ceil(n/864e5);return Math.max(0,r)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return l(e,t,n)<=c(n)}function d(){let e=arguments.length>1?arguments[1]:void 0;const t=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date),n=(null===t||void 0===t?void 0:t.completedSessions)||0;return Math.min(100,Math.round(n/e*100))}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return 0;const t=[...e].sort((e,t)=>t.weekStart.localeCompare(e.weekStart));let n=0;for(const r of t){if(!r.weeklyGoalMet)break;n++}return n}function m(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if("weekly"!==e.type||null===(t=e.weeklyTarget)||void 0===t||!t.preferredDays)return!0;const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][n.getDay()];return e.weeklyTarget.preferredDays.includes(r)}function f(e){var t;if("weekly"!==e.type||null===(t=e.weeklyTarget)||void 0===t||!t.preferredDays)return"Any day";const n=e.weeklyTarget.preferredDays;if(0===n.length)return"Any day";const r=n.map(e=>e.charAt(0).toUpperCase()+e.slice(1));return 1===r.length?r[0]:2===r.length?r.join(" and "):r.slice(0,-1).join(", ")+", and "+r.slice(-1)}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const r=l(e,t,n),i=c(n);return 0===r?"low":r>i||r===i?"high":i<=2?"medium":"low"}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;const i=l(e,t,r),s=c(r),a=p(e,t,r);if(0===i)return"\ud83c\udf89 Weekly goal achieved for ".concat(n,"! You've completed ").concat(t," sessions this week.");if(i>s)return"\u26a0\ufe0f Weekly goal for ".concat(n," may not be achievable. You need ").concat(i," more sessions with only ").concat(s," days left.");switch(a){case"high":return"\ud83d\udd25 ".concat(n,": ").concat(i," sessions needed in ").concat(s," days to meet weekly goal!");case"medium":return"\u23f0 ".concat(n,": ").concat(i," more sessions needed this week (").concat(s," days left)");default:return"\ud83d\udcc5 ".concat(n,": ").concat(i," sessions remaining for weekly goal (").concat(s," days left)")}}n.r(t),n.d(t,{getCurrentWeekProgress:()=>a,getDaysRemainingInWeek:()=>c,getPreferredDaysString:()=>f,getRemainingSessionsForWeek:()=>l,getWeekDates:()=>s,getWeekEnd:()=>i,getWeekStart:()=>r,getWeeklyGoalProgress:()=>d,getWeeklyGoalReminderMessage:()=>g,getWeeklyGoalUrgency:()=>p,getWeeklyStreak:()=>h,isPreferredDay:()=>m,isWeeklyGoalAchievable:()=>u,isWeeklyGoalMet:()=>o})},131:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(43);const i=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,i,s);return s},s=e=>e;const a=e=>{const t=(e=>e?i(e):i)(e),n=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;const n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},o=e=>e?a(e):a},146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,i=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||i.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(s,l)).replace(r,o))}},181:(e,t,n)=>{"use strict";function r(){return{type:"daily"}}function i(e,t){return{type:"weekly",weeklyTarget:{sessionsPerWeek:e,preferredDays:t,allowFlexibleDays:!0}}}function s(){return{enabled:!0,periodicReminderDays:7}}function a(e){var t;switch(e.type){case"daily":default:return"Daily";case"weekly":if(e.weeklyTarget){const t=e.weeklyTarget.sessionsPerWeek,n=e.weeklyTarget.preferredDays;return n&&n.length>0?"".concat(t," times per week (").concat(n.join(", "),")"):"".concat(t," times per week")}return"Weekly";case"periodic":if(e.periodicTarget){const{interval:t,intervalCount:n}=e.periodicTarget,r=1===n?t:"".concat(n," ").concat(t,"s");return"Every ".concat(r)}return"Periodic";case"custom":return(null===(t=e.customPattern)||void 0===t?void 0:t.description)||"Custom"}}n.d(t,{HC:()=>a,Up:()=>r,cX:()=>i,hI:()=>s})},222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,i.default)(e),s="function"===typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,i=e.value;s?t(r,i,e):i&&((n=n||{})[r]=i)}}),n};var i=r(n(403))},240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!s)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},o=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,c,u,d=arguments[0],h=1,m=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<m;++h)if(null!=(t=arguments[h]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(f&&i&&(a(i)||(c=s(i)))?(c?(c=!1,u=r&&s(r)?r:[]):u=r&&a(r)?r:{},o(d,{name:n,newValue:e(f,u,i)})):"undefined"!==typeof i&&o(d,{name:n,newValue:i}));return d}},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var v=b.prototype=new x;v.constructor=b,p(v,y.prototype),v.isPureReactComponent=!0;var D=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function j(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var F=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function A(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+N(e,0):s,D(a)?(i="",null!=u&&(i=u.replace(F,"$&/")+"/"),A(a,t,i,"",function(e){return e})):null!=a&&(k(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(F,"$&/")+"/")+u,a=j(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,f=""===s?".":s+":";if(D(e))for(var p=0;p<e.length;p++)u+=A(s=e[p],t,i,o=f+N(s,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,o=f+N(s,p++),a);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function S(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function T(){}t.Children={map:S,forEach:function(e,t,n){S(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return S(e,function(){t++}),t},toArray:function(e){return S(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return j(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return j(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(T,B)}catch(s){B(s)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.1"},294:function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(222)),i=n(146);function s(e,t){var n={};return e&&"string"===typeof e?((0,r.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n):n}s.default=s,e.exports=s},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function m(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new p(e),b(),t}}function p(e){this.start=e,this.end={line:d,column:h},this.source=l.source}p.prototype.content=e;var g=[];function y(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function x(t){var n=t.exec(e);if(n){var r=n[0];return m(r),e=e.slice(r.length),n}}function b(){x(r)}function v(e){var t;for(e=e||[];t=D();)!1!==t&&e.push(t);return e}function D(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return y("End of comment missing");var r=e.slice(2,n-2);return h+=2,m(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function w(){var e=f(),n=x(i);if(n){if(D(),!x(s))return y("property missing ':'");var r=x(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return x(o),l}}return b(),function(){var e,t=[];for(v(t);e=w();)!1!==e&&(t.push(e),v(t));return t}()}},498:(e,t,n)=>{"use strict";n.d(t,{db:()=>x,dbHelpers:()=>v,w:()=>b});var r=n(555),i=n(809);const s=Symbol.for("Dexie"),a=globalThis[s]||(globalThis[s]=i);if(i.semVer!==a.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(i.semVer," and ").concat(a.semVer));const{liveQuery:o,mergeRanges:l,rangesOverlap:c,RangeSet:u,cmp:d,Entity:h,PropModification:m,replacePrefix:f,add:p,remove:g}=a,y=a;const x=new class extends y{constructor(){super("ScienceHabitsDB"),this.users=void 0,this.habits=void 0,this.progress=void 0,this.research=void 0,this.version(1).stores({users:"id, createdAt, language, lifestyle, preferredTime",habits:"id, category, isCustom, difficulty, *goalTags, *lifestyleTags, *timeTags",progress:"id, userId, habitId, dateStarted, currentStreak, longestStreak",research:"id, category, year, credibilityTier, *habitCategories"}),this.version(2).stores({users:"id, name, createdAt, language, lifestyle, preferredTime",habits:"id, category, isCustom, difficulty, effectivenessScore, evidenceStrength, frequency, *goalTags, *lifestyleTags, *timeTags",progress:"id, userId, habitId, dateStarted, currentStreak, longestStreak",research:"id, category, year, studyType, sampleSize, evidenceLevel, studyQuality, *habitRelevance"}),this.version(3).stores({users:"id, name, createdAt, language, lifestyle, preferredTime, dailyMinutes",habits:"id, category, isCustom, difficulty, effectivenessScore, evidenceStrength, frequency.type, *goalTags, *lifestyleTags, *timeTags",progress:"id, userId, habitId, dateStarted, currentStreak, longestStreak, lastCompletionDate, *completions",research:"id, category, year, studyType, sampleSize, evidenceLevel, studyQuality, *habitRelevance"})}};async function b(){try{const e=localStorage.getItem("sciencehabits_data_version"),t="3.0";e!==t&&(console.log("Data version mismatch, clearing and reloading data..."),await x.habits.clear(),await x.research.clear(),localStorage.setItem("sciencehabits_data_version",t));if(0===await x.habits.count()){const{loadInitialData:e}=await n.e(560).then(n.bind(n,560));await e()}}catch(e){console.error("Failed to initialize database:",e)}}const v={initializeDatabase:async()=>b(),async createUser(e){const t=(0,r.A)({id:crypto.randomUUID(),createdAt:(new Date).toISOString()},e);return await x.users.add(t),t},getUser:async e=>await x.users.get(e),async updateUser(e,t){await x.users.update(e,t)},getAllHabits:async()=>await x.habits.toArray(),getRecommendedHabits:async e=>(await x.habits.where("isCustom").equals(0).toArray()).map(t=>{const n=e.goals.map(e=>({improve_focus:["cognitive_performance","focus"],reduce_stress:["stress_reduction","anxiety_management"],increase_energy:["energy"],better_sleep:["sleep_quality"],build_confidence:["mood","life_satisfaction"],improve_mood:["mood"],boost_creativity:["cognitive_performance"],enhance_memory:["brain_health","cognitive_performance"]}[e]||[e])).flat(),r=t.goalTags.some(e=>n.includes(e)),i=t.lifestyleTags.includes(e.lifestyle)||t.lifestyleTags.includes("all"),s=t.timeTags.some(t=>[e.preferredTime,"flexible"].includes(t)),a=t.timeMinutes<=e.dailyMinutes;let o=0;return r&&(o+=40),i&&(o+=20),s&&(o+=20),a&&(o+=20),"tier1_foundation"===t.category?o+=100:"tier2_optimization"===t.category?o+=50:"tier3_microhabits"===t.category&&(o+=25),t.effectivenessScore&&(o+=t.effectivenessScore/10),console.log("Habit ".concat(t.title,": score=").concat(o,", category=").concat(t.category,", effectiveness=").concat(t.effectivenessScore)),{habit:t,score:o,matches:r&&i&&s&&a}}).filter(e=>e.score>40).sort((e,t)=>t.score-e.score).slice(0,6).map(e=>e.habit),async createCustomHabit(e){const t=(0,r.A)({id:crypto.randomUUID(),isCustom:!0},e);return await x.habits.add(t),t},async getProgress(e,t){const n="".concat(e,":").concat(t);return await x.progress.get(n)},async createProgress(e,t){const n={id:"".concat(e,":").concat(t),userId:e,habitId:t,dateStarted:(new Date).toISOString(),completions:[],currentStreak:0,longestStreak:0,totalDays:0};return await x.progress.add(n),n},async markHabitComplete(e,t,r){const i=r||(new Date).toISOString().split("T")[0];console.log("markHabitComplete called:",{userId:e,habitId:t,completionDate:i});let s=await this.getProgress(e,t);console.log("Existing progress found:",s),s||(console.log("No progress found, creating new progress entry..."),s=await this.createProgress(e,t),console.log("Progress created:",s));const a=await x.habits.get(t);if(a)if(s.completions.includes(i))console.log("Completion already exists for date:",i);else{console.log("Adding new completion for date:",i);const r=[...s.completions,i].sort(),{currentStreak:o,longestStreak:l}="daily"===a.frequency.type?function(e){if(0===e.length)return{currentStreak:0,longestStreak:0};const t=e.sort();let n=1,r=1,i=1;const s=new Date,a=new Date(s);a.setDate(a.getDate()-1);const o=s.toISOString().split("T")[0],l=a.toISOString().split("T")[0];if(e.includes(o)){let t=s;for(n=0;;){const r=t.toISOString().split("T")[0];if(!e.includes(r))break;n++,t.setDate(t.getDate()-1)}}else if(e.includes(l)){let t=a;for(n=0;;){const r=t.toISOString().split("T")[0];if(!e.includes(r))break;n++,t.setDate(t.getDate()-1)}}else n=0;for(let c=1;c<t.length;c++){const e=new Date(t[c-1]),n=new Date(t[c]),s=Math.abs(n.getTime()-e.getTime());1===Math.ceil(s/864e5)?i++:(r=Math.max(r,i),i=1)}return r=Math.max(r,i),{currentStreak:n,longestStreak:r}}(r):{currentStreak:s.currentStreak,longestStreak:s.longestStreak};console.log("Calculated streaks:",{currentStreak:o,longestStreak:l});const c={completions:r,currentStreak:o,longestStreak:Math.max(l,s.longestStreak),totalDays:r.length,lastCompletionDate:i};if("weekly"===a.frequency.type&&a.frequency.weeklyTarget){const{getWeekStart:r}=await Promise.resolve().then(n.bind(n,81)),s=r(new Date(i));await this.updateWeeklyProgress(e,t,s,!0),c.frequencyAwareStreak={current:await this.calculateFrequencyAwareStreak(e,t),type:"weekly",lastCalculated:(new Date).toISOString()}}"periodic"===a.frequency.type&&(await this.updatePeriodicProgress(e,t,!0),c.frequencyAwareStreak={current:await this.calculateFrequencyAwareStreak(e,t),type:"periodic",lastCalculated:(new Date).toISOString()}),"daily"===a.frequency.type&&(c.frequencyAwareStreak={current:o,type:"daily",lastCalculated:(new Date).toISOString()}),console.log("Updating progress with:",c),await x.progress.update(s.id,c),console.log("Progress updated successfully")}else console.error("Habit not found:",t)},getUserProgress:async e=>await x.progress.where("userId").equals(e).toArray(),async getResearchForHabit(e){const t=await x.habits.get(e);return t?await x.research.where("id").anyOf(t.researchIds).toArray():[]},async getCustomHabits(e){const t=(await x.progress.where("userId").equals(e).toArray()).map(e=>e.habitId);return(await x.habits.where("id").anyOf(t).toArray()).filter(e=>e.isCustom)},async updateHabit(e,t){await x.habits.update(e,t)},async deleteHabit(e){await x.habits.delete(e)},async deleteProgress(e,t){const n="".concat(e,":").concat(t);await x.progress.delete(n)},async updateWeeklyProgress(e,t,n,r){const i=await this.getProgress(e,t);if(!i)return;const s=i.weeklyProgress||[],a=s.findIndex(e=>e.weekStart===n);if(a>=0){if(r){s[a].completedSessions++;const e=(new Date).toISOString().split("T")[0];s[a].completedDates.includes(e)||s[a].completedDates.push(e)}s[a].weeklyGoalMet=s[a].completedSessions>=s[a].targetSessions}else{var o;const e=await x.habits.get(t),i=(null===e||void 0===e||null===(o=e.frequency.weeklyTarget)||void 0===o?void 0:o.sessionsPerWeek)||3;s.push({weekStart:n,completedSessions:r?1:0,targetSessions:i,weeklyGoalMet:!1,completedDates:r?[(new Date).toISOString().split("T")[0]]:[]})}await x.progress.update(i.id,{weeklyProgress:s,lastCompletionDate:r?(new Date).toISOString().split("T")[0]:i.lastCompletionDate})},async updatePeriodicProgress(e,t,n){const r=await this.getProgress(e,t);if(!r)return;const i=await x.habits.get(t);if(null===i||void 0===i||!i.frequency.periodicTarget)return;const{interval:s,intervalCount:a}=i.frequency.periodicTarget,o=new Date,l=o.toISOString().split("T")[0];let c,u;switch(s){case"monthly":c=new Date(o.getFullYear(),o.getMonth()-(a-1),1),u=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"quarterly":const e=3*Math.floor(o.getMonth()/3);c=new Date(o.getFullYear(),e,1),u=new Date(o.getFullYear(),e+3,0);break;case"yearly":c=new Date(o.getFullYear(),0,1),u=new Date(o.getFullYear(),11,31);break;default:c=new Date(o),u=new Date(o)}const d=r.periodicProgress||[],h=("".concat(c.toISOString().split("T")[0],"_").concat(u.toISOString().split("T")[0]),d.findIndex(e=>e.intervalStart===c.toISOString().split("T")[0]&&e.intervalEnd===u.toISOString().split("T")[0])),m={intervalStart:c.toISOString().split("T")[0],intervalEnd:u.toISOString().split("T")[0],completed:n,completedDate:n?l:void 0,daysSinceCompletion:n?0:void 0,intervalType:s};h>=0?d[h]=m:d.push(m),await x.progress.update(r.id,{periodicProgress:d,lastCompletionDate:n?l:r.lastCompletionDate})},async calculateFrequencyAwareStreak(e,t){const n=await this.getProgress(e,t),r=await x.habits.get(t);if(!n||!r)return 0;switch(r.frequency.type){case"daily":default:return n.currentStreak;case"weekly":if(!n.weeklyProgress)return 0;const e=n.weeklyProgress.sort((e,t)=>t.weekStart.localeCompare(e.weekStart)).slice(0,12);let t=0;for(const n of e){if(!n.weeklyGoalMet)break;t++}return t;case"periodic":if(!n.periodicProgress)return 0;const r=n.periodicProgress.sort((e,t)=>t.intervalStart.localeCompare(e.intervalStart)).slice(0,12);let i=0;for(const n of r){if(!n.completed)break;i++}return i}}}},555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{"use strict";e.exports=n(799)},613:(e,t,n)=>{"use strict";n.d(t,{kH:()=>a});var r=n(555),i=n(131),s=n(498);const a=(0,i.v)((e,t)=>({currentUser:null,userHabits:[],userProgress:[],isLoading:!1,error:null,setUser:t=>e({currentUser:t}),updateUser:async n=>{const{currentUser:i}=t();if(i)try{e({isLoading:!0,error:null}),await s.dbHelpers.updateUser(i.id,n);const a=(0,r.A)((0,r.A)({},i),n);e({currentUser:a});(n.goals||n.preferredTime||n.lifestyle||n.dailyMinutes)&&await t().loadUserData(i.id),e({isLoading:!1})}catch(a){console.error("Failed to update user:",a),e({error:a instanceof Error?a.message:"Failed to update user",isLoading:!1})}},loadUserData:async t=>{try{e({isLoading:!0,error:null});const r=await s.dbHelpers.getUser(t);if(!r)throw new Error("User not found");console.log("Loading user data for:",t,r);const i=await s.dbHelpers.getRecommendedHabits(r);console.log("Recommended habits found:",i.length,i);const a=await s.dbHelpers.getCustomHabits(t);console.log("Custom habits found:",a.length,a);const o=await s.dbHelpers.getUserProgress(t);console.log("Progress entries found:",o.length,o);const l=[...i,...a];let c;if(console.log("All habits before filtering:",l.length,l),0===o.length&&i.length>0){console.log("New user detected, showing recommended habits and creating progress entries"),c=i.slice(0,5);for(const e of c)try{await s.dbHelpers.createProgress(t,e.id)}catch(n){console.error("Failed to create progress for habit:",e.id,n)}const a=await s.dbHelpers.getUserProgress(t);return console.log("Progress after creating entries for new user:",a.length,a),void e({currentUser:r,userHabits:c,userProgress:a,isLoading:!1})}if(c=l.filter(e=>o.some(t=>t.habitId===e.id)),console.log("Active habits after filtering:",c.length,c),0===c.length&&o.length>0){console.warn("Found progress entries but no matching habits:",o.map(e=>e.habitId));const t=await s.dbHelpers.getAllHabits();console.log("All habits in database:",t.length,t.map(e=>e.id));const n=t.filter(e=>o.some(t=>t.habitId===e.id));if(console.log("Habits matching progress entries:",n.length,n),n.length>0)return void e({currentUser:r,userHabits:n,userProgress:o,isLoading:!1})}e({currentUser:r,userHabits:c,userProgress:o,isLoading:!1})}catch(n){console.error("Failed to load user data:",n),e({error:n instanceof Error?n.message:"Failed to load user data",isLoading:!1})}},updateUserProgress:async(r,i)=>{const{currentUser:a}=t();if(a)try{e({error:null}),console.log("Marking habit complete:",r,"for user:",a.id,"date:",i),await s.dbHelpers.markHabitComplete(a.id,r,i),console.log("Habit marked complete, refreshing progress..."),await t().refreshProgress();const{userProgress:o}=t();console.log("Progress after refresh:",o),window.dispatchEvent(new CustomEvent("habit-completed",{detail:{habitId:r,userId:a.id,date:i}}));const{useBadgeStore:l}=await Promise.resolve().then(n.bind(n,724));l.getState().checkForNewBadges(a.id,r)}catch(o){console.error("Failed to update progress:",o),e({error:o instanceof Error?o.message:"Failed to update progress"})}},refreshProgress:async()=>{const{currentUser:n}=t();if(n)try{const t=await s.dbHelpers.getUserProgress(n.id);e({userProgress:t})}catch(r){console.error("Failed to refresh progress:",r)}},saveCloudConfig:async n=>{const{currentUser:r}=t();if(r)try{e({isLoading:!0,error:null}),await t().updateUser({cloudConfig:n}),console.log("Cloud configuration saved successfully:",n)}catch(i){console.error("Failed to save cloud config:",i),e({error:i instanceof Error?i.message:"Failed to save cloud configuration",isLoading:!1})}},setError:t=>e({error:t}),toggleHabitCompletion:async(e,n)=>{await t().updateUserProgress(e,n)},clearUser:()=>e({currentUser:null,userHabits:[],userProgress:[],isLoading:!1,error:null})}))},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},724:(e,t,n)=>{"use strict";n.d(t,{useBadgeStore:()=>c});var r=n(555),i=n(131),s=n(893);const a=[{id:"first_week_warrior",name:"First Week Warrior",description:"Complete a habit for 7 days - the crucial foundation period",icon:"\ud83c\udf31",category:"milestone",requirement:{type:"streak",threshold:7,habitSpecific:!0},researchExplanation:"The first week is critical for habit formation. Research shows that early consistency predicts long-term success.",researchCitation:{authors:"Lally, P., et al.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,url:"https://doi.org/10.1002/ejsp.674"},rarity:"common"},{id:"neural_pathway_builder",name:"Neural Pathway Builder",description:"Complete a habit for 21 days - building automatic responses",icon:"\ud83e\udde0",category:"milestone",requirement:{type:"streak",threshold:21,habitSpecific:!0},researchExplanation:"After 21 days, neural pathways begin strengthening. While full automaticity takes longer, this is when habits start feeling easier.",researchCitation:{authors:"Maltz, M.",title:"Psycho-Cybernetics",journal:"Book",year:1960,url:""},rarity:"uncommon"},{id:"habit_scientist",name:"Habit Scientist",description:"Reach the 66-day average - scientifically proven habit formation",icon:"\ud83d\udd2c",category:"milestone",requirement:{type:"streak",threshold:66,habitSpecific:!0},researchExplanation:"Research shows habits take an average of 66 days to become automatic. You've reached the scientifically proven milestone!",researchCitation:{authors:"Lally, P., et al.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,url:"https://doi.org/10.1002/ejsp.674"},rarity:"rare"},{id:"habit_master",name:"Habit Master",description:"Complete a habit for 254 days - the upper range of habit formation",icon:"\ud83d\udc51",category:"milestone",requirement:{type:"streak",threshold:254,habitSpecific:!0},researchExplanation:"Research found habit formation can take up to 254 days for complex behaviors. You've mastered even the most challenging timeline!",researchCitation:{authors:"Lally, P., et al.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,url:"https://doi.org/10.1002/ejsp.674"},rarity:"legendary"},{id:"consistency_champion",name:"Consistency Champion",description:"Maintain 80% weekly consistency for a month",icon:"\u2b50",category:"consistency",requirement:{type:"consistency_rate",threshold:80,timeframe:"month",habitSpecific:!0},researchExplanation:"Consistency matters more than perfection. 80% consistency builds stronger habits than 100% followed by burnout.",researchCitation:{authors:"Clear, J.",title:"Atomic Habits",journal:"Book",year:2018,url:""},rarity:"uncommon"},{id:"steady_progress",name:"Steady Progress",description:"Maintain 60% consistency for 3 months",icon:"\ud83d\udcc8",category:"consistency",requirement:{type:"consistency_rate",threshold:60,timeframe:"all_time",habitSpecific:!0},researchExplanation:"Even 60% consistency leads to significant behavior change over time. Progress beats perfection.",rarity:"common"},{id:"recovery_master",name:"Recovery Master",description:"Successfully restart a habit after missing days",icon:"\ud83d\udd04",category:"recovery",requirement:{type:"recovery_success",threshold:1,habitSpecific:!0},researchExplanation:"Recovery resilience is crucial for long-term success. Restarting after setbacks shows true habit mastery.",researchCitation:{authors:"Duckworth, A.",title:"Grit: The Power of Passion and Perseverance",journal:"Book",year:2016,url:""},rarity:"common"},{id:"comeback_hero",name:"Comeback Hero",description:"Successfully recover from 5 different habit lapses",icon:"\ud83e\uddb8",category:"recovery",requirement:{type:"recovery_success",threshold:5,globalAchievement:!0},researchExplanation:"Multiple successful recoveries demonstrate exceptional resilience and self-compassion - key factors in long-term habit success.",rarity:"rare"},{id:"research_explorer",name:"Research Explorer",description:"Read research explanations for 5 different habits",icon:"\ud83d\udcda",category:"learning",requirement:{type:"research_engagement",threshold:5,globalAchievement:!0},researchExplanation:"Understanding the science behind habits increases success rates by building informed motivation.",researchCitation:{authors:"Michie, S., et al.",title:"The Behavior Change Technique Taxonomy",journal:"Annals of Behavioral Medicine",year:2013,url:""},rarity:"common"},{id:"science_enthusiast",name:"Science Enthusiast",description:"Read research for 15 different habits",icon:"\ud83d\udd2c",category:"learning",requirement:{type:"research_engagement",threshold:15,globalAchievement:!0},researchExplanation:"Deep engagement with habit science correlates with higher success rates and better self-regulation.",rarity:"uncommon"},{id:"habit_architect",name:"Habit Architect",description:"Maintain 3 different habits simultaneously for 2 weeks",icon:"\ud83c\udfd7\ufe0f",category:"milestone",requirement:{type:"total_completions",threshold:42,timeframe:"all_time",globalAchievement:!0},researchExplanation:"Managing multiple habits simultaneously demonstrates advanced self-regulation and habit stacking skills.",researchCitation:{authors:"Fogg, B.J.",title:"Tiny Habits",journal:"Book",year:2019,url:""},rarity:"rare"},{id:"routine_builder",name:"Routine Builder",description:"Complete 100 total habit sessions",icon:"\ud83c\udfc6",category:"milestone",requirement:{type:"total_completions",threshold:100,globalAchievement:!0},researchExplanation:"100 repetitions represents significant neural rewiring and behavioral pattern establishment.",rarity:"uncommon"},{id:"lifestyle_transformer",name:"Lifestyle Transformer",description:"Complete 500 total habit sessions",icon:"\u2728",category:"milestone",requirement:{type:"total_completions",threshold:500,globalAchievement:!0},researchExplanation:"500 repetitions indicates deep behavioral transformation and identity-level change.",researchCitation:{authors:"Clear, J.",title:"Atomic Habits",journal:"Book",year:2018,url:""},rarity:"legendary"},{id:"week_warrior",name:"Week Warrior",description:"Complete any habit for a full week",icon:"\ud83d\uddd3\ufe0f",category:"streak",requirement:{type:"streak",threshold:7,habitSpecific:!0},researchExplanation:"One week of consistency establishes the foundation for long-term habit formation.",rarity:"common"},{id:"month_master",name:"Month Master",description:"Complete any habit for 30 consecutive days",icon:"\ud83d\udcc5",category:"streak",requirement:{type:"streak",threshold:30,habitSpecific:!0},researchExplanation:"30 days of practice creates measurable neural changes and behavioral automaticity.",rarity:"uncommon"},{id:"quarter_champion",name:"Quarter Champion",description:"Complete any habit for 90 consecutive days",icon:"\ud83c\udfc5",category:"streak",requirement:{type:"streak",threshold:90,habitSpecific:!0},researchExplanation:"90 days represents a full quarter of consistent practice, indicating true lifestyle integration.",rarity:"rare"},{id:"year_legend",name:"Year Legend",description:"Complete any habit for 365 consecutive days",icon:"\ud83c\udf1f",category:"streak",requirement:{type:"streak",threshold:365,habitSpecific:!0},researchExplanation:"A full year of daily practice represents complete habit mastery and identity transformation.",rarity:"legendary"}];var o=n(613),l=n(820);const c=(0,i.v)()((0,s.Zr)((e,t)=>({userBadges:[],availableBadges:a,newBadgeQueue:[],checkForNewBadges:(n,r)=>{const{userBadges:i,availableBadges:s}=t(),a=[];for(const e of s){if(i.find(t=>t.badgeId===e.id&&t.userId===n&&(!e.requirement.habitSpecific||t.habitId===r)))continue;if(t().getBadgeProgress(e.id,n,r)>=100){const t={badgeId:e.id,userId:n,habitId:e.requirement.habitSpecific?r:void 0,earnedAt:(new Date).toISOString(),isNew:!0,progress:100};a.push(t),console.log("\ud83c\udfc6 New badge earned: ".concat(e.name," for user ").concat(n).concat(r?" on habit ".concat(r):""))}}return a.length>0&&e(e=>({userBadges:[...e.userBadges,...a],newBadgeQueue:[...e.newBadgeQueue,...a]})),a},getBadgeProgress:(e,n,r)=>{const i=t().availableBadges.find(t=>t.id===e);if(!i)return 0;if(t().userBadges.find(e=>e.badgeId===i.id&&e.userId===n&&(!i.requirement.habitSpecific||e.habitId===r)))return 100;switch(i.requirement.type){case"streak":return r?t().calculateStreakProgress(r,i.requirement.threshold):0;case"consistency_rate":return r?t().calculateConsistencyProgress(r,i.requirement.threshold,i.requirement.timeframe):0;case"total_completions":return Math.min(t().calculateTotalCompletions(n,r,i.requirement.timeframe)/i.requirement.threshold*100,100);case"recovery_success":return t().calculateRecoveryProgress(n,r,i.requirement.threshold);default:return 0}},getBadgeProgressAsync:async(e,n,r)=>{const i=t().availableBadges.find(t=>t.id===e);if(!i)return 0;if(t().userBadges.find(e=>e.badgeId===i.id&&e.userId===n&&(!i.requirement.habitSpecific||e.habitId===r)))return 100;if("research_engagement"===i.requirement.type)try{const e=await t().calculateResearchEngagement(n);return Math.min(e/i.requirement.threshold*100,100)}catch(s){return console.error("Failed to calculate research engagement:",s),0}return t().getBadgeProgress(e,n,r)},checkBadgeProgressAsync:async(e,n,r)=>{const i=t().availableBadges.find(e=>e.id===n);if(!i)return 0;if("research_engagement"===i.requirement.type)try{const n=await t().calculateResearchEngagement(e);return Math.min(n/i.requirement.threshold*100,100)}catch(s){return console.error("Failed to calculate research engagement:",s),0}return t().getBadgeProgress(n,e,r)},calculateStreakProgress:(e,t)=>{const{userProgress:n}=o.kH.getState(),r=n.find(t=>t.habitId===e),i=(null===r||void 0===r?void 0:r.currentStreak)||0;return Math.min(i/t*100,100)},calculateConsistencyProgress:(e,t,n)=>{const{userProgress:r}=o.kH.getState(),i=r.find(t=>t.habitId===e);if(!i)return 0;const s=new Date;let a;switch(n){case"week":a=new Date(s.getTime()-6048e5);break;case"month":a=new Date(s.getTime()-2592e6);break;default:a=new Date(i.dateStarted)}const l=Math.ceil((s.getTime()-a.getTime())/864e5),c=i.completions.filter(e=>new Date(e)>=a).length/l*100;return c>=t?100:c/t*100},calculateRecoveryProgress:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{activeRecoverySessions:r,recentCompassionEvents:i}=l.K.getState();let s=0;if(t){s=r.filter(e=>e.habitId===t&&e.completed).length;s+=i.filter(e=>e.habitId===t&&"accepted_recovery"===e.userResponse).length}else s=r.filter(e=>e.completed).length,s+=i.filter(e=>"accepted_recovery"===e.userResponse).length;return s>=n?100:s/n*100},calculateResearchEngagement:async e=>{const{researchEngagementService:t}=await Promise.resolve().then(n.bind(n,764));return(await t.getEngagementForBadges(e)).uniqueArticlesViewed},calculateTotalCompletions:(e,t,n)=>{const{userProgress:r}=o.kH.getState();let i=0;const s=t?r.filter(e=>e.habitId===t):r;for(const a of s)if("all_time"!==n&&n){const e=new Date;let t;switch(n){case"week":t=new Date(e.getTime()-6048e5);break;case"month":t=new Date(e.getTime()-2592e6);break;default:t=new Date(a.dateStarted)}i+=a.completions.filter(e=>new Date(e)>=t).length}else i+=a.totalDays;return i},getDisplayBadges:(e,n)=>{const{userBadges:r,availableBadges:i}=t();return(n?i.filter(e=>e.requirement.habitSpecific||e.requirement.globalAchievement):i).map(i=>{const s=r.find(t=>t.badgeId===i.id&&t.userId===e&&(!i.requirement.habitSpecific||t.habitId===n)),a=s?100:t().getBadgeProgress(i.id,e,n);return{badge:i,userBadge:s,progress:a,isEarned:!!s,isNew:(null===s||void 0===s?void 0:s.isNew)||!1}})},getEarnedBadges:e=>t().userBadges.filter(t=>t.userId===e),getTotalBadgeCount:e=>({earned:t().userBadges.filter(t=>t.userId===e).length,total:t().availableBadges.length}),markBadgeAsViewed:t=>{e(e=>({userBadges:e.userBadges.map(e=>e.badgeId===t?(0,r.A)((0,r.A)({},e),{},{isNew:!1}):e),newBadgeQueue:e.newBadgeQueue.filter(e=>e.badgeId!==t)}))},clearNewBadgeQueue:()=>{e({newBadgeQueue:[]})}}),{name:"badge-storage",partialize:e=>({userBadges:e.userBadges})}))},764:(e,t,n)=>{"use strict";n.d(t,{researchEngagementService:()=>v});var r=n(555);let i,s;const a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(p(this),n),f(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(e.apply(p(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(p(this),t,...r);return l.set(s,t.sort?t.sort():[t]),f(s)}}function m(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});o.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,d):e);var t}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(f(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=m(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const p=e=>u.get(e);const g=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],x=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!g.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return x.set(t,s),s}d=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>b(t,n)||e.get(t,n,r),has:(t,n)=>!!b(t,n)||e.has(t,n)}))(d);const v=new class{constructor(){this.dbName="sciencehabits-research-engagement",this.version=1,this.db=null,this.currentSessionId=void 0,this.currentSessionId=this.generateSessionId(),this.initialize()}async initialize(){try{this.db=await function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=f(a);return r&&a.addEventListener("upgradeneeded",e=>{r(f(a.result),e.oldVersion,e.newVersion,f(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}(this.dbName,this.version,{upgrade(e){const t=e.createObjectStore("engagement_events",{keyPath:"id"});t.createIndex("by_user","userId"),t.createIndex("by_research","researchId"),t.createIndex("by_timestamp","timestamp"),t.createIndex("by_user_research",["userId","researchId"]),e.createObjectStore("engagement_stats",{keyPath:"userId"})}}),console.log("\u2705 Research engagement service initialized")}catch(e){console.error("Failed to initialize research engagement service:",e)}}async trackEngagement(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.db)try{const i={id:this.generateEventId(),userId:e,researchId:t,habitId:r.habitId,eventType:n,timestamp:(new Date).toISOString(),sessionId:this.currentSessionId,durationMs:r.durationMs,source:r.source||"habit_card"};await this.db.add("engagement_events",i),await this.updateUserStats(e),console.log("\ud83d\udcca Research engagement tracked:",{eventType:n,researchId:t.substring(0,8)+"...",source:r.source})}catch(i){console.error("Failed to track research engagement:",i)}else console.warn("Research engagement service not initialized")}async getUserEngagementStats(e){if(!this.db)return null;try{return await this.db.get("engagement_stats",e)||null}catch(t){return console.error("Failed to get user engagement stats:",t),null}}async updateUserStats(e){if(this.db)try{var t;const n=await this.db.getAllFromIndex("engagement_events","by_user",e);if(0===n.length)return;const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(r.getTime()-6048e5),a=new Date(r.getFullYear(),r.getMonth(),1),o=new Set(n.map(e=>e.researchId)),l=n.reduce((e,t)=>e+(t.durationMs||0),0),c=n.filter(e=>"view"===e.eventType||"open_article"===e.eventType),u=n.filter(e=>new Date(e.timestamp)>=i),d=n.filter(e=>new Date(e.timestamp)>=s),h=n.filter(e=>new Date(e.timestamp)>=a),m=this.calculateEngagementScore(n),f=new Map;n.forEach(e=>{f.set(e.researchId,(f.get(e.researchId)||0)+1)});const p=Array.from(f.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t]=e;return t}),g={userId:e,totalViews:n.length,uniqueArticlesViewed:o.size,totalTimeSpentMs:l,averageViewDurationMs:c.length>0?l/c.length:0,articlesViewedToday:new Set(u.map(e=>e.researchId)).size,articlesViewedThisWeek:new Set(d.map(e=>e.researchId)).size,articlesViewedThisMonth:new Set(h.map(e=>e.researchId)).size,engagementScore:m,lastViewedAt:null===(t=n[n.length-1])||void 0===t?void 0:t.timestamp,favoriteResearchCategories:[],mostViewedResearchIds:p};await this.db.put("engagement_stats",g)}catch(n){console.error("Failed to update user engagement stats:",n)}}calculateEngagementScore(e){const t={view:1,open_article:3,read_summary:2,view_methodology:4,share:5},n=e.reduce((e,n)=>e+(t[n.eventType]||1)+(n.durationMs?Math.min(n.durationMs/1e4,3):0),0);return Math.round(n)}async getEngagementForBadges(e){const t=await this.getUserEngagementStats(e);return t?{uniqueArticlesViewed:t.uniqueArticlesViewed,totalViews:t.totalViews,engagementScore:t.engagementScore,articlesViewedThisWeek:t.articlesViewedThisWeek}:{uniqueArticlesViewed:0,totalViews:0,engagementScore:0,articlesViewedThisWeek:0}}async trackResearchView(e,t,n){await this.trackEngagement(e,t,"view",{habitId:n,source:n?"habit_card":"research_page"})}async trackArticleOpen(e,t,n){await this.trackEngagement(e,t,"open_article",{habitId:n,source:"modal"})}async trackReadingTime(e,t,n){await this.trackEngagement(e,t,"read_summary",{durationMs:n,source:"modal"})}async getEngagementAnalytics(){if(!this.db)return{totalUsers:0,totalViews:0,averageEngagementScore:0,mostViewedArticles:[]};try{const e=await this.db.getAll("engagement_stats"),t=await this.db.getAll("engagement_events"),n=new Map;t.forEach(e=>{n.set(e.researchId,(n.get(e.researchId)||0)+1)});const r=Array.from(n.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t,n]=e;return{researchId:t,views:n}});return{totalUsers:e.length,totalViews:t.length,averageEngagementScore:e.length>0?e.reduce((e,t)=>e+t.engagementScore,0)/e.length:0,mostViewedArticles:r}}catch(e){return console.error("Failed to get engagement analytics:",e),{totalUsers:0,totalViews:0,averageEngagementScore:0,mostViewedArticles:[]}}}generateSessionId(){return"session_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}generateEventId(){return"event_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}}},768:(e,t,n)=>{"use strict";n.d(t,{reminderService:()=>h});var r=n(555),i=n(81);function s(e){const{habit:t,userProgress:n,currentTime:r}=e;switch(t.frequency.type){case"daily":return function(e){const{habit:t,userProgress:n,currentTime:r}=e,i=[],s=r.toDateString(),l=n.some(e=>e.habitId===t.id&&e.completions.includes(s.split(" ")[0]));if(l)return[];const u=function(e){var t;const n=["morning","lunch","evening","flexible"];return(null===(t=e.timeTags)||void 0===t?void 0:t.filter(e=>n.includes(e)))||["flexible"]}(t),d=function(e,t){const n=e.filter(e=>e.habitId===t);if(0===n.length)return{averageCompletionTime:9,consistencyScore:0,recentStreak:0,preferredTimeSlots:["morning"]};const r=n.flatMap(e=>e.completions.slice(-7).map(e=>new Date("".concat(e,"T09:00:00")).getHours())),i=r.reduce((e,t)=>e+t,0)/r.length,s=r.reduce((e,t)=>e+Math.pow(t-i,2),0)/r.length,a=Math.max(0,1-s/144),o=function(e){if(0===e.length)return 0;const t=e[e.length-1];return(null===t||void 0===t?void 0:t.currentStreak)||0}(n),l=function(e){const t={morning:0,lunch:0,evening:0,flexible:0};for(const n of e)n>=5&&n<11?t.morning++:n>=11&&n<14?t.lunch++:n>=17&&n<23?t.evening++:t.flexible++;return Object.entries(t).sort((e,t)=>t[1]-e[1]).map(e=>e[0])}(r);return{averageCompletionTime:i,consistencyScore:a,recentStreak:o,preferredTimeSlots:l}}(n,t.id);for(const m of u){const e=a(m,d,r);e>r&&i.push({type:"daily",priority:o(r,d),timing:e,message:c(t,m),reason:"Daily habit reminder for ".concat(m," time slot"),habitId:t.id})}const h=function(e,t){const n=t.getHours();return n<18?null:{type:"urgent",priority:"high",timing:t,message:"Don't forget your daily ".concat(e.title,"! The day is almost over."),reason:"Urgent end-of-day reminder",habitId:e.id}}(t,r);h&&i.push(h);return i}(e);case"weekly":return function(e){const{habit:t,userProgress:n,currentTime:r}=e,s=[];if(!t.frequency.weeklyTarget)return[];const a=(0,i.getWeekStart)(r),o=n.find(e=>e.habitId===t.id),c=(null===o||void 0===o?void 0:o.weeklyProgress)||[],d=(0,i.getCurrentWeekProgress)(c,r),h=(0,i.isWeeklyGoalMet)(c,t.frequency.weeklyTarget.sessionsPerWeek,r);if(h)return[];const m=t.frequency.weeklyTarget.sessionsPerWeek-((null===d||void 0===d?void 0:d.completedSessions)||0),f=7-Math.floor((r.getTime()-new Date(a).getTime())/864e5),p=function(e,t){const n=e/Math.max(t,1);return n>=2?"critical":n>=1.5?"high":n>=1?"medium":"low"}(m,f),g=t.frequency.weeklyTarget.preferredDays||[],y=function(e,t,n,r){const i=[];if(0===e.length){const e=Math.max(1,Math.floor(n/t));for(let n=0;n<t;n++){const t=new Date(r);t.setDate(t.getDate()+n*e),t.setHours(10,0,0,0),i.push(t)}}else{const n={Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6,Sun:0};for(const s of e){const e=n[s],a=l(r,e);if(a.setHours(10,0,0,0),i.push(a),i.length>=t)break}}return i.filter(e=>e>r)}(g,m,f,r);for(const i of y)s.push({type:"weekly",priority:p,timing:i,message:u(t,m,f),reason:"Weekly goal progress: ".concat((null===d||void 0===d?void 0:d.completedSessions)||0,"/").concat(t.frequency.weeklyTarget.sessionsPerWeek),habitId:t.id});return s}(e);case"periodic":return function(e){const{habit:t,userProgress:n,currentTime:r}=e,i=[];if(!t.frequency.periodicTarget)return[];const s=function(e,t){const n=e.filter(e=>e.habitId===t);if(0===n.length)return null;const r=n.flatMap(e=>e.completions.map(e=>new Date(e)));return 0===r.length?null:new Date(Math.max(...r.map(e=>e.getTime())))}(n,t.id),a=function(e,t){if(!e)return new Date;const n=new Date(e),{interval:r,intervalCount:i}=t;switch(r){case"weekly":n.setDate(n.getDate()+7*i);break;case"monthly":n.setMonth(n.getMonth()+i);break;case"quarterly":n.setMonth(n.getMonth()+3*i);break;case"yearly":n.setFullYear(n.getFullYear()+i)}return n}(s,t.frequency.periodicTarget);if(!a||a<=r)i.push({type:"periodic",priority:a&&a<r?"critical":"high",timing:r,message:d(t,a,!0),reason:a&&a<r?"Overdue periodic habit":"Periodic habit is due",habitId:t.id});else{const e=function(e,t){const n=new Date(e);switch(t){case"weekly":n.setDate(n.getDate()-1);break;case"monthly":n.setDate(n.getDate()-3);break;case"quarterly":n.setDate(n.getDate()-7);break;case"yearly":n.setDate(n.getDate()-14)}return n}(a,t.frequency.periodicTarget.interval);e>r&&e<=new Date(r.getTime()+864e5)&&i.push({type:"periodic",priority:"medium",timing:e,message:d(t,a,!1),reason:"Upcoming ".concat(t.frequency.periodicTarget.interval," habit"),habitId:t.id})}return i}(e);default:return[]}}function a(e,t,n){const r=new Date(n),i=function(e,t){switch(e){case"morning":return 8;case"lunch":return 12;case"evening":return 18;default:return Math.round(t)||9}}(e,t.averageCompletionTime);return r.setHours(i,0,0,0),r<=n&&r.setDate(r.getDate()+1),t.consistencyScore<.5&&r.setMinutes(r.getMinutes()-30),r}function o(e,t){const n=e.getHours();return n>=20?"critical":n>=15?"high":n>=10?"medium":"low"}function l(e,t){const n=new Date(e),r=(t+7-e.getDay())%7;return n.setDate(n.getDate()+(r||7)),n}function c(e,t){return"Time for your ".concat({morning:"morning",lunch:"midday",evening:"evening",flexible:"today"}[t]||"today"," ").concat(e.title,"! (").concat(e.timeMinutes," min)")}function u(e,t,n){return 1===t?"One more ".concat(e.title," session to complete your weekly goal!"):"".concat(t," ").concat(e.title," sessions remaining this week (").concat(n," days left)")}function d(e,t,n){if(n)return"Your ".concat(e.title," is overdue! Time to get back on track.");if(t){const n=Math.ceil((t.getTime()-Date.now())/864e5);return"".concat(e.title," is due in ").concat(n," day").concat(1!==n?"s":"")}return"Time for your periodic ".concat(e.title,"!")}const h=new class{constructor(){this.scheduledReminders=new Map,this.notificationQueue=[],this.isEnabled=!1,this.permission={granted:!1,denied:!1,prompt:!1,supported:!1},this.checkNotificationSupport(),this.updatePermissionState()}async initialize(){try{if(!this.permission.supported)return console.warn("Browser notifications not supported"),!1;return await this.requestNotificationPermission()?(this.isEnabled=!0,console.log("Reminder service initialized successfully"),!0):(console.warn("Notification permission not granted"),!1)}catch(e){return console.error("Failed to initialize reminder service:",e),!1}}checkNotificationSupport(){this.permission.supported="Notification"in window&&"undefined"!==typeof window.Notification}updatePermissionState(){if(!this.permission.supported)return;const e=Notification.permission;this.permission=(0,r.A)((0,r.A)({},this.permission),{},{granted:"granted"===e,denied:"denied"===e,prompt:"default"===e})}async requestNotificationPermission(){if(!this.permission.supported)return!1;if(this.permission.granted)return!0;if(this.permission.denied)return!1;try{const e=await Notification.requestPermission();return this.updatePermissionState(),"granted"===e}catch(e){return console.error("Error requesting notification permission:",e),!1}}getPermissionState(){return this.updatePermissionState(),(0,r.A)({},this.permission)}async scheduleReminders(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(!this.isEnabled)return void console.warn("Reminder service not enabled");this.clearAllReminders();const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const r=[];for(const i of e){const e=s({habit:i,userProgress:t.filter(e=>e.habitId===i.id),currentTime:n});r.push(...e)}return r.sort((e,t)=>{const n={critical:4,high:3,medium:2,low:1},r=n[t.priority]-n[e.priority];return 0!==r?r:e.timing.getTime()-t.timing.getTime()})}(e,t,n);console.log("Scheduling ".concat(r.length," reminders"));for(const i of r)await this.scheduleReminder(i)}async scheduleReminder(e){const t=this.generateReminderId(e),n=Date.now(),r=e.timing.getTime()-n;if(r<=0)return void console.warn("Skipping past reminder for habit ".concat(e.habitId));const i=setTimeout(()=>{this.showNotification(e)},r),s={id:t,recommendation:e,timeoutId:i,scheduled:!0};this.scheduledReminders.set(t,s),console.log("Scheduled ".concat(e.type," reminder for habit ").concat(e.habitId," at ").concat(e.timing))}showNotification(e){if(this.permission.granted)try{const t=new Notification(e.message,{icon:this.getNotificationIcon(e.type),body:e.reason,tag:e.habitId,requireInteraction:"critical"===e.priority,silent:"low"===e.priority}),n=this.getAutoCloseDelay(e.priority);n>0&&setTimeout(()=>{t.close()},n),t.onclick=()=>{window.focus(),this.handleNotificationClick(e),t.close()},console.log("Notification shown: ".concat(e.message))}catch(t){console.error("Error showing notification:",t)}}getNotificationIcon(e){return{daily:"/icons/daily-reminder.png",weekly:"/icons/weekly-reminder.png",periodic:"/icons/periodic-reminder.png",urgent:"/icons/urgent-reminder.png",gentle:"/icons/gentle-reminder.png"}[e]||"/icons/default-reminder.png"}getAutoCloseDelay(e){return{low:5e3,medium:8e3,high:12e3,critical:0}[e]||8e3}handleNotificationClick(e){const t={habitId:e.habitId,type:e.type,timestamp:Date.now()};sessionStorage.setItem("reminder_click",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("reminder-clicked",{detail:t}))}generateReminderId(e){return"".concat(e.habitId,"-").concat(e.type,"-").concat(e.timing.getTime())}clearAllReminders(){for(const[e,t]of this.scheduledReminders)t.timeoutId&&clearTimeout(t.timeoutId);this.scheduledReminders.clear(),console.log("All reminders cleared")}clearReminder(e){const t=this.scheduledReminders.get(e);return!!t&&(t.timeoutId&&clearTimeout(t.timeoutId),this.scheduledReminders.delete(e),console.log("Reminder ".concat(e," cleared")),!0)}getScheduledReminders(){return Array.from(this.scheduledReminders.values())}setEnabled(e){!e||this.permission.granted?(this.isEnabled=e,e||this.clearAllReminders(),console.log("Reminder service ".concat(e?"enabled":"disabled"))):console.warn("Cannot enable reminders without notification permission")}isReady(){return this.isEnabled&&this.permission.granted&&this.permission.supported}async showTestNotification(){if(!this.isReady())return!1;try{const e={type:"daily",priority:"medium",timing:new Date,message:"Test notification from ScienceHabits",reason:"This is a test notification to verify the system is working",habitId:"test"};return this.showNotification(e),!0}catch(e){return console.error("Error showing test notification:",e),!1}}getStats(){const e=Array.from(this.scheduledReminders.values()),t={totalScheduled:e.length,byType:{},byPriority:{},nextReminder:null};let n=1/0;for(const r of e){t.byType[r.recommendation.type]=(t.byType[r.recommendation.type]||0)+1,t.byPriority[r.recommendation.priority]=(t.byPriority[r.recommendation.priority]||0)+1;const e=r.recommendation.timing.getTime();e<n&&(n=e,t.nextReminder=r.recommendation.timing)}return t}async refreshReminders(e,t){this.isEnabled&&(console.log("Refreshing reminders based on updated progress"),await this.scheduleReminders(e,t))}}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},809:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,s=Object.keys,a=Array.isArray;function o(e,t){return"object"!=typeof t||s(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(t).forEach(function(n){m(e,n,t[n])})}var h=Object.defineProperty;function m(e,t,n,r){h(e,t,o(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),m(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor,g=[].slice;function y(e,t,n){return g.call(e,t,n)}function x(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function v(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function D(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var s=D(e,t[r]);n.push(s)}return n}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return null==o?void 0:D(o,t.substr(a+1))}}function w(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)w(e,t[r],n[r])}else{var s,o,l=t.indexOf(".");-1!==l?(s=t.substr(0,l),""===(o=t.substr(l+1))?void 0===n?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:w(l=(l=e[s])&&u(e,s)?l:e[s]={},o,n)):void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function C(e){var t,n={};for(t in e)u(e,t)&&(n[t]=e[t]);return n}var j=[].concat;function k(e){return j.apply([],e)}var F="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),N=new Set(F.map(function(e){return i[e]})),E=null;function A(e){return E=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=E.get(t);if(n)return n;if(a(t)){n=[],E.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(N.has(t.constructor))n=t;else{var s,o=l(t);for(s in n=o===Object.prototype?{}:Object.create(o),E.set(t,n),t)u(t,s)&&(n[s]=e(t[s]))}return n}(e),E=null,e}var S={}.toString;function _(e){return S.call(e).slice(8,-1)}var B="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof B?function(e){var t;return null!=e&&(t=e[B])&&t.apply(e)}:function(){return null};function I(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var P={};function M(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===P&&"string"==typeof e)return[e];if(i=T(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var R="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),O={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function z(e,t){this.name=e,this.message=t}function H(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function q(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=H(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=H(e,this.failures)}f(z).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(q).from(z),f(U).from(z);var V=L.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=z,K=L.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=O[t]||n,this.inner=null)}return f(r).from(W),e[t]=r,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var G=le.reduce(function(e,t){return e[t+"Error"]=K[t],e},{}),Y=L.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function Q(){}function $(e){return e}function J(e,t){return null==e||e===$?t:function(n){return t(e(n))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),i&&(this.onerror=this.onerror?X(i,this.onerror):i),void 0!==s?s:n}}function ee(e,t){return e===Q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),r&&(this.onerror=this.onerror?X(r,this.onerror):r)}}function te(e,t){return e===Q?t:function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?X(i,this.onsuccess):i),s&&(this.onerror=this.onerror?X(s,this.onerror):s),void 0===r?void 0===n?void 0:n:o(r,n)}}function ne(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Y.ModifyError=q,Y.DexieError=z,Y.BulkError=U;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(e){ie=e}var ae={},oe=100,le=(F="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),F[0]),ce=(L=F[1],F=F[2],L=L&&L.then,le&&le.constructor),ue=!!F,de=function(e,t){be.push([e,t]),me&&(queueMicrotask(Ae),me=!1)},he=!0,me=!0,fe=[],pe=[],ge=$,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Q,pgp:!1,env:{},finalize:Q},xe=ye,be=[],ve=0,De=[];function we(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=xe;if("function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&ke(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Se();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof we?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Fe(t)),r&&_e()}},ke.bind(null,t))}catch(n){ke(t,n)}}(this,e)}var Ce={get:function(){var e=xe,t=Oe;function n(n,r){var i=this,s=!e.global&&(e!==xe||t!==Oe),a=s&&!Ue(),o=new we(function(t,o){Ne(i,new je(Qe(n,e,s,a),Qe(r,e,s,a),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return n.prototype=ae,n},set:function(e){m(this,"then",e&&e.prototype===ae?Ce:{get:function(){return e},set:Ce.set})}};function je(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function ke(e,t){var n,r;pe.push(t),null===e._state&&(n=e._lib&&Se(),t=ge(t),e._state=!1,e._value=t,r=e,fe.some(function(e){return e._value===r._value})||fe.push(r),Fe(e),n&&_e())}function Fe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ne(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ve&&(++ve,de(function(){0==--ve&&Be()},[]))}function Ne(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ve,de(Ee,[n,e,t])}else e._listeners.push(t)}function Ee(e,t,n){try{var r,i=t._value;!t._state&&pe.length&&(pe=[]),r=ie&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==pe.indexOf(i)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--ve&&Be(),--n.psd.ref||n.psd.finalize()}}function Ae(){Ye(ye,function(){Se()&&_e()})}function Se(){var e=he;return me=he=!1,e}function _e(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);me=he=!0}function Be(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=De.slice(0),n=t.length;n;)t[--n]()}function Te(e){return new we(ae,!1,e)}function Ie(e,t){var n=xe;return function(){var r=Se(),i=xe;try{return Ke(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{Ke(i,!1),r&&_e()}}}d(we.prototype,{then:Ce,_then:function(e,t){Ne(this,new je(null,null,e,t,xe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Te)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Te)(e)})},finally:function(e){return this.then(function(t){return we.resolve(e()).then(function(){return t})},function(t){return we.resolve(e()).then(function(){return Te(t)})})},timeout:function(e,t){var n=this;return e<1/0?new we(function(r,i){var s=setTimeout(function(){return i(new K.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&m(we.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Ge(),d(we,{all:function(){var e=M.apply(null,arguments).map(Ve);return new we(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,s){return we.resolve(i).then(function(n){e[s]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof we?e:e&&"function"==typeof e.then?new we(function(t,n){e.then(t,n)}):new we(ae,!0,e)},reject:Te,race:function(){var e=M.apply(null,arguments).map(Ve);return new we(function(t,n){e.map(function(e){return we.resolve(e).then(t,n)})})},PSD:{get:function(){return xe},set:function(e){return xe=e}},totalEchoes:{get:function(){return Oe}},newPSD:He,usePSD:Ye,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new we(function(n,r){return He(function(t,n){var r=xe;r.unhandleds=[],r.onunhandled=n,r.finalize=X(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},De.push(function t(){e(),De.splice(De.indexOf(t),1)}),++ve,de(function(){0==--ve&&Be()},[])},r.finalize),e()},t,n,r)})}}),ce&&(ce.allSettled&&m(we,"allSettled",function(){var e=M.apply(null,arguments).map(Ve);return new we(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,i){return we.resolve(e).then(function(e){return r[i]={status:"fulfilled",value:e}},function(e){return r[i]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ce.any&&"undefined"!=typeof AggregateError&&m(we,"any",function(){var e=M.apply(null,arguments).map(Ve);return new we(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(e,s){return we.resolve(e).then(function(e){return t(e)},function(e){i[s]=e,--r||n(new AggregateError(i))})})})}),ce.withResolvers&&(we.withResolvers=ce.withResolvers));var Pe={awaits:0,echoes:0,id:0},Me=0,Re=[],Le=0,Oe=0,ze=0;function He(e,t,n,r){var i=xe,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++ze,ye.env,s.env=ue?{Promise:we,PromiseProp:{value:we,configurable:!0,writable:!0},all:we.all,race:we.race,allSettled:we.allSettled,any:we.any,resolve:we.resolve,reject:we.reject}:{},t&&o(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ye(s,e,n,r),0===s.ref&&s.finalize(),r}function qe(){return Pe.id||(Pe.id=++Me),++Pe.awaits,Pe.echoes+=oe,Pe.id}function Ue(){return!!Pe.awaits&&(0==--Pe.awaits&&(Pe.id=0),Pe.echoes=Pe.awaits*oe,!0)}function Ve(e){return Pe.echoes&&e&&e.constructor===ce?(qe(),e.then(function(e){return Ue(),e},function(e){return Ue(),Je(e)})):e}function We(){var e=Re[Re.length-1];Re.pop(),Ke(e,!1)}function Ke(e,t){var n,r=xe;(t?!Pe.echoes||Le++&&e===xe:!Le||--Le&&e===xe)||queueMicrotask(t?function(e){++Oe,Pe.echoes&&0!=--Pe.echoes||(Pe.echoes=Pe.awaits=Pe.id=0),Re.push(xe),Ke(e,!0)}.bind(null,e):We),e!==xe&&(xe=e,r===ye&&(ye.env=Ge()),ue&&(n=ye.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ge(){var e=i.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ye(e,t,n,r,i){var s=xe;try{return Ke(e,!0),t(n,r,i)}finally{Ke(s,!1)}}function Qe(e,t,n,r){return"function"!=typeof e?e:function(){var i=xe;n&&qe(),Ke(t,!0);try{return e.apply(this,arguments)}finally{Ke(i,!1),r&&queueMicrotask(Ue)}}}function $e(e){Promise===ce&&0===Pe.echoes?0===Le?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+L).indexOf("[native code]")&&(qe=Ue=Q);var Je=we.reject,Xe=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function st(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=A(t))[e],t}}function lt(){throw K.Type()}function ct(e,t){try{var n=ut(e),r=ut(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s){var a=ct(e[s],t[s]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=_(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ht=(mt.prototype._trans=function(e,t,n){var r=this._tx||xe.trans,i=this.name,s=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,n,r){if(!r.schema[i])throw new K.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=Se();try{var l=r&&r.db._novip===this.db._novip?r===xe.trans?r._promise(e,a,n):He(function(){return r._promise(e,a,n)},{trans:r,transless:xe.transless||xe}):function t(n,r,i,s){if(n.idbdb&&(n._state.openComplete||xe.letThrough||n._vip)){var a=n._createTransaction(r,i,n._dbSchema);try{a.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===V.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return t(n,r,i,s)})):Je(e)}return a._promise(r,function(e,t){return He(function(){return xe.trans=a,s(e,t,a)})}).then(function(e){if("readwrite"===r)try{a.idbtrans.commit()}catch(e){}return"readonly"===r?e:a._completion.then(function(){return e})})}if(n._state.openComplete)return Je(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Je(new K.DatabaseClosed);n.open().catch(Q)}return n._state.dbReadyPromise.then(function(){return t(n,r,i,s)})}(this.db,e,[this.name],a);return s&&(l._consoleTask=s,l=l.catch(function(e){return console.trace(e),Je(e)})),l}finally{o&&_e()}},mt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Je(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},mt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Xe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function o(e,t){return 0===ct(e,t)}var l=t.reduce(function(t,n){var r=t[0],s=t[1],l=(t=i[n],e[n]);return[r||t,r||!t?st(s,t&&t.multi?function(e){return e=D(e,n),a(e)&&e.some(function(e){return o(l,e)})}:function(e){return o(l,D(e,n))}):s]},[null,null]);return r=l[0],l=l[1],r?this.where(r.name).equals(e[r.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},mt.prototype.filter=function(e){return this.toCollection().and(e)},mt.prototype.count=function(e){return this.toCollection().count(e)},mt.prototype.offset=function(e){return this.toCollection().offset(e)},mt.prototype.limit=function(e){return this.toCollection().limit(e)},mt.prototype.each=function(e){return this.toCollection().each(e)},mt.prototype.toArray=function(e){return this.toCollection().toArray(e)},mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},mt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},mt.prototype.reverse=function(){return this.toCollection().reverse()},mt.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function s(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(s,n=t),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return i},t=s);for(var a=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(e){return a.add(e)});function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!a.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},mt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},mt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,a=e;return s&&i&&(a=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{w(e,s,t)}catch(t){}return t})},mt.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=D(e,this.schema.primKey.keyPath))?Je(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},mt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,a=e;return s&&i&&(a=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{w(e,s,t)}catch(t){}return t})},mt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):void 0})},mt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:at})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):void 0})},mt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},mt.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new U("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)})})},mt.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new U("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)})})},mt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then(function(o){var l=[],c=[];e.forEach(function(e,n){var r=e.key,i=e.changes,a=o[n];if(a){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],m=i[h];if(h===t.schema.primKey.keyPath){if(0!==ct(m,r))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else w(a,h,m)}s.push(n),l.push(r),c.push(a)}});var u=l.length;return n.mutate({trans:a,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:i}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var i=0,a=Object.keys(r);i<a.length;i++){var o,l=a[i],c=s[Number(l)];null!=c&&(o=r[l],delete r[l],r[c]=o)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},mt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new U("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},mt);function mt(){}function ft(e){function t(t,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return n[t].subscribe.apply(null,s),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return t;function o(e,r,i){if("object"!=typeof e){var l;r=r||ne;var c={subscribers:[],fire:i=i||Q,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(r,i)}};return n[e]=t[e]=c}s(l=e).forEach(function(e){var t=l[e];if(a(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new K.InvalidArgument("Invalid event config");var n=o(e,$,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){v(function(){e.apply(null,t)})})})}})}}function pt(e,t){return f(t).from({prototype:e}),t}function gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function yt(e,t){e.filter=st(e.filter,t)}function xt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return st(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function vt(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Dt(e,t,n,r){var i=e.replayFilter?st(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},a=function(e,n,r){var a,o;i&&!i(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"===(o=""+(a=n.primaryKey))&&(o=""+new Uint8Array(a)),u(s,o)||(s[o]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(a,n),wt(vt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return wt(vt(e,r,n),st(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function wt(e,t,n,r){var i=Ie(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=Q},function(t){e.fail(t),n=Q})||i(e.value,e,function(e){return n=e}),n()})})}var Ct=(jt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(a(n))return r(r([],a(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var i=t.remove;if(a(i))return a(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},jt);function jt(e){this["@@propmod"]=e}var kt=(Ft.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Je.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Ft.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Je.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ft.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=st(t.algorithm,e)},Ft.prototype._iterate=function(e,t){return Dt(this._ctx,e,t,this._ctx.table.core)},Ft.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},Ft.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ft.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Dt(t,e,n,t.table.core)})},Ft.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(gt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var i=0;return Dt(n,function(){return++i,!1},e,r).then(function(){return i})}).then(e)},Ft.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function o(e,t){return ct(s(e,i),s(t,i))*a}return this.toArray(function(e){return e.sort(o)}).then(t)},Ft.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&gt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var s=[];return Dt(n,function(e){return s.push(e)},e,n.table.core).then(function(){return s})},e)},Ft.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,gt(t)?xt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):xt(t,function(){var t=e;return function(){return--t<0}})),this},Ft.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},Ft.prototype.until=function(e,t){return yt(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},Ft.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Ft.prototype.last=function(e){return this.reverse().first(e)},Ft.prototype.filter=function(e){var t;return yt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=st(t.isMatch,e),this},Ft.prototype.and=function(e){return this.filter(e)},Ft.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ft.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ft.prototype.desc=function(){return this.reverse()},Ft.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},Ft.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ft.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},Ft.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},Ft.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&gt(t,!0)&&0<t.limit)return this._read(function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},Ft.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ft.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Ft.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ft.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return yt(this._ctx,function(e){var n=e.primaryKey.toString();return e=u(t,n),t[n]=!0,!e}),this},Ft.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,o;o="function"==typeof e?e:(i=s(e),a=i.length,function(t){for(var n=!1,r=0;r<a;++r){var s=i[r],o=e[s],l=D(t,s);o instanceof Ct?(w(t,s,o.execute(l)),n=!0):l!==o&&(w(t,s,o),n=!0)}return n});var l,c=n.table.core,u=(l=c.schema.primaryKey).outbound,d=l.extractKey,h=200;function m(e,t){var n=t.failures;t=t.numFailures,p+=e-t;for(var r=0,i=s(n);r<i.length;r++){var a=i[r];f.push(n[a])}}(l=t.db._options.modifyChunkSize)&&(h="object"==typeof l?l[c.name]||l["*"]||200:l);var f=[],p=0,g=[];return t.clone().primaryKeys().then(function(t){function i(n){var a=Math.min(h,t.length-n);return c.getMany({trans:r,keys:t.slice(n,n+a),cache:"immutable"}).then(function(l){for(var f=[],p=[],g=u?[]:null,y=[],x=0;x<a;++x){var b=l[x],v={value:A(b),primKey:t[n+x]};!1!==o.call(v,v.value,v)&&(null==v.value?y.push(t[n+x]):u||0===ct(d(b),d(v.value))?(p.push(v.value),u&&g.push(t[n+x])):(y.push(t[n+x]),f.push(v.value)))}return Promise.resolve(0<f.length&&c.mutate({trans:r,type:"add",values:f}).then(function(e){for(var t in e.failures)y.splice(parseInt(t),1);m(f.length,e)})).then(function(){return(0<p.length||s&&"object"==typeof e)&&c.mutate({trans:r,type:"put",keys:g,values:p,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<n}).then(function(e){return m(p.length,e)})}).then(function(){return(0<y.length||s&&e===Nt)&&c.mutate({trans:r,type:"delete",keys:y,criteria:s,isAdditionalChunk:0<n}).then(function(e){return m(y.length,e)})}).then(function(){return t.length>n+a&&i(n+h)})})}var s=gt(n)&&n.limit===1/0&&("function"!=typeof e||e===Nt)&&{index:n.index,range:n.range};return i(0).then(function(){if(0<f.length)throw new q("Error modifying one or more objects",f,p,g);return t.length})})})},Ft.prototype.delete=function(){var e=this._ctx,t=e.range;return gt(e)&&(e.isPrimKey||3===t.type)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new q("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})}):this.modify(Nt)},Ft);function Ft(){}var Nt=function(e,t){return t.value=null};function Et(e,t){return e<t?-1:e===t?0:1}function At(e,t){return t<e?-1:e===t?0:1}function St(e,t,n){return(e=e instanceof Pt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function _t(e){return new e.Collection(e,function(){return It("")}).limit(0)}function Bt(e,t,n,r){var i,s,a,o,l,c,u,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return St(e,et);function h(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?Et:At;var t=n.map(function(e){return{lower:s(e),upper:i(e)}}).sort(function(e,t){return a(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u="next"===(c=e)?"":r}h("next"),(e=new e.Collection(e,function(){return Tt(o[0],l[d-1]+r)}))._ondirectionchange=function(e){h(e)};var m=0;return e._addAlgorithm(function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=s(i);if(t(h,l,m))return!0;for(var f=null,p=m;p<d;++p){var g=function(e,t,n,r,i,s){for(var a=Math.min(e.length,r.length),o=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=o?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[l],c)<0&&(o=l)}return a<r.length&&"next"===s?e+n.substr(e.length):a<e.length&&"prev"===s?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}(i,h,o[p],l[p],a,c);null===g&&null===f?m=p+1:(null===f||0<a(f,g))&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1}),e}function Tt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function It(e){return{type:1,lower:e,upper:e}}var Pt=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?_t(this):new this.Collection(this,function(){return Tt(e,t,!n,!r)})}catch(e){return St(this,Ze)}},Mt.prototype.equals=function(e){return null==e?St(this,Ze):new this.Collection(this,function(){return It(e)})},Mt.prototype.above=function(e){return null==e?St(this,Ze):new this.Collection(this,function(){return Tt(e,void 0,!0)})},Mt.prototype.aboveOrEqual=function(e){return null==e?St(this,Ze):new this.Collection(this,function(){return Tt(e,void 0,!1)})},Mt.prototype.below=function(e){return null==e?St(this,Ze):new this.Collection(this,function(){return Tt(void 0,e,!1,!0)})},Mt.prototype.belowOrEqual=function(e){return null==e?St(this,Ze):new this.Collection(this,function(){return Tt(void 0,e)})},Mt.prototype.startsWith=function(e){return"string"!=typeof e?St(this,et):this.between(e,e+Xe,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Bt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Xe)},Mt.prototype.equalsIgnoreCase=function(e){return Bt(this,function(e,t){return e===t[0]},[e],"")},Mt.prototype.anyOfIgnoreCase=function(){var e=M.apply(P,arguments);return 0===e.length?_t(this):Bt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var e=M.apply(P,arguments);return 0===e.length?_t(this):Bt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Xe)},Mt.prototype.anyOf=function(){var e=this,t=M.apply(P,arguments),n=this._cmp;try{t.sort(n)}catch(r){return St(this,Ze)}if(0===t.length)return _t(this);var r=new this.Collection(this,function(){return Tt(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(e,r,s){for(var a=e.key;0<n(a,t[i]);)if(++i===t.length)return r(s),!1;return 0===n(a,t[i])||(r(function(){e.continue(t[i])}),!1)}),r},Mt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var e=M.apply(P,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return St(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(0===e.length)return _t(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return St(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=i;function h(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var n=0,i=e.length;n<i;++n){var s=e[n];if(r(t[0],s[1])<0&&0<r(t[1],s[0])){s[0]=a(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return n===i&&e.push(t),e},[])).sort(h)}catch(e){return St(this,Ze)}var m=0,f=u?function(e){return 0<i(e,l[m][1])}:function(e){return 0<=i(e,l[m][1])},p=c?function(e){return 0<s(e,l[m][0])}:function(e){return 0<=s(e,l[m][0])},g=f;return(e=new this.Collection(this,function(){return Tt(l[0][0],l[l.length-1][1],!c,!u)}))._ondirectionchange=function(e){d="next"===e?(g=f,i):(g=p,s),l.sort(h)},e._addAlgorithm(function(e,t,r){for(var s,a=e.key;g(a);)if(++m===l.length)return t(r),!1;return!f(s=a)&&!p(s)||(0===n._cmp(a,l[m][1])||0===n._cmp(a,l[m][0])||t(function(){d===i?e.continue(l[m][0]):e.continue(l[m][1])}),!1)}),e},Mt.prototype.startsWithAnyOf=function(){var e=M.apply(P,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?_t(this):this.inAnyRange(e.map(function(e){return[e,e+Xe]})):St(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function Rt(e){return Ie(function(t){return Lt(t),e(t.target.error),!1})}function Lt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ot="storagemutated",zt="x-storagemutated-1",Ht=ft(null,Ot),qt=(Ut.prototype._lock=function(){return b(!xe.global),++this._reculock,1!==this._reculock||xe.global||(xe.lockOwnerFor=this),this},Ut.prototype._unlock=function(){if(b(!xe.global),0==--this._reculock)for(xe.global||(xe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ye(e[1],e[0])}catch(e){}}return this},Ut.prototype._locked=function(){return this._reculock&&xe.lockOwnerFor!==this},Ut.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new K.DatabaseClosed(r);case"MissingAPIError":throw new K.MissingAPI(r.message,r);default:throw new K.OpenFailed(r)}if(!this.active)throw new K.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(n){Lt(n),t._reject(e.error)}),e.onabort=Ie(function(n){Lt(n),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Ie(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ht.storagemutated.fire(e.mutatedParts)}),this},Ut.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Je(new K.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new K.TransactionInactive);if(this._locked())return new we(function(i,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,s)},xe])});if(n)return He(function(){var e=new we(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new we(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},Ut.prototype._root=function(){return this.parent?this.parent._root():this},Ut.prototype.waitFor=function(e){var t,n=this._root(),r=we.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new we(function(e,t){r.then(function(t){return n._waitingQueue.push(Ie(e.bind(null,t)))},function(e){return n._waitingQueue.push(Ie(t.bind(null,e)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Ut.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},Ut.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new K.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Ut);function Ut(){}function Vt(e,t,n,r,i,s,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Wt(t)}}function Wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Kt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e},{}))};var r}var Gt=function(e){try{return e.only([[]]),Gt=function(){return[[]]},[[]]}catch(e){return Gt=function(){return Xe},Xe}};function Yt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return D(e,t)}:function(t){return D(t,e)};var t}function Qt(e){return[].slice.call(e)}var $t=0;function Jt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Xt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,s=e.keys,a=e.values,o=e.range;return new Promise(function(e,l){e=Ie(e);var c=t.objectStore(n),u=null==c.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,m=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===m)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function f(e){++y,Lt(e)}var p=[],g=[],y=0;if("deleteRange"===i){if(4===o.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===o.type?p.push(h=c.clear()):p.push(h=c.delete(r(o)))}else{var x=(u=d?u?[a,s]:[a,null]:[s,null])[0],b=u[1];if(d)for(var v=0;v<m;++v)p.push(h=b&&void 0!==b[v]?c[i](x[v],b[v]):c[i](x[v])),h.onerror=f;else for(v=0;v<m;++v)p.push(h=c[i](x[v])),h.onerror=f}function D(t){t=t.target.result,p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===i?s:p.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){f(e),D(e)},h.onsuccess=D})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,i){e=Ie(e);for(var s,a=t.objectStore(n),o=r.length,l=new Array(o),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},h=Rt(i),m=0;m<o;++m)null!=r[m]&&((s=a.get(r[m]))._pos=m,s.onsuccess=d,s.onerror=h,++c);0===c&&e(l)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,i){e=Ie(e);var s=t.objectStore(n).get(r);s.onsuccess=function(t){return e(t.target.result)},s.onerror=Rt(i)})},query:(t=u,function(e){return new Promise(function(i,s){i=Ie(i);var a,o,l,c=e.trans,u=e.values,d=e.limit,h=e.query,m=d===1/0?void 0:d,f=h.index;if(h=h.range,c=c.objectStore(n),f=f.isPrimaryKey?c:c.index(f.name),h=r(h),0===d)return i({result:[]});t?((m=u?f.getAll(h,m):f.getAllKeys(h,m)).onsuccess=function(e){return i({result:e.target.result})},m.onerror=Rt(s)):(a=0,o=!u&&"openKeyCursor"in f?f.openKeyCursor(h):f.openCursor(h),l=[],o.onsuccess=function(e){var t=o.result;return t?(l.push(u?t.value:t.primaryKey),++a===d?i({result:l}):void t.continue()):i({result:l})},o.onerror=Rt(s))})}),openCursor:function(e){var t=e.trans,i=e.values,s=e.query,a=e.reverse,o=e.unique;return new Promise(function(e,l){e=Ie(e);var c=s.index,u=s.range,d=t.objectStore(n),h=(d=c.isPrimaryKey?d:d.index(c.name),c=a?o?"prevunique":"prev":o?"nextunique":"next",!i&&"openKeyCursor"in d?d.openKeyCursor(r(u),c):d.openCursor(r(u),c));h.onerror=Rt(l),h.onsuccess=Ie(function(n){var r,i,s,a,o=h.result;o?(o.___id=++$t,o.done=!1,r=o.continue.bind(o),i=(i=o.continuePrimaryKey)&&i.bind(o),s=o.advance.bind(o),a=function(){throw new Error("Cursor not stopped")},o.trans=t,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw new Error("Cursor not started")},o.fail=Ie(l),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(h.result)try{e()}catch(e){o.fail(e)}else o.done=!0,o.start=function(){throw new Error("Cursor behind last entry")},o.stop()}var n=new Promise(function(e,t){e=Ie(e),h.onerror=Rt(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=a,e(t)}});return h.onsuccess=Ie(function(e){h.onsuccess=t,t()}),o.continue=r,o.continuePrimaryKey=i,o.advance=s,t(),n},e(o)):e(null)},l)})},count:function(e){var t=e.query,i=e.trans,s=t.index,a=t.range;return new Promise(function(e,t){var o=i.objectStore(n),l=s.isPrimaryKey?o:o.index(s.name);(l=(o=r(a))?l.count(o):l.count()).onsuccess=Ie(function(t){return e(t.target.result)}),l.onerror=Rt(t)})}}}var s,o,l,c=(o=n,l=Qt((s=e).objectStoreNames),{schema:{name:s.name,tables:l.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Yt(t)},indexes:Qt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:a(e),keyPath:e,unique:n,multiEntry:r,extractKey:Yt(e)},i[Jt(e)]=r}),getIndexByKeyPath:function(e){return i[Jt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Jt(t)]=n.primaryKey),n})},hasGetAll:0<l.length&&"getAll"in o.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),u=(n=c.schema,c.hasGetAll),d=(c=n.tables.map(i),{});return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Gt(t),schema:n}}function Zt(e,n,r,i){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Xt(n,s,i),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},i))}}function en(e,t){var n=t.db;t=Zt(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function tn(e,t,n,r){n.forEach(function(n){var i=r[n];t.forEach(function(t){var r=function e(t,n){return p(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?m(t,n,{get:function(){return this.table(n)},set:function(e){h(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))})})}function nn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function rn(e,t){return e._cfg.version-t._cfg.version}function sn(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Kt("$meta",mn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),l=xe.transless||xe;He(function(){return xe.trans=a,xe.transless=l,0!==t?(en(e,n),c=t,((r=a).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:c}):we.resolve(c)).then(function(t){return i=t,o=a,l=n,c=[],t=(r=e)._versions,u=r._dbSchema=dn(0,r.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=i})).length?(t.forEach(function(e){c.push(function(){var t=u,n=e._cfg.dbschema;hn(r,t,l),hn(r,n,l),u=r._dbSchema=n;var a=on(t,n);a.add.forEach(function(e){ln(l,e[0],e[1].primKey,e[1].indexes)}),a.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return un(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),un(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){en(r,l),o._memoizedTables={};var d=C(n);a.del.forEach(function(e){d[e]=t[e]}),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],s(d),d),o.schema=d;var h,m=R(c);return m&&qe(),a=we.follow(function(){var e;(h=c(o))&&m&&(e=Ue.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?we.resolve(h):a.then(function(){return h})}}),c.push(function(t){var n,i,s=e._cfg.dbschema;n=s,i=t,[].slice.call(i.db.objectStoreNames).forEach(function(e){return null==n[e]&&i.db.deleteObjectStore(e)}),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),o.schema=r._dbSchema}),c.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?we.resolve(c.shift()(o.idbtrans)).then(e):we.resolve()}().then(function(){cn(u,l)})):we.resolve();var r,i,o,l,c,u}).catch(o)):(s(i).forEach(function(e){ln(n,e,i[e].primKey,i[e].indexes)}),en(e,n),void we.follow(function(){return e.on.populate.fire(a)}).catch(o));var r,c})}function an(e,t){cn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=dn(0,e.idbdb,t);hn(e,e._dbSchema,t);for(var r=0,i=on(n,e._dbSchema).change;r<i.length;r++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),un(n,t)})}(i[r]);if("object"==typeof s)return s.value}}function on(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var a={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)a.recreate=!0,r.change.push(a);else{var o=i.idxByName,l=s.idxByName,c=void 0;for(c in o)l[c]||a.del.push(c);for(c in l){var u=o[c],d=l[c];u?u.src!==d.src&&a.change.push(d):a.add.push(d)}(0<a.del.length||0<a.add.length||0<a.change.length)&&r.change.push(a)}}else r.add.push([n,s])}return r}function ln(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return un(i,e)}),i}function cn(e,t){s(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),ln(t,n,e[n].primKey,e[n].indexes))})}function un(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function dn(e,t,n){var r={};return y(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),i=Vt(Wt(o=t.keyPath),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),s=[],a=0;a<t.indexNames.length;++a){var o=(l=t.index(t.indexNames[a])).keyPath,l=Vt(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&"string"!=typeof o,!1);s.push(l)}r[e]=Kt(e,i,s)}),r}function hn(e,t,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var a=r[s],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var c=o.indexNames[l],u=o.index(c).keyPath,d="string"==typeof u?u:"["+y(u).join("+")+"]";!t[a]||(u=t[a].idxByName[d])&&(u.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function mn(e){return e.split(",").map(function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Vt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})}var fn=(pn.prototype._parseStoresSpec=function(e,t){s(e).forEach(function(n){if(null!==e[n]){var r=mn(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new K.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),t[n]=Kt(n,i,r)}})},pn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){o(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,nn(t,[t._allTables,t,t.Transaction.prototype]),tn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(r),r),t._storeNames=s(r),this},pn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||Q,e),this},pn);function pn(){}function gn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new tr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function yn(e){return e&&"function"==typeof e.databases}function xn(e){return He(function(){return xe.letThrough=!0,e()})}function bn(e){return!("from"in e)}var vn=function(e,t){if(!this){var n=new vn;return e&&"d"in e&&o(n,e),n}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Dn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return o(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ct(n,e.from)<0)return i?Dn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},kn(e);if(0<ct(t,e.to))return r?Dn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},kn(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&wn(e,i),r&&n&&wn(e,r)}}function wn(e,t){bn(t)||function e(t,n){var r=n.from,i=n.to,s=n.l;n=n.r,Dn(t,r,i),s&&e(t,s),n&&e(t,n)}(e,t)}function Cn(e,t){var n=jn(t),r=n.next();if(r.done)return!1;for(var i=r.value,s=jn(e),a=s.next(i.from),o=a.value;!r.done&&!a.done;){if(ct(o.from,i.to)<=0&&0<=ct(o.to,i.from))return!0;ct(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function jn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function kn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),s=1<i?"r":i<-1?"l":"";s&&(n="r"==s?"l":"r",r=t({},e),i=e[s],e.from=i.from,e.to=i.to,e[s]=i[s],r[s]=i[n],(e[n]=r).d=Fn(r)),e.d=Fn(e)}function Fn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Nn(e,t){return s(t).forEach(function(n){e[n]?wn(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)u(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||N.has(r.constructor)?r:e(r));return i}(t[n])}),e}function En(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Cn(t[n],e[n])})}d(vn.prototype,((L={add:function(e){return wn(this,e),this},addKey:function(e){return Dn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return Dn(t,e,e)}),this},hasKey:function(e){var t=jn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[B]=function(){return jn(this)},L));var An={},Sn={},_n=!1;function Bn(e){Nn(Sn,e),_n||(_n=!0,setTimeout(function(){_n=!1,Tn(Sn,!(Sn={}))},0))}function Tn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(An);r<i.length;r++)In(a=i[r],e,n,t);else for(var s in e){var a,o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);o&&(s=o[1],o=o[2],(a=An["idb://".concat(s,"/").concat(o)])&&In(a,e,n,t))}n.forEach(function(e){return e()})}function In(e,t,n,r){for(var i=[],s=0,a=Object.entries(e.queries.query);s<a.length;s++){for(var o=a[s],l=o[0],c=[],u=0,d=o[1];u<d.length;u++){var h=d[u];En(t,h.obsSet)?h.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(h)}r&&i.push([l,c])}if(r)for(var m=0,f=i;m<f.length;m++){var p=f[m];l=p[0],c=p[1],e.queries.query[l]=c}}function Pn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Je(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function o(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}function l(){return new we(function(r,c){if(o(),!n)throw new K.MissingAPI;var u=e.name,m=t.autoSchema||!i?n.open(u):n.open(u,i);if(!m)throw new K.MissingAPI;m.onerror=Rt(c),m.onblocked=Ie(e._fireOnBlocked),m.onupgradeneeded=Ie(function(r){var i;d=m.transaction,t.autoSchema&&!e._options.allowEmptyDB?(m.onerror=Lt,d.abort(),m.result.close(),(i=n.deleteDatabase(u)).onsuccess=i.onerror=Ie(function(){c(new K.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Rt(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,h=r<1,e.idbdb=m.result,a&&an(e,d),sn(e,r/10,d,c))},c),m.onsuccess=Ie(function(){d=null;var n,o,c,f,p,g=e.idbdb=m.result,x=y(g.objectStoreNames);if(0<x.length)try{var b=g.transaction(1===(f=x).length?f[0]:f,"readonly");if(t.autoSchema)o=g,c=b,(n=e).verno=o.version/10,c=n._dbSchema=dn(0,o,c),n._storeNames=y(o.objectStoreNames,0),tn(n,[n._allTables],s(c),c);else if(hn(e,e._dbSchema,b),((p=on(dn(0,(p=e).idbdb,b),p._dbSchema)).add.length||p.change.some(function(e){return e.add.length||e.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,a=!0,r(l());en(e,b)}catch(n){}tt.push(e),g.onversionchange=Ie(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),g.onclose=Ie(function(t){e.on("close").fire(t)}),h&&(p=e._deps,b=u,g=p.indexedDB,p=p.IDBKeyRange,yn(g)||b===nt||gn(g,p).put({name:b}).catch(Q)),r()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return we.reject(e)})}var c,u=t.dbReadyResolve,d=null,h=!1;return we.race([r,("undefined"==typeof navigator?we.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(l)]).then(function(){return o(),t.onReadyBeingFired=[],we.resolve(xn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,Q);return t.onReadyBeingFired=[],we.resolve(xn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{d&&d.abort()}catch(n){}return r===t.openCanceller&&e._close(),Je(n)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new vn(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new vn(-1/0,[[[]]])}),Ht(Ot).fire(t),Tn(t,!0)),e})}function Mn(e){function t(t){return e.next(t)}var n=i(t),r=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):a(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Rn(e,t,n){for(var r=a(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Ln={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,s={},a=[];function o(e,n,r){var i=Jt(e),l=s[i]=s[i]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:c,extractKey:Yt(e),unique:!u&&r.unique}),l.push(u),u.isPrimaryKey||a.push(u),1<c&&o(2===c?e[0]:e.slice(0,c-1),n+1,r),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}n=o(i.primaryKey.keyPath,0,i.primaryKey),s[":id"]=[n];for(var l=0,c=i.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function d(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Rn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Rn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:a,getIndexByKeyPath:function(e){return(e=s[Jt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,s=n.isVirtual,a=n.keyLength;return s?r.openCursor(d(t)).then(function(e){return e&&o(e)}):r.openCursor(t);function o(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Rn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Rn(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}}})}})}};function On(e,t,n,r){return n=n||{},r=r||"",s(e).forEach(function(i){var s,a,o;u(t,i)?(s=e[i],a=t[i],"object"==typeof s&&"object"==typeof a&&s&&a?(o=_(s))!==_(a)?n[r+i]=t[i]:"Object"===o?On(s,a,n,r+i+"."):s!==a&&(n[r+i]=t[i]):s!==a&&(n[r+i]=t[i])):n[r+i]=void 0}),s(t).forEach(function(i){u(e,i)||(n[r+i]=t[i])}),n}function zn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Hn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=xe.trans,o=a.table(n).hook,l=o.deleting,c=o.creating,d=o.updating;switch(e.type){case"add":if(c.fire===Q)break;return a._promise("readwrite",function(){return h(e)},!0);case"put":if(c.fire===Q&&d.fire===Q)break;return a._promise("readwrite",function(){return h(e)},!0);case"delete":if(l.fire===Q)break;return a._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(l.fire===Q)break;return a._promise("readwrite",function(){return function e(n,r,a){return i.query({trans:n,values:!1,query:{index:s,range:r},limit:a}).then(function(i){var s=i.result;return h({type:"delete",keys:s,trans:n}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):s.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:s[s.length-1],lowerOpen:!0}),a)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function h(e){var n,a,o,h=xe.trans,m=e.keys||zn(s,e);if(!m)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:m}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,o=m,("add"===(a=e).type?Promise.resolve([]):n.getMany({trans:a.trans,keys:o,cache:"immutable"})).then(function(t){var n=m.map(function(n,r){var i,a,o,m=t[r],f={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(f,n,m,h):"add"===e.type||void 0===m?(i=c.fire.call(f,n,e.values[r],h),null==n&&null!=i&&(e.keys[r]=n=i,s.outbound||w(e.values[r],s.keyPath,n))):(i=On(m,e.values[r]),(a=d.fire.call(f,i,n,m,h))&&(o=e.values[r],Object.keys(a).forEach(function(e){u(o,e)?o[e]=a[e]:w(o,e,a[e])}))),f});return i.mutate(e).then(function(r){for(var i=r.failures,s=r.results,a=r.numFailures,o=(r=r.lastResult,0);o<m.length;++o){var l=(s||m)[o],c=n[o];null==l?c.onerror&&c.onerror(i[o]):c.onsuccess&&c.onsuccess("put"===e.type&&t[o]?e.values[o]:l)}return{failures:i,results:s,numFailures:a,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function qn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)0===ct(t.keys[i],e[s])&&(r.push(n?A(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch(e){return null}}var Un={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=qn(e.keys,e.trans._cache,"clone"===e.cache);return t?we.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?A(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Vn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Wn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new vn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(xe.subscr&&"readonly"!==n)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(xe.querier));return e.transaction(t,n,r)},table:function(i){var o=e.table(i),l=o.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,m=c.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),f=t(t({},o),{mutate:function(t){function s(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),p[e]||(p[e]=new vn)}var u,d,h,f=t.trans,p=t.mutatedParts||(t.mutatedParts={}),g=s(""),y=s(":dels"),x=t.type,b="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[zn(c,t).filter(function(e){return e}),t.values]:[],v=b[0],D=b[1];return b=t.trans._cache,a(v)?(g.addKeys(v),(b="delete"===x||v.length===D.length?qn(v,b):null)||y.addKeys(v),(b||D)&&(u=s,d=b,h=D,l.indexes.forEach(function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&a(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||h).forEach(function(e,t){var i=d&&n(d[t]);0!==ct(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))})}))):v?(D={from:null!==(D=v.lower)&&void 0!==D?D:e.MIN_KEY,to:null!==(D=v.upper)&&void 0!==D?D:e.MAX_KEY},y.add(D),g.add(D)):(g.add(r),y.add(r),l.indexes.forEach(function(e){return s(e.name).add(r)})),o.mutate(t).then(function(e){return!v||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),m&&m.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),i=n.keyPath.findIndex(function(e){return e===c.keyPath}),a=0,o=e.results.length;a<o;++a)r[a][i]=e.results[a];s(n.name).addKeys(r)})),f.mutatedParts=Nn(f.mutatedParts||{},p),e})}}),p=(u=function(t){t=(n=t.query).index;var n=n.range;return[t,new vn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[c,new vn(e.key)]},getMany:function(e){return[c,(new vn).addKeys(e.keys)]},count:u,query:u,openCursor:u});return s(p).forEach(function(e){f[e]=function(s){var a=!!(f=xe.subscr),l=Vn(xe,o)&&Wn(e,s)?s.obsSet={}:f;if(a){var c=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new vn)},u=c(""),m=c(":dels"),f=(a=(f=p[e](s))[0],f[1]);if(("query"===e&&a.isPrimaryKey&&!s.values?m:c(a.name||"")).add(f),!a.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&s.values&&o.query(t(t({},s),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&s.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var n=s.values?t.result.map(d):t.result;(s.values?u:m).addKeys(n)}else if("openCursor"===e){var r=t,i=s.values;return r&&Object.create(r,{key:{get:function(){return m.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return m.addKey(e),e}},value:{get:function(){return i&&u.addKey(r.primaryKey),r.value}}})}return t})}m.add(r)}}return o[e].apply(this,arguments)}}),f}})}};function Gn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),a(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&a(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function Yn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function Qn(e,t,n,r,i,s){if(!n||0===n.length)return e;var o=t.query.index,l=o.multiEntry,c=t.query.range,u=r.schema.primaryKey.extractKey,d=o.extractKey,h=(o.lowLevelIndex||o).extractKey;return n=n.reduce(function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var s=new vn,o=n.values.length-1;0<=o;--o){var h,m=n.values[o],f=u(m);s.hasKey(f)||(h=d(m),(l&&a(h)?h.some(function(e){return Yn(e,c)}):Yn(h,c))&&(s.addKey(f),i.push(m)))}switch(n.type){case"add":var p=(new vn).addKeys(t.values?e.map(function(e){return u(e)}):e);r=e.concat(t.values?i.filter(function(e){return e=u(e),!p.hasKey(e)&&(p.addKey(e),!0)}):i.map(function(e){return u(e)}).filter(function(e){return!p.hasKey(e)&&(p.addKey(e),!0)}));break;case"put":var g=(new vn).addKeys(n.values.map(function(e){return u(e)}));r=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?i:i.map(function(e){return u(e)}));break;case"delete":var y=(new vn).addKeys(n.keys);r=e.filter(function(e){return!y.hasKey(t.values?u(e):e)});break;case"deleteRange":var x=n.range;r=e.filter(function(e){return!Yn(u(e),x)})}return r},e),n===e?e:(n.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),s?Object.freeze(n):n)}function $n(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Jn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout(function(){0===r.subscribers.size&&I(i,r)},3e3))})}var Zn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var s,a,o=e.transaction(t,r,i);return"readwrite"===r&&(a=(s=new AbortController).signal,i=function(i){return function(){if(s.abort(),"readwrite"===r){for(var a=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=An["idb://".concat(n,"/").concat(u)];if(d){var h=e.table(u),m=d.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var f=0,p=Object.values(d.queries.query);f<p.length;f++)for(var g=0,y=(v=p[f]).slice();g<y.length;g++)En((D=y[g]).obsSet,o.mutatedParts)&&(I(v,D),D.subscribers.forEach(function(e){return a.add(e)}));else if(0<m.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==o});for(var x=0,b=Object.values(d.queries.query);x<b.length;x++)for(var v,D,w,C=0,j=(v=b[x]).slice();C<j.length;C++)null!=(D=j[C]).res&&o.mutatedParts&&(i&&!D.dirty?(w=Object.isFrozen(D.res),w=Qn(D.res,D.req,m,h,D,w),D.dirty?(I(v,D),D.subscribers.forEach(function(e){return a.add(e)})):w!==D.res&&(D.res=w,D.promise=we.resolve({result:w}))):(D.dirty&&I(v,D),D.subscribers.forEach(function(e){return a.add(e)})))}}}a.forEach(function(e){return e()})}}},o.addEventListener("abort",i(!1),{signal:a}),o.addEventListener("error",i(!1),{signal:a}),o.addEventListener("complete",i(!0),{signal:a})),o},table:function(r){var i=e.table(r),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=xe.trans;if(s.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return i.mutate(e);var o=An["idb://".concat(n,"/").concat(r)];return o?(a=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||zn(s,e).some(function(e){return null==e}))?(o.optimisticOps.push(e),e.mutatedParts&&Bn(e.mutatedParts),a.then(function(t){0<t.numFailures&&(I(o.optimisticOps,e),(t=Gn(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&Bn(e.mutatedParts))}),a.catch(function(){I(o.optimisticOps,e),e.mutatedParts&&Bn(e.mutatedParts)})):a.then(function(n){var r=Gn(0,t(t({},e),{values:e.values.map(function(e,r){var i;return n.failures[r]||w(e=null!==(i=s.keyPath)&&void 0!==i&&i.includes(".")?A(e):t({},e),s.keyPath,n.results[r]),e})}),n);o.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&Bn(e.mutatedParts)})}),a):i.mutate(e)},query:function(e){if(!Vn(xe,i)||!Wn("query",e))return i.query(e);var t="immutable"===(null===(o=xe.trans)||void 0===o?void 0:o.db._options.cache),s=(c=xe).requery,a=c.signal,o=function(e,t,n,r){var i=An["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var s=t[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(n){case"query":var a=s.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&$n(e.req.query.range,r.query.range)});return a?[a,!0,i,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Jn(e.req.query.range,r.query.range)}),!1,i,s];case"count":return a=s.find(function(e){return $n(e.req.query.range,r.query.range)}),[a,!!a,i,s]}}(n,r,"query",e),l=o[0],c=o[1],u=o[2],d=o[3];return l&&c?l.obsSet=e.obsSet:(c=i.query(e).then(function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=A(n);return e}).catch(function(e){return d&&l&&I(d,l),Promise.reject(e)}),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(An["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Xn(l,d,s,a),l.promise.then(function(n){return{result:Qn(n.result,e,null==u?void 0:u.optimisticOps,i,l,t)}})}})}})}};function er(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var tr=(nr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},nr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?e():new we(function(e,n){if(t._state.openComplete)return n(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new K.DatabaseClosed);t.open().catch(Q)}t._state.dbReadyPromise.then(e,n)}).then(e)},nr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort(function(e,t){return e.level-t.level}),this},nr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},nr.prototype.open=function(){var e=this;return Ye(ye,function(){return Pn(e)})},nr.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new we(function(t){e.dbReadyResolve=t}),e.openCanceller=new we(function(t,n){e.cancelOpen=n}))},nr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new we(function(i,s){function a(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ie(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,yn(r)||n===nt||gn(r,e).delete(n).catch(Q),i()}),n.onerror=Rt(s),n.onblocked=t._fireOnBlocked}if(n)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return null!==this.idbdb},nr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,k(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},nr.prototype._transaction=function(e,t,n){var r=this,i=xe.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,a,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)s=rt;else{if("rw"!=e&&e!=it)throw new K.InvalidArgument("Invalid transaction mode: "+e);s=it}if(i){if(i.mode===rt&&s===it){if(!o)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,function(e,t){t(n)}):Je(n)}var l=function e(t,n,r,i,s){return we.resolve().then(function(){var a=xe.transless||xe,o=t._createTransaction(n,r,t._dbSchema,i);if(o.explicit=!0,a={trans:o,transless:a},i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===V.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,s)})):Je(a)}var l,c=R(s);return c&&qe(),a=we.follow(function(){var e;(l=s.call(o,o))&&(c?(e=Ue.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Mn(l)))},a),(l&&"function"==typeof l.then?we.resolve(l).then(function(e){return o.active?e:Je(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):a.then(function(){return l})).then(function(e){return i&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),Je(e)})})}.bind(null,this,s,a,i,n);return i?i._promise(s,l,"lock"):xe.trans?Ye(xe.transless,function(){return r._whenReady(l)}):this._whenReady(l)},nr.prototype.table=function(e){if(!u(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nr);function nr(e,n){var r=this;this._middlewares={},this.verno=0;var i=nr.dependencies;this._options=n=t({addons:nr.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,a,o,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new we(function(e){u.dbReadyResolve=e}),u.openCanceller=new we(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=ft(this,"populate","blocked","versionchange","close",{ready:[re,Q]}),this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(t,n){nr.vip(function(){var i,s=r._state;s.openComplete?(s.dbOpenError||we.resolve().then(t),n&&e(t)):s.onReadyBeingFired?(s.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e(function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,pt(kt.prototype,function(e,t){this.db=s;var n=at,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==$?e:null}})),this.Table=(a=this,pt(ht.prototype,function(e,t,n){this.db=a,this._tx=n,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:ft(null,{creating:[Z,Q],reading:[J,$],updating:[te,Q],deleting:[ee,Q]})})),this.Transaction=(o=this,pt(qt.prototype,function(e,t,n,r,i){var s=this;this.db=o,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=ft(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new we(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Je(e)})})),this.Version=(l=this,pt(fn.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,pt(Pt.prototype,function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Gt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Un),this.use(Zn),this.use(Kn),this.use(Ln),this.use(Hn);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return er(r.table(e),d)};var i=Reflect.get(e,t,n);return i instanceof ht?er(i,d):"tables"===t?i.map(function(e){return er(e,d)}):"_createTransaction"===t?function(){return er(i.apply(this,arguments),d)}:i}});this.vip=d,i.forEach(function(e){return e(r)})}L="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rr,ir=(sr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},sr.prototype[L]=function(){return this},sr);function sr(e){this._subscribe=e}try{rr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(F){rr={indexedDB:null,IDBKeyRange:null}}function ar(e){var t,n=!1,r=new ir(function(r){var i,s=R(e),a=!1,o={},l={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,i&&i.abort(),d&&Ht.storagemutated.unsubscribe(m))}};r.start&&r.start(c);var d=!1,h=function(){return $e(f)},m=function(e){Nn(o,e),En(l,o)&&h()},f=function(){var c,f,p;!a&&rr.indexedDB&&(o={},c={},i&&i.abort(),i=new AbortController,p=function(t){var n=Se();try{s&&qe();var r=He(e,t);return r=s?r.finally(Ue):r}finally{n&&_e()}}(f={subscr:c,signal:i.signal,requery:h,querier:e,trans:null}),Promise.resolve(p).then(function(e){n=!0,t=e,a||f.signal.aborted||(o={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||(Ht(Ot,m),d=!0),$e(function(){return!a&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||$e(function(){a||r.error&&r.error(e)})}))};return setTimeout(h,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var or=tr;function lr(e){var t=ur;try{ur=!0,Ht.storagemutated.fire(e),Tn(e,!0)}finally{ur=t}}d(or,t(t({},Y),{delete:function(e){return new or(e,{addons:[]}).delete()},exists:function(e){return new or(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=or.dependencies).indexedDB,t=t.IDBKeyRange,(yn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==nt})}):gn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Je(new K.MissingAPI)}var t,n},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return xe.trans?Ye(xe.transless,e):e()},vip:xn,async:function(e){return function(){try{var t=Mn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:we.resolve(t)}catch(t){return Je(t)}}},spawn:function(e,t,n){try{var r=Mn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:we.resolve(r)}catch(e){return Je(e)}},currentTransaction:{get:function(){return xe.trans||null}},waitFor:function(e,t){return t=we.resolve("function"==typeof e?or.ignoreTransaction(e):e).timeout(t||6e4),xe.trans?xe.trans.waitFor(t):t},Promise:we,debug:{get:function(){return ie},set:function(e){se(e)}},derive:f,extend:o,props:d,override:x,Events:ft,on:Ht,liveQuery:ar,extendObservabilitySet:Nn,getByKeyPath:D,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,function(t){w(e,t,void 0)})},shallowClone:C,deepClone:A,getObjectDiff:On,cmp:ct,asap:v,minKey:-1/0,addons:[],connections:tt,errnames:V,dependencies:rr,cache:An,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),or.maxKey=Gt(or.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ht(Ot,function(e){ur||(e=new CustomEvent(zt,{detail:e}),ur=!0,dispatchEvent(e),ur=!1)}),addEventListener(zt,function(e){e=e.detail,ur||lr(e)}));var cr,ur=!1,dr=function(){};return"undefined"!=typeof BroadcastChannel&&((dr=function(){(cr=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&lr(e.data)}})(),"function"==typeof cr.unref&&cr.unref(),Ht(Ot,function(e){ur||cr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!tr.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=cr&&cr.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!tr.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),dr(),lr({all:new vn(-1/0,[[]])}))})),we.rejectionMapper=function(e,t){return!e||e instanceof z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!G[e.name]?e:(t=new G[e.name](t||e.message,e),"stack"in e&&m(t,"stack",{get:function(){return this.inner.stack}}),t)},se(ie),t(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:ar,Entity:lt,cmp:ct,PropModification:Ct,replacePrefix:function(e,t){return new Ct({replacePrefix:[e,t]})},add:function(e){return new Ct({add:e})},remove:function(e){return new Ct({remove:e})},default:tr,RangeSet:vn,mergeRanges:wn,rangesOverlap:Cn}),{default:tr}),tr}()},820:(e,t,n)=>{"use strict";n.d(t,{K:()=>u});var r=n(555),i=n(131),s=n(893);const a=[{id:"habit_formation_timeline",category:"habit_formation",title:"Habits take 66 days on average to form",explanation:"Research tracking 96 people found habit formation ranges from 18-254 days, with an average of 66 days. Missing occasional days had minimal impact on the overall trajectory. The key is consistency over perfection.",statistic:"66 days average (18-254 range)",citation:{authors:"Lally, P., Van Jaarsveld, C. H., Potts, H. W., & Wardle, J.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,url:"https://doi.org/10.1002/ejsp.674",doi:"10.1002/ejsp.674"},contextTriggers:["first_miss","discouragement","perfectionism"],credibilityScore:9},{id:"missing_days_normal",category:"recovery",title:"Missing days doesn't break habit formation",explanation:"Studies show that missing a single day, or even several days, doesn't significantly impact long-term habit formation as long as you return to the behavior. The brain's automatic response patterns remain largely intact.",statistic:"Missing 1-2 days: minimal impact on habit strength",citation:{authors:"Lally, P., Van Jaarsveld, C. H., Potts, H. W., & Wardle, J.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,doi:"10.1002/ejsp.674"},contextTriggers:["consecutive_misses","guilt","fear_of_failure"],credibilityScore:9},{id:"self_compassion_performance",category:"psychology",title:"Self-compassion improves performance and persistence",explanation:"Research demonstrates that self-compassionate individuals show greater motivation, less anxiety, and better performance after setbacks. Self-criticism, conversely, leads to decreased motivation and increased likelihood of giving up.",statistic:"26% increase in motivation with self-compassion",citation:{authors:"Breines, J. G., & Chen, S.",title:"Self-compassion increases self-improvement motivation",journal:"Personality and Social Psychology Bulletin",year:2012,doi:"10.1177/0146167212445599"},contextTriggers:["self_criticism","shame","guilt","perfectionism"],credibilityScore:8},{id:"neuroplasticity_recovery",category:"neuroscience",title:"The brain quickly re-establishes habit pathways",explanation:"Neuroplasticity research shows that habit-related neural pathways remain largely intact even after brief interruptions. The brain can rapidly re-strengthen these connections, making habit recovery faster than initial formation.",statistic:"40% faster re-establishment of neural pathways",citation:{authors:"Graybiel, A. M.",title:"The basal ganglia and chunking of action repertoires",journal:"Neurobiology of Learning and Memory",year:1998,doi:"10.1006/nlme.1998.3843"},contextTriggers:["fear_of_starting_over","long_break","motivation_loss"],credibilityScore:9},{id:"implementation_intentions",category:"psychology",title:"If-then planning doubles success rates",explanation:'Implementation intentions ("If situation X arises, then I will perform behavior Y") significantly increase the likelihood of habit maintenance and recovery. This strategy helps navigate obstacles and missed days.',statistic:"2x higher success rate with if-then planning",citation:{authors:"Gollwitzer, P. M., & Sheeran, P.",title:"Implementation intentions and goal achievement: A meta-analysis",journal:"Advances in Experimental Social Psychology",year:2006,doi:"10.1016/S0065-2601(06)38002-1"},contextTriggers:["planning_help","obstacle_navigation","recovery_strategy"],credibilityScore:9},{id:"minimal_viable_habits",category:"habit_formation",title:"Tiny habits create sustainable change",explanation:"Stanford research shows that making habits ridiculously small (2 minutes or less) removes barriers and creates positive momentum. Success with micro-habits builds confidence and naturally scales up over time.",statistic:"80% adherence with 2-minute habits vs 20% with large habits",citation:{authors:"Fogg, B. J.",title:"Tiny Habits: The Small Changes That Change Everything",journal:"Behavior Design Lab, Stanford University",year:2019},contextTriggers:["overwhelm","time_constraints","motivation_low","recovery"],credibilityScore:8},{id:"progress_over_perfection",category:"motivation",title:"Progress beats perfection for long-term success",explanation:"Studies on goal achievement show that individuals who focus on progress rather than perfection maintain motivation longer, recover from setbacks faster, and ultimately achieve better outcomes.",statistic:"35% higher goal achievement with progress focus",citation:{authors:"Fishbach, A., & Dhar, R.",title:"Goals as excuses or guides: The liberating effect of perceived goal progress on choice",journal:"Journal of Consumer Research",year:2005,doi:"10.1086/432234"},contextTriggers:["perfectionism","all_or_nothing_thinking","discouragement"],credibilityScore:8},{id:"social_support_impact",category:"psychology",title:"Social support increases habit success by 95%",explanation:"Research shows that having an accountability partner or support system dramatically increases the likelihood of habit maintenance and successful recovery from lapses.",statistic:"95% success rate with accountability partner",citation:{authors:"Dominican University Study",title:"Goals Research Summary",journal:"Dominican University of California",year:2015},contextTriggers:["isolation","accountability","community_support"],credibilityScore:7},{id:"cognitive_load_theory",category:"neuroscience",title:"Cognitive overload prevents habit formation",explanation:"When mental resources are depleted (stress, fatigue, overwhelm), the prefrontal cortex struggles to maintain new behaviors. Reducing cognitive load through simplification dramatically improves success rates.",statistic:"60% improvement with reduced cognitive load",citation:{authors:"Baumeister, R. F., & Tierney, J.",title:"Willpower: Rediscovering the Greatest Human Strength",journal:"Penguin Press",year:2011},contextTriggers:["stress","overwhelm","multiple_habits","complexity"],credibilityScore:8},{id:"positive_emotion_habits",category:"psychology",title:"Positive emotions strengthen habit pathways",explanation:"Neuroscience research reveals that positive emotions during habit performance strengthen neural pathways and increase automaticity. Celebrating small wins literally rewires the brain for success.",statistic:"3x stronger neural pathways with positive emotion",citation:{authors:"Fredrickson, B. L.",title:"The role of positive emotions in positive psychology",journal:"American Psychologist",year:2001,doi:"10.1037/0003-066X.56.3.218"},contextTriggers:["celebration","motivation","mood_boost","success_building"],credibilityScore:9}],o=[{id:"first_miss_gentle",triggerCondition:"first_miss",message:"Missing one day is completely normal and part of the habit-building process. Research shows this has minimal impact on your overall progress.",researchExplanation:"Studies tracking habit formation found that missing occasional days doesn't significantly affect the development of automatic behaviors. Your brain is still building the neural pathways that make habits stick.",researchCitation:{authors:"Lally, P., et al.",title:"How are habits formed: Modelling habit formation in the real world",journal:"European Journal of Social Psychology",year:2010,doi:"10.1002/ejsp.674"},recoveryOptions:["Continue tomorrow as planned","Try a 2-minute version today","Adjust the timing for better fit","Get back to it right now"],emotionalTone:"supportive",severity:"gentle"},{id:"second_consecutive_understanding",triggerCondition:"second_consecutive",message:"Two days off happens to everyone building habits. This is your opportunity to practice self-compassion, which research shows actually improves performance.",researchExplanation:"Self-compassion research demonstrates that people who treat themselves kindly after setbacks show 26% greater motivation and better performance than those who self-criticize.",researchCitation:{authors:"Breines, J. G., & Chen, S.",title:"Self-compassion increases self-improvement motivation",journal:"Personality and Social Psychology Bulletin",year:2012},recoveryOptions:["Start with just 2 minutes today","Change the time when you do this habit","Identify what got in the way and plan around it","Ask someone to check in with you tomorrow"],emotionalTone:"understanding",severity:"moderate"},{id:"third_consecutive_encouraging",triggerCondition:"third_consecutive",message:"Three days off is a signal to adjust your approach, not give up. Research shows that habit recovery is actually faster than initial formation because your brain has already started building the pathways.",researchExplanation:"Neuroplasticity studies reveal that habit-related neural pathways remain largely intact after brief interruptions. The brain can re-strengthen these connections 40% faster than initial formation.",researchCitation:{authors:"Graybiel, A. M.",title:"The basal ganglia and chunking of action repertoires",journal:"Neurobiology of Learning and Memory",year:1998},recoveryOptions:["Try the tiniest possible version of this habit","Change when or where you do this habit","Break the habit into smaller pieces","Get support from a friend or family member","Take a planned break and restart next week"],emotionalTone:"encouraging",severity:"intensive"},{id:"weekly_struggle_motivational",triggerCondition:"weekly_struggle",message:"Struggling this week? That's valuable data, not failure. Research shows that understanding your patterns is key to long-term success.",researchExplanation:"Studies on habit formation show that identifying obstacles and adjusting strategies (implementation intentions) doubles success rates compared to willpower alone.",researchCitation:{authors:"Gollwitzer, P. M., & Sheeran, P.",title:"Implementation intentions and goal achievement",journal:"Advances in Experimental Social Psychology",year:2006},recoveryOptions:["Analyze what made this week challenging","Reduce the habit to its absolute minimum","Try doing it at a completely different time","Focus on just weekdays or weekends first","Connect with others who share this goal"],emotionalTone:"motivational",severity:"moderate"},{id:"motivation_low_supportive",triggerCondition:"motivation_low",message:"Low motivation is a natural part of building lasting habits. Research shows that relying on motivation alone leads to failure - successful people build systems that work even when motivation is low.",researchExplanation:"Stanford research on tiny habits shows that removing reliance on motivation and instead focusing on making habits ridiculously easy leads to 80% adherence rates compared to 20% for motivation-dependent habits.",researchCitation:{authors:"Fogg, B. J.",title:"Tiny Habits: The Small Changes That Change Everything",journal:"Behavior Design Lab, Stanford University",year:2019},recoveryOptions:["Make the habit so small it feels almost silly","Attach it to something you already do automatically","Change your environment to make it easier","Celebrate every tiny win to build momentum","Focus on showing up, not performing perfectly"],emotionalTone:"supportive",severity:"gentle"}],l={exercise:{name:"One push-up or 30-second walk",description:"Just move your body for 30 seconds",timeRequired:.5,scalingSteps:["One push-up or 30-second walk","2-3 exercises or 2-minute walk","5-minute movement session","10-minute workout","Return to full routine"]},meditation:{name:"Three conscious breaths",description:"Take three slow, intentional breaths",timeRequired:1,scalingSteps:["Three conscious breaths","2-minute breathing exercise","5-minute mindfulness","10-minute meditation","Return to full practice"]},reading:{name:"Read one paragraph",description:"Open your book and read just one paragraph",timeRequired:1,scalingSteps:["Read one paragraph","Read for 5 minutes","Read for 10-15 minutes","Read for 20-30 minutes","Return to full reading session"]},writing:{name:"Write one sentence",description:"Write just one sentence about anything",timeRequired:1,scalingSteps:["Write one sentence","Write for 3 minutes","Write for 10 minutes","Write for 20 minutes","Return to full writing session"]},learning:{name:"Review one flashcard or concept",description:"Look at just one piece of learning material",timeRequired:1,scalingSteps:["Review one flashcard","Study for 5 minutes","Study for 15 minutes","Study for 30 minutes","Return to full study session"]},creativity:{name:"Make one mark or note",description:"Draw one line, write one word, or hum one melody",timeRequired:1,scalingSteps:["Make one creative mark","Create for 5 minutes","Create for 15 minutes","Create for 30 minutes","Return to full creative session"]}};const c={enableCompassionMessages:!0,preferredRecoveryType:"micro_habit",showResearchExplanations:!0,messageFrequency:"immediate",autoSuggestMicroHabits:!0,trendFocusedProgress:!0,shareProgressWithCommunity:!1,enableRecoveryCoaching:!0},u=(0,i.v)()((0,s.eh)((e,t)=>({activeRecoverySessions:[],compassionMessages:o,recentCompassionEvents:[],researchFacts:a,recoverySettings:c,recoveryMetrics:{totalRecoverySessions:0,successfulRecoveries:0,averageRecoveryTime:0,mostEffectiveRecoveryType:"micro_habit",compassionMessageEngagement:0,userSatisfactionScore:0,retentionImprovementScore:0},personalInsights:[],trendData:{},progressVisualizations:[],checkForCompassionTriggers:e=>{const n=t(),{recoverySettings:r}=n;if(!r.enableCompassionMessages)return{shouldTrigger:!1,severity:"low",urgency:"within_week",contextFactors:[]};const i=t().getConsecutiveMissCount(e,[]);let s="",a="low",o="within_24h";return 1===i?(s="first_miss",a="low",o="within_24h"):2===i?(s="second_consecutive",a="medium",o="immediate"):i>=3&&(s="third_consecutive",a="high",o="immediate"),{shouldTrigger:i>0,messageId:s,severity:a,urgency:o,contextFactors:["consecutive_misses","needs_support"]}},triggerCompassionMessage:(t,n)=>{const r=function(e){const t=o.filter(t=>t.triggerCondition===e);return t[Math.floor(Math.random()*t.length)]||null}(n);if(!r)return;const i={id:"compassion_".concat(Date.now()),habitId:t,userId:"current_user",triggeredDate:(new Date).toISOString(),triggerCondition:n,messageShown:r,userResponse:"dismissed",timeToResponse:0,followUpNeeded:"third_consecutive"===n};e(e=>({recentCompassionEvents:[i,...e.recentCompassionEvents.slice(0,9)]}))},startRecoverySession:(t,n)=>{const i={id:"recovery_".concat(Date.now()),habitId:t,startDate:(new Date).toISOString(),recoveryType:n,targetReturnDate:new Date(Date.now()+6048e5).toISOString(),currentStep:0,totalSteps:5,completed:!1,successfulDays:0,challengingDays:0,coachingTips:["Start with the smallest possible version","Focus on consistency over intensity","Celebrate every small win","Be patient with the process"],nextMilestone:"Complete 3 consecutive days"};e(e=>({activeRecoverySessions:[...e.activeRecoverySessions,i],recoveryMetrics:(0,r.A)((0,r.A)({},e.recoveryMetrics),{},{totalRecoverySessions:e.recoveryMetrics.totalRecoverySessions+1})}))},updateRecoveryProgress:(t,n)=>{e(e=>({activeRecoverySessions:e.activeRecoverySessions.map(e=>e.id===t?(0,r.A)((0,r.A)({},e),n):e)}))},completeRecoverySession:(t,n)=>{e(e=>{const i=e.activeRecoverySessions.find(e=>e.id===t);if(!i)return e;const s=e.activeRecoverySessions.map(e=>e.id===t?(0,r.A)((0,r.A)({},e),{},{completed:!0}):e),a="successful"===n;return{activeRecoverySessions:s,recoveryMetrics:(0,r.A)((0,r.A)({},e.recoveryMetrics),{},{successfulRecoveries:a?e.recoveryMetrics.successfulRecoveries+1:e.recoveryMetrics.successfulRecoveries,averageRecoveryTime:a?d(e.recoveryMetrics,i):e.recoveryMetrics.averageRecoveryTime})}})},generateMicroHabit:e=>{const t=function(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(l))if(t.includes(n)||n.includes(t))return r;return l.exercise}(e.category||"exercise");return{id:"micro_".concat(e.id,"_").concat(Date.now()),originalHabitId:e.id,name:t.name,description:t.description,timeRequired:t.timeRequired,difficulty:"minimal",scalingSteps:t.scalingSteps,maintainsSameContext:!0,successRate:.8}},activateMicroHabit:e=>{console.log("Activating micro habit:",e)},progressMicroHabit:e=>{console.log("Progressing micro habit:",e)},calculateTrendData:(e,t)=>{const n=new Date,r=new Date;return"week"===t?r.setDate(n.getDate()-7):"month"===t?r.setMonth(n.getMonth()-1):r.setMonth(n.getMonth()-3),{habitId:e,period:t,startDate:r.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0],completionRate:75,totalDays:"week"===t?7:"month"===t?30:90,completedDays:"week"===t?5:"month"===t?22:67,missedDays:"week"===t?2:"month"===t?8:23,trend:"improving",trendPercentage:15,consistencyScore:80,longestStreak:5,totalStreaks:3,averageGapBetweenMisses:2.5}},generateRecoveryInsights:e=>[{id:"insight_".concat(Date.now()),habitId:e,type:"pattern_detected",title:"Monday struggles detected",description:"You tend to miss this habit on Mondays. Consider adjusting your Monday routine or doing a micro-version.",actionable:!0,suggestedActions:["Set up Sunday evening prep","Use micro-habit on Mondays only","Change Monday timing"],confidence:85,basedOn:"user_data"}],updateTrendData:(n,i)=>{const s=t().calculateTrendData(n,"week"),a=t().calculateTrendData(n,"month");e(e=>({trendData:(0,r.A)((0,r.A)({},e.trendData),{},{[n]:[s,a]})}))},updateRecoverySettings:t=>{e(e=>({recoverySettings:(0,r.A)((0,r.A)({},e.recoverySettings),t)}))},getRecoveryMetrics:()=>t().recoveryMetrics,logCompassionEvent:t=>{e(e=>({recentCompassionEvents:[t,...e.recentCompassionEvents.slice(0,9)]}))},getRelevantResearchForSituation:e=>function(e){return a.filter(t=>t.contextTriggers.some(t=>e.includes(t))).sort((e,t)=>t.credibilityScore-e.credibilityScore)}(e),getConsecutiveMissCount:(e,t)=>0,getLastCompletionDate:(e,t)=>null,isInRecoverySession:e=>t().activeRecoverySessions.some(t=>t.habitId===e&&!t.completed),getActiveRecoverySession:e=>t().activeRecoverySessions.find(t=>t.habitId===e&&!t.completed)||null,initializeRecoverySystem:()=>{console.log("Recovery system initialized")}})));function d(e,t){const n=Math.ceil(((new Date).getTime()-new Date(t.startDate).getTime())/864e5),r=e.successfulRecoveries+1;return(e.averageRecoveryTime*e.successfulRecoveries+n)/r}u.subscribe(e=>e.activeRecoverySessions,e=>{console.log("Active recovery sessions updated:",e.length)})},853:(e,t,n)=>{"use strict";e.exports=n(896)},893:(e,t,n)=>{"use strict";n.d(t,{Zr:()=>o,eh:()=>i});var r=n(555);const i=e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let s=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());s=n=>{const r=e(n);if(!i(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(s)};return e(t,n,r)};function s(e,t){let n;try{n=e()}catch(r){return}return{getItem:e=>{var r;const i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(r=n.getItem(e))?r:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const a=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>a(e)(n),catch(e){return this}}}catch(n){return{then(e){return this},catch:e=>a(e)(n)}}},o=(e,t)=>(n,i,o)=>{let l=(0,r.A)({storage:s(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>(0,r.A)((0,r.A)({},t),e)},t),c=!1;const u=new Set,d=new Set;let h=l.storage;if(!h)return e(function(){console.warn("[zustand persist middleware] Unable to update item '".concat(l.name,"', the given storage is currently unavailable.")),n(...arguments)},i,o);const m=()=>{const e=l.partialize((0,r.A)({},i()));return h.setItem(l.name,{state:e,version:l.version})},f=o.setState;o.setState=(e,t)=>{f(e,t),m()};const p=e(function(){n(...arguments),m()},i,o);let g;o.getInitialState=()=>p;const y=()=>{var e,t;if(!h)return;c=!1,u.forEach(e=>{var t;return e(null!=(t=i())?t:p)});const r=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=i())?e:p))||void 0;return a(h.getItem.bind(h))(l.name).then(e=>{if(e){if("number"!==typeof e.version||e.version===l.version)return[!1,e.state];if(l.migrate){const t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[r,s]=e;if(g=l.merge(s,null!=(t=i())?t:p),n(g,!0),r)return m()}).then(()=>{null==r||r(g,void 0),g=i(),c=!0,d.forEach(e=>e(g))}).catch(e=>{null==r||r(void 0,e)})};return o.persist={setOptions:e=>{l=(0,r.A)((0,r.A)({},l),e),e.storage&&(h=e.storage)},clearStorage:()=>{null==h||h.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},l.skipHydration||y(),g||p}},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,p=!1,g=!1,y=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function D(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,D(e),!p)if(null!==r(c))p=!0,j||(j=!0,C());else{var t=r(u);null!==t&&B(w,t.startTime-e)}}var C,j=!1,k=-1,F=5,N=-1;function E(){return!!y||!(t.unstable_now()-N<F)}function A(){if(y=!1,j){var e=t.unstable_now();N=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(k),k=-1),f=!0;var s=m;try{t:{for(D(e),h=r(c);null!==h&&!(h.expirationTime>e&&E());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,D(e),n=!0;break t}h===r(c)&&i(c),D(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&B(w,l.startTime-e),n=!1}}break e}finally{h=null,m=s,f=!1}n=void 0}}finally{n?C():j=!1}}}if("function"===typeof v)C=function(){v(A)};else if("undefined"!==typeof MessageChannel){var S=new MessageChannel,_=S.port2;S.port1.onmessage=A,C=function(){_.postMessage(null)}}else C=function(){x(A,0)};function B(e,n){k=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(k),k=-1):g=!0,B(w,s-a))):(e.sortIndex=o,n(c,e),p||f||(p=!0,j||(j=!0,C()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{258:"1b566971",453:"d21a8da4",560:"ab962dbe"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="sciencehabits:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunksciencehabits=self.webpackChunksciencehabits||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>le,booleanish:()=>ce,commaOrSpaceSeparated:()=>fe,commaSeparated:()=>me,number:()=>de,overloadedBoolean:()=>ue,spaceSeparated:()=>he});var t={};n.r(t),n.d(t,{attentionMarkers:()=>Wn,contentInitial:()=>On,disable:()=>Kn,document:()=>Ln,flow:()=>Hn,flowInitial:()=>zn,insideSpan:()=>Vn,string:()=>qn,text:()=>Un});var r=n(43),i=n(391),s=n(555),a=n(131);let o=null;async function l(){if(o)return o;try{const e=await fetch("/data/goals.json");if(!e.ok)throw new Error("Failed to fetch goals");const t=await e.json();return o=t.goals.sort((e,t)=>e.priority-t.priority),o}catch(e){return console.warn("Failed to load goals from JSON, using fallback:",e),o=[{id:"reduce_stress",title:"Reduce Stress",description:"Feel calmer and more relaxed throughout the day",icon:"\ud83e\uddd8\u200d\u2640\ufe0f",tier:"free",category:"wellbeing",priority:1,researchLevel:"high",researchSummary:"Multiple meta-analyses show that mindfulness and breathing exercises significantly reduce cortisol levels and perceived stress.",benefits:["Lower cortisol levels","Improved sleep quality","Better emotional regulation","Reduced anxiety"],commonConcerns:[{concern:"I don't have time for meditation",response:"Start with just 3 minutes. Even brief breathing exercises show measurable stress reduction."}],timeToResults:{initial:"1-2 weeks",significant:"4-6 weeks"},averageTimeCommitment:{min:3,max:15}},{id:"increase_focus",title:"Increase Focus",description:"Improve concentration and mental clarity",icon:"\ud83c\udfaf",tier:"free",category:"productivity",priority:2,researchLevel:"high",researchSummary:"Cognitive training and attention exercises improve working memory and sustained attention in healthy adults.",benefits:["Better concentration","Reduced mental fatigue","Improved productivity","Enhanced learning ability"],timeToResults:{initial:"2-3 weeks",significant:"6-8 weeks"},averageTimeCommitment:{min:5,max:20}},{id:"improve_mood",title:"Improve Mood",description:"Boost happiness and emotional well-being",icon:"\ud83d\ude0a",tier:"free",category:"wellbeing",priority:3,researchLevel:"high",researchSummary:"Gratitude practices, physical activity, and social connection are proven to increase positive emotions and life satisfaction.",benefits:["Increased happiness","Better relationships","Greater life satisfaction","Improved resilience"],timeToResults:{initial:"1-2 weeks",significant:"3-4 weeks"},averageTimeCommitment:{min:5,max:15}},{id:"increase_energy",title:"Increase Energy",description:"Feel more energized and motivated",icon:"\u26a1",tier:"free",category:"health",priority:4,researchLevel:"high",researchSummary:"Regular exercise, proper hydration, and sleep hygiene significantly improve energy levels and reduce fatigue.",benefits:["Higher energy levels","Better sleep quality","Improved motivation","Enhanced physical stamina"],timeToResults:{initial:"1 week",significant:"2-4 weeks"},averageTimeCommitment:{min:5,max:30}},{id:"improve_health",title:"Improve Health",description:"Build healthier daily habits",icon:"\ud83d\udcaa",tier:"free",category:"health",priority:5,researchLevel:"high",researchSummary:"Small, consistent healthy habits compound over time to create significant improvements in overall health outcomes.",benefits:["Better physical health","Increased longevity","Improved immune function","Enhanced quality of life"],timeToResults:{initial:"2-3 weeks",significant:"8-12 weeks"},averageTimeCommitment:{min:10,max:30}}],o}}function c(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!o)throw new Error("Goals not loaded. Call loadGoals() first.");return e?o:o.filter(e=>"free"===e.tier)}async function u(e){return await l(),c(e)}const d=["welcome","goals","recommendations","complete"],h=(0,a.v)((e,t)=>({currentStep:"welcome",userData:{},selectedGoals:[],availableGoals:[],isLoading:!1,error:null,setStep:t=>e({currentStep:t}),setUserData:t=>e(e=>({userData:(0,s.A)((0,s.A)({},e.userData),t)})),setGoals:t=>e({selectedGoals:t}),loadGoalsData:async()=>{try{e({isLoading:!0,error:null});const t=(await l()).filter(e=>"free"===e.tier);e({availableGoals:t,isLoading:!1})}catch(t){console.error("Failed to load goals:",t),e({error:"Failed to load goals. Please try again.",isLoading:!1})}},setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),nextStep:()=>{const{currentStep:n}=t(),r=d.indexOf(n);r<d.length-1&&e({currentStep:d[r+1]})},previousStep:()=>{const{currentStep:n}=t(),r=d.indexOf(n);r>0&&e({currentStep:d[r-1]})},resetOnboarding:()=>e({currentStep:"welcome",userData:{},selectedGoals:[],availableGoals:[],isLoading:!1,error:null})})),m=[{id:"professional",title:"Working Professional",description:"Office job, busy schedule, limited time",icon:"\ud83d\udcbc"},{id:"parent",title:"Parent",description:"Caring for children, irregular schedule",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{id:"student",title:"Student",description:"Studying, flexible schedule, budget-conscious",icon:"\ud83d\udcda"}],f=[{id:"morning",title:"Morning Person",description:"I have the most energy in the morning",icon:"\ud83c\udf05",time:"6:00 - 10:00 AM"},{id:"lunch",title:"Midday Breaks",description:"I prefer short breaks during work",icon:"\u2600\ufe0f",time:"11:00 AM - 2:00 PM"},{id:"evening",title:"Evening Wind-down",description:"I like to relax after work/school",icon:"\ud83c\udf06",time:"5:00 - 9:00 PM"},{id:"flexible",title:"Flexible Timing",description:"Whenever I have a few minutes",icon:"\ud83d\udd04",time:"Any time"}];function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var g=n(579);const y=["variant","size","fullWidth","isLoading","disabled","className","children"];function x(e){let{variant:t="primary",size:n="md",fullWidth:r=!1,isLoading:i=!1,disabled:a,className:o="",children:l}=e,c=p(e,y);const u=r?"w-full":"",d="".concat("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n]," ").concat(u," ").concat(o).trim();return(0,g.jsxs)("button",(0,s.A)((0,s.A)({className:d,disabled:a||i},c),{},{children:[i&&(0,g.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,g.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,g.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}))}function b(e){let{children:t,className:n="",padding:r="md",hover:i=!1}=e;const s=i?"hover:shadow-md transition-shadow cursor-pointer":"",a="".concat("bg-white rounded-lg shadow-sm border border-gray-200"," ").concat({sm:"p-4",md:"p-6",lg:"p-8"}[r]," ").concat(s," ").concat(n).trim();return(0,g.jsx)("div",{className:a,children:t})}function v(e){let{children:t,className:n=""}=e;return(0,g.jsx)("div",{className:"mb-4 ".concat(n),children:t})}function D(e){let{children:t,className:n=""}=e;return(0,g.jsx)("div",{className:n,children:t})}const w=["label","error","helpText","fullWidth","className","id"],C=["label","error","helpText","fullWidth","className","id","rows"];function j(e){let{label:t,error:n,helpText:r,fullWidth:i=!0,className:a="",id:o}=e,l=p(e,w);const c=o||"input-".concat(Math.random().toString(36).substr(2,9)),u=n?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",d=i?"w-full":"",h="".concat("block px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors"," ").concat(u," ").concat(d," ").concat(a).trim();return(0,g.jsxs)("div",{className:i?"w-full":"",children:[t&&(0,g.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,g.jsx)("input",(0,s.A)({id:c,className:h},l)),n&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),r&&!n&&(0,g.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})}function k(e){let{label:t,error:n,helpText:r,fullWidth:i=!0,className:a="",id:o,rows:l=3}=e,c=p(e,C);const u=o||"textarea-".concat(Math.random().toString(36).substr(2,9)),d=n?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",h=i?"w-full":"",m="".concat("block px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors resize-vertical"," ").concat(d," ").concat(h," ").concat(a).trim();return(0,g.jsxs)("div",{className:i?"w-full":"",children:[t&&(0,g.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,g.jsx)("textarea",(0,s.A)({id:u,rows:l,className:m},c)),n&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),r&&!n&&(0,g.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})}function F(e){let{isOpen:t,onClose:n,children:i,size:s="md",className:a=""}=e;if((0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,n]),!t)return null;return(0,g.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:n}),(0,g.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,g.jsx)("div",{className:"relative bg-white rounded-lg shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[s]," ").concat(a),onClick:e=>e.stopPropagation(),children:i})})]})}function N(e){let{isOpen:t,onClose:n,onConfirm:r,title:i,message:s,confirmText:a="Confirm",cancelText:o="Cancel",confirmVariant:l="danger",icon:c}=e;return(0,g.jsx)(F,{isOpen:t,onClose:n,size:"sm",children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[c&&(0,g.jsx)("div",{className:"flex-shrink-0",children:c}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i})]}),(0,g.jsx)("p",{className:"text-gray-600 mb-6 leading-relaxed",children:s}),(0,g.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:n,children:o}),(0,g.jsx)(x,{variant:"danger"===l?"outline":"primary",onClick:()=>{r(),n()},className:"danger"===l?"border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400":"",children:a})]})]})})}const E=e=>{let{badge:t,userBadge:n,progress:r,isEarned:i,isNew:s=!1,size:a="medium",showProgress:o=!0,onClick:l,className:c=""}=e;const u=i?{common:"border-gray-400 bg-gray-100 text-gray-800",uncommon:"border-green-400 bg-green-100 text-green-800",rare:"border-blue-400 bg-blue-100 text-blue-800",legendary:"border-purple-400 bg-purple-100 text-purple-800"}[t.rarity]:{common:"border-gray-300 bg-gray-50 text-gray-600",uncommon:"border-green-300 bg-green-50 text-green-600",rare:"border-blue-300 bg-blue-50 text-blue-600",legendary:"border-purple-300 bg-purple-50 text-purple-600"}[t.rarity];return(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsxs)("div",{className:"relative ".concat({small:"w-12 h-12",medium:"w-16 h-16",large:"w-24 h-24"}[a]," ").concat(u,"\n                    border-2 rounded-full flex flex-col items-center justify-center\n                    ").concat(i?"opacity-100":"opacity-60","\n                    ").concat(l?"cursor-pointer hover:scale-105":"","\n                    ").concat(s?"ring-2 ring-yellow-400 ring-offset-2 animate-pulse":"","\n                    transition-all duration-200 ").concat(c),onClick:l,children:[s&&(0,g.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-pulse"}),(0,g.jsx)("div",{className:{small:"text-lg",medium:"text-2xl",large:"text-4xl"}[a],children:t.icon}),!i&&o&&r>0&&(0,g.jsx)("div",{className:"absolute inset-0 rounded-full",children:(0,g.jsx)("svg",{className:"w-full h-full transform -rotate-90",children:(0,g.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"".concat(2.83*r," 283"),className:"text-current opacity-40"})})}),i&&(0,g.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"\u2713"})]}),(0,g.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:[(0,g.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap max-w-48",children:[(0,g.jsx)("div",{className:"font-medium",children:t.name}),(0,g.jsx)("div",{className:"text-gray-300 mt-1",children:t.description}),!i&&r>0&&(0,g.jsxs)("div",{className:"text-yellow-300 mt-1",children:[Math.round(r),"% complete"]}),i&&n&&(0,g.jsxs)("div",{className:"text-green-300 mt-1",children:["Earned ",new Date(n.earnedAt).toLocaleDateString()]})]}),(0,g.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})};function A(e){let{habit:t,onComplete:n,onSkip:i,onViewResearch:s}=e;const[a,o]=(0,r.useState)(!1);return(0,g.jsxs)("div",{className:"border-b border-gray-100",children:[(0,g.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,g.jsxs)("div",{className:"flex items-center flex-1",children:[(0,g.jsx)("button",{onClick:()=>n(t.id),className:"\n              w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all\n              ".concat(t.isCompleted?"bg-green-500 border-green-500":"border-gray-300 hover:border-blue-500","\n            "),"aria-label":"Mark ".concat(t.title," as ").concat(t.isCompleted?"incomplete":"complete"),children:t.isCompleted&&(0,g.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,g.jsx)("div",{className:"flex-1",children:(0,g.jsx)("h3",{className:"\n              font-medium \n              ".concat(t.isCompleted?"text-gray-400 line-through":"text-gray-900","\n            "),children:t.title})})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("span",{className:"text-sm text-gray-500",children:t.duration}),(0,g.jsx)("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors","aria-label":"".concat(a?"Hide":"Show"," details for ").concat(t.title),children:a?(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),!t.isCompleted&&i&&(0,g.jsx)("button",{onClick:()=>i(t.id),className:"text-sm text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Skip ".concat(t.title," for today"),children:"Skip"})]})]}),a&&(0,g.jsxs)("div",{className:"px-6 pb-4 bg-gray-50",children:[t.instructions&&(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"How to do it:"}),(0,g.jsx)("p",{className:"text-sm text-gray-700",children:t.instructions})]}),t.whyEffective&&(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Why it works:"}),(0,g.jsx)("p",{className:"text-sm text-gray-700",children:t.whyEffective})]}),s&&(0,g.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,g.jsxs)("button",{onClick:()=>s(t.id),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"View Research & Science"]})})]})]})}function S(e){let{completedToday:t,totalToday:n,currentStreak:r}=e;const i=n>0?Math.round(t/n*100):0;return(0,g.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Today's Progress"}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Daily completion"}),(0,g.jsxs)("span",{className:"font-medium text-gray-900",children:[t,"/",n," habits"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,g.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(i,"%")},role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Daily progress: ".concat(i,"% complete"),children:(0,g.jsxs)("span",{className:"sr-only",children:[i,"% complete"]})})})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 bg-orange-50 rounded-lg border border-orange-100",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udd25"}),(0,g.jsx)("span",{className:"font-medium text-gray-900",children:"Current Streak"})]}),(0,g.jsxs)("span",{className:"text-xl font-bold text-orange-600",children:[r," ",1===r?"day":"days"]})]}),100===i?(0,g.jsx)("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-100",children:(0,g.jsx)("p",{className:"text-sm font-medium text-green-800",children:"\ud83c\udf89 Perfect day! All habits completed"})}):i>=50?(0,g.jsx)("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-100",children:(0,g.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Great progress! You're more than halfway there"})}):t>0?(0,g.jsx)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:(0,g.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Nice start! Every habit completed counts"})}):(0,g.jsx)("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-100",children:(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Ready to begin? Start with any habit above"})})]})]})}const _=e=>{var t,n,r,i,s;let{article:a,onReadFullArticle:o}=e;return(0,g.jsxs)("div",{className:"research-article-card",children:[(0,g.jsxs)("div",{className:"article-header",children:[(0,g.jsx)("h3",{className:"article-title",children:a.title}),(null===(t=a.studyDetails)||void 0===t?void 0:t.evidenceLevel)&&(0,g.jsxs)("span",{className:"evidence-level ".concat((e=>{switch(e.toLowerCase()){case"high":return"bg-green-100 text-green-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"low":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.studyDetails.evidenceLevel)),children:[a.studyDetails.evidenceLevel," evidence"]})]}),((null===(n=a.studyDetails)||void 0===n?void 0:n.year)||(null===(r=a.studyDetails)||void 0===r?void 0:r.journal))&&(0,g.jsxs)("div",{className:"article-meta",children:[(null===(i=a.studyDetails)||void 0===i?void 0:i.year)&&(0,g.jsx)("span",{children:a.studyDetails.year}),(null===(s=a.studyDetails)||void 0===s?void 0:s.journal)&&(0,g.jsx)("span",{className:"journal",children:a.studyDetails.journal})]}),a.keyTakeaways&&a.keyTakeaways.length>0&&(0,g.jsxs)("div",{className:"key-findings",children:[(0,g.jsx)("strong",{children:"Key Findings:"}),(0,g.jsx)("ul",{className:"takeaways-list",children:a.keyTakeaways.map((e,t)=>(0,g.jsx)("li",{className:"takeaway-item",children:e},t))})]}),a.studyDetails&&(0,g.jsxs)("div",{className:"study-details",children:[a.studyDetails.studyType&&(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("strong",{children:"Study Type:"})," ",a.studyDetails.studyType.replace(/_/g," ")]}),a.studyDetails.sampleSize&&(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("strong",{children:"Sample Size:"})," ",a.studyDetails.sampleSize," participants"]}),a.studyDetails.statisticalSignificance&&(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("strong",{children:"Statistical Significance:"})," ",a.studyDetails.statisticalSignificance]})]}),o&&a.content&&(0,g.jsx)("div",{className:"article-actions",style:{marginTop:"16px"},children:(0,g.jsx)("button",{onClick:()=>o(a),className:"read-full-btn","aria-label":"Read full article: ".concat(a.title),style:{padding:"8px 16px",fontSize:"14px",border:"1px solid #3b82f6",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer"},children:"\ud83d\udcd6 Read Full Article"})}),a.readingTime&&(0,g.jsxs)("div",{className:"reading-time",style:{marginTop:"12px",fontSize:"14px",color:"#6b7280"},children:["\ud83d\udcd6 ",a.readingTime," min read"]})]})};function B(){const e=h(e=>e.nextStep);return(0,g.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,g.jsxs)("div",{className:"mb-12",children:[(0,g.jsx)("div",{className:"w-20 h-20 mx-auto mb-8 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:(0,g.jsx)("span",{className:"text-3xl text-white",children:"\ud83e\uddec"})}),(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Welcome to ScienceHabits"}),(0,g.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Let's get you started with habits that actually work."})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)(x,{onClick:e,size:"lg",fullWidth:!0,children:"Get Started"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"Takes less than 2 minutes to set up"})]})]})}var T=n(893);const I={layoutMode:"simplified",highContrast:!1,reducedMotion:!1,fontSize:"normal",animationsEnabled:!0,soundEnabled:!1,hapticsEnabled:!0,colorScheme:"auto",emotionalDesign:"compassionate",touchTargetSize:"standard",gesturesEnabled:!0,onboardingCompleted:!1,preferredOnboardingDepth:"standard",compassionMessaging:!0,celebrationStyle:"standard"},P=(0,a.v)()((0,T.Zr)((e,t)=>(0,s.A)((0,s.A)({},I),{},{setLayoutMode:t=>e({layoutMode:t}),setHighContrast:n=>{e({highContrast:n}),t().applyAccessibilityPreferences()},setReducedMotion:n=>{e({reducedMotion:n,animationsEnabled:!n}),t().applyAccessibilityPreferences()},setFontSize:n=>{e({fontSize:n}),t().applyAccessibilityPreferences()},setAnimationsEnabled:n=>{e({animationsEnabled:n}),n&&t().reducedMotion&&e({animationsEnabled:!1})},setSoundEnabled:t=>e({soundEnabled:t}),setHapticsEnabled:t=>e({hapticsEnabled:t}),setColorScheme:t=>e({colorScheme:t}),setEmotionalDesign:t=>e({emotionalDesign:t}),setTouchTargetSize:n=>{e({touchTargetSize:n}),t().applyAccessibilityPreferences()},setGesturesEnabled:t=>e({gesturesEnabled:t}),setOnboardingCompleted:t=>e({onboardingCompleted:t}),setOnboardingDepth:t=>e({preferredOnboardingDepth:t}),setCompassionMessaging:t=>e({compassionMessaging:t}),setCelebrationStyle:t=>e({celebrationStyle:t}),applyAccessibilityPreferences:()=>{const e=t(),n=document.documentElement;n.classList.toggle("high-contrast",e.highContrast),n.classList.remove("font-small","font-normal","font-large","font-extra-large"),n.classList.add("font-".concat(e.fontSize)),n.classList.remove("touch-compact","touch-standard","touch-large"),n.classList.add("touch-".concat(e.touchTargetSize)),e.reducedMotion?(n.style.setProperty("--animation-duration","0ms"),n.style.setProperty("--transition-duration","0ms")):(n.style.removeProperty("--animation-duration"),n.style.removeProperty("--transition-duration"))},detectSystemPreferences:()=>{const n=window.matchMedia("(prefers-color-scheme: dark)").matches,r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,i=window.matchMedia("(prefers-contrast: high)").matches;e(e=>({colorScheme:"auto"===e.colorScheme?n?"dark":"light":e.colorScheme,reducedMotion:r||e.reducedMotion,highContrast:i||e.highContrast,animationsEnabled:!r&&e.animationsEnabled})),t().applyAccessibilityPreferences()},resetToDefaults:()=>{e(I),t().applyAccessibilityPreferences()}}),{name:"sciencehabits-ui-preferences",version:1}));if("undefined"!==typeof window){const e=P.getState();e.detectSystemPreferences();const t=window.matchMedia("(prefers-color-scheme: dark)"),n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=window.matchMedia("(prefers-contrast: high)");t.addEventListener("change",e.detectSystemPreferences),n.addEventListener("change",e.detectSystemPreferences),r.addEventListener("change",e.detectSystemPreferences)}const M=[{id:"health",title:"Physical Health",description:"Build habits for better fitness, sleep, and energy",icon:"\ud83d\udcaa",color:"compassion",goalIds:["increase_energy","improve_health"]},{id:"wellbeing",title:"Mental Wellbeing",description:"Develop practices for stress management and emotional balance",icon:"\ud83e\uddd8\u200d\u2640\ufe0f",color:"progress",goalIds:["reduce_stress","improve_mood"]},{id:"productivity",title:"Personal Growth",description:"Improve focus, learning, and personal effectiveness",icon:"\ud83d\ude80",color:"research",goalIds:["increase_focus"]}];function R(){const{setGoals:e,nextStep:t,previousStep:n}=h(),{animationsEnabled:r,emotionalDesign:i}=P();return(0,g.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,g.jsxs)("div",{className:"text-center mb-8 ".concat(r?"animate-fade-in":""),children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What matters most to you right now?"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Choose the area where you'd like to build better habits."})]}),(0,g.jsx)("div",{className:"grid gap-4 mb-8 md:grid-cols-3",children:M.map((n,s)=>(0,g.jsx)("div",{className:"\n              relative p-6 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:scale-105\n              ".concat("compassionate"===i?"card-compassionate hover:shadow-lg":"bg-white border-gray-200 hover:border-gray-300 hover:shadow-md","\n              ").concat(r?"interactive-gentle":"","\n            "),onClick:()=>(n=>{e(n.goalIds),t()})(n),style:{animationDelay:r?"".concat(100*s,"ms"):"0ms"},children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:n.icon}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n.title}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:n.description}),(0,g.jsx)("div",{className:"flex items-center justify-center text-sm text-primary-600 font-medium",children:(0,g.jsx)("span",{children:"Choose This Focus"})})]})},n.id))}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Select your main focus area to continue"}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:n,className:"flex-1",children:"Back"}),(0,g.jsx)(x,{onClick:t,disabled:!0,className:"flex-1 opacity-50",children:"Continue"})]}),(0,g.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Choosing a category will automatically continue to the next step"})]})]})}var L=n(498);function O(e){let{habit:t,isSelected:n,onToggle:r}=e;return(0,g.jsxs)("div",{className:"\n        relative p-5 rounded-lg border-2 cursor-pointer transition-all hover:border-primary-300\n        ".concat(n?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:bg-gray-50","\n      "),onClick:r,children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-2xl mr-3",children:(s=t.category,{stress:"\ud83e\uddd8\u200d\u2640\ufe0f",productivity:"\u26a1",health:"\ud83d\udcaa",energy:"\ud83d\udd0b",sleep:"\ud83d\ude34"}[s]||"\u2728")}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"font-semibold ".concat(n?"text-primary-900":"text-gray-900"),children:t.title}),(0,g.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat((i=t.difficulty,{beginner:"text-green-600 bg-green-100",intermediate:"text-yellow-600 bg-yellow-100",advanced:"text-red-600 bg-red-100"}[i]||"text-gray-600 bg-gray-100")),children:t.difficulty}),(0,g.jsxs)("span",{className:"text-xs text-gray-500",children:[t.timeMinutes," min"]})]})]})]}),n&&(0,g.jsx)("div",{className:"w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,g.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,g.jsx)("p",{className:"text-sm mb-3 ".concat(n?"text-primary-800":"text-gray-600"),children:t.description}),(0,g.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,g.jsx)("div",{className:"mb-1",children:t.goalTags.join(", ")}),(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Research studies:"})," ",t.researchIds.length," backing this habit"]})]})]});var i,s}function z(){const{selectedGoals:e,userData:t,nextStep:n,previousStep:i,setError:a}=h(),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{f()},[]);const f=async()=>{try{m(!0),a(null),await L.dbHelpers.initializeDatabase();const n={id:"temp",createdAt:(new Date).toISOString(),goals:e,dailyMinutes:t.dailyMinutes||10,preferredTime:t.preferredTime||"flexible",lifestyle:t.lifestyle||"professional",language:t.language||"en",trial:{hasUsedTrial:!1,isActive:!1},isPremium:!1};console.log("Mock user for recommendations:",n);const r=await L.dbHelpers.getRecommendedHabits(n);if(console.log("Recommended habits found:",r.length,r),0===r.length){console.log("No recommended habits found, checking all habits in database...");const n=await L.dbHelpers.getAllHabits();if(console.log("All habits in database:",n.length,n),n.length>0){const r=n.filter(n=>{const r=!e.length||n.goalTags.some(t=>e.includes(t)),i=n.timeMinutes<=(t.dailyMinutes||20);return!n.isCustom&&r&&i});if(console.log("Flexible filtering found:",r.length,r),r.length>0){l(r);const e=r.slice(0,3).map(e=>e.id);return void u(e)}}}else{l(r);const e=r.slice(0,3).map(e=>e.id);u(e)}}catch(n){console.error("Failed to load recommendations:",n),a("Failed to load habit recommendations. Please try again.")}finally{m(!1)}};return d?(0,g.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Finding perfect habits for you..."}),(0,g.jsx)("p",{className:"text-gray-600",children:"Based on your goals and preferences"})]}):(0,g.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,g.jsxs)("div",{className:"text-center mb-8",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your Personalized Habits"}),(0,g.jsxs)("p",{className:"text-gray-600 mb-4",children:["We found ",(0,g.jsxs)("strong",{children:[o.length," science-backed habits"]})," that match your goals. Choose the ones you'd like to start with."]}),e.length>0&&(0,g.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:e.join(", ")})]}),0===o.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83e\udd14"}),(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No habits found"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"We couldn't find habits matching your preferences. Let's go back and adjust them."}),(0,g.jsx)(x,{onClick:i,children:"Adjust Preferences"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"space-y-4 mb-8",children:o.map(e=>(0,g.jsx)(O,{habit:e,isSelected:c.includes(e.id),onToggle:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}},e.id))}),c.length>0&&(0,g.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"text-green-600 mr-2",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:"text-sm text-green-800 font-medium",children:[c.length," habit",c.length>1?"s":""," selected"]}),(0,g.jsx)("p",{className:"text-xs text-green-700",children:"Perfect! Starting small increases your success rate by 85%."})]})]})}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:i,className:"flex-1",children:"Back"}),(0,g.jsx)(x,{onClick:()=>{const e=h.getState(),t=o.filter(e=>c.includes(e.id));e.setUserData((0,s.A)((0,s.A)({},e.userData),{},{selectedInitialHabits:t})),n()},disabled:0===c.length,className:"flex-1",children:"Start Building Habits"})]}),0===c.length&&(0,g.jsx)("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Select at least one habit to get started"})]})]})}function H(e){let{onComplete:t}=e;const{currentStep:n,userData:i,selectedGoals:s,setLoading:a,setError:o,error:l}=h();i.lifestyle,i.preferredTime,i.dailyMinutes;(0,r.useEffect)(()=>{(0,L.w)().catch(e=>{console.error("Failed to initialize database:",e),o("Failed to load application data")})},[o]);(0,r.useEffect)(()=>{"complete"===n&&(async()=>{try{a(!0),o(null);const e=await L.dbHelpers.createUser({goals:s,dailyMinutes:i.dailyMinutes||10,preferredTime:i.preferredTime||"flexible",lifestyle:i.lifestyle||"professional",language:i.language||"en",trial:{hasUsedTrial:!1,isActive:!1},isPremium:!1}),n=i.selectedInitialHabits||[];console.log("Creating progress entries for selected habits:",n.length,n);for(const t of n)console.log("Creating progress for habit:",t.id,t.title),await L.dbHelpers.createProgress(e.id,t.id);console.log("User created successfully:",e),console.log("Progress entries created for habits:",n.map(e=>e.id)),localStorage.setItem("sciencehabits_user_id",e.id),t(e.id)}catch(l){console.error("Failed to complete onboarding:",l),o("Failed to set up your account. Please try again.")}finally{a(!1)}})()},[n]);return(0,g.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,g.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,g.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8",children:(()=>{switch(n){case"welcome":default:return(0,g.jsx)(B,{});case"goals":return(0,g.jsx)(R,{});case"recommendations":return(0,g.jsx)(z,{});case"complete":return(0,g.jsxs)("div",{className:"max-w-md mx-auto text-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Setting up your account..."}),(0,g.jsx)("p",{className:"text-gray-600",children:"Almost ready to start building better habits!"})]})}})()}),l&&(0,g.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)("div",{className:"text-red-400",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{className:"ml-3",children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Something went wrong"}),(0,g.jsx)("p",{className:"text-sm text-red-700 mt-1",children:l})]})]})})]})})}var q=n(181);const U={title:"",description:"",timeMinutes:5,category:"productivity",difficulty:"beginner",equipment:"none",instructions:"",goalTags:[],lifestyleTags:["professional","parent","student"],timeTags:["flexible"]},V=(0,a.v)((e,t)=>({isCreating:!1,editingHabit:null,formData:U,formErrors:{},customHabits:[],isLoading:!1,error:null,setFormData:t=>e(e=>({formData:(0,s.A)((0,s.A)({},e.formData),t)})),setFormError:(t,n)=>e(e=>({formErrors:(0,s.A)((0,s.A)({},e.formErrors),{},{[t]:n})})),clearFormErrors:()=>e({formErrors:{}}),resetForm:()=>e({formData:U,formErrors:{},isCreating:!1,editingHabit:null}),createHabit:async n=>{const{formData:r}=t();try{e({isLoading:!0,error:null});const t=function(e){const t={};e.title.trim()?e.title.length>60&&(t.title="Title must be 60 characters or less"):t.title="Title is required";e.description.trim()?e.description.length>150&&(t.description="Description must be 150 characters or less"):t.description="Description is required";e.timeMinutes<1?t.timeMinutes="Duration must be at least 1 minute":e.timeMinutes>120&&(t.timeMinutes="Duration must be 120 minutes or less");e.instructions.trim()?e.instructions.length>500&&(t.instructions="Instructions must be 500 characters or less"):t.instructions="Instructions are required";0===e.goalTags.length&&(t.goalTags="Select at least one goal");0===e.lifestyleTags.length&&(t.lifestyleTags="Select at least one lifestyle");0===e.timeTags.length&&(t.timeTags="Select at least one time preference");return t}(r);if(Object.keys(t).length>0)return e({formErrors:t,isLoading:!1}),null;const i={title:r.title,description:r.description,timeMinutes:r.timeMinutes,category:r.category,difficulty:r.difficulty,equipment:r.equipment,instructions:r.instructions,goalTags:r.goalTags,lifestyleTags:r.lifestyleTags,timeTags:r.timeTags,researchIds:[],frequency:(0,q.Up)(),reminders:(0,q.hI)()},s=await L.dbHelpers.createCustomHabit(i);return await L.dbHelpers.createProgress(n,s.id),e(e=>({customHabits:[...e.customHabits,s],isLoading:!1,isCreating:!1,formData:U,formErrors:{}})),s}catch(i){return console.error("Failed to create habit:",i),e({error:i instanceof Error?i.message:"Failed to create habit",isLoading:!1}),null}},updateHabit:async(t,n)=>{try{return e({isLoading:!0,error:null}),await L.dbHelpers.updateHabit(t,n),e(e=>({customHabits:e.customHabits.map(e=>e.id===t?(0,s.A)((0,s.A)({},e),n):e),isLoading:!1,editingHabit:null,formData:U,formErrors:{}})),!0}catch(r){return console.error("Failed to update habit:",r),e({error:r instanceof Error?r.message:"Failed to update habit",isLoading:!1}),!1}},deleteHabit:async(t,n)=>{try{return e({isLoading:!0,error:null}),await L.dbHelpers.deleteHabit(t),await L.dbHelpers.deleteProgress(n,t),e(e=>({customHabits:e.customHabits.filter(e=>e.id!==t),isLoading:!1})),!0}catch(r){return console.error("Failed to delete habit:",r),e({error:r instanceof Error?r.message:"Failed to delete habit",isLoading:!1}),!1}},loadCustomHabits:async t=>{try{e({isLoading:!0,error:null});const n=await L.dbHelpers.getCustomHabits(t);e({customHabits:n,isLoading:!1})}catch(n){console.error("Failed to load custom habits:",n),e({error:n instanceof Error?n.message:"Failed to load custom habits",isLoading:!1})}},startCreating:()=>e({isCreating:!0,editingHabit:null,formData:U,formErrors:{}}),startEditing:t=>e({isCreating:!0,editingHabit:t,formData:{title:t.title,description:t.description,timeMinutes:t.timeMinutes,category:t.category,difficulty:t.difficulty,equipment:t.equipment,instructions:t.instructions,goalTags:t.goalTags,lifestyleTags:t.lifestyleTags,timeTags:t.timeTags},formErrors:{}}),cancelEditing:()=>e({isCreating:!1,editingHabit:null,formData:U,formErrors:{}}),setError:t=>e({error:t})}));const W=[{title:"10 Push-ups",description:"Quick strength training to energize your body",category:"health",timeMinutes:2,difficulty:"beginner",instructions:"1. Get into push-up position\n2. Keep your body straight\n3. Do 10 controlled push-ups\n4. Rest and repeat if desired"},{title:"Read 5 Pages",description:"Daily reading habit to expand knowledge",category:"productivity",timeMinutes:10,difficulty:"beginner",instructions:"1. Choose a book you want to read\n2. Find a quiet spot\n3. Read 5 pages without distractions\n4. Note one interesting thing you learned"},{title:"Evening Reflection",description:"End your day with thoughtful self-reflection",category:"stress",timeMinutes:5,difficulty:"beginner",instructions:"1. Sit quietly before bed\n2. Think about 3 good things from today\n3. Consider what you learned\n4. Set intention for tomorrow"},{title:"Cold Shower Finish",description:"End shower with cold water for energy boost",category:"energy",timeMinutes:1,difficulty:"intermediate",instructions:"1. Take normal shower\n2. Turn to cold for last 30-60 seconds\n3. Breathe deeply and stay calm\n4. End on cold temperature"}];var K=n(613);function G(e){let{onClose:t,onSuccess:n}=e;const[i,a]=(0,r.useState)(!1),[o,u]=(0,r.useState)("basic"),[d,h]=(0,r.useState)((0,q.Up)()),[p,y]=(0,r.useState)([]),[w,C]=(0,r.useState)(!0),{formData:F,formErrors:N,isLoading:E,editingHabit:A,setFormData:S,setFormError:_,clearFormErrors:B,createHabit:T,updateHabit:I,resetForm:P}=V(),{currentUser:M}=(0,K.kH)();(0,r.useEffect)(()=>{(async()=>{try{var e;await l();const t=c(null!==(e=null===M||void 0===M?void 0:M.isPremium)&&void 0!==e&&e);y(t)}catch(t){console.error("Failed to load goals:",t)}finally{C(!1)}})()},[null===M||void 0===M?void 0:M.isPremium]);const R=[{id:"stress",name:"Stress Management",icon:"\ud83e\uddd8\u200d\u2640\ufe0f",description:"Reduce stress and anxiety"},{id:"productivity",name:"Productivity",icon:"\u26a1",description:"Improve focus and efficiency"},{id:"health",name:"Physical Health",icon:"\ud83d\udcaa",description:"Build strength and wellness"},{id:"energy",name:"Energy & Mood",icon:"\ud83d\udd0b",description:"Boost energy and positivity"},{id:"sleep",name:"Sleep & Recovery",icon:"\ud83d\ude34",description:"Better rest and recovery"}],L=[{id:"beginner",name:"Beginner",description:"Easy to start, low commitment",color:"green"},{id:"intermediate",name:"Intermediate",description:"Moderate effort required",color:"yellow"},{id:"advanced",name:"Advanced",description:"Challenging, high commitment",color:"red"}],O=[{id:"none",name:"No Equipment",description:"Can be done anywhere"},{id:"minimal",name:"Minimal Equipment",description:"Basic items you likely have"},{id:"equipment",name:"Special Equipment",description:"Requires specific gear"}],z=()=>"basic"===o?F.title.trim()&&F.description.trim()&&F.timeMinutes>0:"frequency"===o?void 0!==d.type:"details"===o?F.instructions.trim():F.goalTags.length>0&&F.lifestyleTags.length>0&&F.timeTags.length>0;return(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,g.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:A?"Edit Habit":"Create New Habit"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:(()=>{switch(o){case"basic":return"Basic Information";case"frequency":return"Frequency & Schedule";case"details":return"Category & Instructions";case"preferences":return"Goals & Preferences"}})()})]}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:t,children:"\u2715"})]}),(0,g.jsx)("div",{className:"flex items-center mt-4 space-x-2",children:["basic","frequency","details","preferences"].map((e,t)=>{const n=t<=["basic","frequency","details","preferences"].indexOf(o);return(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(n?"bg-primary-600":"bg-gray-300")}),t<3&&(0,g.jsx)("div",{className:"w-8 h-0.5 ".concat(n?"bg-primary-600":"bg-gray-300")})]},e)})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!M)return;B();let r=!1;if(A){const e={title:F.title,description:F.description,timeMinutes:F.timeMinutes,category:F.category,difficulty:F.difficulty,equipment:F.equipment,instructions:F.instructions,goalTags:F.goalTags,lifestyleTags:F.lifestyleTags,timeTags:F.timeTags,frequency:d,reminders:(0,q.hI)()};r=await I(A.id,e)}else{r=!!await T(M.id)}r&&(P(),n(),t())},children:[(0,g.jsx)("div",{className:"px-6 py-4 max-h-[calc(90vh-200px)] overflow-y-auto",children:(()=>{var e,t,n;switch(o){case"basic":return(0,g.jsxs)("div",{className:"space-y-6",children:[!A&&!i&&(0,g.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Need inspiration?"}),(0,g.jsx)("p",{className:"text-sm text-blue-700",children:"Choose from proven habit templates"})]}),(0,g.jsx)(x,{type:"button",variant:"outline",size:"sm",onClick:()=>a(!0),children:"Browse Templates"})]})}),i&&(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:"Habit Templates"}),(0,g.jsx)(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(!1),children:"\u2715"})]})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:W.map((e,t)=>(0,g.jsxs)("div",{className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-300 hover:bg-primary-50 transition-colors",onClick:()=>(e=>{S({title:e.title,description:e.description,category:e.category,timeMinutes:e.timeMinutes,difficulty:e.difficulty,instructions:e.instructions,equipment:"none",goalTags:[],lifestyleTags:["professional","parent","student"],timeTags:["flexible"]}),h((0,q.Up)()),a(!1)})(e),children:[(0,g.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-500",children:[(0,g.jsxs)("span",{children:[e.timeMinutes," min"]}),(0,g.jsx)("span",{children:"\u2022"}),(0,g.jsx)("span",{className:"capitalize",children:e.difficulty}),(0,g.jsx)("span",{children:"\u2022"}),(0,g.jsx)("span",{className:"capitalize",children:e.category})]})]},t))})})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)(j,{label:"Habit Title *",placeholder:"e.g., 10-minute morning walk",value:F.title,onChange:e=>S({title:e.target.value}),error:N.title,maxLength:60}),(0,g.jsx)(k,{label:"Description *",placeholder:"Brief description of what this habit involves...",value:F.description,onChange:e=>S({description:e.target.value}),error:N.description,maxLength:150,rows:2}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsx)(j,{type:"number",label:"Duration (minutes) *",placeholder:"5",value:F.timeMinutes,onChange:e=>S({timeMinutes:parseInt(e.target.value)||0}),error:N.timeMinutes,min:1,max:120}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),(0,g.jsx)("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",value:F.equipment,onChange:e=>S({equipment:e.target.value}),children:O.map(e=>(0,g.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})]})]});case"frequency":return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"text-center mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How often will you do this habit?"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Choose the frequency that works best for your lifestyle"})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("daily"===d.type?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"),onClick:()=>h((0,q.Up)()),children:(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("div",{className:"text-2xl mt-1",children:"\ud83d\udcc5"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold ".concat("daily"===d.type?"text-primary-900":"text-gray-900"),children:"Daily Habit"}),(0,g.jsx)("div",{className:"text-sm ".concat("daily"===d.type?"text-primary-700":"text-gray-600"),children:"Do this habit every day"}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Best for building consistent routines like meditation, reading, or exercise"})]})]})}),(0,g.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("weekly"===d.type?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"),onClick:()=>h((0,q.cX)(3,[])),children:(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("div",{className:"text-2xl mt-1",children:"\ud83d\udcca"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold ".concat("weekly"===d.type?"text-primary-900":"text-gray-900"),children:"Weekly Goal"}),(0,g.jsx)("div",{className:"text-sm ".concat("weekly"===d.type?"text-primary-700":"text-gray-600"),children:"Set a target number of times per week"}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Perfect for gym sessions, social activities, or learning new skills"})]})]})}),(0,g.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("periodic"===d.type?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"),onClick:()=>h({type:"periodic",periodicTarget:{interval:"weekly",intervalCount:1}}),children:(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("div",{className:"text-2xl mt-1",children:"\ud83d\udd04"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold ".concat("periodic"===d.type?"text-primary-900":"text-gray-900"),children:"Periodic Habit"}),(0,g.jsx)("div",{className:"text-sm ".concat("periodic"===d.type?"text-primary-700":"text-gray-600"),children:"Set intervals like weekly, monthly, or quarterly"}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Great for maintenance tasks, reviews, or less frequent activities"})]})]})})]}),"weekly"===d.type&&(0,g.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,g.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"Weekly Goal Settings"}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"How many times per week?"}),(0,g.jsx)("select",{className:"block w-32 px-3 py-2 border border-blue-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",value:(null===(e=d.weeklyTarget)||void 0===e?void 0:e.sessionsPerWeek)||3,onChange:e=>{var t;return h((0,q.cX)(parseInt(e.target.value),(null===(t=d.weeklyTarget)||void 0===t?void 0:t.preferredDays)||[]))},children:[1,2,3,4,5,6,7].map(e=>(0,g.jsxs)("option",{value:e,children:[e," times"]},e))})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Preferred days (optional)"}),(0,g.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>{var t,n;const r=(null===(t=d.weeklyTarget)||void 0===t||null===(n=t.preferredDays)||void 0===n?void 0:n.includes(e))||!1;return(0,g.jsx)("button",{type:"button",className:"px-2 py-1 text-xs rounded ".concat(r?"bg-blue-200 text-blue-800 border border-blue-300":"bg-white text-blue-600 border border-blue-200 hover:bg-blue-50"),onClick:()=>{var t,n;const i=(null===(t=d.weeklyTarget)||void 0===t?void 0:t.preferredDays)||[],s=r?i.filter(t=>t!==e):[...i,e];h((0,q.cX)((null===(n=d.weeklyTarget)||void 0===n?void 0:n.sessionsPerWeek)||3,s))},children:e},e)})})]})]})]}),"periodic"===d.type&&(0,g.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,g.jsx)("h4",{className:"font-medium text-purple-900 mb-3",children:"Periodic Schedule"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-1",children:"Every"}),(0,g.jsx)("input",{type:"number",min:"1",max:"12",className:"block w-full px-3 py-2 border border-purple-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500",value:(null===(t=d.periodicTarget)||void 0===t?void 0:t.intervalCount)||1,onChange:e=>h((0,s.A)((0,s.A)({},d),{},{periodicTarget:(0,s.A)((0,s.A)({},d.periodicTarget),{},{intervalCount:parseInt(e.target.value)||1})}))})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-1",children:"Interval"}),(0,g.jsxs)("select",{className:"block w-full px-3 py-2 border border-purple-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500",value:(null===(n=d.periodicTarget)||void 0===n?void 0:n.interval)||"weekly",onChange:e=>h((0,s.A)((0,s.A)({},d),{},{periodicTarget:(0,s.A)((0,s.A)({},d.periodicTarget),{},{interval:e.target.value})})),children:[(0,g.jsx)("option",{value:"weekly",children:"Week(s)"}),(0,g.jsx)("option",{value:"monthly",children:"Month(s)"}),(0,g.jsx)("option",{value:"quarterly",children:"Quarter(s)"}),(0,g.jsx)("option",{value:"yearly",children:"Year(s)"})]})]})]})]}),(0,g.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary"}),(0,g.jsx)("p",{className:"text-sm text-gray-700",children:(0,q.HC)(d)})]})]});case"details":return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Category *"}),(0,g.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:R.map(e=>{const t=F.category===e.id;return(0,g.jsx)("div",{className:"p-3 border-2 rounded-lg cursor-pointer transition-all ".concat(t?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"),onClick:()=>S({category:e.id}),children:(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("span",{className:"text-2xl",children:e.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium ".concat(t?"text-primary-900":"text-gray-900"),children:e.name}),(0,g.jsx)("div",{className:"text-sm ".concat(t?"text-primary-700":"text-gray-500"),children:e.description})]})]})},e.id)})}),N.category&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.category})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Difficulty Level *"}),(0,g.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:L.map(e=>{const t=F.difficulty===e.id,n={green:t?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300",yellow:t?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-yellow-300",red:t?"border-red-500 bg-red-50":"border-gray-200 hover:border-red-300"};return(0,g.jsxs)("div",{className:"p-3 border-2 rounded-lg cursor-pointer transition-all ".concat(n[e.color]),onClick:()=>S({difficulty:e.id}),children:[(0,g.jsx)("div",{className:"font-medium ".concat(t?"text-".concat(e.color,"-900"):"text-gray-900"),children:e.name}),(0,g.jsx)("div",{className:"text-sm ".concat(t?"text-".concat(e.color,"-700"):"text-gray-500"),children:e.description})]},e.id)})})]}),(0,g.jsx)(k,{label:"Step-by-step Instructions *",placeholder:"1. First step...\n2. Second step...\n3. Final step...",value:F.instructions,onChange:e=>S({instructions:e.target.value}),error:N.instructions,maxLength:500,rows:5,helpText:"Write clear, numbered steps that anyone can follow"})]});case"preferences":return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Which goals does this habit support? *"}),(0,g.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:p.map(e=>{const t=F.goalTags.includes(e.id);return(0,g.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",checked:t,onChange:t=>{const n=t.target.checked?[...F.goalTags,e.id]:F.goalTags.filter(t=>t!==e.id);S({goalTags:n})},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id)})}),N.goalTags&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.goalTags})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Which lifestyles is this suitable for? *"}),(0,g.jsx)("div",{className:"grid gap-2 sm:grid-cols-3",children:m.map(e=>{const t=F.lifestyleTags.includes(e.id);return(0,g.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",checked:t,onChange:t=>{const n=t.target.checked?[...F.lifestyleTags,e.id]:F.lifestyleTags.filter(t=>t!==e.id);S({lifestyleTags:n})},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id)})}),N.lifestyleTags&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.lifestyleTags})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"When can this habit be done? *"}),(0,g.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:f.map(e=>{const t=F.timeTags.includes(e.id);return(0,g.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",checked:t,onChange:t=>{const n=t.target.checked?[...F.timeTags,e.id]:F.timeTags.filter(t=>t!==e.id);S({timeTags:n})},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id)})}),N.timeTags&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.timeTags})]})]})}})()}),(0,g.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,g.jsx)("div",{className:"flex space-x-3",children:"basic"!==o&&(0,g.jsx)(x,{type:"button",variant:"outline",onClick:()=>{const e=["basic","frequency","details","preferences"],t=e.indexOf(o);u(e[t-1])},children:"Back"})}),(0,g.jsxs)("div",{className:"flex space-x-3",children:[(0,g.jsx)(x,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),"preferences"!==o?(0,g.jsx)(x,{type:"button",onClick:()=>{const e=["basic","frequency","details","preferences"],t=e.indexOf(o);u(e[t+1])},disabled:!z(),children:"Next"}):(0,g.jsx)(x,{type:"submit",isLoading:E,disabled:!z()||E,children:A?"Update Habit":"Create Habit"})]})]})]})]})})}const Y=e=>{let{habit:t,progress:n,onComplete:i,onSkip:s,onDelete:a,onViewResearch:o,isCompleted:l,showActions:c=!1,onEdit:u}=e;const[d,h]=(0,r.useState)(!0),m=t.researchIds&&t.researchIds.length>0,f=t.instructions.split("\n").filter(e=>e.trim()).map(e=>e.replace(/^\d+\.\s*/,"").trim());return(0,g.jsx)(b,{className:"transition-all duration-200 ".concat(l?"bg-green-50 border-green-200":"hover:shadow-md bg-white"),children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,g.jsx)("button",{onClick:()=>{i(t.id)},className:"w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all ".concat(l?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-500 hover:bg-green-50"),"aria-label":"".concat(l?"Mark incomplete":"Complete"," ").concat(t.title),children:l&&(0,g.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold ".concat(l?"text-green-900":"text-gray-900"),children:t.title}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:[t.timeMinutes," min"]}),t.difficulty&&(0,g.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:t.difficulty})]})]})]}),(0,g.jsx)("button",{onClick:()=>h(!d),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":d?"Collapse details":"Expand details",children:(0,g.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d&&(0,g.jsxs)("div",{className:"space-y-4",children:[t.description&&(0,g.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.description}),(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,g.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"How to do it:"}),(0,g.jsx)("ol",{className:"space-y-2",children:f.map((e,t)=>(0,g.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,g.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full flex items-center justify-center",children:t+1}),(0,g.jsx)("span",{className:"text-sm text-gray-700 leading-relaxed",children:e})]},t))})]}),t.description&&t.description.length>100&&(0,g.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,g.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Why it works:"}),(0,g.jsx)("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.description})]}),m&&o&&(0,g.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[(0,g.jsxs)("button",{onClick:()=>o(t.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center space-x-1 hover:underline",children:[(0,g.jsx)("span",{children:"\ud83d\udd2c"}),(0,g.jsx)("span",{children:"View Research & Science"})]}),(0,g.jsxs)("span",{className:"text-xs text-gray-500",children:[t.researchIds.length," studies"]})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[(0,g.jsx)("div",{className:"flex items-center space-x-2",children:!l&&s&&(0,g.jsx)("button",{onClick:()=>s(t.id),className:"text-sm px-3 py-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Skip Today"})}),(0,g.jsx)("div",{className:"flex items-center space-x-2",children:c&&(0,g.jsxs)(g.Fragment,{children:[u&&(0,g.jsx)("button",{onClick:u,className:"text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",children:"Edit"}),a&&(0,g.jsxs)("button",{onClick:()=>a(t.id),className:"text-sm px-3 py-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors flex items-center space-x-1",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,g.jsx)("span",{children:"Delete"})]})]})})]})]})})};function Q(){}function $(){}const J=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,X=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,Z={};function ee(e,t){return((t||Z).jsx?X:J).test(e)}const te=/[ \t\n\f\r]/g;function ne(e){return""===e.replace(te,"")}class re{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function ie(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new re(n,r,t)}function se(e){return e.toLowerCase()}re.prototype.normal={},re.prototype.property={},re.prototype.space=void 0;class ae{constructor(e,t){this.attribute=t,this.property=e}}ae.prototype.attribute="",ae.prototype.booleanish=!1,ae.prototype.boolean=!1,ae.prototype.commaOrSpaceSeparated=!1,ae.prototype.commaSeparated=!1,ae.prototype.defined=!1,ae.prototype.mustUseProperty=!1,ae.prototype.number=!1,ae.prototype.overloadedBoolean=!1,ae.prototype.property="",ae.prototype.spaceSeparated=!1,ae.prototype.space=void 0;let oe=0;const le=pe(),ce=pe(),ue=pe(),de=pe(),he=pe(),me=pe(),fe=pe();function pe(){return 2**++oe}const ge=Object.keys(e);class ye extends ae{constructor(t,n,r,i){let s=-1;if(super(t,n),xe(this,"space",i),"number"===typeof r)for(;++s<ge.length;){const t=ge[s];xe(this,ge[s],(r&e[t])===e[t])}}}function xe(e,t,n){n&&(e[t]=n)}function be(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new ye(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[se(r)]=r,n[se(s.attribute)]=r}return new re(t,n,e.space)}ye.prototype.defined=!0;const ve=be({properties:{ariaActiveDescendant:null,ariaAtomic:ce,ariaAutoComplete:null,ariaBusy:ce,ariaChecked:ce,ariaColCount:de,ariaColIndex:de,ariaColSpan:de,ariaControls:he,ariaCurrent:null,ariaDescribedBy:he,ariaDetails:null,ariaDisabled:ce,ariaDropEffect:he,ariaErrorMessage:null,ariaExpanded:ce,ariaFlowTo:he,ariaGrabbed:ce,ariaHasPopup:null,ariaHidden:ce,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:he,ariaLevel:de,ariaLive:null,ariaModal:ce,ariaMultiLine:ce,ariaMultiSelectable:ce,ariaOrientation:null,ariaOwns:he,ariaPlaceholder:null,ariaPosInSet:de,ariaPressed:ce,ariaReadOnly:ce,ariaRelevant:null,ariaRequired:ce,ariaRoleDescription:he,ariaRowCount:de,ariaRowIndex:de,ariaRowSpan:de,ariaSelected:ce,ariaSetSize:de,ariaSort:null,ariaValueMax:de,ariaValueMin:de,ariaValueNow:de,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function De(e,t){return t in e?e[t]:t}function we(e,t){return De(e,t.toLowerCase())}const Ce=be({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:me,acceptCharset:he,accessKey:he,action:null,allow:null,allowFullScreen:le,allowPaymentRequest:le,allowUserMedia:le,alt:null,as:null,async:le,autoCapitalize:null,autoComplete:he,autoFocus:le,autoPlay:le,blocking:he,capture:null,charSet:null,checked:le,cite:null,className:he,cols:de,colSpan:null,content:null,contentEditable:ce,controls:le,controlsList:he,coords:de|me,crossOrigin:null,data:null,dateTime:null,decoding:null,default:le,defer:le,dir:null,dirName:null,disabled:le,download:ue,draggable:ce,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:le,formTarget:null,headers:he,height:de,hidden:ue,high:de,href:null,hrefLang:null,htmlFor:he,httpEquiv:he,id:null,imageSizes:null,imageSrcSet:null,inert:le,inputMode:null,integrity:null,is:null,isMap:le,itemId:null,itemProp:he,itemRef:he,itemScope:le,itemType:he,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:le,low:de,manifest:null,max:null,maxLength:de,media:null,method:null,min:null,minLength:de,multiple:le,muted:le,name:null,nonce:null,noModule:le,noValidate:le,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:le,optimum:de,pattern:null,ping:he,placeholder:null,playsInline:le,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:le,referrerPolicy:null,rel:he,required:le,reversed:le,rows:de,rowSpan:de,sandbox:he,scope:null,scoped:le,seamless:le,selected:le,shadowRootClonable:le,shadowRootDelegatesFocus:le,shadowRootMode:null,shape:null,size:de,sizes:null,slot:null,span:de,spellCheck:ce,src:null,srcDoc:null,srcLang:null,srcSet:null,start:de,step:null,style:null,tabIndex:de,target:null,title:null,translate:null,type:null,typeMustMatch:le,useMap:null,value:ce,width:de,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:he,axis:null,background:null,bgColor:null,border:de,borderColor:null,bottomMargin:de,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:le,declare:le,event:null,face:null,frame:null,frameBorder:null,hSpace:de,leftMargin:de,link:null,longDesc:null,lowSrc:null,marginHeight:de,marginWidth:de,noResize:le,noHref:le,noShade:le,noWrap:le,object:null,profile:null,prompt:null,rev:null,rightMargin:de,rules:null,scheme:null,scrolling:ce,standby:null,summary:null,text:null,topMargin:de,valueType:null,version:null,vAlign:null,vLink:null,vSpace:de,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:le,disableRemotePlayback:le,prefix:null,property:null,results:de,security:null,unselectable:null},space:"html",transform:we}),je=be({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fe,accentHeight:de,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:de,amplitude:de,arabicForm:null,ascent:de,attributeName:null,attributeType:null,azimuth:de,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:de,by:null,calcMode:null,capHeight:de,className:he,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:de,diffuseConstant:de,direction:null,display:null,dur:null,divisor:de,dominantBaseline:null,download:le,dx:null,dy:null,edgeMode:null,editable:null,elevation:de,enableBackground:null,end:null,event:null,exponent:de,externalResourcesRequired:null,fill:null,fillOpacity:de,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:me,g2:me,glyphName:me,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:de,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:de,horizOriginX:de,horizOriginY:de,id:null,ideographic:de,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:de,k:de,k1:de,k2:de,k3:de,k4:de,kernelMatrix:fe,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:de,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:de,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:de,overlineThickness:de,paintOrder:null,panose1:null,path:null,pathLength:de,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:he,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:de,pointsAtY:de,pointsAtZ:de,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fe,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fe,rev:fe,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fe,requiredFeatures:fe,requiredFonts:fe,requiredFormats:fe,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:de,specularExponent:de,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:de,strikethroughThickness:de,string:null,stroke:null,strokeDashArray:fe,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:de,strokeOpacity:de,strokeWidth:null,style:null,surfaceScale:de,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fe,tabIndex:de,tableValues:null,target:null,targetX:de,targetY:de,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fe,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:de,underlineThickness:de,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:de,values:null,vAlphabetic:de,vMathematical:de,vectorEffect:null,vHanging:de,vIdeographic:de,version:null,vertAdvY:de,vertOriginX:de,vertOriginY:de,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:de,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:De}),ke=be({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Fe=be({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:we}),Ne=be({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Ee=ie([ve,Ce,ke,Fe,Ne],"html"),Ae=ie([ve,je,ke,Fe,Ne],"svg"),Se=/[A-Z]/g,_e=/-[a-z]/g,Be=/^data[-\w.:]+$/i;function Te(e){return"-"+e.toLowerCase()}function Ie(e){return e.charAt(1).toUpperCase()}const Pe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Me=n(294);const Re=Oe("end"),Le=Oe("start");function Oe(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function ze(e){return e&&"object"===typeof e?"position"in e||"type"in e?qe(e.position):"start"in e||"end"in e?qe(e):"line"in e||"column"in e?He(e):"":""}function He(e){return Ue(e&&e.line)+":"+Ue(e&&e.column)}function qe(e){return He(e&&e.start)+"-"+He(e&&e.end)}function Ue(e){return e&&"number"===typeof e?e:1}class Ve extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",i={},a=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:(0,s.A)({},t)),"string"===typeof e?r=e:!i.cause&&e&&(a=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const o=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=ze(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&"string"===typeof i.cause.stack?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ve.prototype.file="",Ve.prototype.name="",Ve.prototype.reason="",Ve.prototype.message="",Ve.prototype.stack="",Ve.prototype.column=void 0,Ve.prototype.line=void 0,Ve.prototype.ancestors=void 0,Ve.prototype.cause=void 0,Ve.prototype.fatal=void 0,Ve.prototype.place=void 0,Ve.prototype.ruleId=void 0,Ve.prototype.source=void 0;const We={}.hasOwnProperty,Ke=new Map,Ge=/[A-Z]/g,Ye=new Set(["table","tbody","thead","tfoot","tr"]),Qe=new Set(["td","th"]),$e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Je(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,s){const a=Array.isArray(i.children),o=Le(n);return t(r,i,s,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,s){const a=Array.isArray(i.children)?n:t;return s?a(r,i,s):a(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Ae:Ee,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=Xe(i,e,void 0);return s&&"string"!==typeof s?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Xe(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=Ae,e.schema=i);e.ancestors.push(t);const s=rt(e,t.tagName,!1),a=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&We.call(t.properties,i)){const s=nt(e,i,t.properties[i]);if(s){const[i,a]=s;e.tableCellAlignToStyle&&"align"===i&&"string"===typeof a&&Qe.has(t.tagName)?r=a:n[i]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=tt(e,t);Ye.has(t.tagName)&&(o=o.filter(function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&ne(t.value):ne(t));var t}));return Ze(e,a,s,t),et(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}it(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=Ae,e.schema=i);e.ancestors.push(t);const s=null===t.name?e.Fragment:rt(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];Q(t.type);const i=t.expression;Q(i.type);const s=i.properties[0];Q(s.type),Object.assign(n,e.evaluater.evaluateExpression(s.argument))}else it(e,t.position);else{const i=r.name;let s;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];Q(t.type),s=e.evaluater.evaluateExpression(t.expression)}else it(e,t.position);else s=null===r.value||r.value;n[i]=s}return n}(e,t),o=tt(e,t);return Ze(e,a,s,t),et(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);it(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return et(r,tt(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Ze(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function et(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function tt(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Ke;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const e="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const o=Xe(e,s,a);void 0!==o&&n.push(o)}return n}function nt(e,t,n){const r=function(e,t){const n=se(t);let r=t,i=ae;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Be.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(_e,Ie);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!_e.test(e)){let n=e.replace(Se,Te);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=ye}return new i(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){try{return Me(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new Ve("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=$e+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)We.call(e,n)&&(t[st(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Pe[r.property]||r.property:r.attribute,n]}}function rt(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=ee(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=ee(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return We.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);it(e)}function it(e,t){const n=new Ve("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=$e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function st(e){let t=e.replace(Ge,at);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function at(e){return"-"+e.toLowerCase()}const ot={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},lt={};function ct(e,t){const n=t||lt;return ut(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function ut(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return dt(e.children,t,n)}return Array.isArray(e)?dt(e,t,n):""}function dt(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ut(e[i],t,n);return r.join("")}function ht(e,t,n,r){const i=e.length;let s,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);a<r.length;)s=r.slice(a,a+1e4),s.unshift(t,0),e.splice(...s),a+=1e4,t+=1e4}function mt(e,t){return e.length>0?(ht(e,e.length,0,t),e):t}class ft{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&pt(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),pt(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),pt(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);pt(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);pt(this.left,t.reverse())}}}function pt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function gt(e){const t={};let n,r,i,a,o,l,c,u=-1;const d=new ft(e);for(;++u<d.length;){for(;u in t;)u=t[u];if(n=d.get(u),u&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(u-1)[1].type&&(l=n[1]._tokenizer.events,i=0,i<l.length&&"lineEndingBlank"===l[i][1].type&&(i+=2),i<l.length&&"content"===l[i][1].type))for(;++i<l.length&&"content"!==l[i][1].type;)"chunkText"===l[i][1].type&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,yt(d,u)),u=t[u],c=!0);else if(n[1]._container){for(i=u,r=void 0;i--;)if(a=d.get(i),"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type)"enter"===a[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);else if("linePrefix"!==a[1].type&&"listItemIndent"!==a[1].type)break;r&&(n[1].end=(0,s.A)({},d.get(r)[1].start),o=d.slice(r,u),o.unshift(n),d.splice(r,u-r+1,o))}}return ht(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function yt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],c={};let u,d,h=-1,m=n,f=0,p=0;const g=[p];for(;m;){for(;e.get(++i)[1]!==m;);s.push(i),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),d&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(p=h+1,g.push(p),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=s.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const xt={}.hasOwnProperty;function bt(e){const t={};let n=-1;for(;++n<e.length;)vt(t,e[n]);return t}function vt(e,t){let n;for(n in t){const r=(xt.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){xt.call(r,s)||(r[s]=[]);const e=i[s];Dt(r[s],Array.isArray(e)?e:e?[e]:[])}}}function Dt(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);ht(e,0,0,r)}const wt=It(/[A-Za-z]/),Ct=It(/[\dA-Za-z]/),jt=It(/[#-'*+\--9=?A-Z^-~]/);function kt(e){return null!==e&&(e<32||127===e)}const Ft=It(/\d/),Nt=It(/[\dA-Fa-f]/),Et=It(/[!-/:-@[-`{-~]/);function At(e){return null!==e&&e<-2}function St(e){return null!==e&&(e<0||32===e)}function _t(e){return-2===e||-1===e||32===e}const Bt=It(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Tt=It(/\s/);function It(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Pt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return function(r){if(_t(r))return e.enter(n),a(r);return t(r)};function a(r){return _t(r)&&s++<i?(e.consume(r),a):(e.exit(n),t(r))}}const Mt={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Pt(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):At(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const Rt={tokenize:function(e){const t=this,n=[];let r,i,a,o=0;return l;function l(r){if(o<n.length){const i=n[o];return t.containerState=i[1],e.attempt(i[0].continuation,c,u)(r)}return u(r)}function c(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&b();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}x(o);let l=n;for(;l<t.events.length;)t.events[l][1].end=(0,s.A)({},i),l++;return ht(t.events,a+1,0,t.events.slice(n)),t.events.length=l,u(e)}return l(e)}function u(i){if(o===n.length){if(!r)return m(i);if(r.currentConstruct&&r.currentConstruct.concrete)return p(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Lt,d,h)(i)}function d(e){return r&&b(),x(o),m(e)}function h(e){return t.parser.lazy[t.now().line]=o!==n.length,a=t.now().offset,p(e)}function m(n){return t.containerState={},e.attempt(Lt,f,p)(n)}function f(e){return o++,n.push([t.currentConstruct,t.containerState]),m(e)}function p(n){return null===n?(r&&b(),x(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),g(n))}function g(n){return null===n?(y(e.exit("chunkFlow"),!0),x(0),void e.consume(n)):At(n)?(e.consume(n),y(e.exit("chunkFlow")),o=0,t.interrupt=void 0,l):(e.consume(n),g)}function y(e,n){const l=t.sliceStream(e);if(n&&l.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(l),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let i,l,c=n;for(;c--;)if("exit"===t.events[c][0]&&"chunkFlow"===t.events[c][1].type){if(i){l=t.events[c][1].end;break}i=!0}for(x(o),e=n;e<t.events.length;)t.events[e][1].end=(0,s.A)({},l),e++;ht(t.events,c+1,0,t.events.slice(n)),t.events.length=e}}function x(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function b(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Lt={tokenize:function(e,t,n){return Pt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Ot={partial:!0,tokenize:function(e,t,n){return function(t){return _t(t)?Pt(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||At(e)?t(e):n(e)}}};const zt={resolve:function(e){return gt(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):At(t)?e.check(Ht,s,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},Ht={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Pt(e,i,"linePrefix")};function i(i){if(null===i||At(i))return n(i);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}};const qt={tokenize:function(e){const t=this,n=e.attempt(Ot,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,Pt(e,e.attempt(this.parser.constructs.flow,r,e.attempt(zt,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Ut={resolveAll:Gt()},Vt=Kt("string"),Wt=Kt("text");function Kt(e){return{resolveAll:Gt("text"===e?Yt:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,s,a);return s;function s(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Gt(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function Yt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let a,o=i.length,l=-1,c=0;for(;o--;){const e=i[o];if("string"===typeof e){for(l=e.length;32===e.charCodeAt(l-1);)c++,l--;if(l)break;l=-1}else if(-2===e)a=!0,c++;else if(-1!==e){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const i={type:n===e.length||a||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:(0,s.A)({},r.end)};r.end=(0,s.A)({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const Qt={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,s(e)}(t)};function s(s){return s===r?(e.enter("thematicBreakSequence"),a(s)):i>=3&&(null===s||At(s))?(e.exit("thematicBreak"),t(s)):n(s)}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),_t(t)?Pt(e,s,"whitespace")(t):s(t))}}};const $t={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ot,i,s);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Pt(e,t,"listItemIndent",r.containerState.size+1)(n)}function s(n){return r.containerState.furtherBlankLines||!_t(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Xt,t,a)(n))}function a(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Pt(e,e.attempt($t,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Ft(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Qt,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Ft(t)&&++a<10?(e.consume(t),o):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Ot,r.interrupt?n:c,e.attempt(Jt,d,u))}function c(e){return r.containerState.initialBlankLine=!0,s++,d(e)}function u(t){return _t(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Jt={partial:!0,tokenize:function(e,t,n){const r=this;return Pt(e,function(e){const i=r.events[r.events.length-1];return!_t(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Xt={partial:!0,tokenize:function(e,t,n){const r=this;return Pt(e,function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const Zt={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(_t(t))return Pt(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(Zt,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return _t(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function en(e,t,n,r,i,s,a,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(s),e.consume(t),e.exit(s),d;if(null===t||32===t||41===t||kt(t))return n(t);return e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(s),e.consume(n),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||At(t)?n(t):(e.consume(t),92===t?m:h)}function m(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(i){return u||null!==i&&41!==i&&!St(i)?u<c&&40===i?(e.consume(i),u++,f):41===i?(e.consume(i),u--,f):null===i||32===i||40===i||kt(i)?n(i):(e.consume(i),92===i?p:f):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(i))}function p(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function tn(e,t,n,r,i,s){const a=this;let o,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(s),c};function c(d){return l>999||null===d||91===d||93===d&&!o||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(s),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):At(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||At(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!_t(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function nn(e,t,n,r,i,s){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(s),l(n))}function l(t){return t===a?(e.exit(s),o(a)):null===t?n(t):At(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Pt(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||At(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function rn(e,t){let n;return function r(i){if(At(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(_t(i))return Pt(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function sn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const an={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return tn.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function s(t){return i=sn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return St(t)?rn(e,o)(t):o(t)}function o(t){return en(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(on,c,c)(t)}function c(t){return _t(t)?Pt(e,u,"whitespace")(t):u(t)}function u(s){return null===s||At(s)?(e.exit("definition"),r.parser.defined.push(i),t(s)):n(s)}}},on={partial:!0,tokenize:function(e,t,n){return function(t){return St(t)?rn(e,r)(t):n(t)};function r(t){return nn(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return _t(t)?Pt(e,s,"whitespace")(t):s(t)}function s(e){return null===e||At(e)?t(e):n(e)}}};const ln={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Pt(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?s(e):n(e)}function s(t){return null===t?o(t):At(t)?e.attempt(cn,s,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||At(t)?(e.exit("codeFlowValue"),s(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},cn={partial:!0,tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):At(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Pt(e,s,"linePrefix",5)(t)}function s(e){const s=r.events[r.events.length-1];return s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(e):At(e)?i(e):n(e)}}};const un={name:"headingAtx",resolve:function(e,t){let n,r,i=e.length-2,s=3;"whitespace"===e[s][1].type&&(s+=2);i-2>s&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(s===i-1||i-4>s&&"whitespace"===e[i-2][1].type)&&(i-=s+1===i?2:4);i>s&&(n={type:"atxHeadingText",start:e[s][1].start,end:e[i][1].end},r={type:"chunkText",start:e[s][1].start,end:e[i][1].end,contentType:"text"},ht(e,s,i-s+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||St(t)?(e.exit("atxHeadingSequence"),s(t)):n(t)}function s(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||At(n)?(e.exit("atxHeading"),t(n)):_t(n)?Pt(e,s,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),s(t))}function o(t){return null===t||35===t||St(t)?(e.exit("atxHeadingText"),s(t)):(e.consume(t),o)}}};const dn={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const o={type:"setextHeading",start:(0,s.A)({},e[n][1].start),end:(0,s.A)({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=(0,s.A)({},e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e},tokenize:function(e,t,n){const r=this;let i;return function(t){let a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),s(t)}(t);return n(t)};function s(t){return t===i?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),_t(t)?Pt(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||At(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const hn=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mn=["pre","script","style","textarea"],fn={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let i,s,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),s=!0,m):63===o?(e.consume(o),i=3,r.interrupt?t:I):wt(o)?(e.consume(o),a=String.fromCharCode(o),f):n(o)}function u(s){return 45===s?(e.consume(s),i=2,d):91===s?(e.consume(s),i=5,o=0,h):wt(s)?(e.consume(s),i=4,r.interrupt?t:I):n(s)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:I):n(i)}function h(i){const s="CDATA[";return i===s.charCodeAt(o++)?(e.consume(i),6===o?r.interrupt?t:F:h):n(i)}function m(t){return wt(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(o){if(null===o||47===o||62===o||St(o)){const l=47===o,c=a.toLowerCase();return l||s||!mn.includes(c)?hn.includes(a.toLowerCase())?(i=6,l?(e.consume(o),p):r.interrupt?t(o):F(o)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):s?g(o):y(o)):(i=1,r.interrupt?t(o):F(o))}return 45===o||Ct(o)?(e.consume(o),a+=String.fromCharCode(o),f):n(o)}function p(i){return 62===i?(e.consume(i),r.interrupt?t:F):n(i)}function g(t){return _t(t)?(e.consume(t),g):j(t)}function y(t){return 47===t?(e.consume(t),j):58===t||95===t||wt(t)?(e.consume(t),x):_t(t)?(e.consume(t),y):j(t)}function x(t){return 45===t||46===t||58===t||95===t||Ct(t)?(e.consume(t),x):b(t)}function b(t){return 61===t?(e.consume(t),v):_t(t)?(e.consume(t),b):y(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,D):_t(t)?(e.consume(t),v):w(t)}function D(t){return t===l?(e.consume(t),l=null,C):null===t||At(t)?n(t):(e.consume(t),D)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||St(t)?b(t):(e.consume(t),w)}function C(e){return 47===e||62===e||_t(e)?y(e):n(e)}function j(t){return 62===t?(e.consume(t),k):n(t)}function k(t){return null===t||At(t)?F(t):_t(t)?(e.consume(t),k):n(t)}function F(t){return 45===t&&2===i?(e.consume(t),S):60===t&&1===i?(e.consume(t),_):62===t&&4===i?(e.consume(t),P):63===t&&3===i?(e.consume(t),I):93===t&&5===i?(e.consume(t),T):!At(t)||6!==i&&7!==i?null===t||At(t)?(e.exit("htmlFlowData"),N(t)):(e.consume(t),F):(e.exit("htmlFlowData"),e.check(pn,M,N)(t))}function N(t){return e.check(gn,E,M)(t)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A}function A(t){return null===t||At(t)?N(t):(e.enter("htmlFlowData"),F(t))}function S(t){return 45===t?(e.consume(t),I):F(t)}function _(t){return 47===t?(e.consume(t),a="",B):F(t)}function B(t){if(62===t){const n=a.toLowerCase();return mn.includes(n)?(e.consume(t),P):F(t)}return wt(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),B):F(t)}function T(t){return 93===t?(e.consume(t),I):F(t)}function I(t){return 62===t?(e.consume(t),P):45===t&&2===i?(e.consume(t),I):F(t)}function P(t){return null===t||At(t)?(e.exit("htmlFlowData"),M(t)):(e.consume(t),P)}function M(n){return e.exit("htmlFlow"),t(n)}}},pn={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Ot,t,n)}}},gn={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(At(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const yn={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},xn={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),_t(t)?Pt(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===s?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===s?(i++,e.consume(t),u):i>=o?(e.exit("codeFencedFenceSequence"),_t(t)?Pt(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||At(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let s,a=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,s=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===s?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),_t(t)?Pt(e,c,"whitespace")(t):c(t))}function c(n){return null===n||At(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(yn,m,x)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||At(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):_t(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pt(e,d,"whitespace")(t)):96===t&&t===s?n(t):(e.consume(t),u)}function d(t){return null===t||At(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||At(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===s?n(t):(e.consume(t),h)}function m(t){return e.attempt(i,x,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),p}function p(t){return a>0&&_t(t)?Pt(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||At(t)?e.check(yn,m,x)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||At(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function x(n){return e.exit("codeFenced"),t(n)}}};const bn=document.createElement("i");function vn(e){const t="&"+e+";";bn.innerHTML=t;const n=bn.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const Dn={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,s,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,s=Ct,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=Nt,c):(e.enter("characterReferenceValue"),i=7,s=Ft,c(t))}function c(o){if(59===o&&a){const i=e.exit("characterReferenceValue");return s!==Ct||vn(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return s(o)&&a++<i?(e.consume(o),c):n(o)}}};const wn={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Et(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Cn={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Pt(e,t,"linePrefix")}}};function jn(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const kn={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&ht(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,i,a,o=e.length,l=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){l=2;break}}else"labelEnd"===n.type&&(i=o);const c={type:"labelLink"===e[r][1].type?"link":"image",start:(0,s.A)({},e[r][1].start),end:(0,s.A)({},e[e.length-1][1].end)},u={type:"label",start:(0,s.A)({},e[r][1].start),end:(0,s.A)({},e[i][1].end)},d={type:"labelText",start:(0,s.A)({},e[r+l+2][1].end),end:(0,s.A)({},e[i-2][1].start)};return a=[["enter",c,t],["enter",u,t]],a=mt(a,e.slice(r+1,r+l+3)),a=mt(a,[["enter",d,t]]),a=mt(a,jn(t.parser.constructs.insideSpan.null,e.slice(r+l+4,i-3),t)),a=mt(a,[["exit",d,t],e[i-2],e[i-1],["exit",u,t]]),a=mt(a,e.slice(i+1)),a=mt(a,[["exit",c,t]]),ht(e,r,e.length,a),e},tokenize:function(e,t,n){const r=this;let i,s,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){i=r.events[a][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return s=r.parser.defined.includes(sn(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(Fn,c,s?c:u)(t):91===t?e.attempt(Nn,c,s?l:u)(t):s?c(t):u(t)}function l(t){return e.attempt(En,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}}},Fn={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return St(t)?rn(e,i)(t):i(t)}function i(t){return 41===t?c(t):en(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function s(t){return St(t)?rn(e,o)(t):c(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?nn(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return St(t)?rn(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Nn={tokenize:function(e,t,n){const r=this;return function(t){return tn.call(r,e,i,s,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(sn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function s(e){return n(e)}}},En={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const An={name:"labelStartImage",resolveAll:kn.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),s):n(t)}function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function Sn(e){return null===e||St(e)||Tt(e)?1:Bt(e)?2:void 0}const _n={name:"attention",resolveAll:function(e,t){let n,r,i,a,o,l,c,u,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const h=(0,s.A)({},e[n][1].end),m=(0,s.A)({},e[d][1].start);Bn(h,-l),Bn(m,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:(0,s.A)({},e[n][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:(0,s.A)({},e[d][1].start),end:m},i={type:l>1?"strongText":"emphasisText",start:(0,s.A)({},e[n][1].end),end:(0,s.A)({},e[d][1].start)},r={type:l>1?"strong":"emphasis",start:(0,s.A)({},a.start),end:(0,s.A)({},o.end)},e[n][1].end=(0,s.A)({},a.start),e[d][1].start=(0,s.A)({},o.end),c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=mt(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=mt(c,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),c=mt(c,jn(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),c=mt(c,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(u=2,c=mt(c,[["enter",e[d][1],t],["exit",e[d][1],t]])):u=0,ht(e,n-1,d-n+3,c),d=n+c.length-u-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Sn(r);let s;return function(t){return s=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===s)return e.consume(o),a;const l=e.exit("attentionSequence"),c=Sn(o),u=!c||2===c&&i||n.includes(o),d=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===s?u:u&&(i||!d)),l._close=Boolean(42===s?d:d&&(c||!u)),t(o)}}};function Bn(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Tn={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return wt(t)?(e.consume(t),s):64===t?n(t):l(t)}function s(e){return 43===e||45===e||46===e||Ct(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||Ct(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||kt(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):jt(t)?(e.consume(t),l):n(t)}function c(e){return Ct(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Ct(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const In={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,s,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),v):63===t?(e.consume(t),x):wt(t)?(e.consume(t),C):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),s=0,m):wt(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):At(t)?(a=u,B(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?_(e):45===e?d(e):u(e)}function m(t){const r="CDATA[";return t===r.charCodeAt(s++)?(e.consume(t),6===s?f:m):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),p):At(t)?(a=f,B(t)):(e.consume(t),f)}function p(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?_(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?_(t):At(t)?(a=y,B(t)):(e.consume(t),y)}function x(t){return null===t?n(t):63===t?(e.consume(t),b):At(t)?(a=x,B(t)):(e.consume(t),x)}function b(e){return 62===e?_(e):x(e)}function v(t){return wt(t)?(e.consume(t),D):n(t)}function D(t){return 45===t||Ct(t)?(e.consume(t),D):w(t)}function w(t){return At(t)?(a=w,B(t)):_t(t)?(e.consume(t),w):_(t)}function C(t){return 45===t||Ct(t)?(e.consume(t),C):47===t||62===t||St(t)?j(t):n(t)}function j(t){return 47===t?(e.consume(t),_):58===t||95===t||wt(t)?(e.consume(t),k):At(t)?(a=j,B(t)):_t(t)?(e.consume(t),j):_(t)}function k(t){return 45===t||46===t||58===t||95===t||Ct(t)?(e.consume(t),k):F(t)}function F(t){return 61===t?(e.consume(t),N):At(t)?(a=F,B(t)):_t(t)?(e.consume(t),F):j(t)}function N(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,E):At(t)?(a=N,B(t)):_t(t)?(e.consume(t),N):(e.consume(t),A)}function E(t){return t===i?(e.consume(t),i=void 0,S):null===t?n(t):At(t)?(a=E,B(t)):(e.consume(t),E)}function A(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||St(t)?j(t):(e.consume(t),A)}function S(e){return 47===e||62===e||St(e)?j(e):n(e)}function _(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function B(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return _t(t)?Pt(e,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):I(t)}function I(t){return e.enter("htmlTextData"),a(t)}}};const Pn={name:"labelStartLink",resolveAll:kn.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Mn={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return At(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Rn={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,i,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),s++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):At(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||At(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};const Ln={42:$t,43:$t,45:$t,48:$t,49:$t,50:$t,51:$t,52:$t,53:$t,54:$t,55:$t,56:$t,57:$t,62:Zt},On={91:an},zn={[-2]:ln,[-1]:ln,32:ln},Hn={35:un,42:Qt,45:[dn,Qt],60:fn,61:dn,95:Qt,96:xn,126:xn},qn={38:Dn,92:wn},Un={[-5]:Cn,[-4]:Cn,[-3]:Cn,33:An,38:Dn,42:_n,60:[Tn,In],91:Pn,92:[Mn,wn],93:kn,95:_n,96:Rn},Vn={null:[_n,Ut]},Wn={null:[42,95]},Kn={null:[]};function Gn(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[],l=!0;const c={attempt:x(function(e,t){b(e,t.from)}),check:x(y),consume:function(e){At(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,v()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:x(y,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,v()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if("string"===typeof s)a=s;else switch(s){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(s)}i=-2===s,r.push(a)}return r.join("")}(m(e),t)},sliceStream:m,write:function(e){if(a=mt(a,e),p(),null!==a[a.length-1])return[];return b(t,0),u.events=jn(s,u.events,u),u.events}};let d,h=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function m(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:s}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:s}}function p(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function x(e,t){return function(n,i,s){let a,d,h,m;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function p(e){return a=e,d=0,0===e.length?s:g(e[d])}function g(e){return function(n){m=function(){const e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,s=Array.from(o);return{from:i,restore:a};function a(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,o=s,v()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return x(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,x)(n)}}function y(t){return l=!0,e(h,m),i}function x(e){return l=!0,m.restore(),++d<a.length?g(a[d]):s}}}function b(e,t){e.resolveAll&&!s.includes(e)&&s.push(e),e.resolve&&ht(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function v(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const Yn=/[\0\t\n\r]/g;function Qn(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const $n=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Jn(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Qn(n.slice(t?2:1),t?16:10)}return vn(n)||e}const Xn={}.hasOwnProperty;function Zn(e,n,r){return"string"!==typeof n&&(r=n,n=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(te),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(J),blockQuote:s(K),characterEscape:k,characterReference:k,codeFenced:s(G),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(G,a),codeText:s(Y,a),codeTextData:k,data:k,codeFlowValue:k,definition:s(Q),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s($),hardBreakEscape:s(X),hardBreakTrailing:s(X),htmlFlow:s(Z,a),htmlFlowData:k,htmlText:s(Z,a),htmlTextData:k,image:s(ee),label:a,link:s(te),listItem:s(re),listItemValue:h,listOrdered:s(ne,d),listUnordered:s(ne),paragraph:s(ie),reference:O,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(J),strong:s(se),thematicBreak:s(oe)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:W,autolinkProtocol:V,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:H,characterReferenceMarkerNumeric:H,characterReferenceValue:q,characterReference:U,codeFenced:l(g),codeFencedFence:p,codeFencedFenceInfo:m,codeFencedFenceMeta:f,codeFlowValue:F,codeIndented:l(y),codeText:l(_),codeTextData:F,data:F,definition:l(),definitionDestinationString:v,definitionLabelString:x,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(E),hardBreakTrailing:l(E),htmlFlow:l(A),htmlFlowData:F,htmlText:l(S),htmlTextData:F,image:l(T),label:P,labelText:I,lineEnding:N,link:l(B),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:M,resourceTitleString:R,resource:L,setextHeading:l(j),setextHeadingLineSequence:C,setextHeadingText:w,strong:l(),thematicBreak:l()}};tr(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const s={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:a,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];Xn.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},s),e[d][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||rr).call(s,void 0,e[0])}for(r.position={start:er(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:er(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,s,a,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||s||(s=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=o;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}s&&(!i||s<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(o,0,["enter",i,t[2]]),o++,n++,s=void 0,a=!0}}}return e[t][1]._spread=c,n}function s(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:er(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+ze({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||rr).call(this,e,r[0])}n.position.end=er(e.end)}function u(){return ct(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function x(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=sn(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function v(){const e=this.resume();this.stack[this.stack.length-1].url=e}function D(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function C(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function k(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:er(e.start),end:void 0},t.push(n)),this.stack.push(n)}function F(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=er(e.end)}function N(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=er(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(k.call(this,e),F.call(this,e))}function E(){this.data.atHardBreak=!0}function A(){const e=this.resume();this.stack[this.stack.length-1].value=e}function S(){const e=this.resume();this.stack[this.stack.length-1].value=e}function _(){const e=this.resume();this.stack[this.stack.length-1].value=e}function B(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function T(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace($n,Jn)}(t),n.identifier=sn(t).toLowerCase()}function P(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function M(){const e=this.resume();this.stack[this.stack.length-1].url=e}function R(){const e=this.resume();this.stack[this.stack.length-1].title=e}function L(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=sn(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function H(e){this.data.characterReferenceType=e.type}function q(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=Qn(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=vn(t)}this.stack[this.stack.length-1].value+=r}function U(e){this.stack.pop().position.end=er(e.end)}function V(e){F.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){F.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function K(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(r)(function(e){for(;!gt(e););return e}(function(e){const n={constructs:bt([t,...(e||{}).extensions||[]]),content:r(Mt),defined:[],document:r(Rt),flow:r(qt),lazy:{},string:r(Vt),text:r(Wt)};return n;function r(e){return function(t){return Gn(n,e,t)}}}(r).document().write(function(){let e,t=1,n="",r=!0;return function(i,s,a){const o=[];let l,c,u,d,h;for(i=n+("string"===typeof i?i.toString():new TextDecoder(s||void 0).decode(i)),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(Yn.lastIndex=u,l=Yn.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(u);break}if(10===h&&u===d&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<d&&(o.push(i.slice(u,d)),t+=d-u),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,n,!0))))}function er(e){return{line:e.line,column:e.column,offset:e.offset}}function tr(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?tr(e,r):nr(e,r)}}function nr(e,t){let n;for(n in t)if(Xn.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function rr(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ze({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ze({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ze({start:t.start,end:t.end})+") is still open")}function ir(e){const t=this;t.parser=function(n){return Zn(n,(0,s.A)((0,s.A)((0,s.A)({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const sr="object"===typeof self?self:globalThis,ar=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new sr[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new sr[s](a),i)};return r})(new Map,e)(0),or="",{toString:lr}={},{keys:cr}=Object,ur=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=lr.call(e).slice(8,-1);switch(n){case"Array":return[1,or];case"Object":return[2,or];case"Date":return[3,or];case"RegExp":return[4,or];case"Map":return[5,or];case"Set":return[6,or];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},dr=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},hr=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},s=r=>{if(n.has(r))return n.get(r);let[a,o]=ur(r);switch(a){case 0:{let t=r;switch(o){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return i([-1],r)}return i([a,t],r)}case 1:{if(o){let e=r;return"DataView"===o?e=new Uint8Array(r.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(r)),i([o,[...e]],r)}const e=[],t=i([a,e],r);for(const n of r)e.push(s(n));return t}case 2:{if(o)switch(o){case"BigInt":return i([o,r.toString()],r);case"Boolean":case"Number":case"String":return i([o,r.valueOf()],r)}if(t&&"toJSON"in r)return s(r.toJSON());const n=[],l=i([a,n],r);for(const t of cr(r))!e&&dr(ur(r[t]))||n.push([s(t),s(r[t])]);return l}case 3:return i([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([a,{source:e,flags:t}],r)}case 5:{const t=[],n=i([a,t],r);for(const[i,a]of r)(e||!dr(ur(i))&&!dr(ur(a)))&&t.push([s(i),s(a)]);return n}case 6:{const t=[],n=i([a,t],r);for(const i of r)!e&&dr(ur(i))||t.push(s(i));return n}}const{message:l}=r;return i([a,{name:o,message:l}],r)};return s})(!(t||n),!!t,new Map,r)(e),r},mr="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?ar(hr(e,t)):structuredClone(e):(e,t)=>ar(hr(e,t));function fr(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(37===s&&Ct(e.charCodeAt(n+1))&&Ct(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const t=e.charCodeAt(n+1);s<56320&&t>56319&&t<57344?(a=String.fromCharCode(s,t),i=1):a="\ufffd"}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function pr(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function gr(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const yr=function(e){if(null===e||void 0===e)return br;if("function"===typeof e)return xr(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=yr(e[n]);return xr(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return xr(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"===typeof e)return function(e){return xr(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function xr(e){return function(t,n,r){return Boolean(vr(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function br(){return!0}function vr(e){return null!==e&&"object"===typeof e&&"type"in e}const Dr=[],wr=!0,Cr=!1;function jr(e,t,n,r){let i;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):i=t;const s=yr(i),a=r?-1:1;!function e(i,o,l){const c=i&&"object"===typeof i?i:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=Dr;if((!t||s(i,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[wr,e];return null===e||void 0===e?Dr:[e]}(n(i,l)),h[0]===Cr))return h;if("children"in i&&i.children){const t=i;if(t.children&&"skip"!==h[0])for(u=(r?t.children.length:-1)+a,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===Cr)return c;u="number"===typeof c[1]?c[1]:u+a}}return h}}(e,void 0,[])()}function kr(e,t,n,r){let i,s,a;"function"===typeof t&&"function"!==typeof n?(s=void 0,a=t,i=n):(s=t,a=n,i=r),jr(e,s,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)},i)}function Fr(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&"text"===s.type?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push({type:"text",value:r}),i}function Nr(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function Er(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Ar(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Ar(t.slice(i),i>0,!1)),s.join("")}function Ar(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const Sr={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=fr(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Fr(e,t);const i={src:fr(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)},image:function(e,t){const n={src:fr(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Fr(e,t);const i={href:fr(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},link:function(e,t){const n={href:fr(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Nr(n[r])}return t}(n):Nr(t),s={},a=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(i||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},s=Le(t.children[1]),a=Re(t.children[t.children.length-1]);s&&a&&(r.position={start:s,end:a}),i.push(r)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",s=n&&"table"===n.type?n.align:void 0,a=s?s.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],r={},a=s?s[o]:void 0;a&&(r.align=a);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Er(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:_r,yaml:_r,definition:_r,footnoteDefinition:_r};function _r(){}const Br=["children"],Tr={}.hasOwnProperty,Ir={};function Pr(e,t){e.position&&(t.position=function(e){const t=Le(e),n=Re(e);if(t&&n)return{start:t,end:n}}(e))}function Mr(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,mr(i)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Rr(e,t){const n=t.data||{},r=!("value"in t)||Tr.call(n,"hProperties")||Tr.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Lr(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Or(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function zr(e,t){const n=function(e,t){const n=t||Ir,r=new Map,i=new Map,a=new Map,o=(0,s.A)((0,s.A)({},Sr),n.handlers),l={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=l.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Or(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Or(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:Mr,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:function(e,t){const n=e.type,r=l.handlers[n];if(Tr.call(l.handlers,n)&&r)return r(l,e,t);if(l.options.passThrough&&l.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=p(e,Br),r=mr(n);return r.children=l.all(e),r}return mr(e)}return(l.options.unknownHandler||Rr)(l,e,t)},options:n,patch:Pr,wrap:Lr};return kr(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),l}(e,t),r=n.one(e,void 0),i=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||pr,r=e.options.footnoteBackLabel||gr,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[c]);if(!i)continue;const s=e.all(i),a=String(i.identifier).toUpperCase(),o=fr(a.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(c,u);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+o+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(c,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=s[s.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...d)}else s.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+o},children:e.wrap(s,!0)};e.patch(i,f),l.push(f)}if(0!==l.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:(0,s.A)((0,s.A)({},mr(o)),{},{id:"footnote-label"}),children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:"\n"},i),a}function Hr(e,t){return e&&"run"in e?async function(n,r){const i=zr(n,(0,s.A)({file:r},t));await e.run(i,r)}:function(n,r){return zr(n,(0,s.A)({file:r},e||t))}}function qr(e){if(e)throw e}var Ur=n(240);function Vr(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Wr(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;const s=n.pop();if("function"!==typeof s)throw new TypeError("Expected function as last argument, not "+s);!function t(r){const a=e[++i];let o=-1;if(r)s(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++o<n.length;)null!==c[o]&&void 0!==c[o]||(c[o]=n[o]);n=c,a?function(e,t){let n;return i;function i(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const l=e.length>i.length;let c;l&&i.push(s);try{c=e.apply(this,i)}catch(r){if(l&&n)throw r;return s(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(a,s):c instanceof Error?s(c):a(c))}function s(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];t(e,...i)}}function a(e){s(null,e)}}(a,t)(...c):s(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Kr={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Gr(e);let n,r=0,i=-1,s=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;s--;)if(47===e.codePointAt(s)){if(n){r=s+1;break}}else i<0&&(n=!0,i=s+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let a=-1,o=t.length-1;for(;s--;)if(47===e.codePointAt(s)){if(n){r=s+1;break}}else a<0&&(n=!0,a=s+1),o>-1&&(e.codePointAt(s)===t.codePointAt(o--)?o<0&&(i=s):(o=-1,i=a));r===i?i=a:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(Gr(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){Gr(e);let t,n=e.length,r=-1,i=0,s=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?s<0?s=n:1!==a&&(a=1):s>-1&&(a=-1);else if(t){i=n+1;break}}if(s<0||r<0||0===a||1===a&&s===r-1&&s===i+1)return"";return e.slice(s,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)Gr(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){Gr(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",s=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(i.length<2||2!==s||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",s=0):(i=i.slice(0,r),s=i.length-1-i.lastIndexOf("/")),a=l,o=0;continue}}else if(i.length>0){i="",s=0,a=l,o=0;continue}t&&(i=i.length>0?i+"/..":"..",s=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),s=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Gr(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Yr={cwd:function(){return"/"}};function Qr(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function $r(e){if("string"===typeof e)e=new URL(e);else if(!Qr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Jr=["history","path","basename","stem","extname","dirname"];class Xr{constructor(e){let t;t=e?Qr(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Yr.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<Jr.length;){const e=Jr[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Jr.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?Kr.basename(this.path):void 0}set basename(e){ei(e,"basename"),Zr(e,"basename"),this.path=Kr.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?Kr.dirname(this.path):void 0}set dirname(e){ti(this.basename,"dirname"),this.path=Kr.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?Kr.extname(this.path):void 0}set extname(e){if(Zr(e,"extname"),ti(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Kr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Qr(e)&&(e=$r(e)),ei(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?Kr.basename(this.path,this.extname):void 0}set stem(e){ei(e,"stem"),Zr(e,"stem"),this.path=Kr.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Ve(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Zr(e,t){if(e&&e.includes(Kr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Kr.sep+"`")}function ei(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ti(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const ni=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},ri={}.hasOwnProperty;class ii extends ni{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Wr()}copy(){const e=new ii;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Ur(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(li("data",this.frozen),this.namespace[e]=t,this):ri.call(this.namespace,e)&&this.namespace[e]||void 0:e?(li("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=di(e),n=this.parser||this.Parser;return ai("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),ai("process",this.parser||this.Parser),oi("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const s=di(e),a=n.parse(s);function o(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(a,s,function(e,t,r){if(e||!t||!r)return o(e);const i=t,s=n.stringify(i,r);var a;"string"===typeof(a=s)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=s:r.result=s,o(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),ai("processSync",this.parser||this.Parser),oi("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,qr(e),t=r}),ui("processSync","process",n),t}run(e,t,n){ci(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,s){const a=di(t);r.run(e,a,function(t,r,a){const o=r||e;t?s(t):i?i(o):n(void 0,o,a)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){qr(e),n=t,r=!0}),ui("runSync","run",r),n}stringify(e,t){this.freeze();const n=di(t),r=this.compiler||this.Compiler;return oi("stringify",r),ci(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(li("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];c(e,i)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):o(e)}return this;function a(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else o(e)}}function o(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=Ur(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function c(e,n){let r=-1,i=-1;for(;++r<t.length;)if(t[r][0]===e){i=r;break}if(-1===i)t.push([e,...n]);else if(n.length>0){let[r,...s]=n;const a=t[i][1];Vr(a)&&Vr(r)&&(r=Ur(!0,a,r)),t[i]=[e,r,...s]}}}}const si=(new ii).freeze();function ai(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function oi(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function li(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ci(e){if(!Vr(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function ui(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function di(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new Xr(e)}const hi=[],mi={allowDangerousHtml:!0},fi=/^(https?|ircs?|mailto|xmpp)$/i,pi=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gi(e){const t=yi(e),n=xi(e);return bi(t.runSync(t.parse(n),n),e)}function yi(e){const t=e.rehypePlugins||hi,n=e.remarkPlugins||hi,r=e.remarkRehypeOptions?(0,s.A)((0,s.A)({},e.remarkRehypeOptions),mi):mi;return si().use(ir).use(n).use(Hr,r).use(t)}function xi(e){const t=e.children||"",n=new Xr;return"string"===typeof t&&(n.value=t),n}function bi(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||vi;for(const c of pi)Object.hasOwn(t,c.from)&&$((c.from,c.to&&c.to,c.id));return kr(e,function(e,t,i){if("raw"===e.type&&i&&"number"===typeof t)return a?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in ot)if(Object.hasOwn(ot,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=ot[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!s&&s.includes(e.tagName);if(!a&&r&&"number"===typeof t&&(a=!r(e,t,i)),a&&i&&"number"===typeof t)return o&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),Je(e,{Fragment:g.Fragment,components:i,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0})}function vi(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return-1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==r&&t>r||fi.test(e.slice(0,t))?e:""}const Di=(0,r.createContext)(null);function wi(){const e=(0,r.useContext)(Di);if(!e)throw new Error("useResearch must be used within a ResearchProvider");return e}function Ci(e){let{children:t}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),o=async()=>{try{a(!0);try{const e=await fetch("/data/research.json");if(e.ok){const t=await e.json();console.log("\ud83d\udcda Successfully loaded ".concat(t.length," research articles from research.json"));const n=t.sort((e,t)=>{const n=e.publishedDate?new Date(e.publishedDate):new Date(e.year||0,0,1);return(t.publishedDate?new Date(t.publishedDate):new Date(t.year||0,0,1)).getTime()-n.getTime()});return void i(n)}}catch(e){console.warn("Failed to load research.json, trying individual files:",e)}let n;try{const e=await fetch("/data/content-manifest.json");if(!e.ok)throw new Error("Manifest not found");n=(await e.json()).sources.filter(e=>"research"===e.type&&e.filename.includes("article")).map(e=>e.filename),console.log("\ud83d\udccb Found ".concat(n.length," articles in manifest"))}catch(t){n=await(async()=>{const e=["omega3","vitamin_d","breathing","meditation","exercise","sleep","probiotics","magnesium","zinc","creatine"],t=["brain","immune","stress","depression","inflammation","cognitive","memory","focus","anxiety","recovery","meta"],n=["2019","2020","2021","2022","2023","2024","2025"],r=[],i=new Set,s=["breathing_stress_2023_article_json.json","omega3_brain_2019_article_json.json","omega3_depression_2020_article_json.json","omega3_inflammation_2021_article_json.json","vitamin_d_immune_2021_article_json.json","vitamin_d_meta_2019_article_json.json"];for(const u of s)try{(await fetch("/data/research-articles/".concat(u),{method:"HEAD"})).ok&&(r.push(u),i.add(u))}catch(l){}const a=[];for(const u of e)for(const e of t)for(const t of n)a.push("".concat(u,"_").concat(e,"_").concat(t,"_article_json.json"));const o=a.filter(e=>!i.has(e)).slice(0,20);for(const u of o)try{(await fetch("/data/research-articles/".concat(u),{method:"HEAD"})).ok&&!r.includes(u)&&r.push(u)}catch(c){}return r})(),console.log("\ud83d\udd0d Discovered ".concat(n.length," articles manually"))}const r=n.map(async t=>{try{const e=await fetch("/data/research-articles/".concat(t));if(!e.ok)throw new Error("Failed to load ".concat(t));return await e.json()}catch(e){return console.warn("Failed to load article ".concat(t,":"),e),null}}),s=(await Promise.all(r)).filter(Boolean).sort((e,t)=>{var n,r;const i=e.publishedDate?new Date(e.publishedDate):new Date((null===(n=e.studyDetails)||void 0===n?void 0:n.year)||0,0,1);return(t.publishedDate?new Date(t.publishedDate):new Date((null===(r=t.studyDetails)||void 0===r?void 0:r.year)||0,0,1)).getTime()-i.getTime()});console.log("\ud83d\udcda Successfully loaded ".concat(s.length," research articles")),i(s)}catch(e){console.error("Failed to load research articles:",e),i([])}finally{a(!1)}};return(0,r.useEffect)(()=>{o();const e=setInterval(()=>{o()},6e4);return()=>clearInterval(e)},[]),(0,g.jsx)(Di.Provider,{value:{articles:n,isLoading:s,getRelatedArticles:e=>n.filter(t=>{var n;return(null===(n=t.relatedHabits)||void 0===n?void 0:n.includes(e))||e.toLowerCase().includes("omega3")&&t.id.toLowerCase().includes("omega3")||e.toLowerCase().includes("vitamin_d")&&t.id.toLowerCase().includes("vitamin_d")||e.toLowerCase().includes("breathing")&&t.id.toLowerCase().includes("breathing")})},children:t})}var ji=n(764);function ki(e){let{isOpen:t,onClose:n,habitId:i,habitTitle:s,researchIds:a}=e;const{articles:o}=wi(),{currentUser:l}=(0,K.kH)(),[c,u]=(0,r.useState)({article:null,isOpen:!1}),[d,h]=(0,r.useState)(null),m=o.filter(e=>a.some(t=>e.id===t||e.id==="".concat(t,"_article")||t==="".concat(e.id,"_article")||e.id.startsWith(t)||t.startsWith(e.id.replace("_article",""))));(0,r.useEffect)(()=>{t&&l&&m.length>0&&(m.forEach(e=>{ji.researchEngagementService.trackResearchView(l.id,e.id,i)}),h(Date.now()))},[t,l,i,m]);const f=e=>{u({article:e,isOpen:!0}),l&&ji.researchEngagementService.trackArticleOpen(l.id,e.id,i)},p=()=>{if(c.article&&l&&d){const e=Date.now()-d;ji.researchEngagementService.trackReadingTime(l.id,c.article.id,e)}u({article:null,isOpen:!1})};return console.log("\ud83d\udd2c Research matching debug:",{habitTitle:s,researchIds:a,totalArticles:o.length,articleIds:o.map(e=>e.id),matchedArticles:m.length,matchedIds:m.map(e=>e.id)}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F,{isOpen:t,onClose:n,size:"xl",children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Research for ",s]}),(0,g.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-xl font-semibold",children:"\u2715"})]}),m.length>0?(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("p",{className:"text-gray-700 mb-6",children:"Scientific research supporting the effectiveness of this habit:"}),m.map(e=>(0,g.jsx)(_,{article:e,onReadFullArticle:f},e.id)),(0,g.jsx)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Research-Backed Benefits"}),(0,g.jsx)("p",{className:"text-sm text-blue-800",children:"This habit is supported by peer-reviewed scientific research. The studies shown above provide evidence for its effectiveness and help explain why this practice works."})]})]})})]}):(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Research Articles Found"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Research articles for this habit are being curated. Check back soon for scientific backing."})]})]})}),c.isOpen&&c.article&&(0,g.jsx)(F,{isOpen:!0,onClose:p,size:"xl",children:(0,g.jsxs)("div",{className:"p-6 max-h-[90vh] overflow-y-auto",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:c.article.title}),c.article.subtitle&&(0,g.jsx)("p",{className:"text-lg text-gray-600",children:c.article.subtitle})]}),(0,g.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 text-xl font-semibold",children:"\u2715"})]}),c.article.studyDetails&&(0,g.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-blue-900",children:"\ud83d\udcc4 Original Research Paper"}),(0,g.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:[c.article.studyDetails.journal," \u2022 ",c.article.studyDetails.year,c.article.studyDetails.sampleSize&&" \u2022 ".concat(c.article.studyDetails.sampleSize.toLocaleString()," participants")]})]}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("button",{onClick:()=>{const e=c.article.studyDetails.journal,t=c.article.studyDetails.year,n=encodeURIComponent("".concat(e," ").concat(t," thermal environment sleep"));window.open("https://scholar.google.com/scholar?q=".concat(n),"_blank")},className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded hover:bg-blue-200 transition-colors",children:"\ud83d\udd0d Find on Google Scholar"}),(0,g.jsx)("button",{onClick:()=>{const e=c.article.studyDetails.journal,t=c.article.studyDetails.year,n=encodeURIComponent("".concat(e,"[journal] AND ").concat(t,"[pdat]"));window.open("https://pubmed.ncbi.nlm.nih.gov/?term=".concat(n),"_blank")},className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded hover:bg-blue-200 transition-colors",children:"\ud83d\udcda Search PubMed"})]})]})}),(0,g.jsx)("div",{className:"prose prose-lg max-w-none",children:c.article.content?(0,g.jsx)(gi,{components:{h1:e=>{let{children:t}=e;return(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6 mt-8",children:t})},h2:e=>{let{children:t}=e;return(0,g.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 mt-6",children:t})},h3:e=>{let{children:t}=e;return(0,g.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3 mt-5",children:t})},h4:e=>{let{children:t}=e;return(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-2 mt-4",children:t})},p:e=>{let{children:t}=e;return(0,g.jsx)("p",{className:"mb-4 text-gray-700 leading-relaxed",children:t})},ul:e=>{let{children:t}=e;return(0,g.jsx)("ul",{className:"mb-4 ml-6 list-disc space-y-1",children:t})},ol:e=>{let{children:t}=e;return(0,g.jsx)("ol",{className:"mb-4 ml-6 list-decimal space-y-1",children:t})},li:e=>{let{children:t}=e;return(0,g.jsx)("li",{className:"text-gray-700 leading-relaxed",children:t})},strong:e=>{let{children:t}=e;return(0,g.jsx)("strong",{className:"font-semibold text-gray-900",children:t})},em:e=>{let{children:t}=e;return(0,g.jsx)("em",{className:"italic text-gray-800",children:t})},blockquote:e=>{let{children:t}=e;return(0,g.jsx)("blockquote",{className:"border-l-4 border-blue-500 pl-4 py-2 mb-4 bg-blue-50 text-gray-700 italic",children:t})},code:e=>{let{children:t}=e;return(0,g.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono text-gray-800",children:t})}},children:(()=>{const e=c.article.content.split("\n"),t=e.findIndex(e=>e.startsWith("## "));return-1!==t?e.slice(t).join("\n"):e.slice(4).join("\n")})()}):(0,g.jsx)("p",{className:"text-gray-600",children:"Article content not available."})})]})})]})}function Fi(e){let{isOpen:t,onClose:n,currentUserHabits:i}=e;const[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)("all"),[m,f]=(0,r.useState)(null),[p,y]=(0,r.useState)([]),{currentUser:v,refreshProgress:D}=(0,K.kH)();(0,r.useEffect)(()=>{t&&(w(),C())},[t]),(0,r.useEffect)(()=>{j()},[s,d,i,p]);const w=async()=>{if(v){u(!0),f(null);try{const e=await L.dbHelpers.getAllHabits(),t=new Set(i.map(e=>e.id)),n=e.filter(e=>!e.isCustom&&!t.has(e.id));a(n)}catch(m){console.error("Failed to load available habits:",m),f("Failed to load available habits")}finally{u(!1)}}},C=async()=>{try{const e=await fetch("/data/goals.json"),t=await e.json();if(v&&v.goals){const e=t.goals.filter(e=>v.goals.includes(e.id));y(e)}}catch(m){console.error("Failed to load user goals:",m)}},j=()=>{let e=s;if("all"!==d){const t={reduce_stress:["stress","relaxation","mindfulness","meditation","anxiety"],increase_focus:["focus","concentration","attention","productivity","cognitive"],improve_mood:["mood","happiness","depression","emotional","wellbeing"],increase_energy:["energy","fatigue","vitality","motivation"],improve_health:["health","fitness","nutrition","exercise","wellness"],better_sleep:["sleep","insomnia","rest","recovery"]}[d]||[d];e=s.filter(e=>!!e.goalTags&&e.goalTags.some(e=>t.some(t=>e.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.toLowerCase()))))}l(e)},k=[{id:"all",title:"All Goals",icon:"\ud83c\udfaf"},...p.map(e=>({id:e.id,title:e.title,icon:e.icon}))];return t?(0,g.jsx)(F,{isOpen:t,onClose:n,size:"lg",children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add Science-Backed Habits"}),(0,g.jsx)("p",{className:"text-gray-600 mt-1",children:"Choose from research-verified habits to add to your tracking"})]}),(0,g.jsx)(x,{variant:"ghost",onClick:n,children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Your Goals"}),(0,g.jsx)("select",{value:d,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-full md:w-auto",children:k.map(e=>(0,g.jsxs)("option",{value:e.id,children:[e.icon," ",e.title]},e.id))})]}),m&&(0,g.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,g.jsx)("p",{className:"text-red-700 text-sm",children:m})}),c?(0,g.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,g.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading habits..."})]}):(0,g.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===o.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfaf"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No New Habits Available"}),(0,g.jsx)("p",{className:"text-gray-600",children:0===s.length?"You're already tracking all available science-backed habits!":"No habits match the selected goal."})]}):(0,g.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,g.jsx)(b,{className:"hover:shadow-md transition-shadow",children:(0,g.jsx)("div",{className:"p-4",children:(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:[e.timeMinutes," min"]}),e.category&&(0,g.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:e.category}),e.difficulty&&(0,g.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:e.difficulty})]}),e.description&&(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),e.researchIds&&e.researchIds.length>0&&(0,g.jsxs)("div",{className:"flex items-center text-xs text-blue-600",children:[(0,g.jsx)("span",{children:"\ud83d\udd2c"}),(0,g.jsxs)("span",{className:"ml-1",children:[e.researchIds.length," research studies"]})]})]}),(0,g.jsxs)(x,{onClick:()=>(async e=>{if(v)try{f(null),await L.dbHelpers.createProgress(v.id,e.id),await D(),a(t=>t.filter(t=>t.id!==e.id))}catch(m){console.error("Failed to add habit:",m),f("Failed to add habit to your list")}})(e),size:"sm",className:"ml-4 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})})},e.id))})}),(0,g.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:[o.length," habit",1!==o.length?"s":""," available"]}),(0,g.jsx)(x,{variant:"outline",onClick:n,children:"Done"})]})]})}):null}function Ni(){var e,t;const[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)({isOpen:!1,habitId:"",habitTitle:"",researchIds:[]}),[c,u]=(0,r.useState)({isOpen:!1,habit:null}),[d,h]=(0,r.useState)(!1),{customHabits:m,isLoading:f,error:p,loadCustomHabits:y,startEditing:v,deleteHabit:w,setError:C}=V(),{currentUser:j,userHabits:k,userProgress:F,refreshProgress:E}=(0,K.kH)();(0,r.useEffect)(()=>{j&&y(j.id)},[j,y]);const A=e=>{u({isOpen:!0,habit:e})},S=e=>{const t=k.find(t=>t.id===e);t&&l({isOpen:!0,habitId:t.id,habitTitle:t.title,researchIds:t.researchIds||[]})},_=async e=>{const{updateUserProgress:t}=K.kH.getState();await t(e)},B=e=>{console.log("Skipped habit: ".concat(e))};return f?(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,g.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,g.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})}):(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6 pb-20 md:pb-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Habits"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Manage your habit collection - both science-backed and custom habits"})]}),p&&(0,g.jsx)(b,{className:"mb-6 border-red-200 bg-red-50",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,g.jsx)("p",{className:"text-sm text-red-700 mt-1",children:p})]}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>C(null),className:"ml-auto",children:"\u2715"})]})})}),(0,g.jsxs)("div",{className:"space-y-8",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Science-Backed Habits"}),(0,g.jsx)("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:"Research Verified"})]}),(0,g.jsxs)(x,{onClick:()=>h(!0),size:"sm",variant:"outline",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Science-Backed Habit"]})]}),0===k.filter(e=>!e.isCustom).length?(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83e\uddec"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Science-Backed Habits Yet"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Complete the onboarding process to get personalized habit recommendations based on research."}),(0,g.jsx)(x,{onClick:()=>{window.confirm("This will restart your onboarding process. Are you sure?")&&(localStorage.removeItem("sciencehabits_user_id"),window.location.reload())},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Start Onboarding Setup"})]})})}):(0,g.jsx)("div",{className:"space-y-4",children:k.filter(e=>!e.isCustom).map(e=>{const t=F.find(t=>t.habitId===e.id),n=(null===t||void 0===t?void 0:t.completions.includes((new Date).toISOString().split("T")[0]))||!1;return(0,g.jsx)(Y,{habit:e,progress:t,onComplete:_,onSkip:B,onViewResearch:S,isCompleted:n,showActions:!0,onDelete:()=>A(e)},e.id)})})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Custom Habits"}),(0,g.jsx)("div",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Personal"})]}),(0,g.jsxs)(x,{onClick:()=>a(!0),size:"sm",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Custom Habit"]})]}),0===m.length?(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Custom Habits Yet"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Create personalized habits tailored to your specific needs and goals."}),(0,g.jsx)(x,{onClick:()=>a(!0),children:"Create Your First Custom Habit"})]})})}):(0,g.jsx)("div",{className:"space-y-4",children:m.map(e=>{const t=F.find(t=>t.habitId===e.id),n=(null===t||void 0===t?void 0:t.completions.includes((new Date).toISOString().split("T")[0]))||!1;return(0,g.jsx)(Y,{habit:e,progress:t,onComplete:_,onSkip:B,onViewResearch:S,isCompleted:n,showActions:!0,onEdit:()=>(e=>{v(e),a(!0)})(e),onDelete:()=>A(e)},e.id)})})]})]}),i&&(0,g.jsx)(G,{onClose:()=>a(!1),onSuccess:async()=>{j&&(await E(),await y(j.id))}}),(0,g.jsx)(ki,{isOpen:o.isOpen,onClose:()=>l((0,s.A)((0,s.A)({},o),{},{isOpen:!1})),habitId:o.habitId,habitTitle:o.habitTitle,researchIds:o.researchIds}),(0,g.jsx)(N,{isOpen:c.isOpen,onClose:()=>u({isOpen:!1,habit:null}),onConfirm:async()=>{if(!j||!c.habit)return;const e=c.habit;let t=!1;if(e.isCustom)t=await w(e.id,j.id);else try{const{dbHelpers:r}=await Promise.resolve().then(n.bind(n,498));await r.deleteProgress(j.id,e.id),t=!0}catch(p){console.error("Failed to remove habit from tracking:",p),C("Failed to remove habit from tracking")}t&&await E(),u({isOpen:!1,habit:null})},title:null!==(e=c.habit)&&void 0!==e&&e.isCustom?"Delete Habit":"Stop Tracking Habit",message:c.habit?c.habit.isCustom?'Are you sure you want to delete "'.concat(c.habit.title,'"? This will permanently remove the habit and all progress data. This action cannot be undone.'):'Are you sure you want to stop tracking "'.concat(c.habit.title,'"? This will remove it from your habit list and delete all progress data. You can always add it back later from the recommendations.'):"",confirmText:null!==(t=c.habit)&&void 0!==t&&t.isCustom?"Delete Habit":"Stop Tracking",cancelText:"Cancel",confirmVariant:"danger",icon:(0,g.jsx)("div",{className:"w-12 h-12 mx-auto flex items-center justify-center rounded-full bg-red-100",children:(0,g.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),(0,g.jsx)(Fi,{isOpen:d,onClose:()=>h(!1),currentUserHabits:k})]})}function Ei(e,t,n,r){const i=new Date,a=n||new Date(i.getTime()-7776e6),o=r||i,l=e.map(e=>(0,s.A)((0,s.A)({},e),{},{completions:e.completions.filter(e=>{const t=new Date(e);return t>=a&&t<=o})})),c=l.reduce((e,t)=>e+t.completions.length,0);let u=o;e.forEach(e=>{if(e.dateStarted){const t=new Date(e.dateStarted);t>=a&&t<u&&(u=t)}else if(e.completions.length>0){const t=new Date(e.completions[0]);t>=a&&t<u&&(u=t)}});const d=u>a?u:a,h=Math.max(1,Math.ceil((o.getTime()-d.getTime())/864e5)),m=e.length*h,f=function(e,t,n,r){const i=[],s=new Date(n),a=s.getDay();s.setDate(s.getDate()-a);for(;s<r;){const n=new Date(s),r=new Date(s);r.setDate(r.getDate()+6);const a=e.map(e=>{const r=t.find(t=>t.id===e.habitId);let i=0;for(let t=0;t<7;t++){const r=new Date(n.getTime()+24*t*60*60*1e3).toISOString().split("T")[0];e.completions.includes(r)&&i++}const s=7,a=i/s*100;return{habitId:e.habitId,habitTitle:(null===r||void 0===r?void 0:r.title)||"Unknown Habit",weeklyCompletions:i,weeklyTarget:s,weeklyRate:a}}),o=a.length>0?a.reduce((e,t)=>e+t.weeklyRate,0)/a.length:0,l=o>=70&&o<=80,c=zi(a,o);i.push({weekStart:n.toISOString().split("T")[0],weekEnd:r.toISOString().split("T")[0],consistencyRate:Math.min(100,o),isOptimalZone:l,habitBreakdown:a,qualityScore:c}),s.setDate(s.getDate()+7)}const o=i.length>0?i.reduce((e,t)=>e+t.consistencyRate,0)/i.length:0,l=i.filter(e=>e.isOptimalZone).length;let c=0;if(i.length>=4){const e=Math.floor(i.length/2),t=i.slice(0,e),n=i.slice(e),r=t.reduce((e,t)=>e+t.consistencyRate,0)/t.length,s=n.reduce((e,t)=>e+t.consistencyRate,0)/n.length;c=r>0?(s-r)/r*100:0}const u=i.slice(-8);return{averageWeeklyConsistency:Math.min(100,o),consistencyTrend:c,optimalWeekCount:l,recentWeeks:u}}(l,t,a,o);return{totalDaysTracked:h,totalCompletions:c,overallCompletionRate:m>0?c/m*100:0,activeHabitsCount:e.length,currentStreaks:e.map(e=>e.currentStreak),longestOverallStreak:Math.max(...e.map(e=>e.longestStreak),0),averageStreak:e.length>0?e.reduce((e,t)=>e+t.currentStreak,0)/e.length:0,streakDistribution:Ai(e),dailyStats:Si(l,t,a,o),weeklyStats:_i(l,t,a,o),monthlyStats:Bi(l,t,a,o),habitPerformance:Ti(l,t,a,o),categoryPerformance:Ii(l,t),achievements:Pi(e,t),completionTrend:Mi(l,a,o),consistencyScore:Ri(l,a,o),momentumScore:Oi(l),weeklyConsistencyRate:f.averageWeeklyConsistency,weeklyConsistencyTrend:f.consistencyTrend,optimalWeekCount:f.optimalWeekCount,recentWeeklyPerformance:f.recentWeeks,formationMilestones:Hi(e,t,d),habitsMilestoneProgress:qi(e,t,d)}}function Ai(e){const t={};return e.forEach(e=>{const n=e.currentStreak;t[n]=(t[n]||0)+1}),Object.entries(t).map(e=>{let[t,n]=e;return{length:parseInt(t),count:n}}).sort((e,t)=>e.length-t.length)}function Si(e,t,n,r){const i=[],s=new Date(n);for(;s<=r;){const t=s.toISOString().split("T")[0],n=e.reduce((e,n)=>e+(n.completions.includes(t)?1:0),0);i.push({date:t,completions:n,totalHabits:e.length,completionRate:e.length>0?n/e.length*100:0,dayOfWeek:s.toLocaleDateString("en-US",{weekday:"long"})}),s.setDate(s.getDate()+1)}return i}function _i(e,t,n,r){const i=[],s=new Date(n),a=s.getDay();s.setDate(s.getDate()-a);let o=1;for(;s<r;){const t=new Date(s),n=new Date(s);n.setDate(n.getDate()+6);let r=0;const a=7,l=e.length*a;for(let i=0;i<7;i++){const n=new Date(t.getTime()+24*i*60*60*1e3).toISOString().split("T")[0];r+=e.reduce((e,t)=>e+(t.completions.includes(n)?1:0),0)}i.push({weekStart:t.toISOString().split("T")[0],weekEnd:n.toISOString().split("T")[0],completions:r,totalPossible:l,completionRate:l>0?r/l*100:0,weekNumber:o++}),s.setDate(s.getDate()+7)}return i}function Bi(e,t,n,r){const i=[],s=new Date(n.getFullYear(),n.getMonth(),1);for(;s<=r;){const t=s.getFullYear(),n=s.getMonth(),r=s.toLocaleDateString("en-US",{month:"long"}),a=new Date(t,n+1,0).getDate();let o=0,l=0;for(let i=1;i<=a;i++){const r=new Date(t,n,i).toISOString().split("T")[0],s=e.reduce((e,t)=>e+(t.completions.includes(r)?1:0),0);o+=s,s>0&&l++}const c=e.length*a;i.push({month:r,year:t,completions:o,totalPossible:c,completionRate:c>0?o/c*100:0,daysActive:l}),s.setMonth(s.getMonth()+1)}return i}function Ti(e,t,n,r){const i=new Date;return e.map(e=>{const s=t.find(t=>t.id===e.habitId),a=Math.ceil((r.getTime()-n.getTime())/864e5),o=e.completions.length/a*100,l=e.dateStarted?new Date(e.dateStarted):e.completions.length>0?new Date(e.completions[0]):n,c=Math.ceil((i.getTime()-l.getTime())/864e5),u=c>=21,d=c>=66,h=Math.max(0,21-c),m=Math.max(0,66-c);let f;f=c<7?"early":c<21?"building":c<66?"forming":"established";const p=[...e.completions].sort();let g=0;for(let t=1;t<p.length;t++){g+=Math.abs(new Date(p[t]).getTime()-new Date(p[t-1]).getTime())/864e5}const y=p.length>1?g/(p.length-1):0,x=Math.floor(e.completions.length/2),b=e.completions.slice(0,x).length,v=e.completions.slice(x).length,D=v>b?"up":v<b?"down":"stable",w=Li(e.completions,n,r);return{habitId:e.habitId,habitTitle:(null===s||void 0===s?void 0:s.title)||"Unknown Habit",habitCategory:(null===s||void 0===s?void 0:s.category)||"unknown",totalCompletions:e.completions.length,completionRate:o,currentStreak:e.currentStreak,longestStreak:e.longestStreak,averageGapBetweenCompletions:y,trendDirection:D,consistencyScore:w,lastCompleted:e.completions.length>0?e.completions[e.completions.length-1]:null,daysTracked:a,daysActive:c,formationStage:f,milestoneProgress:{isAt21Days:u,isAt66Days:d,daysTo21:h,daysTo66:m}}})}function Ii(e,t){const n={};return e.forEach(e=>{const r=t.find(t=>t.id===e.habitId),i=(null===r||void 0===r?void 0:r.category)||"unknown";n[i]||(n[i]={habits:[],totalCompletions:0}),n[i].totalCompletions+=e.completions.length}),Object.entries(n).map(n=>{let[r,i]=n;const s=e.filter(e=>{const n=t.find(t=>t.id===e.habitId);return(null===n||void 0===n?void 0:n.category)===r}),a=s.map(e=>e.totalDays>0?e.completions.length/e.totalDays*100:0),o=a.reduce((e,t)=>e+t,0)/a.length,l=s.reduce((e,t)=>t.completions.length>e.completions.length?t:e),c=s.reduce((e,t)=>t.currentStreak>e.currentStreak?t:e),u=t.find(e=>e.id===l.habitId),d=t.find(e=>e.id===c.habitId);return{category:r,totalHabits:s.length,totalCompletions:i.totalCompletions,averageCompletionRate:o,bestPerformingHabit:(null===u||void 0===u?void 0:u.title)||"Unknown",mostConsistentHabit:(null===d||void 0===d?void 0:d.title)||"Unknown"}})}function Pi(e,t){const n=[],r=(new Date).toISOString(),i=Math.max(...e.map(e=>e.longestStreak),0);i>=7&&n.push({id:"week_warrior",title:"Week Warrior",description:"Maintained a 7-day streak",icon:"\ud83d\udd25",unlockedAt:r,category:"streak",rarity:"common"}),i>=30&&n.push({id:"month_master",title:"Month Master",description:"Maintained a 30-day streak",icon:"\ud83c\udfc6",unlockedAt:r,category:"streak",rarity:"uncommon"}),i>=100&&n.push({id:"centurion",title:"Centurion",description:"Maintained a 100-day streak",icon:"\ud83d\udc51",unlockedAt:r,category:"streak",rarity:"legendary"});const s=e.reduce((e,t)=>e+t.totalDays,0);s>=100&&n.push({id:"century_club",title:"Century Club",description:"Completed 100 habits",icon:"\ud83d\udcaf",unlockedAt:r,category:"completion",rarity:"uncommon"}),s>=500&&n.push({id:"habit_hero",title:"Habit Hero",description:"Completed 500 habits",icon:"\ud83e\uddb8\u200d\u2642\ufe0f",unlockedAt:r,category:"completion",rarity:"rare"});return e.filter(e=>e.currentStreak>0).length>=3&&n.push({id:"multitasker",title:"Multitasker",description:"Maintaining 3+ active streaks",icon:"\u26a1",unlockedAt:r,category:"consistency",rarity:"common"}),n}function Mi(e,t,n){const r=Math.ceil((n.getTime()-t.getTime())/864e5),i=new Date(t.getTime()+r/2*24*60*60*1e3);let s=0,a=0;e.forEach(e=>{e.completions.forEach(e=>{new Date(e)<i?s++:a++})});const o=Math.ceil((i.getTime()-t.getTime())/864e5),l=r-o,c=o>0?s/o:0;return c>0?((l>0?a/l:0)-c)/c*100:0}function Ri(e,t,n){if(0===e.length)return 0;let r=0;return e.forEach(e=>{r+=Li(e.completions,t,n)}),r/e.length}function Li(e,t,n){if(0===e.length)return 0;const r=Math.ceil((n.getTime()-t.getTime())/864e5)/e.length;let i=100;const s=[...e].sort();for(let a=1;a<s.length;a++){const e=Math.abs(new Date(s[a]).getTime()-new Date(s[a-1]).getTime())/864e5;i-=10*(Math.abs(e-r)/r)}return Math.max(0,Math.min(100,i))}function Oi(e){if(0===e.length)return 0;let t=0;const n=new Date;return e.forEach(e=>{if(0===e.completions.length)return;const r=new Date(e.completions[e.completions.length-1]),i=Math.ceil((n.getTime()-r.getTime())/864e5);let s=0;s=i<=1?100:i<=3?75:i<=7?50:25,s*=1+.1*e.currentStreak,t+=s}),Math.min(100,t/e.length)}function zi(e,t){if(0===e.length)return 0;let n=t;const r=function(e){if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t,0)/e.length;return e.map(e=>Math.pow(e-t,2)).reduce((e,t)=>e+t,0)/e.length}(e.map(e=>e.weeklyRate)),i=Math.max(0,10-r/10),s=t>=70&&t<=80?5:0;return Math.min(100,n+i+s)}function Hi(e,t,n){const r=new Date,i=e.map(e=>{const i=t.find(t=>t.id===e.habitId),s=e.dateStarted?new Date(e.dateStarted):e.completions.length>0?new Date(e.completions[0]):n,a=Math.ceil((r.getTime()-s.getTime())/864e5);return{habitId:e.habitId,habitTitle:(null===i||void 0===i?void 0:i.title)||"Unknown Habit",daysActive:a}}),s=i.filter(e=>e.daysActive>=21).length,a=i.filter(e=>e.daysActive>=66).length,o=i.length>0?i.reduce((e,t)=>e+t.daysActive,0)/i.length:0,l=Math.max(...i.map(e=>Math.max(0,66-e.daysActive)),0);return{day21Milestone:{habitsReached:s,totalHabits:e.length,percentage:e.length>0?s/e.length*100:0,description:"Initial neural pathway strengthening"},day66Milestone:{habitsReached:a,totalHabits:e.length,percentage:e.length>0?a/e.length*100:0,description:"Research-backed average formation time"},averageFormationDays:Math.round(o),expectedCompletionDays:l}}function qi(e,t,n){const r=new Date;return e.map(e=>{const i=t.find(t=>t.id===e.habitId),s=e.dateStarted?new Date(e.dateStarted):e.completions.length>0?new Date(e.completions[0]):n,a=Math.ceil((r.getTime()-s.getTime())/864e5),o=a>=21,l=a>=66,c=Math.max(0,21-a),u=Math.max(0,66-a);let d;d=a<7?"early":a<21?"building":a<66?"forming":"established";const h=[];return o&&h.push("\ud83e\udde0 Neural pathway strengthening"),l&&h.push("\u26a1 Automaticity threshold reached"),a>=100&&h.push("\ud83c\udfc6 Long-term mastery"),{habitId:e.habitId,habitTitle:(null===i||void 0===i?void 0:i.title)||"Unknown Habit",daysActive:a,isAt21Days:o,isAt66Days:l,daysTo21:c,daysTo66:u,formationStage:d,milestoneAchievements:h}})}function Ui(e){const t=new Date,n=new Date(t);let r;switch(e){case"week":r=new Date(t.getTime()-6048e5);break;case"month":r=new Date(t.getTime()-2592e6);break;case"3months":r=new Date(t.getTime()-7776e6);break;case"year":r=new Date(t.getTime()-31536e6);break;default:r=new Date(2020,0,1)}return{start:r,end:n}}const Vi=(0,a.v)((e,t)=>({analyticsData:null,selectedTimeRange:"3months",isLoading:!1,error:null,lastUpdated:null,selectedHabitForDetails:null,showAchievements:!1,compareHabits:[],loadAnalytics:(n,r)=>{try{e({isLoading:!0,error:null});const{selectedTimeRange:i}=t(),{start:s,end:a}=Ui(i),o=Ei(n,r,s,a);e({analyticsData:o,isLoading:!1,lastUpdated:(new Date).toISOString()})}catch(i){console.error("Failed to calculate analytics:",i),e({error:i instanceof Error?i.message:"Failed to calculate analytics",isLoading:!1})}},setTimeRange:n=>{e({selectedTimeRange:n});const{analyticsData:r}=t();r&&e({analyticsData:null})},setSelectedHabit:t=>{e({selectedHabitForDetails:t})},toggleAchievements:()=>{e(e=>({showAchievements:!e.showAchievements}))},addToComparison:t=>{e(e=>e.compareHabits.length>=4||e.compareHabits.includes(t)?e:{compareHabits:[...e.compareHabits,t]})},removeFromComparison:t=>{e(e=>({compareHabits:e.compareHabits.filter(e=>e!==t)}))},clearComparison:()=>{e({compareHabits:[]})},refreshAnalytics:(e,n)=>{const{loadAnalytics:r}=t();r(e,n)},setError:t=>{e({error:t})}}));function Wi(e){return"".concat(Math.round(e),"%")}function Ki(e){return e>=80?"Excellent":e>=60?"Good":e>=40?"Fair":"Needs Improvement"}function Gi(e){let{analytics:t}=e;const n=(r=t.completionTrend)>5?{text:"+".concat(Math.round(r),"%"),color:"text-green-600",icon:"\ud83d\udcc8"}:r<-5?{text:"".concat(Math.round(r),"%"),color:"text-red-600",icon:"\ud83d\udcc9"}:{text:"Stable",color:"text-gray-600",icon:"\u27a1\ufe0f"};var r;const i=[{title:"Overall Completion Rate",value:Wi(t.overallCompletionRate),trend:n,icon:"\ud83c\udfaf",description:"Average daily completion across all habits"},{title:"Active Habits",value:t.activeHabitsCount.toString(),icon:"\ud83d\udccb",description:"Habits currently being tracked"},{title:"Total Completions",value:t.totalCompletions.toString(),icon:"\u2705",description:"Over ".concat(t.totalDaysTracked," days tracked")},{title:"Longest Streak",value:"".concat(t.longestOverallStreak," days"),icon:"\ud83d\udd25",description:"Best consecutive days achieved"}],s=[{title:"Consistency Score",score:t.consistencyScore,description:"How evenly spaced your habit completions are",icon:"\ud83d\udcca"},{title:"Momentum Score",score:t.momentumScore,description:"Current habit momentum and recent activity",icon:"\ud83d\ude80"}];return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map((e,t)=>(0,g.jsx)(b,{className:"hover:shadow-md transition-shadow",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("div",{className:"text-2xl",children:e.icon}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.value}),e.trend&&(0,g.jsxs)("div",{className:"flex items-center space-x-1 text-sm font-medium ".concat(e.trend.color),children:[(0,g.jsx)("span",{children:e.trend.icon}),(0,g.jsx)("span",{children:e.trend.text})]})]}),(0,g.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]})})},t))}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Analysis"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map((e,t)=>{return(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-xl",children:e.icon}),(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:e.title})]}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("span",{className:"text-sm font-medium px-2 py-1 rounded-full ".concat((n=e.score,n>=80?"text-green-600 bg-green-100":n>=60?"text-yellow-600 bg-yellow-100":n>=40?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100")),children:Ki(e.score)}),(0,g.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:Math.round(e.score)})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(e.score>=80?"bg-green-500":e.score>=60?"bg-yellow-500":e.score>=40?"bg-orange-500":"bg-red-500"),style:{width:"".concat(Math.max(0,Math.min(100,e.score)),"%")}})})]}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},t);var n})})})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Streak Analysis"}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[t.currentStreaks.filter(e=>e>0).length," active streaks"]})]})}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:Math.round(t.averageStreak)}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Average Current Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl font-bold text-red-600 mb-1",children:t.longestOverallStreak}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Longest Ever Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:t.currentStreaks.filter(e=>e>0).length}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Active Streaks"})]})]}),t.streakDistribution.length>0&&(0,g.jsxs)("div",{className:"mt-6",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Streak Distribution"}),(0,g.jsx)("div",{className:"space-y-2",children:t.streakDistribution.slice(0,5).map((e,n)=>(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("span",{className:"text-sm text-gray-600",children:0===e.length?"No streak":"".concat(e.length," day").concat(e.length>1?"s":"")}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:"".concat(Math.max(10,e.count/Math.max(...t.streakDistribution.map(e=>e.count))*100),"%")}})}),(0,g.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:e.count})]})]},n))})]})]})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Key Insights"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:Yi(t).map((e,t)=>(0,g.jsx)("div",{className:"p-3 rounded-lg ".concat("positive"===e.type?"bg-green-50 border border-green-200":"warning"===e.type?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"),children:(0,g.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium ".concat("positive"===e.type?"text-green-800":"warning"===e.type?"text-yellow-800":"text-blue-800"),children:e.title}),(0,g.jsx)("p",{className:"text-sm ".concat("positive"===e.type?"text-green-700":"warning"===e.type?"text-yellow-700":"text-blue-700"),children:e.message})]})]})},t))})})]})]})}function Yi(e){const t=[];return e.overallCompletionRate>=80?t.push({title:"Excellent Progress!",message:"You're maintaining an ".concat(Math.round(e.overallCompletionRate),"% completion rate. Keep up the outstanding work!"),type:"positive",icon:"\ud83c\udf1f"}):e.overallCompletionRate<50&&t.push({title:"Room for Improvement",message:"Your completion rate is ".concat(Math.round(e.overallCompletionRate),"%. Consider reducing the number of habits or adjusting your routine."),type:"warning",icon:"\ud83d\udca1"}),e.longestOverallStreak>=30&&t.push({title:"Streak Master!",message:"Your longest streak of ".concat(e.longestOverallStreak," days shows incredible dedication and consistency."),type:"positive",icon:"\ud83d\udd25"}),e.completionTrend>10?t.push({title:"Building Momentum",message:"Your completion rate has improved by ".concat(Math.round(e.completionTrend),"% recently. You're on the right track!"),type:"positive",icon:"\ud83d\udcc8"}):e.completionTrend<-10&&t.push({title:"Declining Trend",message:"Your completion rate has dropped by ".concat(Math.abs(Math.round(e.completionTrend)),"%. Consider what might be causing this."),type:"warning",icon:"\ud83d\udcc9"}),e.consistencyScore>=80?t.push({title:"Highly Consistent",message:"Your habit completions are well-distributed throughout your tracking period. This consistency is key to long-term success.",type:"positive",icon:"\ud83c\udfaf"}):e.consistencyScore<50&&t.push({title:"Inconsistent Pattern",message:"Your habit completions show an irregular pattern. Try to establish more consistent timing for better results.",type:"info",icon:"\ud83d\udcca"}),e.activeHabitsCount>=5&&t.push({title:"Ambitious Tracker",message:"You're tracking ".concat(e.activeHabitsCount," habits. Make sure you're not overwhelming yourself - quality over quantity!"),type:"info",icon:"\ud83d\udccb"}),t.slice(0,4)}function Qi(e){let{habitPerformance:t}=e;const[n,i]=(0,r.useState)("completionRate"),[s,a]=(0,r.useState)(null),o=[...t].sort((e,t)=>{switch(n){case"completionRate":return t.completionRate-e.completionRate;case"streak":return t.currentStreak-e.currentStreak;case"consistency":return t.consistencyScore-e.consistencyScore;default:return 0}}),l=e=>{const t={stress:"\ud83e\uddd8\u200d\u2640\ufe0f",productivity:"\u26a1",health:"\ud83d\udcaa",energy:"\ud83d\udd0b",sleep:"\ud83d\ude34",unknown:"\u2728"};return t[e]||t.unknown};return(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Habit Performance"}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(x,{variant:"completionRate"===n?"primary":"outline",size:"sm",onClick:()=>i("completionRate"),children:"Completion Rate"}),(0,g.jsx)(x,{variant:"streak"===n?"primary":"outline",size:"sm",onClick:()=>i("streak"),children:"Current Streak"}),(0,g.jsx)(x,{variant:"consistency"===n?"primary":"outline",size:"sm",onClick:()=>i("consistency"),children:"Consistency"})]})]})}),(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"space-y-4",children:[o.map((e,t)=>{const n=(e=>{switch(e){case"up":return{icon:"\ud83d\udcc8",color:"text-green-600"};case"down":return{icon:"\ud83d\udcc9",color:"text-red-600"};default:return{icon:"\u27a1\ufe0f",color:"text-gray-600"}}})(e.trendDirection),r=s===e.habitId;return(0,g.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,g.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>a(r?null:e.habitId),children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:l(e.habitCategory)}),(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:["#",t+1]})]}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.habitTitle}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,g.jsxs)("span",{className:"text-sm text-gray-600",children:[Wi(e.completionRate)," completion"]}),(0,g.jsxs)("span",{className:"text-sm text-gray-600",children:[e.currentStreak," day streak"]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat(n.color),children:[(0,g.jsx)("span",{children:n.icon}),(0,g.jsx)("span",{className:"capitalize",children:e.trendDirection})]})]})]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full ".concat((i=e.completionRate,i>=80?"bg-green-500":i>=60?"bg-yellow-500":i>=40?"bg-orange-500":"bg-red-500")," transition-all duration-500"),style:{width:"".concat(Math.max(5,e.completionRate),"%")}})}),(0,g.jsxs)("span",{className:"text-lg font-semibold text-gray-900 w-12 text-right",children:[Math.round(e.completionRate),"%"]}),(0,g.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),r&&(0,g.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 p-4",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:e.totalCompletions}),(0,g.jsx)("p",{className:"text-xs text-gray-600",children:"Total Completions"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:e.longestStreak}),(0,g.jsx)("p",{className:"text-xs text-gray-600",children:"Longest Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:Math.round(e.consistencyScore)}),(0,g.jsx)("p",{className:"text-xs text-gray-600",children:"Consistency Score"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:Math.round(e.averageGapBetweenCompletions)}),(0,g.jsx)("p",{className:"text-xs text-gray-600",children:"Avg Gap (days)"})]})]}),(0,g.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Last completed: "}),(0,g.jsx)("span",{className:"font-medium",children:e.lastCompleted?new Date(e.lastCompleted).toLocaleDateString():"Never"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Days tracked: "}),(0,g.jsx)("span",{className:"font-medium",children:e.daysTracked})]})]})})]})]},e.habitId);var i}),0===t.length&&(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcca"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Habit Data Yet"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Start tracking habits to see detailed performance analytics here."})]})]})})]})}function $i(e){let{dailyStats:t,weeklyStats:n,monthlyStats:i}=e;const[s,a]=(0,r.useState)("daily");return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Time-Based Analysis"}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(x,{variant:"daily"===s?"primary":"outline",size:"sm",onClick:()=>a("daily"),children:"Daily"}),(0,g.jsx)(x,{variant:"weekly"===s?"primary":"outline",size:"sm",onClick:()=>a("weekly"),children:"Weekly"}),(0,g.jsx)(x,{variant:"monthly"===s?"primary":"outline",size:"sm",onClick:()=>a("monthly"),children:"Monthly"})]})]})}),(0,g.jsxs)(D,{children:["daily"===s&&(0,g.jsx)(Ji,{stats:t}),"weekly"===s&&(0,g.jsx)(Xi,{stats:n}),"monthly"===s&&(0,g.jsx)(Zi,{stats:i})]})]}),(0,g.jsx)(es,{dailyStats:t})]})}function Ji(e){let{stats:t}=e;if(0===t.length)return(0,g.jsx)("div",{className:"text-center py-8",children:(0,g.jsx)("p",{className:"text-gray-600",children:"No daily data available for the selected time range."})});const n=Math.max(...t.map(e=>e.completions)),r=t.reduce((e,t)=>e+t.completionRate,0)/t.length;return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,g.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:Wi(r)}),(0,g.jsx)("p",{className:"text-sm text-blue-800",children:"Average Daily Rate"})]}),(0,g.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:n}),(0,g.jsx)("p",{className:"text-sm text-green-800",children:"Best Day"})]}),(0,g.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:t.filter(e=>e.completions>0).length}),(0,g.jsx)("p",{className:"text-sm text-purple-800",children:"Active Days"})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Daily Completion Chart"}),(0,g.jsx)("div",{className:"relative",children:(0,g.jsx)("div",{className:"flex items-end space-x-1 h-32 overflow-x-auto pb-4",children:t.slice(-30).map((e,t)=>{const r=n>0?e.completions/n*100:0,i=new Date(e.date);return(0,g.jsxs)("div",{className:"flex flex-col items-center space-y-1 min-w-0",children:[(0,g.jsx)("div",{className:"w-4 rounded-t transition-all duration-300 ".concat(e.completions>0?"bg-primary-500":"bg-gray-200"),style:{height:"".concat(Math.max(4,r),"%")},title:"".concat(e.date,": ").concat(e.completions," completions (").concat(Wi(e.completionRate),")")}),(0,g.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,g.jsx)("div",{children:i.getDate()}),t%7===0&&(0,g.jsx)("div",{className:"text-xs",children:i.toLocaleDateString("en-US",{month:"short"})})]})]},e.date)})})})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Recent Performance (Last 7 Days)"}),(0,g.jsx)("div",{className:"space-y-2",children:t.slice(-7).map(e=>(0,g.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-900",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,g.jsx)("span",{className:"text-sm text-gray-600",children:e.dayOfWeek})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsxs)("span",{className:"text-sm text-gray-600",children:[e.completions,"/",e.totalHabits]}),(0,g.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:"".concat(Math.max(5,e.completionRate),"%")}})}),(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900 w-10 text-right",children:[Math.round(e.completionRate),"%"]})]})]},e.date))})]})]})}function Xi(e){let{stats:t}=e;if(0===t.length)return(0,g.jsx)("div",{className:"text-center py-8",children:(0,g.jsx)("p",{className:"text-gray-600",children:"No weekly data available for the selected time range."})});const n=t.reduce((e,t)=>e+t.completionRate,0)/t.length,r=t.reduce((e,t)=>t.completionRate>e.completionRate?t:e);return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:Wi(n)}),(0,g.jsx)("p",{className:"text-sm text-blue-800",children:"Average Weekly Rate"})]}),(0,g.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:Wi(r.completionRate)}),(0,g.jsx)("p",{className:"text-sm text-green-800",children:"Best Week"})]})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Weekly Performance"}),(0,g.jsx)("div",{className:"space-y-2",children:t.slice(-8).map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Week ",e.weekNumber]}),(0,g.jsxs)("span",{className:"text-xs text-gray-500",children:[new Date(e.weekStart).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(e.weekEnd).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsxs)("span",{className:"text-sm text-gray-600",children:[e.completions,"/",e.totalPossible]}),(0,g.jsx)("div",{className:"w-20 h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:"".concat(Math.max(5,e.completionRate),"%")}})}),(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900 w-10 text-right",children:[Math.round(e.completionRate),"%"]})]})]},"".concat(e.weekStart,"-").concat(e.weekEnd)))})]})]})}function Zi(e){let{stats:t}=e;if(0===t.length)return(0,g.jsx)("div",{className:"text-center py-8",children:(0,g.jsx)("p",{className:"text-gray-600",children:"No monthly data available for the selected time range."})});const n=t.reduce((e,t)=>e+t.completionRate,0)/t.length,r=t.reduce((e,t)=>t.completionRate>e.completionRate?t:e);return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:Wi(n)}),(0,g.jsx)("p",{className:"text-sm text-blue-800",children:"Average Monthly Rate"})]}),(0,g.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:Wi(r.completionRate)}),(0,g.jsxs)("p",{className:"text-sm text-green-800",children:["Best Month (",r.month,")"]})]})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Performance"}),(0,g.jsx)("div",{className:"space-y-3",children:t.slice(-6).map(e=>(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsxs)("h5",{className:"text-lg font-medium text-gray-900",children:[e.month," ",e.year]}),(0,g.jsxs)("span",{className:"text-xl font-bold text-primary-600",children:[Math.round(e.completionRate),"%"]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Completions:"}),(0,g.jsx)("span",{className:"ml-2 font-medium",children:e.completions})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Active Days:"}),(0,g.jsx)("span",{className:"ml-2 font-medium",children:e.daysActive})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Possible:"}),(0,g.jsx)("span",{className:"ml-2 font-medium",children:e.totalPossible})]})]}),(0,g.jsx)("div",{className:"mt-3 w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:"".concat(Math.max(2,e.completionRate),"%")}})})]},"".concat(e.month,"-").concat(e.year)))})]})]})}function es(e){let{dailyStats:t}=e;const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>{const n=t.filter(t=>t.dayOfWeek===e),r=n.length>0?n.reduce((e,t)=>e+t.completionRate,0)/n.length:0,i=n.reduce((e,t)=>e+t.completions,0);return{day:e,avgCompletionRate:r,totalCompletions:i,daysTracked:n.length}}),r=n.reduce((e,t)=>t.avgCompletionRate>e.avgCompletionRate?t:e),i=n.reduce((e,t)=>t.avgCompletionRate<e.avgCompletionRate?t:e);return(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Day of Week Analysis"})}),(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-lg font-bold text-green-600 mb-1",children:r.day}),(0,g.jsxs)("div",{className:"text-sm text-green-800",children:["Best Day (",Wi(r.avgCompletionRate),")"]})]}),(0,g.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-lg font-bold text-red-600 mb-1",children:i.day}),(0,g.jsxs)("div",{className:"text-sm text-red-800",children:["Lowest Day (",Wi(i.avgCompletionRate),")"]})]})]}),(0,g.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,g.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-900 w-20",children:e.day}),(0,g.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,g.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:"".concat(Math.max(2,e.avgCompletionRate),"%")}})}),(0,g.jsxs)("span",{className:"text-sm text-gray-600 w-12 text-right",children:[Math.round(e.avgCompletionRate),"%"]}),(0,g.jsxs)("span",{className:"text-xs text-gray-500 w-16 text-right",children:["(",e.totalCompletions," total)"]})]})]},e.day))})]})})]})}const ts=e=>{let{badgeDisplay:t,onClose:n}=e;const{badge:r,userBadge:i,progress:s,isEarned:a}=t;return(0,g.jsx)(F,{isOpen:!0,onClose:n,size:"lg",children:(0,g.jsxs)("div",{className:"p-6 max-w-2xl",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("div",{className:"text-5xl",children:r.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:r.name}),(0,g.jsx)("p",{className:"text-gray-600",children:r.description}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,g.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({common:"text-gray-600 bg-gray-100",uncommon:"text-green-600 bg-green-100",rare:"text-blue-600 bg-blue-100",legendary:"text-purple-600 bg-purple-100"}[r.rarity]),children:{common:"Common",uncommon:"Uncommon",rare:"Rare",legendary:"Legendary"}[r.rarity]}),(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:[r.category.charAt(0).toUpperCase()+r.category.slice(1)," Badge"]})]})]})]}),(0,g.jsx)("div",{className:"text-center",children:a?(0,g.jsxs)("div",{className:"text-green-600",children:[(0,g.jsx)("div",{className:"text-3xl",children:"\ud83c\udf89"}),(0,g.jsx)("div",{className:"text-sm font-medium",children:"Earned!"}),i&&(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(i.earnedAt).toLocaleDateString()})]}):(0,g.jsxs)("div",{className:"text-blue-600",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(s),"%"]}),(0,g.jsx)("div",{className:"text-sm",children:"Progress"}),(0,g.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})})]})})]}),(0,g.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[(0,g.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"How to Earn This Badge"}),(0,g.jsx)("p",{className:"text-blue-800",children:(()=>{switch(r.requirement.type){case"streak":return"Complete a habit for ".concat(r.requirement.threshold," consecutive days");case"consistency_rate":const e=r.requirement.timeframe||"all time";return"Maintain ".concat(r.requirement.threshold,"% consistency over ").concat(e);case"total_completions":return"Complete ".concat(r.requirement.threshold," total habit sessions");case"recovery_success":return"Successfully recover from ".concat(r.requirement.threshold," habit lapse").concat(r.requirement.threshold>1?"s":"");case"research_engagement":return"Read research explanations for ".concat(r.requirement.threshold," different habits");default:return"Complete the required milestone"}})()}),r.requirement.habitSpecific&&(0,g.jsx)("p",{className:"text-blue-700 text-xs mt-2",children:"* This badge can be earned separately for each habit"}),r.requirement.globalAchievement&&(0,g.jsx)("p",{className:"text-blue-700 text-xs mt-2",children:"* This badge considers progress across all your habits"})]}),(0,g.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[(0,g.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udd2c"}),"Why This Milestone Matters"]}),(0,g.jsx)("p",{className:"text-gray-700 mb-3",children:r.researchExplanation}),r.researchCitation&&(0,g.jsx)("div",{className:"border-t pt-3 mt-3",children:(0,g.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,g.jsx)("strong",{children:"Source:"})," ",r.researchCitation.authors," (",r.researchCitation.year,").",r.researchCitation.title&&(0,g.jsxs)(g.Fragment,{children:[" ",(0,g.jsx)("em",{children:r.researchCitation.title}),"."]}),r.researchCitation.journal&&"Book"!==r.researchCitation.journal&&(0,g.jsxs)(g.Fragment,{children:[" ",r.researchCitation.journal,"."]}),r.researchCitation.url&&(0,g.jsx)("a",{href:r.researchCitation.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:underline",children:"View Study"})]})})]}),(0,g.jsx)("div",{className:"text-center",children:a?(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Congratulations! You've demonstrated real scientific commitment to habit formation. This milestone represents meaningful behavioral change backed by research."}),(0,g.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udf1f"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Keep building on this foundation - every habit you maintain makes the next one easier!"})]}):s>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"You're making great progress! Remember, consistency matters more than perfection. Each day you practice is building neural pathways for lasting change."}),(0,g.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udcaa"}),(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:["Keep going - you're ",Math.round(s),"% of the way to this milestone!"]})]}):(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"This badge awaits your commitment! Start building the habits that will unlock this research-backed milestone. Remember, every expert was once a beginner."}),(0,g.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\ude80"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Begin today, and let science guide your journey to lasting change!"})]})}),(0,g.jsx)("div",{className:"flex justify-center mt-6",children:(0,g.jsx)("button",{onClick:n,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})};var ns=n(724);const rs=e=>{let{userId:t,habitId:n,className:i=""}=e;const[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("all"),{getDisplayBadges:u,markBadgeAsViewed:d,getTotalBadgeCount:h,newBadgeQueue:m}=(0,ns.useBadgeStore)(),f=u(t,n),{earned:p,total:y}=h(t),x=f.filter(e=>{switch(l){case"earned":return e.isEarned;case"progress":return!e.isEarned&&e.progress>0;case"all":return!0;default:return e.badge.category===l}}),b=x.filter(e=>e.isEarned),v=x.filter(e=>!e.isEarned&&e.progress>0),D=x.filter(e=>!e.isEarned&&0===e.progress),w=e=>{o(e),e.isNew&&d(e.badge.id)};(0,r.useEffect)(()=>{m.length>0&&console.log("\ud83c\udf89 New badges earned:",m.map(e=>e.badgeId))},[m]);const C={milestone:"Milestones",streak:"Streaks",consistency:"Consistency",recovery:"Recovery",learning:"Learning"};return 0===f.length?(0,g.jsxs)("div",{className:"text-center py-8 ".concat(i),children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfc6"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Your Badge Journey"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Complete habits to unlock research-backed achievement badges!"})]}):(0,g.jsxs)("div",{className:"space-y-6 ".concat(i),children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Habit Badges":"Your Achievements"}),(0,g.jsxs)("p",{className:"text-gray-600",children:[p," of ",y," badges earned",p>0&&(0,g.jsxs)("span",{className:"ml-2",children:["(",Math.round(p/y*100),"%)"]})]})]}),y>0&&(0,g.jsxs)("div",{className:"relative w-16 h-16",children:[(0,g.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,g.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"".concat(p/y*100*2.83," 283"),className:"text-blue-600"}),(0,g.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200"})]}),(0,g.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[Math.round(p/y*100),"%"]})})]})]}),(0,g.jsx)("div",{className:"border-b border-gray-200",children:(0,g.jsx)("nav",{className:"-mb-px flex space-x-8",children:["all","earned","progress","milestone","streak","consistency","recovery","learning"].map(e=>{const t=l===e,n=f.filter(t=>{switch(e){case"all":return!0;case"earned":return t.isEarned;case"progress":return!t.isEarned&&t.progress>0;default:return t.badge.category===e}}).length;if(0===n&&"all"!==e)return null;const r="all"===e?"All":"earned"===e?"Earned":"progress"===e?"In Progress":C[e]||e;return(0,g.jsxs)("button",{onClick:()=>c(e),className:"py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ".concat(t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r," (",n,")"]},e)})})}),b.length>0&&("all"===l||"earned"===l)&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83c\udf89"}),"Earned Badges"]}),(0,g.jsx)("div",{className:"grid grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4",children:b.map(e=>{var t;return(0,g.jsx)(E,(0,s.A)((0,s.A)({},e),{},{onClick:()=>w(e),size:"medium"}),"".concat(e.badge.id,"-").concat((null===(t=e.userBadge)||void 0===t?void 0:t.habitId)||"global"))})})]}),v.length>0&&("all"===l||"progress"===l)&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\u23f3"}),"Almost There"]}),(0,g.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4",children:v.slice(0,8).map(e=>{var t;return(0,g.jsx)(E,(0,s.A)((0,s.A)({},e),{},{onClick:()=>w(e),size:"medium",showProgress:!0}),"".concat(e.badge.id,"-").concat((null===(t=e.userBadge)||void 0===t?void 0:t.habitId)||"global"))})}),v.length>8&&(0,g.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["And ",v.length-8," more badges in progress..."]})]}),D.length>0&&"all"===l&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83c\udfaf"}),"Available Badges"]}),(0,g.jsx)("div",{className:"grid grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4",children:D.slice(0,6).map(e=>{var t;return(0,g.jsx)(E,(0,s.A)((0,s.A)({},e),{},{onClick:()=>w(e),size:"small",showProgress:!1}),"".concat(e.badge.id,"-").concat((null===(t=e.userBadge)||void 0===t?void 0:t.habitId)||"global"))})}),D.length>6&&(0,g.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[D.length-6," more badges available to unlock..."]})]}),"all"!==l&&"earned"!==l&&"progress"!==l&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[C[l]||l," Badges"]}),(0,g.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4",children:x.map(e=>{var t;return(0,g.jsx)(E,(0,s.A)((0,s.A)({},e),{},{onClick:()=>w(e),size:"medium",showProgress:!0}),"".concat(e.badge.id,"-").concat((null===(t=e.userBadge)||void 0===t?void 0:t.habitId)||"global"))})})]}),0===x.length&&(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd0d"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No badges found"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Try a different filter or start working on habits to unlock badges!"})]}),a&&(0,g.jsx)(ts,{badgeDisplay:a,onClose:()=>o(null)})]})};function is(e){let{habitPerformance:t,dailyStats:n}=e;const[i,a]=(0,r.useState)("correlations"),o=(0,r.useMemo)(()=>function(e){const t=[];if(e.length<2)return t;for(let n=0;n<e.length;n++)for(let r=n+1;r<e.length;r++){const i=e[n],s=e[r],a=(1-Math.abs(i.completionRate-s.completionRate)/100+(1-Math.abs(i.currentStreak-s.currentStreak)/Math.max(i.currentStreak,s.currentStreak,1))+(1-Math.abs(i.consistencyScore-s.consistencyScore)/100))/3;let o="weak";if(Math.abs(a)>.7?o="strong":Math.abs(a)>.5&&(o="moderate"),"weak"!==o){const e=a>0?"positive":"negative",n="positive"===e?"These habits tend to be completed together, suggesting they complement each other well in your routine.":"These habits are rarely completed on the same day, which might indicate competing priorities or scheduling conflicts.";t.push({habit1:i.habitTitle,habit2:s.habitTitle,correlation:a,strength:o,type:e,insight:n})}}return t.sort((e,t)=>Math.abs(t.correlation)-Math.abs(e.correlation)).slice(0,6)}(t),[t]),l=(0,r.useMemo)(()=>function(e){const t=e.reduce((e,t)=>{const n=t.habitCategory||"unknown";return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.entries(t).map(e=>{let[t,n]=e;return{category:t,totalHabits:n.length,averageCompletionRate:n.reduce((e,t)=>e+t.completionRate,0)/n.length,totalCompletions:n.reduce((e,t)=>e+t.totalCompletions,0),bestPerformingHabit:n.reduce((e,t)=>t.completionRate>e.completionRate?t:e).habitTitle,habits:n}})}(t),[t]),c=(0,r.useMemo)(()=>function(e){return e.map(t=>(0,s.A)((0,s.A)({},t),{},{relativePerformance:t.completionRate/(e.reduce((e,t)=>e+t.completionRate,0)/e.length)*100}))}(t),[t]);return(0,g.jsx)("div",{className:"space-y-6",children:(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Habit Relationships & Insights"}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(x,{variant:"correlations"===i?"primary":"outline",size:"sm",onClick:()=>a("correlations"),children:"\ud83d\udd17 Correlations"}),(0,g.jsx)(x,{variant:"comparisons"===i?"primary":"outline",size:"sm",onClick:()=>a("comparisons"),children:"\ud83d\udcca Comparisons"}),(0,g.jsx)(x,{variant:"categories"===i?"primary":"outline",size:"sm",onClick:()=>a("categories"),children:"\ud83c\udff7\ufe0f Categories"})]})]})}),(0,g.jsxs)(D,{children:["correlations"===i&&(0,g.jsx)(ss,{insights:o}),"comparisons"===i&&(0,g.jsx)(os,{comparisons:c}),"categories"===i&&(0,g.jsx)(ls,{categories:l})]})]})})}function ss(e){let{insights:t}=e;if(0===t.length)return(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd17"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Correlations Found"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Track more habits consistently to discover meaningful correlations and patterns."})]});const n=t.filter(e=>"strong"===e.strength),r=t.filter(e=>"moderate"===e.strength);return(0,g.jsxs)("div",{className:"space-y-6",children:[n.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udcaa"}),"Strong Correlations"]}),(0,g.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,g.jsx)(as,{insight:e},t))})]}),r.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udcc8"}),"Moderate Correlations"]}),(0,g.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>(0,g.jsx)(as,{insight:e},t))})]}),(0,g.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,g.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:"\ud83d\udca1"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Understanding Correlations"}),(0,g.jsx)("p",{className:"text-sm text-blue-700",children:"Positive correlations suggest habits that tend to be completed together, while negative correlations indicate habits that are rarely done on the same day. Use this insight to bundle complementary habits or identify potential conflicts in your routine."})]})]})})]})}function as(e){let{insight:t}=e;return(0,g.jsx)("div",{className:"p-4 rounded-lg border ".concat((n=t.correlation,r=t.type,"positive"===r?n>.7?"bg-green-100 border-green-300":"bg-green-50 border-green-200":n<-.7?"bg-red-100 border-red-300":"bg-red-50 border-red-200")),children:(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,g.jsx)("span",{className:"text-lg",children:(e=>"positive"===e?"\ud83d\udcc8":"\ud83d\udcc9")(t.type)}),(0,g.jsxs)("h5",{className:"font-medium text-gray-900",children:[t.habit1," \u2194 ",t.habit2]}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat("strong"===t.strength?"bg-purple-100 text-purple-700":"moderate"===t.strength?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t.strength})]}),(0,g.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.insight}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,g.jsxs)("span",{children:["Correlation: ",(100*t.correlation).toFixed(1),"%"]}),(0,g.jsxs)("span",{className:"capitalize",children:[t.type," relationship"]})]})]}),(0,g.jsxs)("div",{className:"text-2xl font-bold text-gray-600",children:[Math.abs(100*t.correlation).toFixed(0),"%"]})]})});var n,r}function os(e){let{comparisons:t}=e;const[n,i]=(0,r.useState)("performance"),s=[...t].sort((e,t)=>{switch(n){case"performance":return t.completionRate-e.completionRate;case"consistency":return t.consistencyScore-e.consistencyScore;case"streak":return t.currentStreak-e.currentStreak;default:return 0}});return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Side-by-Side Comparison"}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(x,{variant:"performance"===n?"primary":"outline",size:"sm",onClick:()=>i("performance"),children:"Performance"}),(0,g.jsx)(x,{variant:"consistency"===n?"primary":"outline",size:"sm",onClick:()=>i("consistency"),children:"Consistency"}),(0,g.jsx)(x,{variant:"streak"===n?"primary":"outline",size:"sm",onClick:()=>i("streak"),children:"Streak"})]})]}),(0,g.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:["#",t+1]}),(0,g.jsx)("h5",{className:"font-medium text-gray-900",children:e.habitTitle}),(0,g.jsx)("span",{className:"text-sm px-2 py-1 bg-white rounded-full text-gray-600 capitalize",children:e.habitCategory})]}),(0,g.jsxs)("div",{className:"text-lg font-bold text-primary-600",children:[Math.round(e.completionRate),"%"]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4 text-sm",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.totalCompletions}),(0,g.jsx)("div",{className:"text-gray-500",children:"Completions"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-orange-600",children:e.currentStreak}),(0,g.jsx)("div",{className:"text-gray-500",children:"Current Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-green-600",children:e.longestStreak}),(0,g.jsx)("div",{className:"text-gray-500",children:"Best Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:Math.round(e.consistencyScore)}),(0,g.jsx)("div",{className:"text-gray-500",children:"Consistency"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-purple-600",children:e.daysTracked}),(0,g.jsx)("div",{className:"text-gray-500",children:"Days Tracked"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-gray-600",children:Math.round(e.averageGapBetweenCompletions)}),(0,g.jsx)("div",{className:"text-gray-500",children:"Avg Gap"})]})]}),(0,g.jsx)("div",{className:"mt-3 w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:"".concat(Math.max(5,e.completionRate),"%")}})})]},e.habitId))})]})}function ls(e){let{categories:t}=e;return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Performance by Category"}),(0,g.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,g.jsx)(b,{className:"hover:shadow-md transition-shadow",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl mb-3",children:(e=>{const t={stress:"\ud83e\uddd8\u200d\u2640\ufe0f",productivity:"\u26a1",health:"\ud83d\udcaa",energy:"\ud83d\udd0b",sleep:"\ud83d\ude34",unknown:"\u2728"};return t[e]||t.unknown})(e.category)}),(0,g.jsx)("h5",{className:"font-semibold text-gray-900 capitalize mb-2",children:e.category}),(0,g.jsxs)("div",{className:"text-2xl font-bold text-primary-600 mb-1",children:[Math.round(e.averageCompletionRate),"%"]}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Average completion rate"}),(0,g.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Active habits:"}),(0,g.jsx)("span",{className:"font-medium",children:e.totalHabits})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Total completions:"}),(0,g.jsx)("span",{className:"font-medium",children:e.totalCompletions})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Best performer:"}),(0,g.jsx)("span",{className:"font-medium text-green-600",children:e.bestPerformingHabit})]})]}),(0,g.jsx)("div",{className:"mt-4 w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,g.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:"".concat(Math.max(5,e.averageCompletionRate),"%")}})})]})})},e.category))}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h5",{className:"font-semibold text-gray-900",children:"Category Insights"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:cs(t).map((e,t)=>(0,g.jsx)("div",{className:"p-3 rounded-lg ".concat("positive"===e.type?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"),children:(0,g.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium ".concat("positive"===e.type?"text-green-800":"text-blue-800"),children:e.title}),(0,g.jsx)("p",{className:"text-sm ".concat("positive"===e.type?"text-green-700":"text-blue-700"),children:e.message})]})]})},t))})})]})]})}function cs(e){const t=[],n=e.reduce((e,t)=>t.averageCompletionRate>e.averageCompletionRate?t:e),r=e.reduce((e,t)=>t.averageCompletionRate<e.averageCompletionRate?t:e);return t.push({title:"".concat(n.category.charAt(0).toUpperCase()+n.category.slice(1)," is your strongest category"),message:"With an average ".concat(Math.round(n.averageCompletionRate),"% completion rate, you're excelling in ").concat(n.category," habits."),type:"positive",icon:"\ud83c\udfc6"}),n!==r&&t.push({title:"Consider focusing more on ".concat(r.category," habits"),message:"Your ".concat(r.category," habits have a ").concat(Math.round(r.averageCompletionRate),"% completion rate. This might be an area for improvement."),type:"info",icon:"\ud83d\udca1"}),t}function us(e){let{analytics:t,habitPerformance:n}=e;const[i,s]=(0,r.useState)("active"),[a,o]=(0,r.useState)(!1),l=(0,r.useMemo)(()=>function(e,t){const n=[],r=new Date,i=new Date(r.getTime()+2592e6);e.overallCompletionRate<80&&n.push({id:"overall_completion_80",type:"completion_rate",title:"Reach 80% Overall Completion",description:"Achieve a steady 80% completion rate across all habits",target:80,current:e.overallCompletionRate,icon:"\ud83c\udfaf",color:"blue",priority:"high",deadline:i.toISOString()});e.longestOverallStreak<30&&n.push({id:"streak_30",type:"streak",title:"30-Day Streak Master",description:"Maintain a 30-day streak for any habit",target:30,current:e.longestOverallStreak,icon:"\ud83d\udd25",color:"orange",priority:"medium",deadline:i.toISOString()});e.consistencyScore<75&&n.push({id:"consistency_75",type:"consistency",title:"Improve Consistency",description:"Achieve a consistency score of 75 or higher",target:75,current:e.consistencyScore,icon:"\u26a1",color:"purple",priority:"medium",deadline:i.toISOString()});const s=e.totalCompletions<100?100:e.totalCompletions<250?250:e.totalCompletions<500?500:1e3;n.push({id:"completions_".concat(s),type:"total_completions",title:"".concat(s," Completions Club"),description:"Reach ".concat(s," total habit completions"),target:s,current:e.totalCompletions,icon:"\ud83d\udcaf",color:"green",priority:e.totalCompletions<100?"high":"low",deadline:i.toISOString()});const a=t.filter(e=>e.completionRate<90).sort((e,t)=>t.completionRate+t.consistencyScore-(e.completionRate+e.consistencyScore)).slice(0,3).map(e=>({id:"habit_improve_".concat(e.habitId),type:"completion_rate",title:"Improve ".concat(e.habitTitle),description:"Reach 80% completion rate for this habit",target:80,current:e.completionRate,habitId:e.habitId,icon:"\ud83d\udcc8",color:"blue",priority:"medium",deadline:i.toISOString()}));return n.push(...a),n.sort((e,t)=>{const n={high:3,medium:2,low:1};return n[t.priority]-n[e.priority]})}(t,n),[t,n]),c=l.filter(e=>e.current<e.target),u=l.filter(e=>e.current>=e.target),d="active"===i?c:"completed"===i?u:l;return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Goal Progress Tracker"}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:[u.length," completed \u2022 ",c.length," in progress"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[u.length>0&&(0,g.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,g.jsx)("input",{type:"checkbox",checked:a,onChange:e=>{o(e.target.checked),e.target.checked&&"active"===i?s("all"):e.target.checked||"active"===i||s("active")},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,g.jsxs)("span",{className:"text-gray-700",children:["Show completed (",u.length,")"]})]}),(0,g.jsxs)("div",{className:"flex space-x-1",children:[(0,g.jsx)(x,{variant:"active"===i?"primary":"outline",size:"sm",onClick:()=>{s("active"),o(!1)},children:"\ud83c\udfaf Active"}),a&&(0,g.jsx)(x,{variant:"completed"===i?"primary":"outline",size:"sm",onClick:()=>s("completed"),children:"\u2705 Completed"})]})]})]})}),(0,g.jsx)(D,{children:(0,g.jsx)(ds,{goals:d})})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Success Metrics"})}),(0,g.jsx)(D,{children:(0,g.jsx)(ms,{analytics:t,habitPerformance:n,completedGoals:u.length,totalGoals:l.length})})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Progress Insights"})}),(0,g.jsx)(D,{children:(0,g.jsx)(fs,{goals:l,analytics:t})})]})]})}function ds(e){let{goals:t}=e;if(0===t.length)return(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfaf"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Goals Found"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Goals are automatically generated based on your habit tracking patterns."})]});const n={high:t.filter(e=>"high"===e.priority),medium:t.filter(e=>"medium"===e.priority),low:t.filter(e=>"low"===e.priority)};return(0,g.jsx)("div",{className:"space-y-6",children:Object.entries(n).map(e=>{let[t,n]=e;return 0===n.length?null:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,g.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("high"===t?"bg-red-500":"medium"===t?"bg-yellow-500":"bg-green-500")}),(0,g.jsxs)("h5",{className:"font-medium text-gray-900 capitalize",children:[t," Priority"]}),(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:["(",n.length,")"]})]}),(0,g.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:n.map(e=>(0,g.jsx)(hs,{goal:e},e.id))})]},t)})})}function hs(e){let{goal:t}=e;const[n,i]=(0,r.useState)(!1),s=Math.min(100,t.current/t.target*100),a=t.current>=t.target,o=s>=80;return(0,g.jsxs)("div",{className:"rounded-lg border-2 transition-all hover:shadow-md ".concat(a?"border-green-300 bg-green-50":"high"===t.priority?"border-red-200 bg-red-50":"medium"===t.priority?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-white"),children:[(0,g.jsxs)("button",{onClick:()=>i(!n),className:"w-full p-4 text-left hover:bg-opacity-50 transition-colors rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-2xl",children:t.icon}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h6",{className:"font-medium text-gray-900",children:t.title}),(0,g.jsx)("p",{className:"text-xs text-gray-600 line-clamp-1",children:t.description})]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,g.jsx)("div",{className:"text-green-600",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,g.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(n?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,g.jsxs)("div",{className:"mt-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,g.jsxs)("span",{className:"font-medium ".concat(a?"text-green-600":"text-gray-600"),children:[Math.round(s),"% Complete"]}),(0,g.jsxs)("span",{className:"text-gray-500 text-xs",children:[ps(t.current,t.type)," / ",ps(t.target,t.type)]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,g.jsx)("div",{className:"h-full transition-all duration-500 ".concat(a?"bg-green-500":o?"bg-yellow-500":"blue"===t.color?"bg-blue-500":"purple"===t.color?"bg-purple-500":"orange"===t.color?"bg-orange-500":"bg-primary-500"),style:{width:"".concat(Math.max(3,s),"%")}})})]})]}),n&&(0,g.jsxs)("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-200 pt-3",children:[(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("p",{className:"text-sm text-gray-700",children:t.description}),t.deadline&&(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,g.jsxs)("span",{children:["Due: ",new Date(t.deadline).toLocaleDateString()]})]}),t.habitId&&(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,g.jsx)("span",{children:"Individual habit goal"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,g.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("high"===t.priority?"bg-red-500":"medium"===t.priority?"bg-yellow-500":"bg-green-500")}),(0,g.jsxs)("span",{className:"capitalize",children:[t.priority," priority"]})]})]}),o&&!a&&(0,g.jsx)("div",{className:"text-xs text-yellow-700 bg-yellow-100 px-3 py-2 rounded-md",children:"\ud83d\udd25 Almost there! Keep going!"}),a&&(0,g.jsx)("div",{className:"text-xs text-green-700 bg-green-100 px-3 py-2 rounded-md",children:"\ud83c\udf89 Goal completed! Great job!"})]})]})}function ms(e){let{analytics:t,habitPerformance:n,completedGoals:r,totalGoals:i}=e;const s=[{title:"Goal Completion Rate",value:i>0?Math.round(r/i*100):0,suffix:"%",icon:"\ud83c\udfaf",color:"text-blue-600"},{title:"Average Habit Success",value:Math.round(t.overallCompletionRate),suffix:"%",icon:"\ud83d\udcc8",color:"text-green-600"},{title:"Consistency Score",value:Math.round(t.consistencyScore),suffix:"/100",icon:"\u26a1",color:"text-purple-600"},{title:"Active Streaks",value:t.currentStreaks.filter(e=>e>0).length,suffix:"",icon:"\ud83d\udd25",color:"text-orange-600"}];return(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((e,t)=>(0,g.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,g.jsxs)("div",{className:"text-2xl font-bold mb-1 ".concat(e.color),children:[e.value,e.suffix]}),(0,g.jsx)("p",{className:"text-xs text-gray-600",children:e.title})]},t))})}function fs(e){let{goals:t,analytics:n}=e;const r=[],i=t.filter(e=>e.current>=e.target),s=t.filter(e=>{const t=e.current/e.target*100;return t>=80&&t<100});return i.length>0&&r.push({title:"Excellent Progress!",message:"You've completed ".concat(i.length," goal").concat(i.length>1?"s":"",". This shows great commitment to your habit building journey."),type:"positive",icon:"\ud83c\udf89"}),s.length>0&&r.push({title:"Almost There!",message:"You're close to completing ".concat(s.length," goal").concat(s.length>1?"s":"",". A little more effort will get you across the finish line."),type:"info",icon:"\ud83d\udd25"}),n.overallCompletionRate>=80&&r.push({title:"High Achiever",message:"Your ".concat(Math.round(n.overallCompletionRate),"% overall completion rate puts you in the top tier of habit trackers. Keep up the excellent work!"),type:"positive",icon:"\ud83c\udf1f"}),n.consistencyScore<60&&r.push({title:"Focus on Consistency",message:"Consider spacing out your habit completions more evenly throughout the tracking period for better long-term results.",type:"info",icon:"\ud83d\udcca"}),(0,g.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>(0,g.jsx)("div",{className:"p-3 rounded-lg ".concat("positive"===e.type?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"),children:(0,g.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium ".concat("positive"===e.type?"text-green-800":"text-blue-800"),children:e.title}),(0,g.jsx)("p",{className:"text-sm ".concat("positive"===e.type?"text-green-700":"text-blue-700"),children:e.message})]})]})},t))})}function ps(e,t){switch(t){case"completion_rate":case"consistency":return"".concat(Math.round(e),"%");case"streak":return"".concat(Math.round(e)," days");default:return Math.round(e).toString()}}function gs(){var e,t;let{onBackToSimple:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[i,s]=(0,r.useState)("goals"),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),{analyticsData:h,selectedTimeRange:m,isLoading:f,error:p,lastUpdated:y,loadAnalytics:v,setTimeRange:w}=Vi(),{userProgress:C,userHabits:j}=(0,K.kH)();(0,r.useEffect)(()=>{C.length>0&&j.length>0&&v(C,j)},[C,j,m,v]);const k=()=>{C.length>0&&j.length>0&&v(C,j)};if(f)return(0,g.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,g.jsx)("div",{className:"h-64 bg-gray-200 rounded"}),(0,g.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]})});if(p)return(0,g.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"text-red-400 mb-4",children:(0,g.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analytics Error"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:p}),(0,g.jsx)(x,{onClick:k,children:"Try Again"})]})})})});if(!h||0===C.length)return(0,g.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcca"}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Analytics Data"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"Start tracking habits to see detailed analytics and insights about your progress."}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Complete some habits and return here to see your performance metrics."})]})})})});const F=[{id:"goals",name:"Goals",icon:"\ud83c\udfaf",isPrimary:!0},{id:"overview",name:"Overview",icon:"\ud83d\udcca",isPrimary:!1},{id:"performance",name:"Performance",icon:"\ud83d\udcc8",isPrimary:!1},{id:"trends",name:"Trends",icon:"\ud83d\udcc9",isPrimary:!1},{id:"achievements",name:"Achievements",icon:"\ud83c\udfc6",isPrimary:!1},{id:"insights",name:"Insights",icon:"\ud83d\udd17",isPrimary:!1}],N=F.filter(e=>e.isPrimary),E=F.filter(e=>!e.isPrimary),A=[{id:"week",name:"Last Week"},{id:"month",name:"Last Month"},{id:"3months",name:"Last 3 Months"},{id:"year",name:"Last Year"},{id:"all",name:"All Time"}],{start:S,end:_}=Ui(m);return(0,g.jsxs)("div",{className:"max-w-6xl mx-auto p-6 pb-20 md:pb-6",children:[(0,g.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Your progress"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Detailed insights into your habit tracking performance"}),y&&(0,g.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Last updated: ",new Date(y).toLocaleString()]})]}),(0,g.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,g.jsx)("span",{children:(null===(e=A.find(e=>e.id===m))||void 0===e?void 0:e.name)||"Time Range"}),(0,g.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,g.jsx)("div",{className:"absolute top-full left-0 mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-20 animate-in fade-in-0 zoom-in-95 duration-200",children:(0,g.jsx)("div",{className:"py-1",children:A.map(e=>(0,g.jsx)("button",{onClick:()=>{var t;t=e.id,w(t),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm transition-colors hover:bg-gray-50 hover:scale-105 transform ".concat(m===e.id?"text-primary-600 bg-primary-50":"text-gray-700"),children:e.name},e.id))})})]}),(0,g.jsxs)(x,{variant:"outline",size:"sm",onClick:k,children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),(0,g.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg mb-6",children:[(0,g.jsxs)("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-between p-3 text-left hover:bg-blue-100 transition-colors rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsxs)("span",{className:"text-blue-800 font-medium",children:["Analyzing data from ",S.toLocaleDateString()," to ",_.toLocaleDateString()]}),(0,g.jsxs)("span",{className:"text-blue-600 text-sm",children:["(",h.totalDaysTracked," days)"]})]}),(0,g.jsx)("svg",{className:"w-4 h-4 text-blue-600 transition-transform ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,g.jsxs)("div",{className:"px-3 pb-3 space-y-2 text-sm border-t border-blue-200 pt-3",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-blue-800",children:h.totalCompletions}),(0,g.jsx)("div",{className:"text-blue-600",children:"Total Completions"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-lg font-semibold text-blue-800",children:[Math.round(h.overallCompletionRate),"%"]}),(0,g.jsx)("div",{className:"text-blue-600",children:"Completion Rate"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-blue-800",children:h.longestOverallStreak}),(0,g.jsx)("div",{className:"text-blue-600",children:"Longest Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-blue-800",children:h.activeHabitsCount}),(0,g.jsx)("div",{className:"text-blue-600",children:"Active Habits"})]})]}),y&&(0,g.jsx)("div",{className:"text-center pt-2 border-t border-blue-200",children:(0,g.jsxs)("span",{className:"text-blue-600",children:["Last updated: ",new Date(y).toLocaleString()]})})]})]}),(0,g.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,g.jsxs)("nav",{className:"-mb-px flex items-center space-x-4",children:[N.map(e=>(0,g.jsxs)("button",{onClick:()=>s(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ".concat(i===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.name})]},e.id)),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("button",{onClick:()=>o(!a),onMouseEnter:()=>o(!0),className:"flex items-center space-x-2 py-2 px-3 border-b-2 font-medium text-sm whitespace-nowrap transition-all duration-200 hover:bg-gray-50 rounded-t-md ".concat(E.some(e=>e.id===i)?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,g.jsx)("span",{children:"\ud83d\udccb"}),(0,g.jsx)("span",{children:"More..."}),(0,g.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&(0,g.jsx)("div",{className:"absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10 animate-in fade-in-0 zoom-in-95 duration-200",onMouseLeave:()=>o(!1),children:(0,g.jsx)("div",{className:"py-1",children:E.map(e=>(0,g.jsxs)("button",{onClick:()=>{s(e.id),o(!1)},className:"flex items-center space-x-3 w-full px-4 py-2 text-sm transition-colors hover:bg-gray-50 hover:scale-105 transform ".concat(i===e.id?"text-primary-600 bg-primary-50":"text-gray-700"),children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.name})]},e.id))})})]})]})}),(0,g.jsxs)("div",{className:"space-y-6",children:["overview"===i&&(0,g.jsx)(Gi,{analytics:h}),"performance"===i&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)(Qi,{habitPerformance:h.habitPerformance}),(0,g.jsx)(b,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance by Category"}),(0,g.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:h.categoryPerformance.map(e=>(0,g.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,g.jsx)("span",{className:"text-xl",children:(e=>{const t={stress:"\ud83e\uddd8\u200d\u2640\ufe0f",productivity:"\u26a1",health:"\ud83d\udcaa",energy:"\ud83d\udd0b",sleep:"\ud83d\ude34",unknown:"\u2728"};return t[e]||t.unknown})(e.category)}),(0,g.jsx)("h4",{className:"font-medium text-gray-900 capitalize",children:e.category})]}),(0,g.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Habits:"}),(0,g.jsx)("span",{className:"font-medium",children:e.totalHabits})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Completions:"}),(0,g.jsx)("span",{className:"font-medium",children:e.totalCompletions})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Avg Rate:"}),(0,g.jsxs)("span",{className:"font-medium",children:[Math.round(e.averageCompletionRate),"%"]})]}),(0,g.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,g.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,g.jsx)("strong",{children:"Best:"})," ",e.bestPerformingHabit]})})]})]},e.category))})]})})]}),"trends"===i&&(0,g.jsx)($i,{dailyStats:h.dailyStats,weeklyStats:h.weeklyStats,monthlyStats:h.monthlyStats}),"achievements"===i&&(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsx)(rs,{userId:(null===(t=C[0])||void 0===t?void 0:t.userId)||"default-user",className:"pt-4"})})}),"insights"===i&&(0,g.jsx)(is,{habitPerformance:h.habitPerformance,dailyStats:h.dailyStats}),"goals"===i&&(0,g.jsx)(us,{analytics:h,habitPerformance:h.habitPerformance})]})]})}function ys(){return(0,g.jsx)(gs,{})}const xs={weeklyConsistency:{title:"Weekly Consistency Rate",scienceExplanation:"Research shows 70-80% weekly consistency builds stronger neural pathways than perfectionist 100% followed by burnout cycles. Your brain adapts to sustainable patterns.",motivation:"Each week in the optimal zone literally rewires your brain for automatic positive behaviors!",researchSource:"Lally et al., 2010 - Habit Formation Study & Clear, 2018 - Atomic Habits"},monthlyTrend:{title:"Monthly Trend",scienceExplanation:"Habit formation follows a curve, not a straight line. Improvements compound over time as neural pathways strengthen through repetition.",motivation:"Each month builds on the last. Small improvements create massive long-term change through neuroplasticity.",researchSource:"Neuroplasticity research, Doidge 2007"},activeHabits:{title:"Active Habits",scienceExplanation:"The brain can effectively automate 3-5 habits simultaneously without depleting willpower. Multiple habits create positive reinforcement loops.",motivation:"You're building a foundation of success. Each habit makes the next one easier to maintain.",researchSource:"Baumeister & Tierney - Willpower Research"},recoveryWins:{title:"Recovery Wins",scienceExplanation:"Resilience after setbacks is the strongest predictor of long-term habit success. Recovery skills strengthen with practice, just like habits.",motivation:"Every restart proves your resilience. You're training your comeback ability - the most important skill for lasting change.",researchSource:"Resilience research, Southwick & Charney 2012"}},bs=e=>{let{metricKey:t,icon:n,value:i,subtitle:s,trend:a,positive:o}=e;const[l,c]=(0,r.useState)(!1),u=xs[t];return(0,g.jsxs)("div",{className:"relative bg-white p-4 rounded-lg border hover:shadow-md transition-shadow",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("span",{className:"text-2xl",children:n}),u&&(0,g.jsx)("button",{onClick:()=>c(!l),className:"text-blue-500 hover:text-blue-700 text-sm",title:"Show science explanation",children:"\u2139\ufe0f"})]}),(0,g.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:i}),(0,g.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:s}),a&&(0,g.jsx)("div",{className:"text-xs ".concat(o?"text-green-600":"text-gray-500"),children:a}),l&&u&&(0,g.jsxs)("div",{className:"absolute z-10 w-80 p-4 bg-blue-50 border border-blue-200 rounded-lg shadow-lg top-full mt-2 left-0",children:[(0,g.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:u.title}),(0,g.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:u.scienceExplanation}),(0,g.jsxs)("p",{className:"text-sm text-blue-700 font-medium mb-2",children:["\ud83d\udcaa ",u.motivation]}),(0,g.jsx)("p",{className:"text-xs text-blue-600 italic",children:u.researchSource})]})]})};function vs(e){var t,n,r,i,s,a,o,l,c,u,d;let{analytics:h}=e;const m=Math.min(100,Math.round(h.overallCompletionRate)),f=h.completionTrend>0?"improving":h.completionTrend<-5?"declining":"stable",p=Math.abs(Math.round(h.completionTrend)),y=Math.max(0,h.currentStreaks.filter(e=>e>0).length-1),x=[{metricKey:"weeklyConsistency",icon:"\ud83d\udcca",value:"".concat(m,"%"),subtitle:"Focus on trends over perfection",trend:"".concat(p,"% vs last month"),positive:"improving"===f},{metricKey:"monthlyTrend",icon:"\ud83d\udcc8",value:f,subtitle:"Neuroplasticity in action",positive:"improving"===f},{metricKey:"activeHabits",icon:"\ud83c\udfaf",value:h.activeHabitsCount,subtitle:"Currently building"},{metricKey:"recoveryWins",icon:"\ud83d\udd04",value:y,subtitle:"Successful restarts"}];return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:x.map((e,t)=>(0,g.jsx)(bs,{metricKey:e.metricKey,icon:e.icon,value:e.value,subtitle:e.subtitle,trend:e.trend,positive:e.positive},t))}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg border",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:"\ud83e\udde0 Science Fact"}),(0,g.jsx)("p",{className:"text-sm text-gray-700",children:"Your brain physically changes as you build habits. Each repetition strengthens neural pathways, making behaviors feel more automatic over time. You're literally sculpting your future self!"})]})})}),(0,g.jsxs)(b,{children:[(0,g.jsxs)(v,{children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Formation Milestones"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Track your progress against research-backed habit formation timelines"})]}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,g.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-2xl",children:"\ud83e\udde0"}),(0,g.jsx)("h4",{className:"font-semibold text-blue-900",children:"21-Day Neural Strengthening"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:[(null===(t=h.formationMilestones)||void 0===t?void 0:t.day21Milestone.habitsReached)||0,"/",(null===(n=h.formationMilestones)||void 0===n?void 0:n.day21Milestone.totalHabits)||0]}),(0,g.jsxs)("div",{className:"text-xs text-blue-600",children:[Math.round((null===(r=h.formationMilestones)||void 0===r?void 0:r.day21Milestone.percentage)||0),"% complete"]})]})]}),(0,g.jsx)("p",{className:"text-sm text-blue-800 mb-2",children:(null===(i=h.formationMilestones)||void 0===i?void 0:i.day21Milestone.description)||"Initial neural pathway strengthening"}),(0,g.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat((null===(s=h.formationMilestones)||void 0===s?void 0:s.day21Milestone.percentage)||0,"%")}})})]}),(0,g.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-2xl",children:"\u26a1"}),(0,g.jsx)("h4",{className:"font-semibold text-green-900",children:"66-Day Automaticity"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:[(null===(a=h.formationMilestones)||void 0===a?void 0:a.day66Milestone.habitsReached)||0,"/",(null===(o=h.formationMilestones)||void 0===o?void 0:o.day66Milestone.totalHabits)||0]}),(0,g.jsxs)("div",{className:"text-xs text-green-600",children:[Math.round((null===(l=h.formationMilestones)||void 0===l?void 0:l.day66Milestone.percentage)||0),"% complete"]})]})]}),(0,g.jsx)("p",{className:"text-sm text-green-800 mb-2",children:(null===(c=h.formationMilestones)||void 0===c?void 0:c.day66Milestone.description)||"Research-backed average formation time"}),(0,g.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat((null===(u=h.formationMilestones)||void 0===u?void 0:u.day66Milestone.percentage)||0,"%")}})})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:(null===(d=h.formationMilestones)||void 0===d?void 0:d.averageFormationDays)||Math.round(h.totalDaysTracked/h.activeHabitsCount||0)}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Average Formation Days"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Building neural pathways"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:[Math.round(m),"%"]}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Consistency Rate"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Optimal habit formation zone"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:h.totalCompletions}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Neural Activations"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Brain strengthening events"})]})]}),h.habitsMilestoneProgress&&h.habitsMilestoneProgress.length>0&&(0,g.jsxs)("div",{className:"mt-6",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Individual Habit Progress"}),(0,g.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.habitsMilestoneProgress.map((e,t)=>(0,g.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900 text-sm",children:e.habitTitle}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("established"===e.formationStage?"bg-green-100 text-green-800":"forming"===e.formationStage?"bg-blue-100 text-blue-800":"building"===e.formationStage?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.formationStage})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-600",children:["Day ",e.daysActive]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-1 ".concat(e.isAt21Days?"text-blue-600":"text-gray-400"),children:[(0,g.jsx)("span",{children:e.isAt21Days?"\u2705":"\u23f3"}),(0,g.jsxs)("span",{children:["21-day ",e.isAt21Days?"reached":"in ".concat(e.daysTo21," days")]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1 ".concat(e.isAt66Days?"text-green-600":"text-gray-400"),children:[(0,g.jsx)("span",{children:e.isAt66Days?"\u2705":"\u23f3"}),(0,g.jsxs)("span",{children:["66-day ",e.isAt66Days?"reached":"in ".concat(e.daysTo66," days")]})]})]}),e.milestoneAchievements.length>0&&(0,g.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.milestoneAchievements.map((e,t)=>(0,g.jsx)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:e},t))})]},t))})]})]})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Progress Insights"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:Ds(h,m,f).map((e,t)=>(0,g.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor," border ").concat(e.borderColor),children:(0,g.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium ".concat(e.textColor),children:e.title}),(0,g.jsx)("p",{className:"text-sm ".concat(e.messageColor),children:e.message}),e.science&&(0,g.jsxs)("p",{className:"text-xs italic mt-1 ".concat(e.scienceColor),children:["\ud83e\udde0 ",e.science]})]})]})},t))})})]}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200",children:[(0,g.jsx)("h4",{className:"font-semibold text-purple-900 mb-3",children:"\ud83e\uddec Why These Metrics Matter: The Science of Habit Formation"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-purple-800 mb-2",children:"The 70-80% Sweet Spot"}),(0,g.jsx)("p",{className:"text-purple-700",children:"Weekly consistency of 70-80% builds stronger neural pathways than perfectionist 100% followed by burnout. This optimal zone creates sustainable habit formation without stress."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-purple-800 mb-2",children:"The 66-Day Reality"}),(0,g.jsx)("p",{className:"text-purple-700",children:'Forget "21 days to form a habit." Real research found it takes an average of 66 days, with individual variation from 18-254 days depending on complexity.'})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-purple-800 mb-2",children:"Recovery Builds Resilience"}),(0,g.jsx)("p",{className:"text-purple-700",children:"Missing days doesn't break habits - giving up does. Each successful restart strengthens your recovery skills, the most important predictor of long-term success."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-purple-800 mb-2",children:"Neural Plasticity in Action"}),(0,g.jsx)("p",{className:"text-purple-700",children:"Every repetition physically changes your brain structure. You're literally rewiring neural pathways to make positive behaviors feel automatic and effortless."})]})]}),(0,g.jsx)("div",{className:"mt-4 pt-4 border-t border-purple-200",children:(0,g.jsx)("p",{className:"text-xs text-purple-600 italic",children:"Based on research by Lally et al. (2010), Duhigg (2012), and neuroplasticity studies by Doidge (2007)"})})]})})})]})}function Ds(e,t,n){const r=[];t>=75?r.push({title:"Habit Formation Sweet Spot",message:"Your ".concat(t,"% consistency is optimal for building lasting neural pathways without perfectionist burnout."),science:"Research shows 75%+ consistency builds stronger habits than 100% followed by breaks.",icon:"\ud83c\udf1f",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",messageColor:"text-green-700",scienceColor:"text-green-600"}):t>=50?r.push({title:"Building Neural Momentum",message:"Your ".concat(t,"% consistency is actively strengthening brain pathways. Every completion counts!"),science:"Neural plasticity research shows consistent practice creates measurable brain changes.",icon:"\ud83d\udcaa",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",messageColor:"text-blue-700",scienceColor:"text-blue-600"}):r.push({title:"Foundation Building Phase",message:"You're in the early formation stage. Focus on consistent timing and environmental cues to support neural pathway development.",science:"Early habit formation focuses on establishing cues and rewards rather than frequency.",icon:"\ud83c\udf31",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",messageColor:"text-yellow-700",scienceColor:"text-yellow-600"}),"improving"===n?r.push({title:"Neuroplasticity in Action",message:"Your improving trend shows your brain is adapting! Neural pathways strengthen with each positive change.",science:"Continuous improvement activates brain plasticity mechanisms for lasting behavioral change.",icon:"\ud83d\udcc8",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",messageColor:"text-green-700",scienceColor:"text-green-600"}):"declining"===n&&r.push({title:"Recovery Opportunity",message:"Temporary setbacks are normal in habit formation. Your recovery skills are about to get stronger!",science:"Resilience research shows comeback ability is the strongest predictor of long-term success.",icon:"\ud83d\udd04",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",messageColor:"text-blue-700",scienceColor:"text-blue-600"});const i=Math.round(e.totalDaysTracked/e.activeHabitsCount||0);return i>=21&&r.push({title:"Neural Pathway Milestone",message:"At ".concat(i," days, your brain shows measurable structural changes. Habits are becoming more automatic!"),science:"Around 21 days, myelin sheaths form around neural pathways, making them faster and more efficient.",icon:"\ud83e\udde0",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-800",messageColor:"text-purple-700",scienceColor:"text-purple-600"}),r.slice(0,3)}function ws(e){var t;let{analytics:n,habitPerformance:i,timeRange:s}=e;const[a,o]=(0,r.useState)("pdf"),[l,c]=(0,r.useState)(["summary"]),[u,d]=(0,r.useState)(!1),h=[{id:"pdf",name:"PDF Report",description:"Professional formatted document",icon:"\ud83d\udcc4"},{id:"csv",name:"CSV Data",description:"Spreadsheet-compatible format",icon:"\ud83d\udcca"},{id:"json",name:"JSON Export",description:"Raw data for external analysis",icon:"\u2699\ufe0f"}],m=async()=>{const e=y(),t=w(e),n=new Blob([t],{type:"text/html"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="ScienceHabits_Report_".concat((new Date).toISOString().split("T")[0],".html"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},f=async()=>{const e=C(),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="ScienceHabits_Data_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},p=async()=>{const e={export_date:(new Date).toISOString(),time_range:s,analytics:n,habit_performance:i,report_types:l},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="ScienceHabits_Export_".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},y=()=>({exportDate:(new Date).toISOString(),timeRange:s,analytics:n,habitPerformance:i,insights:j(),selectedTypes:l}),w=e=>{let t='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <title>ScienceHabits Analytics Report</title>\n          '.concat("\n      <style>\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #f9fafb; }\n        .container { max-width: 800px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\n        .header { text-align: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 2px solid #e5e7eb; }\n        .logo { font-size: 24px; font-weight: bold; color: #2563eb; margin-bottom: 8px; }\n        .subtitle { color: #6b7280; font-size: 16px; }\n        .section { margin-bottom: 32px; }\n        .section-title { font-size: 20px; font-weight: 600; color: #111827; margin-bottom: 16px; display: flex; align-items: center; }\n        .section-title .icon { margin-right: 8px; font-size: 24px; }\n        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px; }\n        .metric-card { padding: 20px; background: #f3f4f6; border-radius: 8px; text-align: center; }\n        .metric-value { font-size: 32px; font-weight: bold; color: #1f2937; margin-bottom: 4px; }\n        .metric-label { color: #6b7280; font-size: 14px; }\n        .habit-list { space-y: 12px; }\n        .habit-item { padding: 16px; background: #f9fafb; border-radius: 8px; border-left: 4px solid #2563eb; }\n        .habit-name { font-weight: 600; color: #111827; margin-bottom: 4px; }\n        .habit-stats { color: #6b7280; font-size: 14px; }\n        .insight { padding: 16px; background: #dbeafe; border-radius: 8px; margin-bottom: 12px; }\n        .insight-title { font-weight: 600; color: #1e40af; margin-bottom: 4px; }\n        .insight-text { color: #1e3a8a; font-size: 14px; }\n        .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 12px; }\n      </style>\n    ",'\n        </head>\n        <body>\n          <div class="container">\n            <div class="header">\n              <div class="logo">\ud83e\udde0 ScienceHabits</div>\n              <div class="subtitle">Analytics Report - ').concat(new Date(e.exportDate).toLocaleDateString(),'</div>\n              <div class="subtitle">Time Period: ').concat(s,"</div>\n            </div>\n    ");if(l.includes("summary")&&(t+='\n        <div class="section">\n          <h2 class="section-title"><span class="icon">\ud83d\udcca</span>Executive Summary</h2>\n          <div class="metrics-grid">\n            <div class="metric-card">\n              <div class="metric-value">'.concat(Math.round(n.overallCompletionRate),'%</div>\n              <div class="metric-label">Overall Completion Rate</div>\n            </div>\n            <div class="metric-card">\n              <div class="metric-value">').concat(n.totalCompletions,'</div>\n              <div class="metric-label">Total Completions</div>\n            </div>\n            <div class="metric-card">\n              <div class="metric-value">').concat(n.longestOverallStreak,'</div>\n              <div class="metric-label">Longest Streak (days)</div>\n            </div>\n            <div class="metric-card">\n              <div class="metric-value">').concat(n.activeHabitsCount,'</div>\n              <div class="metric-label">Active Habits</div>\n            </div>\n          </div>\n        </div>\n      ')),l.includes("habits")&&(t+='\n        <div class="section">\n          <h2 class="section-title"><span class="icon">\ud83d\udccb</span>Habit Performance</h2>\n          <div class="habit-list">\n      ',i.forEach(e=>{t+='\n          <div class="habit-item">\n            <div class="habit-name">'.concat(e.habitTitle,'</div>\n            <div class="habit-stats">\n              Completion: ').concat(Math.round(e.completionRate),"% | \n              Current Streak: ").concat(e.currentStreak," days | \n              Best Streak: ").concat(e.longestStreak," days | \n              Consistency: ").concat(Math.round(e.consistencyScore),"\n            </div>\n          </div>\n        ")}),t+="\n          </div>\n        </div>\n      "),l.includes("insights")){const e=j();t+='\n        <div class="section">\n          <h2 class="section-title"><span class="icon">\ud83d\udca1</span>Key Insights</h2>\n      ',e.forEach(e=>{t+='\n          <div class="insight">\n            <div class="insight-title">'.concat(e.title,'</div>\n            <div class="insight-text">').concat(e.message,"</div>\n          </div>\n        ")}),t+="</div>"}return t+='\n            <div class="footer">\n              Generated by ScienceHabits Analytics \u2022 '.concat((new Date).toLocaleString(),"\n            </div>\n          </div>\n        </body>\n      </html>\n    "),t},C=()=>{let e="";return e+="Habit Name,Category,Completion Rate (%),Current Streak,Longest Streak,Total Completions,Consistency Score,Days Tracked\n",i.forEach(t=>{e+='"'.concat(t.habitTitle,'","').concat(t.habitCategory,'",').concat(t.completionRate.toFixed(2),",").concat(t.currentStreak,",").concat(t.longestStreak,",").concat(t.totalCompletions,",").concat(t.consistencyScore.toFixed(2),",").concat(t.daysTracked,"\n")}),e+="\n",e+="Metric,Value\n",e+="Overall Completion Rate (%),".concat(n.overallCompletionRate.toFixed(2),"\n"),e+="Total Completions,".concat(n.totalCompletions,"\n"),e+="Longest Overall Streak,".concat(n.longestOverallStreak,"\n"),e+="Active Habits Count,".concat(n.activeHabitsCount,"\n"),e+="Consistency Score,".concat(n.consistencyScore.toFixed(2),"\n"),e+="Momentum Score,".concat(n.momentumScore.toFixed(2),"\n"),e+="Days Tracked,".concat(n.totalDaysTracked,"\n"),e},j=()=>{const e=[];n.overallCompletionRate>=80&&e.push({title:"Excellent Performance",message:"Your ".concat(Math.round(n.overallCompletionRate),"% completion rate demonstrates strong commitment to your habits.")}),n.longestOverallStreak>=30&&e.push({title:"Impressive Consistency",message:"Your ".concat(n.longestOverallStreak,"-day streak shows excellent dedication and habit formation.")});const t=i.reduce((e,t)=>t.completionRate>e.completionRate?t:e);t&&e.push({title:"Top Performing Habit",message:'"'.concat(t.habitTitle,'" is your strongest habit with ').concat(Math.round(t.completionRate),"% completion rate.")});const r=i.filter(e=>e.completionRate<60);return r.length>0&&e.push({title:"Areas for Improvement",message:"Consider focusing on ".concat(r.length," habit").concat(r.length>1?"s":""," with completion rates below 60%.")}),e};return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)(b,{children:[(0,g.jsxs)(v,{children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Analytics Report"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Generate comprehensive reports from your habit tracking data"})]}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:"Report Sections"}),(0,g.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:[{id:"summary",name:"Executive Summary",description:"High-level overview of your habit tracking performance",icon:"\ud83d\udcca"},{id:"detailed",name:"Detailed Analytics",description:"Comprehensive analysis with charts and trends",icon:"\ud83d\udcc8"},{id:"habits",name:"Individual Habits",description:"Performance breakdown for each habit",icon:"\ud83d\udccb"},{id:"insights",name:"Insights & Recommendations",description:"AI-generated insights and improvement suggestions",icon:"\ud83d\udca1"}].map(e=>(0,g.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,g.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>(e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]}),(0,g.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:"Export Format"}),(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,g.jsxs)(x,{variant:a===e.id?"primary":"outline",size:"sm",onClick:()=>o(e.id),className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.name})]},e.id))}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=h.find(e=>e.id===a))||void 0===t?void 0:t.description})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"text-sm text-gray-600",children:["Exporting ",l.length," section",1!==l.length?"s":""," as ",a.toUpperCase()]}),(0,g.jsx)(x,{onClick:async()=>{d(!0);try{switch(a){case"pdf":await m();break;case"csv":await f();break;case"json":await p()}}catch(e){console.error("Export failed:",e)}finally{d(!1)}},disabled:u||0===l.length,className:"flex items-center space-x-2",children:u?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,g.jsx)("span",{children:"Generating..."})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,g.jsx)("span",{children:"Export Report"})]})})]})]})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:"Report Preview"})}),(0,g.jsx)(D,{children:(0,g.jsx)(Cs,{analytics:n,habitPerformance:i,selectedTypes:l})})]})]})}function Cs(e){let{analytics:t,habitPerformance:n,selectedTypes:r}=e;return 0===r.length?(0,g.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,g.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc4"}),(0,g.jsx)("p",{children:"Select report sections to see preview"})]}):(0,g.jsxs)("div",{className:"space-y-6",children:[r.includes("summary")&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),"Executive Summary Preview"]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[Math.round(t.overallCompletionRate),"%"]}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:"Completion Rate"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-bold text-green-600",children:t.totalCompletions}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:"Total Completions"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-bold text-orange-600",children:t.longestOverallStreak}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:"Longest Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-lg font-bold text-purple-600",children:t.activeHabitsCount}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:"Active Habits"})]})]})]}),r.includes("habits")&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Habit Performance Preview (Top 3)"]}),(0,g.jsx)("div",{className:"space-y-2",children:n.slice(0,3).map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[(0,g.jsx)("span",{className:"font-medium truncate",children:e.habitTitle}),(0,g.jsxs)("span",{className:"text-primary-600",children:[Math.round(e.completionRate),"%"]})]},e.habitId))})]}),r.includes("insights")&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udca1"}),"Insights Preview"]}),(0,g.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,g.jsxs)("p",{className:"text-sm text-blue-800",children:["\u2022 Overall performance analysis and trends",(0,g.jsx)("br",{}),"\u2022 Habit-specific recommendations",(0,g.jsx)("br",{}),"\u2022 Goal achievement insights",(0,g.jsx)("br",{}),"\u2022 Improvement opportunities"]})})]})]})}var js=n(820);function ks(e){let{habitId:t,timeRange:n="month",className:i=""}=e;const[s,a]=(0,r.useState)(!0),o="3months"===n||"year"===n?"quarter":n,{calculateTrendData:l,generateRecoveryInsights:c,getRelevantResearchForSituation:u}=(0,js.K)(),{userHabits:d,userProgress:h}=(0,K.kH)(),m=d.find(e=>e.id===t),f=(0,r.useMemo)(()=>l(t,o),[t,o]),p=(0,r.useMemo)(()=>c(t),[t]),y=e=>{switch(e){case"improving":return"text-green-600";case"declining":return"text-red-600";case"stable":return"text-blue-600";default:return"text-gray-600"}},x=e=>e>=80?"text-green-600":e>=60?"text-blue-600":e>=40?"text-yellow-600":"text-red-600",w=(e=>{const t=[];return e.completionRate>=70?t.push("Great consistency! You completed ".concat(e.completedDays," out of ").concat(e.totalDays," days.")):e.completionRate>=50?t.push("You're building momentum with ".concat(Math.round(e.completionRate),"% consistency.")):t.push("Focus on small wins - even 50% consistency builds habits over time."),"improving"===e.trend&&e.trendPercentage>0?t.push("\ud83d\udcc8 You're ".concat(Math.abs(e.trendPercentage).toFixed(1),"% more consistent than last ").concat(e.period,"!")):"declining"===e.trend&&e.trendPercentage<0&&t.push("\ud83d\udca1 You're ".concat(Math.abs(e.trendPercentage).toFixed(1),"% less consistent, but this is normal during habit formation.")),e.longestStreak>0&&t.push("\ud83d\udd25 Your longest streak was ".concat(e.longestStreak," days - you have the capability for consistency!")),t})(f);return m?(0,g.jsxs)("div",{className:"space-y-6 ".concat(i),children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Progress Trends"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Focus on consistency over perfection"})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ","3months"===n?"3 months":"year"===n?"1 year":n," view"]})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-lg font-medium",children:m.title}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 ".concat(y(f.trend)),children:[(0,g.jsx)("span",{children:(e=>{switch(e){case"improving":return"\ud83d\udcc8";case"declining":return"\ud83d\udcc9";case"stable":return"\u27a1\ufe0f";default:return"\ud83d\udcca"}})(f.trend)}),(0,g.jsx)("span",{className:"text-sm font-medium capitalize",children:f.trend})]})]})}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"text-center mb-6",children:[(0,g.jsxs)("div",{className:"text-4xl font-bold mb-2 ".concat(x(f.completionRate)),children:[Math.round(f.completionRate),"%"]}),(0,g.jsxs)("div",{className:"text-gray-600 mb-1",children:[f.completedDays," of ",f.totalDays," days this ",o]}),(0,g.jsx)("div",{className:"text-sm ".concat(x(f.completionRate)),children:(C=f.completionRate,C>=80?"Excellent consistency! \ud83c\udf1f":C>=60?"Good momentum building \ud83d\udcaa":C>=40?"Making progress \ud83d\udcca":"Every step counts \ud83c\udf31")})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,g.jsx)("span",{children:"Progress"}),(0,g.jsxs)("span",{children:[f.completedDays,"/",f.totalDays]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,g.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(f.completionRate>=80?"bg-green-500":f.completionRate>=60?"bg-blue-500":f.completionRate>=40?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(f.completionRate,"%")}})})]}),0!==f.trendPercentage&&(0,g.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,g.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,g.jsx)("span",{className:y(f.trend),children:"improving"===f.trend?"\u2b06\ufe0f":"declining"===f.trend?"\u2b07\ufe0f":"\u27a1\ufe0f"}),(0,g.jsxs)("span",{className:"text-sm text-gray-700",children:[Math.abs(f.trendPercentage).toFixed(1),"%","improving"===f.trend?" better":"declining"===f.trend?" lower":" same"," ","than last ",o]})]})}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,g.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:f.longestStreak}),(0,g.jsx)("div",{className:"text-xs text-blue-800",children:"Longest Streak"})]}),(0,g.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-green-600",children:f.totalStreaks}),(0,g.jsx)("div",{className:"text-xs text-green-800",children:"Total Streaks"})]}),(0,g.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-lg font-semibold text-purple-600",children:f.averageGapBetweenMisses.toFixed(1)}),(0,g.jsx)("div",{className:"text-xs text-purple-800",children:"Avg Gap (days)"})]})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Progress Insights"}),(0,g.jsx)("button",{onClick:()=>a(!s),className:"text-xs text-blue-600 hover:text-blue-800",children:s?"Hide":"Show"})]}),s&&(0,g.jsx)("div",{className:"space-y-2",children:w.map((e,t)=>(0,g.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[(0,g.jsx)("span",{className:"text-blue-500 mt-0.5",children:"\u2022"}),(0,g.jsx)("span",{className:"text-gray-700",children:e})]},t))})]})]})]}),p.length>0&&(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsxs)("h3",{className:"text-lg font-medium flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udca1"}),"Personalized Insights"]})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,g.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.actionable&&e.suggestedActions.length>0&&(0,g.jsxs)("div",{className:"space-y-1",children:[(0,g.jsx)("p",{className:"text-xs font-medium text-gray-700",children:"Suggested actions:"}),e.suggestedActions.map((e,t)=>(0,g.jsxs)("div",{className:"text-xs text-gray-600 ml-2",children:["\u2022 ",e]},t))]})]},e.id))})})]}),(0,g.jsx)(b,{className:"bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:(0,g.jsxs)(D,{className:"p-6 text-center",children:[(0,g.jsx)("div",{className:"text-2xl mb-2",children:"\ud83c\udf1f"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Remember: Progress over Perfection"}),(0,g.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Research shows that focusing on trends rather than daily perfection leads to better long-term success. You're building a sustainable habit that will last."}),(0,g.jsx)("div",{className:"text-xs text-gray-500",children:"Based on habit formation research \u2022 66-day average formation time"})]})})]}):(0,g.jsx)("div",{children:"Habit not found"});var C}function Fs(){const[e,t]=(0,r.useState)(!1),{analyticsData:n,selectedTimeRange:i,isLoading:s,error:a,loadAnalytics:o,setTimeRange:l}=Vi(),{userProgress:c,userHabits:u}=(0,K.kH)();(0,r.useEffect)(()=>{c.length>0&&u.length>0&&o(c,u)},[c,u,i,o]);const d=()=>{c.length>0&&u.length>0&&o(c,u)};if(s)return(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,g.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})});if(a)return(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Analytics"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,g.jsx)(x,{onClick:d,children:"Try Again"})]})})})});if(!n||0===c.length)return(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcca"}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Data Yet"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Start tracking habits to see your analytics."})]})})})});return(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Track your habit progress and performance"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("select",{value:i,onChange:e=>{return t=e.target.value,void l(t);var t},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{id:"week",name:"Last 7 Days"},{id:"month",name:"Last 30 Days"},{id:"3months",name:"Last 3 Months"},{id:"year",name:"Last Year"}].map(e=>(0,g.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,g.jsx)(x,{onClick:()=>t(!e),variant:"secondary",size:"sm",children:"\ud83d\udce4 Export Report"})]})]}),e&&(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Export Analytics Report"}),(0,g.jsx)(ws,{analytics:n,habitPerformance:n.habitPerformance||[],timeRange:i}),(0,g.jsx)("button",{onClick:()=>t(!1),className:"mt-3 text-sm text-gray-500 hover:text-gray-700",children:"Close export options"})]})})}),(0,g.jsx)(vs,{analytics:n}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Habit Performance"}),(0,g.jsx)(Qi,{habitPerformance:n.habitPerformance||[]})]})})}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Goal Progress"}),(0,g.jsx)(us,{analytics:n,habitPerformance:n.habitPerformance||[]})]})})}),n&&(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Stats"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.totalCompletions}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Total Completions"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(100*n.overallCompletionRate),"%"]}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:n.activeHabitsCount}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Active Habits"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.max(...n.currentStreaks||[0])}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Best Streak"})]})]})]})})}),u.map(e=>(0,g.jsx)(ks,{habitId:e.id,timeRange:"all"===i?"year":i,className:"mb-6"},e.id))]})}function Ns(e){let{isOpen:t,onClose:n,user:i}=e;const[a,o]=(0,r.useState)({name:i.name||"",goals:i.goals,dailyMinutes:i.dailyMinutes,preferredTime:i.preferredTime,lifestyle:i.lifestyle,language:i.language}),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),{updateUser:b}=(0,K.kH)();(0,r.useEffect)(()=>{const e={name:i.name||"",goals:i.goals,dailyMinutes:i.dailyMinutes,preferredTime:i.preferredTime,lifestyle:i.lifestyle,language:i.language},t=JSON.stringify(a)!==JSON.stringify(e);h(t)},[a,i]),(0,r.useEffect)(()=>{t&&v()},[t,i.isPremium]);const v=async()=>{try{y(!0);const e=await u(i.isPremium);f(e)}catch(e){console.error("Failed to load goals:",e)}finally{y(!1)}};return t?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,g.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:(0,g.jsx)("span",{className:"text-white text-sm font-bold",children:"\ud83d\udc64"})}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Settings"})]}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:n,disabled:l,children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,g.jsxs)("div",{className:"p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),(0,g.jsx)("input",{type:"text",value:a.name,onChange:e=>o(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value})),placeholder:"Enter your name for personalized greetings",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lifestyle"}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"professional",label:"Working Professional",icon:"\ud83d\udcbc"},{id:"student",label:"Student",icon:"\ud83d\udcda"},{id:"parent",label:"Parent/Caregiver",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"}].map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>o(t=>(0,s.A)((0,s.A)({},t),{},{lifestyle:e.id})),className:"p-3 rounded-lg border text-left transition-colors ".concat(a.lifestyle===e.id?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"),children:[(0,g.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,g.jsx)("div",{className:"font-medium text-sm",children:e.label})]},e.id))})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Goals"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select all goals that matter to you. This helps us recommend the most relevant habits."}),p?(0,g.jsxs)("div",{className:"col-span-2 text-center py-8",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Loading goals..."})]}):(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>(e=>{const t=m.find(t=>t.id===e);("premium"!==(null===t||void 0===t?void 0:t.tier)||i.isPremium)&&o(t=>(0,s.A)((0,s.A)({},t),{},{goals:t.goals.includes(e)?t.goals.filter(t=>t!==e):[...t.goals,e]}))})(e.id),className:"flex items-center space-x-3 p-3 rounded-lg border text-left transition-colors ".concat(a.goals.includes(e.id)?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"," ").concat("premium"!==e.tier||i.isPremium?"":"opacity-60"),disabled:"premium"===e.tier&&!i.isPremium,children:[(0,g.jsx)("span",{className:"text-xl",children:e.icon}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("span",{className:"font-medium text-sm",children:e.title}),"premium"===e.tier&&!i.isPremium&&(0,g.jsx)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full ml-2",children:"PRO"})]}),a.goals.includes(e.id)&&(0,g.jsx)("svg",{className:"w-4 h-4 ml-auto text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id))})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Preferences"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Time Commitment"}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("input",{type:"range",min:"5",max:"120",step:"5",value:a.dailyMinutes,onChange:e=>o(t=>(0,s.A)((0,s.A)({},t),{},{dailyMinutes:parseInt(e.target.value)})),className:"flex-1"}),(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900 min-w-[80px]",children:[a.dailyMinutes," minutes"]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{id:"morning",label:"Morning Person",description:"I prefer starting my day with habits"},{id:"lunch",label:"Midday Focus",description:"I work best during lunch breaks"},{id:"evening",label:"Evening Routine",description:"I like to wind down with habits"},{id:"flexible",label:"Flexible",description:"I can adapt to any time"}].map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>o(t=>(0,s.A)((0,s.A)({},t),{},{preferredTime:e.id})),className:"p-3 rounded-lg border text-left transition-colors ".concat(a.preferredTime===e.id?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"),children:[(0,g.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]},e.id))})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Language & Display"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,g.jsxs)("select",{value:a.language,onChange:e=>o(t=>(0,s.A)((0,s.A)({},t),{},{language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,g.jsx)("option",{value:"en",children:"English"}),(0,g.jsx)("option",{value:"de",children:"Deutsch"})]})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,g.jsx)("div",{className:"text-sm text-gray-500",children:d?"You have unsaved changes":"All changes saved"}),(0,g.jsxs)("div",{className:"flex space-x-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:n,disabled:l,children:"Cancel"}),(0,g.jsx)(x,{onClick:async()=>{try{c(!0),await b({name:a.name||void 0,goals:a.goals,dailyMinutes:a.dailyMinutes,preferredTime:a.preferredTime,lifestyle:a.lifestyle,language:a.language}),n()}catch(e){console.error("Failed to update profile:",e)}finally{c(!1)}},disabled:!d||l,className:l?"opacity-50":"",children:l?"Saving...":"Save Changes"})]})]})]})]})}):null}function Es(e){let{user:t}=e;const[n,i]=(0,r.useState)({name:t.name||"",goals:t.goals,dailyMinutes:t.dailyMinutes,preferredTime:t.preferredTime,lifestyle:t.lifestyle,language:t.language}),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)([]),[m,f]=(0,r.useState)(!0),{updateUser:p}=(0,K.kH)();(0,r.useEffect)(()=>{const e={name:t.name||"",goals:t.goals,dailyMinutes:t.dailyMinutes,preferredTime:t.preferredTime,lifestyle:t.lifestyle,language:t.language},r=JSON.stringify(n)!==JSON.stringify(e);c(r)},[n,t]),(0,r.useEffect)(()=>{y()},[t.isPremium]);const y=async()=>{try{f(!0);const e=await u(t.isPremium);h(e)}catch(e){console.error("Failed to load goals:",e)}finally{f(!1)}};return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),(0,g.jsx)("input",{type:"text",value:n.name,onChange:e=>i(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value})),placeholder:"Enter your name for personalized greetings",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lifestyle"}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"professional",label:"Working Professional",icon:"\ud83d\udcbc"},{id:"student",label:"Student",icon:"\ud83d\udcda"},{id:"parent",label:"Parent/Caregiver",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"}].map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>i(t=>(0,s.A)((0,s.A)({},t),{},{lifestyle:e.id})),className:"p-3 rounded-lg border text-left transition-colors ".concat(n.lifestyle===e.id?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"),children:[(0,g.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,g.jsx)("div",{className:"font-medium text-sm",children:e.label})]},e.id))})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Goals"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select all goals that matter to you. This helps us recommend the most relevant habits."}),m?(0,g.jsxs)("div",{className:"col-span-2 text-center py-8",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Loading goals..."})]}):(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>(e=>{const n=d.find(t=>t.id===e);("premium"!==(null===n||void 0===n?void 0:n.tier)||t.isPremium)&&i(t=>(0,s.A)((0,s.A)({},t),{},{goals:t.goals.includes(e)?t.goals.filter(t=>t!==e):[...t.goals,e]}))})(e.id),className:"flex items-center space-x-3 p-3 rounded-lg border text-left transition-colors ".concat(n.goals.includes(e.id)?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"," ").concat("premium"!==e.tier||t.isPremium?"":"opacity-60"),disabled:"premium"===e.tier&&!t.isPremium,children:[(0,g.jsx)("span",{className:"text-xl",children:e.icon}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("span",{className:"font-medium text-sm",children:e.title}),"premium"===e.tier&&!t.isPremium&&(0,g.jsx)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full ml-2",children:"PRO"})]}),n.goals.includes(e.id)&&(0,g.jsx)("svg",{className:"w-4 h-4 ml-auto text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id))})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Preferences"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Time Commitment"}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("input",{type:"range",min:"5",max:"120",step:"5",value:n.dailyMinutes,onChange:e=>i(t=>(0,s.A)((0,s.A)({},t),{},{dailyMinutes:parseInt(e.target.value)})),className:"flex-1"}),(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900 min-w-[80px]",children:[n.dailyMinutes," minutes"]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{id:"morning",label:"Morning Person",description:"I prefer starting my day with habits"},{id:"lunch",label:"Midday Focus",description:"I work best during lunch breaks"},{id:"evening",label:"Evening Routine",description:"I like to wind down with habits"},{id:"flexible",label:"Flexible",description:"I can adapt to any time"}].map(e=>(0,g.jsxs)("button",{type:"button",onClick:()=>i(t=>(0,s.A)((0,s.A)({},t),{},{preferredTime:e.id})),className:"p-3 rounded-lg border text-left transition-colors ".concat(n.preferredTime===e.id?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"),children:[(0,g.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]},e.id))})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Language & Display"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,g.jsxs)("select",{value:n.language,onChange:e=>i(t=>(0,s.A)((0,s.A)({},t),{},{language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,g.jsx)("option",{value:"en",children:"English"}),(0,g.jsx)("option",{value:"de",children:"Deutsch"})]})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,g.jsx)("div",{className:"text-sm text-gray-500",children:l?"You have unsaved changes":"All changes saved"}),(0,g.jsx)(x,{onClick:async()=>{try{o(!0),await p({name:n.name||void 0,goals:n.goals,dailyMinutes:n.dailyMinutes,preferredTime:n.preferredTime,lifestyle:n.lifestyle,language:n.language})}catch(e){console.error("Failed to update profile:",e)}finally{o(!1)}},disabled:!l||a,className:a?"opacity-50":"",children:a?"Saving...":"Save Changes"})]})]})}function As(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}function Ss(e,t,n){const r=yr((n||{}).ignore||[]),i=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([_s(e[0]),Bs(e[1])])}return t}(t);let s=-1;for(;++s<i.length;)jr(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],i=n?n.children:void 0;if(r(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=i[s][0],a=i[s][1];let o=0;const l=n.children.indexOf(e);let c=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){const n=d.index,i={index:d.index,input:d.input,stack:[...t,e]};let s=a(...d,i);if("string"===typeof s&&(s=s.length>0?{type:"text",value:s}:void 0),!1===s?r.lastIndex=n+1:(o!==n&&u.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(s)?u.push(...s):s&&u.push(s),o=n+d[0].length,c=!0),!r.global)break;d=r.exec(e.value)}c?(o<e.value.length&&u.push({type:"text",value:e.value.slice(o)}),n.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function _s(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Bs(e){return"function"===typeof e?e:function(){return e}}const Ts="phrasing",Is=["autolink","link","image","label"];function Ps(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ms(e){this.config.enter.autolinkProtocol.call(this,e)}function Rs(e){this.config.exit.autolinkProtocol.call(this,e)}function Ls(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Os(e){this.config.exit.autolinkEmail.call(this,e)}function zs(e){this.exit(e)}function Hs(e){Ss(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,qs],[/(?<=^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF]))([\+\x2D\.0-9A-Z_a-z]+)@([\x2D0-9A-Z_a-z]+(?:\.[\x2D0-9A-Z_a-z]+)+)/g,Us]],{ignore:["link","linkReference"]})}function qs(e,t,n,r,i){let s="";if(!Vs(i))return!1;if(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=As(e,"(");let s=As(e,")");for(;-1!==r&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function Us(e,t,n,r){return!(!Vs(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Vs(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||Tt(n)||Bt(n))&&(!t||47!==n)}function Ws(){this.buffer()}function Ks(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Gs(){this.buffer()}function Ys(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Qs(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=sn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function $s(e){this.exit(e)}function Js(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=sn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Xs(e){this.exit(e)}function Zs(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function ea(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,i){const s=r.createTracker(i);let a=s.move("[^");const o=r.enter("footnoteDefinition"),l=r.enter("label");a+=s.move(r.safe(r.associationId(e),{before:a,after:"]"})),l(),a+=s.move("]:"),e.children&&e.children.length>0&&(s.shift(4),a+=s.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,s.current()),t?na:ta)));return o(),a},footnoteReference:Zs},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function ta(e,t,n){return 0===t?e:na(e,t,n)}function na(e,t,n){return(n?"":"    ")+e}Zs.peek=function(){return"["};const ra=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function ia(e){this.enter({type:"delete",children:[]},e)}function sa(e){this.exit(e)}function aa(e,t,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,(0,s.A)((0,s.A)({},i.current()),{},{before:o,after:"~"})),o+=i.move("~~"),a(),o}function oa(e){return e.length}function la(e){return null===e||void 0===e?"":String(e)}function ca(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function ua(e,t,n){return">"+(n?"":" ")+e}function da(e,t){return ha(e,t.inConstruct,!0)&&!ha(e,t.notInConstruct,!1)}function ha(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function ma(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if("\n"===n.unsafe[i].character&&da(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function fa(e,t,n){return(n?"":"    ")+e}function pa(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function ga(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ya(e,t,n){const r=Sn(e),i=Sn(t);return void 0===r?void 0===i?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function xa(e,t,n,r){const i=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),a=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let c=o.move(n.containerPhrasing(e,(0,s.A)({after:i,before:l},o.current())));const u=c.charCodeAt(0),d=ya(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=ga(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=ya(r.after.charCodeAt(0),h,i);m.inside&&(c=c.slice(0,-1)+ga(h));const f=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},l+c+f}function ba(e){return e.value||""}function va(e,t,n,r){const i=pa(n),a='"'===i?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,(0,s.A)({before:u,after:"]"},c.current()))),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,(0,s.A)({before:u,after:">"},c.current()))),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,(0,s.A)({before:u,after:e.title?" ":")"},c.current())))),l(),e.title&&(l=n.enter("title".concat(a)),u+=c.move(" "+i),u+=c.move(n.safe(e.title,(0,s.A)({before:u,after:i},c.current()))),u+=c.move(i),l()),u+=c.move(")"),o(),u}function Da(e,t,n,r){const i=e.referenceType,a=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,(0,s.A)({before:c,after:"]"},l.current()));c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(e),(0,s.A)({before:c,after:"]"},l.current()));return o(),n.stack=d,a(),"full"!==i&&u&&u===h?"shortcut"===i?c=c.slice(0,-1):c+=l.move("]"):c+=l.move(h+"]"),c}function wa(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const e=n.unsafe[s],t=n.compilePattern(e);let i;if(e.atBreak)for(;i=t.exec(r);){let e=i.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(i.index+1)}}return i+r+i}function Ca(e,t){const n=ct(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function ja(e,t,n,r){const i=pa(n),a='"'===i?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(Ca(e,n)){const t=n.stack;n.stack=[],l=n.enter("autolink");let r=o.move("<");return r+=o.move(n.containerPhrasing(e,(0,s.A)({before:r,after:">"},o.current()))),r+=o.move(">"),l(),n.stack=t,r}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,(0,s.A)({before:u,after:"]("},o.current()))),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,(0,s.A)({before:u,after:">"},o.current()))),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,(0,s.A)({before:u,after:e.title?" ":")"},o.current())))),c(),e.title&&(c=n.enter("title".concat(a)),u+=o.move(" "+i),u+=o.move(n.safe(e.title,(0,s.A)({before:u,after:i},o.current()))),u+=o.move(i),c()),u+=o.move(")"),l(),u}function ka(e,t,n,r){const i=e.referenceType,a=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,(0,s.A)({before:c,after:"]"},l.current()));c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(e),(0,s.A)({before:c,after:"]"},l.current()));return o(),n.stack=d,a(),"full"!==i&&u&&u===h?"shortcut"===i?c=c.slice(0,-1):c+=l.move("]"):c+=l.move(h+"]"),c}function Fa(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Na(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}aa.peek=function(){return"~"},xa.peek=function(e,t,n){return n.options.emphasis||"*"},ba.peek=function(){return"<"},va.peek=function(){return"!"},Da.peek=function(){return"!"},wa.peek=function(){return"`"},ja.peek=function(e,t,n){return Ca(e,n)?"<":"["},ka.peek=function(){return"["};const Ea=yr(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Aa(e,t,n,r){const i=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),a=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let c=o.move(n.containerPhrasing(e,(0,s.A)({after:i,before:l},o.current())));const u=c.charCodeAt(0),d=ya(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=ga(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=ya(r.after.charCodeAt(0),h,i);m.inside&&(c=c.slice(0,-1)+ga(h));const f=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},l+c+f}Aa.peek=function(e,t,n){return n.options.strong||"*"};const Sa={blockquote:function(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),ua);return i(),a},break:ma,code:function(e,t,n,r){const i=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),a=e.value||"",o="`"===i?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(a,fa);return e(),t}const l=n.createTracker(r),c=i.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}(a,i)+1,3)),u=n.enter("codeFenced");let d=l.move(c);if(e.lang){const t=n.enter("codeFencedLang".concat(o));d+=l.move(n.safe(e.lang,(0,s.A)({before:d,after:" ",encode:["`"]},l.current()))),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(o));d+=l.move(" "),d+=l.move(n.safe(e.meta,(0,s.A)({before:d,after:"\n",encode:["`"]},l.current()))),t()}return d+=l.move("\n"),a&&(d+=l.move(a+"\n")),d+=l.move(c),u(),d},definition:function(e,t,n,r){const i=pa(n),a='"'===i?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),(0,s.A)({before:u,after:"]"},c.current()))),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,(0,s.A)({before:u,after:">"},c.current()))),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,(0,s.A)({before:u,after:e.title?" ":"\n"},c.current())))),l(),e.title&&(l=n.enter("title".concat(a)),u+=c.move(" "+i),u+=c.move(n.safe(e.title,(0,s.A)({before:u,after:i},c.current()))),u+=c.move(i),l()),o(),u},emphasis:xa,hardBreak:ma,heading:function(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(function(e,t){let n=!1;return kr(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,Cr}),Boolean((!e.depth||e.depth<3)&&ct(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),o=n.containerPhrasing(e,(0,s.A)((0,s.A)({},a.current()),{},{before:"\n",after:"\n"}));return r(),t(),o+"\n"+(1===i?"=":"-").repeat(o.length-(Math.max(o.lastIndexOf("\r"),o.lastIndexOf("\n"))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");a.move(o+" ");let u=n.containerPhrasing(e,(0,s.A)({before:"# ",after:"\n"},a.current()));return/^[\t ]/.test(u)&&(u=ga(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u},html:ba,image:va,imageReference:Da,inlineCode:wa,link:ja,linkReference:ka,list:function(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):Fa(n);const o=e.ordered?"."===a?")":".":function(e){const t=Fa(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),Na(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const c=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),c},listItem:function(e,t,n,r){const i=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let s=n.bulletCurrent||Fa(n);t&&"list"===t.type&&t.ordered&&(s=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+s);let a=s.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,o.current()),function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?s:s+" ".repeat(a-s.length))+e});return l(),c},paragraph:function(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a},root:function(e,t,n,r){return(e.children.some(function(e){return Ea(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:Aa,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(Na(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function _a(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function Ba(e){this.exit(e),this.data.inTable=void 0}function Ta(e){this.enter({type:"tableRow",children:[]},e)}function Ia(e){this.exit(e)}function Pa(e){this.enter({type:"tableCell",children:[]},e)}function Ma(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ra));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ra(e,t){return"|"===t?t:e}function La(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Sa.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return l(function(e,t,n){const r=e.children;let i=-1;const s=[],a=t.enter("table");for(;++i<r.length;)s[i]=c(r[i],t,n);return a(),s}(e,n,r),e.align)},tableCell:o,tableRow:function(e,t,n,r){const i=c(e,n,r),s=l([i]);return s.slice(0,s.indexOf("\n"))}}};function o(e,t,n,r){const i=n.enter("tableCell"),o=n.enter("phrasing"),l=n.containerPhrasing(e,(0,s.A)((0,s.A)({},r),{},{before:a,after:a}));return o(),i(),l}function l(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||oa,s=[],a=[],o=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],r=[];let s=-1;for(e[u].length>c&&(c=e[u].length);++s<e[u].length;){const a=la(e[u][s]);if(!1!==n.alignDelimiters){const e=i(a);r[s]=e,(void 0===l[s]||e>l[s])&&(l[s]=e)}t.push(a)}a[u]=t,o[u]=r}let d=-1;if("object"===typeof r&&"length"in r)for(;++d<c;)s[d]=ca(r[d]);else{const e=ca(r);for(;++d<c;)s[d]=e}d=-1;const h=[],m=[];for(;++d<c;){const e=s[d];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let i=!1===n.alignDelimiters?1:Math.max(1,l[d]-t.length-r.length);const a=t+"-".repeat(i)+r;!1!==n.alignDelimiters&&(i=t.length+i+r.length,i>l[d]&&(l[d]=i),m[d]=i),h[d]=a}a.splice(1,0,h),o.splice(1,0,m),u=-1;const f=[];for(;++u<a.length;){const e=a[u],t=o[u];d=-1;const r=[];for(;++d<c;){const i=e[d]||"";let a="",o="";if(!1!==n.alignDelimiters){const e=l[d]-(t[d]||0),n=s[d];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),o=a):o=" ".repeat(e)}!1===n.delimiterStart||d||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===i||!1===n.delimiterStart&&!d||r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(i),!1!==n.alignDelimiters&&r.push(o),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&d===c-1||r.push("|")}f.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function c(e,t,n){const r=e.children;let i=-1;const s=[],a=t.enter("tableRow");for(;++i<r.length;)s[i]=o(r[i],0,t,n);return a(),s}}function Oa(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function za(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let i,s=-1;for(;++s<r.length;){const e=r[s];if("paragraph"===e.type){i=e;break}}i===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function Ha(e,t,n,r){const i=e.children[0],a="boolean"===typeof e.checked&&i&&"paragraph"===i.type,o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);a&&l.move(o);let c=Sa.listItem(e,t,n,(0,s.A)((0,s.A)({},r),l.current()));return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+o})),c}const qa={tokenize:function(e,t,n){let r=0;return function t(s){if((87===s||119===s)&&r<3)return r++,e.consume(s),t;if(46===s&&3===r)return e.consume(s),i;return n(s)};function i(e){return null===e?n(e):t(e)}},partial:!0},Ua={tokenize:function(e,t,n){let r,i,s;return a;function a(t){return 46===t||95===t?e.check(Wa,l,o)(t):null===t||St(t)||Tt(t)||45!==t&&Bt(t)?l(t):(s=!0,e.consume(t),a)}function o(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),a}function l(e){return i||r||!s?n(e):t(e)}},partial:!0},Va={tokenize:function(e,t){let n=0,r=0;return i;function i(a){return 40===a?(n++,e.consume(a),i):41===a&&r<n?s(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(Wa,t,s)(a):null===a||St(a)||Tt(a)?t(a):(e.consume(a),i)}function s(t){return 41===t&&r++,e.consume(t),i}},partial:!0},Wa={tokenize:function(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),s):93===a?(e.consume(a),i):60===a||null===a||St(a)||Tt(a)?t(a):n(a)}function i(e){return null===e||40===e||91===e||St(e)||Tt(e)?t(e):r(e)}function s(e){return wt(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),r):wt(t)?(e.consume(t),a):n(t)}},partial:!0},Ka={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Ct(e)?n(e):t(e)}},partial:!0},Ga={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!Xa.call(r,r.previous)||no(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(qa,e.attempt(Ua,e.attempt(Va,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Xa},Ya={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let i="",s=!1;return function(t){if((72===t||104===t)&&Za.call(r,r.previous)&&!no(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(wt(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),o}return n(t)}function o(t){return 47===t?(e.consume(t),s?l:(s=!0,o)):n(t)}function l(t){return null===t||kt(t)||St(t)||Tt(t)||Bt(t)?n(t):e.attempt(Ua,e.attempt(Va,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Za},Qa={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let i,s;return function(t){if(!to(t)||!eo.call(r,r.previous)||no(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return to(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(Ka,c,l)(t):45===t||95===t||Ct(t)?(s=!0,e.consume(t),o):c(t)}function l(t){return e.consume(t),i=!0,o}function c(a){return s&&i&&wt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:eo},$a={};let Ja=48;for(;Ja<123;)$a[Ja]=Qa,Ja++,58===Ja?Ja=65:91===Ja&&(Ja=97);function Xa(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||St(e)}function Za(e){return!wt(e)}function eo(e){return!(47===e||to(e))}function to(e){return 43===e||45===e||46===e||95===e||Ct(e)}function no(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}$a[43]=Qa,$a[45]=Qa,$a[46]=Qa,$a[95]=Qa,$a[72]=[Qa,Ya],$a[104]=[Qa,Ya],$a[87]=[Qa,Ga],$a[119]=[Qa,Ga];const ro={tokenize:function(e,t,n){const r=this;return Pt(e,function(e){const i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function io(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const e=r.events[i][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(i){if(!a||!a._balanced)return n(i);const o=sn(r.sliceSerialize({start:a.end,end:r.now()}));if(94!==o.codePointAt(0)||!s.includes(o.slice(1)))return n(i);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(i),e.exit("gfmFootnoteCallLabelMarker"),t(i)}}function so(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[r+1],e[r+2],["enter",i,t],e[r+3],e[r+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(r,e.length-r+1,...l),e}function ao(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(a>999||93===o&&!s||null===o||91===o||St(o))return n(o);if(93===o){e.exit("chunkString");const s=e.exit("gfmFootnoteCallString");return i.includes(sn(r.sliceSerialize(s)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return St(o)||(s=!0),a++,e.consume(o),92===o?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function oo(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a,o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(o>999||93===t&&!a||null===t||91===t||St(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return s=sn(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return St(t)||(a=!0),o++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i.includes(s)||i.push(s),Pt(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function lo(e,t,n){return e.check(Ot,t,e.attempt(ro,t,n))}function co(e){e.exit("gfmFootnoteDefinition")}function uo(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const i=this.previous,s=this.events;let a=0;return function(t){if(126===i&&"characterEscape"!==s[s.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),o(t)};function o(s){const l=Sn(i);if(126===s)return a>1?r(s):(e.consume(s),a++,o);if(a<2&&!t)return r(s);const c=e.exit("strikethroughSequenceTemporary"),u=Sn(s);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(s)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},s={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",s,t]],o=t.parser.constructs.insideSpan.null;o&&ht(a,a.length,0,jn(o,e.slice(r+1,n),t)),ht(a,a.length,0,[["exit",s,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),ht(e,r-1,n-r+3,a),n=r+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class ho{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let i=0;if(0===n&&0===r.length)return;for(;i<e.map.length;){if(e.map[i][0]===t)return e.map[i][1]+=n,void e.map[i][2].push(...r);i+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function mo(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}function fo(e,t,n){const r=this;let i,s=0,a=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const i=t>-1?r.events[t][1].type:null,s="tableHead"===i||"tableRow"===i?v:o;if(s===v&&r.parser.lazy[r.now().line])return n(e);return s(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return i=!0,a+=1,l(e)}(t)}function l(t){return null===t?n(t):At(t)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):_t(t)?Pt(e,l,"whitespace")(t):(a+=1,i&&(i=!1,s+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),i=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||St(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),i=!1,_t(t)?Pt(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(i=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):b(t)}function m(t){return _t(t)?Pt(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(a+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),p):45===t?(a+=1,p(t)):null===t||At(t)?x(t):b(t)}function p(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):b(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return _t(t)?Pt(e,x,"whitespace")(t):x(t)}function x(n){return 124===n?h(n):(null===n||At(n))&&i&&s===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):b(n)}function b(e){return n(e)}function v(t){return e.enter("tableRow"),D(t)}function D(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),D):null===n||At(n)?(e.exit("tableRow"),t(n)):_t(n)?Pt(e,D,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||St(t)?(e.exit("data"),D(t)):(e.consume(t),92===t?C:w)}function C(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function po(e,t){let n,r,i,s=-1,a=!0,o=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const h=new ho;for(;++s<e.length;){const m=e[s],f=m[1];"enter"===m[0]?"tableHead"===f.type?(u=!1,0!==d&&(yo(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(s,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,i=void 0,l=[0,0,0,0],c=[0,s+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(s,0,[["enter",r,t]])),o="tableDelimiterRow"===f.type?2:r?3:1):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(c[0]=c[1],i=go(h,t,l,o,void 0,i)),l=c,c=[l[1],s,0,0])):(a=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=go(h,t,l,o,void 0,i),l=[0,0,0,0]),c[2]=s)):"tableHead"===f.type?(u=!0,d=s):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=s,0!==l[1]?(c[0]=c[1],i=go(h,t,l,o,s,i)):0!==c[1]&&(i=go(h,t,c,o,s,i)),o=0):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=s)}for(0!==d&&yo(h,t,d,n,r),h.consume(t.events),s=-1;++s<t.events.length;){const e=t.events[s];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=mo(t.events,s))}return e}function go(e,t,n,r,i,s){const a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(s.end=Object.assign({},xo(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const o=xo(t.events,n[1]);if(s={type:a,start:Object.assign({},o),end:Object.assign({},o)},e.add(n[1],0,[["enter",s,t]]),0!==n[2]){const i=xo(t.events,n[2]),s=xo(t.events,n[3]),a={type:"tableContent",start:Object.assign({},i),end:Object.assign({},s)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){const r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==i&&(s.end=Object.assign({},xo(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function yo(e,t,n,r,i){const s=[],a=xo(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function xo(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const bo={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return St(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),s):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),s):n(t)}function s(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(r){return At(r)?t(r):_t(r)?e.check({tokenize:vo},t,n)(r):n(r)}}};function vo(e,t,n){return Pt(e,function(e){return null===e?n(e):t(e)},"whitespace")}const Do={};function wo(e){const t=e||Do,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return bt([{text:$a},{document:{91:{name:"gfmFootnoteDefinition",tokenize:oo,continuation:{tokenize:lo},exit:co}},text:{91:{name:"gfmFootnoteCall",tokenize:ao},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:io,resolveTo:so}}},uo(e),{flow:{null:{name:"table",tokenize:fo,resolveAll:po}}},{text:{91:bo}}])}(t)),i.push([{transforms:[Hs],enter:{literalAutolink:Ps,literalAutolinkEmail:Ms,literalAutolinkHttp:Ms,literalAutolinkWww:Ms},exit:{literalAutolink:zs,literalAutolinkEmail:Os,literalAutolinkHttp:Rs,literalAutolinkWww:Ls}},{enter:{gfmFootnoteCallString:Ws,gfmFootnoteCall:Ks,gfmFootnoteDefinitionLabelString:Gs,gfmFootnoteDefinition:Ys},exit:{gfmFootnoteCallString:Qs,gfmFootnoteCall:$s,gfmFootnoteDefinitionLabelString:Js,gfmFootnoteDefinition:Xs}},{canContainEols:["delete"],enter:{strikethrough:ia},exit:{strikethrough:sa}},{enter:{table:_a,tableData:Pa,tableHeader:Pa,tableRow:Ta},exit:{codeText:Ma,table:Ba,tableData:Ia,tableHeader:Ia,tableRow:Ia}},{exit:{taskListCheckValueChecked:Oa,taskListCheckValueUnchecked:Oa,paragraph:za}}]),s.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ts,notInConstruct:Is},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ts,notInConstruct:Is},{character:":",before:"[ps]",after:"\\/",inConstruct:Ts,notInConstruct:Is}]},ea(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ra}],handlers:{delete:aa}},La(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ha}}]}}(t))}const Co=e=>{let t=[...e.split("\n")];return t[0]&&t[0].trim().startsWith("# ")&&t.shift(),t[0]&&""===t[0].trim()&&t.shift(),t[0]&&t[0].trim().startsWith("*")&&t[0].toLowerCase().includes("research summary")&&t.shift(),t[0]&&""===t[0].trim()&&t.shift(),t.join("\n")};function jo(){const{articles:e,isLoading:t}=wi(),{currentUser:n}=(0,K.kH)(),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const t=t=>{var n;const r=null===(n=t.detail)||void 0===n?void 0:n.articleId;if(r){const t=e.find(e=>e.id===r);t&&s(t)}};return window.addEventListener("showResearchArticle",t),()=>{window.removeEventListener("showResearchArticle",t)}},[e]);const h=e=>{const t={nutritional_supplementation:"bg-green-100 text-green-800",cognitive_enhancement:"bg-blue-100 text-blue-800",mood_enhancement:"bg-purple-100 text-purple-800",sleep_optimization:"bg-indigo-100 text-indigo-800",default:"bg-gray-100 text-gray-800"};return t[e||""]||t.default},m=e=>({beginner:"bg-green-100 text-green-700",intermediate:"bg-yellow-100 text-yellow-700",advanced:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"),f=e.filter(e=>{if(u&&null!==n&&void 0!==n&&n.goals&&n.goals.length>0){const t=n.goals;if(!(e.tags.some(e=>t.some(t=>t.includes(e)||e.includes(t.replace("_",""))))||e.category&&t.some(t=>e.category.includes(t.replace("_",""))||t.includes(e.category))||e.relatedHabits.length>0))return!1}if(a&&e.difficulty!==a)return!1;if(l.trim()){var t;const n=l.toLowerCase();return e.title.toLowerCase().includes(n)||e.tags.some(e=>e.toLowerCase().includes(n))||e.keyTakeaways.some(e=>e.toLowerCase().includes(n))||(null===(t=e.studyDetails)||void 0===t?void 0:t.journal)&&e.studyDetails.journal.toLowerCase().includes(n)}return!0}),p=Array.from(new Set(e.map(e=>e.difficulty))).sort(),y=()=>{o(null),c(""),d(!1)};return t?(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,g.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,g.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})}):i?(0,g.jsx)(Fo,{article:i,onBack:()=>s(null)}):(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,g.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,g.jsx)("span",{className:"text-white text-lg font-bold",children:"\ud83d\udcda"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Research Articles"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Evidence-based insights from scientific studies"})]})]})}),(0,g.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,g.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,g.jsx)("input",{type:"text",placeholder:"Search articles, tags, or key findings...",value:l,onChange:e=>c(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(null===n||void 0===n?void 0:n.goals)&&n.goals.length>0&&(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show:"}),(0,g.jsx)("button",{onClick:()=>d(!u),className:"text-xs px-3 py-1 rounded-full font-medium transition-colors ".concat(u?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:u?"My Goals Only":"All Articles"})]}),(0,g.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Difficulty:"}),(0,g.jsx)("button",{onClick:()=>o(null),className:"text-xs px-3 py-1 rounded-full font-medium transition-colors ".concat(null===a?"bg-gray-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"All"}),p.map(e=>(0,g.jsx)("button",{onClick:()=>o(e===a?null:e),className:"text-xs px-3 py-1 rounded-full font-medium transition-colors ".concat(a===e?m(e).replace("100","500").replace("700","100"):m(e)+" hover:opacity-80"),children:e},e))]})]}),(a||l||(null===n||void 0===n?void 0:n.goals)&&n.goals.length>0&&u)&&(0,g.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,g.jsxs)("span",{children:["Showing ",f.length," of ",e.length," articles"]}),(a||u&&(null===n||void 0===n?void 0:n.goals)&&n.goals.length>0)&&(0,g.jsx)("span",{children:"\u2022"}),u&&(null===n||void 0===n?void 0:n.goals)&&n.goals.length>0&&(0,g.jsx)("span",{className:"font-medium text-purple-600",children:"filtered by your goals"}),a&&(0,g.jsx)("span",{className:"font-medium",children:a})]}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:y,children:"Clear filters"})]})]}),(0,g.jsx)("div",{className:"space-y-6",children:0===f.length?(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"text-gray-400 mb-4",children:(0,g.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No articles found"}),(0,g.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters or search terms"}),(0,g.jsx)(x,{variant:"outline",onClick:y,children:"Clear all filters"})]}):f.map(e=>(0,g.jsx)(ko,{article:e,onReadMore:()=>s(e),getCategoryColor:h,getDifficultyColor:m},e.id))})]})}function ko(e){var t,n,r,i,s;let{article:a,onReadMore:o,getCategoryColor:l,getDifficultyColor:c}=e;return(0,g.jsx)(b,{className:"hover:shadow-lg transition-shadow",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6 cursor-pointer",onClick:o,children:[(0,g.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat(l(a.category)),children:(null===(t=a.category)||void 0===t?void 0:t.replace("_"," "))||"Uncategorized"}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat(c(a.difficulty)),children:a.difficulty}),(0,g.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[a.readingTime," min read"]}),(null===(n=a.studyDetails)||void 0===n?void 0:n.evidenceLevel)&&(0,g.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:a.studyDetails.evidenceLevel})]}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 hover:text-blue-600 transition-colors",children:a.title}),(0,g.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-4",children:[(null===(r=a.studyDetails)||void 0===r?void 0:r.sampleSize)&&(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)("span",{children:"\ud83d\udcca"}),(0,g.jsxs)("span",{children:[a.studyDetails.sampleSize.toLocaleString()," participants"]})]}),(null===(i=a.studyDetails)||void 0===i?void 0:i.journal)&&(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)("span",{children:"\ud83d\udcd6"}),(0,g.jsx)("span",{children:a.studyDetails.journal})]}),(null===(s=a.studyDetails)||void 0===s?void 0:s.year)&&(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)("span",{children:"\ud83d\udcc5"}),(0,g.jsx)("span",{children:a.studyDetails.year})]})]}),(0,g.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Key Findings:"}),(0,g.jsx)("ul",{className:"text-sm text-gray-700 space-y-1",children:a.keyTakeaways.slice(0,3).map((e,t)=>(0,g.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-blue-600 mt-0.5",children:"\u2022"}),(0,g.jsx)("span",{children:e})]},t))})]}),(0,g.jsx)("div",{className:"flex items-center justify-end pt-4 border-t border-gray-200",children:(0,g.jsx)(x,{variant:"outline",size:"sm",children:"Read Full Article"})})]})})})}function Fo(e){var t,n,r,i,s,a,o;let{article:l,onBack:c}=e;return(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,g.jsx)(x,{variant:"ghost",onClick:c,className:"mb-6 text-blue-600 hover:text-blue-700",children:"\u2190 Back to Articles"}),(0,g.jsxs)("article",{className:"prose prose-lg max-w-none",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium bg-blue-100 text-blue-800",children:(null===(t=l.category)||void 0===t?void 0:t.replace("_"," "))||"Uncategorized"}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium bg-green-100 text-green-800",children:l.difficulty}),(0,g.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[l.readingTime," min read"]})]}),(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:l.title})]}),(0,g.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-8",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Study Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(null===(n=l.studyDetails)||void 0===n?void 0:n.journal)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Journal:"})," ",l.studyDetails.journal]}),(null===(r=l.studyDetails)||void 0===r?void 0:r.year)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Year:"})," ",l.studyDetails.year]}),(null===(i=l.studyDetails)||void 0===i?void 0:i.sampleSize)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Sample Size:"})," ",l.studyDetails.sampleSize.toLocaleString()," participants"]}),(null===(s=l.studyDetails)||void 0===s?void 0:s.studyType)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Study Type:"})," ",l.studyDetails.studyType.replace("_"," ")]}),(null===(a=l.studyDetails)||void 0===a?void 0:a.evidenceLevel)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Evidence Level:"})," ",l.studyDetails.evidenceLevel]}),(null===(o=l.studyDetails)||void 0===o?void 0:o.statisticalSignificance)&&(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Statistical Significance:"})," ",l.studyDetails.statisticalSignificance]})]})]}),(0,g.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-8",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Key Takeaways"}),(0,g.jsx)("ul",{className:"space-y-1",children:l.keyTakeaways.map((e,t)=>(0,g.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,g.jsx)("span",{className:"text-green-600 mt-1",children:"\u2713"}),(0,g.jsx)("span",{children:e})]},t))})]}),(0,g.jsx)("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed",children:(0,g.jsx)(gi,{remarkPlugins:[wo],components:{h1:e=>{let{children:t}=e;return(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6 mt-8 pb-2 border-b border-gray-200",children:t})},h2:e=>{let{children:t}=e;return(0,g.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 mt-8",children:t})},h3:e=>{let{children:t}=e;return(0,g.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3 mt-6",children:t})},h4:e=>{let{children:t}=e;return(0,g.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3 mt-6",children:t})},p:e=>{let{children:t}=e;return(0,g.jsx)("p",{className:"mb-4 text-gray-700 leading-7",children:t})},ul:e=>{let{children:t}=e;return(0,g.jsx)("ul",{className:"mb-4 pl-6 space-y-2",children:t})},ol:e=>{let{children:t}=e;return(0,g.jsx)("ol",{className:"mb-4 pl-6 space-y-2",children:t})},li:e=>{let{children:t}=e;return(0,g.jsx)("li",{className:"text-gray-700 leading-6",children:t})},strong:e=>{let{children:t}=e;return(0,g.jsx)("strong",{className:"font-semibold text-gray-900",children:t})},em:e=>{let{children:t}=e;return(0,g.jsx)("em",{className:"italic text-gray-800",children:t})},blockquote:e=>{let{children:t}=e;return(0,g.jsx)("blockquote",{className:"border-l-4 border-blue-400 pl-4 py-2 mb-4 bg-blue-50 text-gray-700 italic",children:t})},hr:()=>(0,g.jsx)("hr",{className:"my-8 border-gray-300"}),code:e=>{let{children:t}=e;return(0,g.jsx)("code",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-mono",children:t})},pre:e=>{let{children:t}=e;return(0,g.jsx)("pre",{className:"bg-gray-100 p-4 rounded-lg mb-4 overflow-x-auto text-sm",children:t})}},children:Co(l.content)})}),l.citations&&l.citations.length>0&&(0,g.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"References"}),(0,g.jsx)("div",{className:"space-y-2",children:l.citations.map(e=>(0,g.jsx)("div",{className:"text-sm text-gray-600",children:e.url?(0,g.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline",children:e.text}):(0,g.jsx)("span",{children:e.text})},e.id))})]}),l.relatedHabits&&l.relatedHabits.length>0&&(0,g.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Habits"}),(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:l.relatedHabits.map(e=>(0,g.jsx)("span",{className:"text-sm bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:e.replace("_"," ")},e))})]})]})]})}class No{constructor(){this.habitSchema=void 0,this.researchSchema=void 0,this.habitSchema={requiredFields:["id","title","description","timeMinutes","category","goalTags","instructions","difficulty"],allowedCategories:["stress","sleep","exercise","nutrition","productivity","mindfulness","tier1_foundation","tier2_optimization","tier3_microhabits"],allowedTimeMinutes:[1,2,3,5,10,15,20,25,30,45,60],allowedDifficulties:["trivial","easy","moderate","beginner","intermediate","advanced"]},this.researchSchema={requiredFields:["id","title","category","tags","readingTime","difficulty","studyDetails","content"],allowedCategories:["nutritional_supplementation","cognitive_enhancement","mood_enhancement","sleep_optimization","stress_management","exercise_performance"],allowedDifficulties:["beginner","intermediate","advanced"],allowedEvidenceLevels:["very_high","high","moderate_to_high","moderate","low"]}}async validateAll(e,t){const n=[],r=[],i=performance.now();for(const l of e){const e=this.validateHabit(l);n.push(...e.errors),r.push(...e.warnings)}for(const l of t){const e=this.validateResearchArticle(l);n.push(...e.errors),r.push(...e.warnings)}const s=this.validateCrossReferences(e,t);n.push(...s.errors),r.push(...s.warnings);const a=this.validateDuplicates(e,t);n.push(...a.errors),r.push(...a.warnings);const o=performance.now()-i;return{isValid:0===n.filter(e=>"critical"===e.severity).length,errors:n,warnings:r,summary:{totalHabits:e.length,totalResearch:t.length,filesLoaded:[],duplicatesFound:a.duplicatesCount||0,processingTime:o}}}validateHabit(e){const t=[],n=[];for(const r of this.habitSchema.requiredFields)e[r]||0===e[r]||t.push({type:"error",severity:"critical",message:"Missing required field: ".concat(r),file:"unknown",itemId:e.id||"unknown",field:r});return e.id&&!/^[a-zA-Z0-9_-]+$/.test(e.id)&&t.push({type:"error",severity:"high",message:"Habit ID contains invalid characters (use only letters, numbers, hyphens, underscores)",file:"unknown",itemId:e.id,field:"id"}),e.timeMinutes&&!this.habitSchema.allowedTimeMinutes.includes(e.timeMinutes)&&n.push({type:"warning",message:"Unusual time duration: ".concat(e.timeMinutes," minutes. Consider using standard durations."),file:"unknown",itemId:e.id,field:"timeMinutes",suggestion:"Use one of: ".concat(this.habitSchema.allowedTimeMinutes.join(", "))}),e.difficulty&&!this.habitSchema.allowedDifficulties.includes(e.difficulty)&&t.push({type:"error",severity:"medium",message:"Invalid difficulty level: ".concat(e.difficulty),file:"unknown",itemId:e.id,field:"difficulty",details:{allowedValues:this.habitSchema.allowedDifficulties}}),e.goalTags&&0===e.goalTags.length&&n.push({type:"warning",message:"Habit has no goal tags - it won't appear in personalized recommendations",file:"unknown",itemId:e.id,field:"goalTags",suggestion:"Add at least one goal tag to make this habit discoverable"}),e.researchIds&&0!==e.researchIds.length||n.push({type:"warning",message:"Habit has no research references",file:"unknown",itemId:e.id,field:"researchIds",suggestion:"Add research IDs to support evidence-based recommendations"}),e.instructions&&e.instructions.length<20&&n.push({type:"warning",message:"Instructions seem very short - consider adding more detail",file:"unknown",itemId:e.id,field:"instructions",suggestion:"Provide step-by-step instructions for better user experience"}),{errors:t,warnings:n}}validateResearchArticle(e){const t=[],n=[];for(const r of this.researchSchema.requiredFields)e[r]||0===e[r]||t.push({type:"error",severity:"critical",message:"Missing required field: ".concat(r),file:"unknown",itemId:e.id||"unknown",field:r});return e.id&&!/^[a-zA-Z0-9_-]+$/.test(e.id)&&t.push({type:"error",severity:"high",message:"Article ID contains invalid characters",file:"unknown",itemId:e.id,field:"id"}),e.difficulty&&!this.researchSchema.allowedDifficulties.includes(e.difficulty)&&t.push({type:"error",severity:"medium",message:"Invalid difficulty level: ".concat(e.difficulty),file:"unknown",itemId:e.id,field:"difficulty"}),e.studyDetails&&((!e.studyDetails.sampleSize||e.studyDetails.sampleSize<1)&&n.push({type:"warning",message:"Study sample size is missing or invalid",file:"unknown",itemId:e.id,field:"studyDetails.sampleSize"}),(!e.studyDetails.year||e.studyDetails.year<1900||e.studyDetails.year>(new Date).getFullYear())&&n.push({type:"warning",message:"Study year is missing or seems invalid",file:"unknown",itemId:e.id,field:"studyDetails.year"})),e.content&&e.content.length<100&&n.push({type:"warning",message:"Article content seems very short",file:"unknown",itemId:e.id,field:"content",suggestion:"Consider adding more detailed content for better user value"}),e.keyTakeaways&&0!==e.keyTakeaways.length||n.push({type:"warning",message:"Article has no key takeaways",file:"unknown",itemId:e.id,field:"keyTakeaways",suggestion:"Add key takeaways to help users quickly understand the main points"}),{errors:t,warnings:n}}validateCrossReferences(e,t){const n=[],r=[],i=new Set(t.map(e=>e.id)),s=new Set(e.map(e=>e.id));for(const a of e)if(a.researchIds)for(const e of a.researchIds)i.has(e)||n.push({type:"error",severity:"medium",message:"Habit references unknown research ID: ".concat(e),file:"unknown",itemId:a.id,field:"researchIds",details:{invalidReference:e}});for(const a of t)if(a.relatedHabits)for(const e of a.relatedHabits)s.has(e)||r.push({type:"warning",message:"Research article references unknown habit ID: ".concat(e),file:"unknown",itemId:a.id,field:"relatedHabits",suggestion:"Remove invalid reference or add the corresponding habit"});return{errors:n,warnings:r}}validateDuplicates(e,t){const n=[];let r=0;const i=new Map;for(const a of e)a.id&&(i.has(a.id)||i.set(a.id,[]),i.get(a.id).push(a.title||"Unknown"));for(const[a,o]of Array.from(i.entries()))o.length>1&&(r++,n.push({type:"error",severity:"critical",message:"Duplicate habit ID: ".concat(a," (found in ").concat(o.length," habits)"),file:"multiple",itemId:a,details:{duplicateItems:o}}));const s=new Map;for(const a of t)a.id&&(s.has(a.id)||s.set(a.id,[]),s.get(a.id).push(a.title||"Unknown"));for(const[a,o]of Array.from(s.entries()))o.length>1&&(r++,n.push({type:"error",severity:"critical",message:"Duplicate research ID: ".concat(a," (found in ").concat(o.length," articles)"),file:"multiple",itemId:a,details:{duplicateItems:o}}));return{errors:n,warnings:[],duplicatesCount:r}}}class Eo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.validator=void 0,this.loadedContent=new Map,this.config=(0,s.A)({validateContent:!0,hotReload:!1,debugLogging:!1,failOnValidationError:!1,maxFileSize:1048576},e),this.validator=new No,this.setupHotReload()}async loadAllContent(){const e=performance.now();this.log("\ud83d\ude80 Starting content loading process...");try{const t=await this.loadCoreContent(),n=this.config.validateContent?await this.validator.validateAll(t.habits,t.research):this.createEmptyValidation(t.habits,t.research),r=performance.now()-e;if(n.summary.processingTime=r,this.logValidationResults(n),!n.isValid&&this.config.failOnValidationError)throw new Error("Content validation failed with ".concat(n.errors.length," errors"));const i={habits:t.habits,research:t.research,validation:n,loadedFiles:t.files};return this.log("\u2705 Content loading completed in ".concat(r.toFixed(2),"ms")),i}catch(t){throw this.logError("\u274c Content loading failed:",t),t}}async loadCoreContent(){this.log("\ud83d\udcda Loading core content files with auto-discovery...");const{BrowserAutoContentLoader:e}=await n.e(258).then(n.bind(n,258)),t=new e;try{const e=await t.loadAllContent(),n=e.sources.filter(e=>"habits"===e.type||"research"===e.type).map(e=>({path:e.path,category:e.category,type:"habits"===e.type?"habit":"research",data:[],loadedAt:(new Date).toISOString()}));return{habits:e.habits,research:e.research,files:n}}catch(r){throw this.logError("\u274c Failed to load core content:",r),r}}setupHotReload(){this.config.hotReload&&this.log("\ud83d\udd25 Hot reload enabled for development")}createEmptyValidation(e,t){return{isValid:!0,errors:[],warnings:[],summary:{totalHabits:e.length,totalResearch:t.length,filesLoaded:[],duplicatesFound:0,processingTime:0}}}logValidationResults(e){if(!this.config.debugLogging)return;const{summary:t,errors:n,warnings:r}=e;console.log("\n\ud83d\udcca Content Validation Summary:"),console.log("\u2705 ".concat(t.totalHabits," habits loaded")),console.log("\u2705 ".concat(t.totalResearch," research articles loaded")),console.log("\ud83d\udcc1 ".concat(t.filesLoaded.length," files processed")),t.duplicatesFound>0&&console.warn("\u26a0\ufe0f  ".concat(t.duplicatesFound," duplicates found and resolved")),n.length>0&&(console.log("\n\u274c Validation Errors:"),n.forEach(e=>{console.error("  \u2022 ".concat(e.message," (").concat(e.file,")"))})),r.length>0&&(console.log("\n\u26a0\ufe0f  Validation Warnings:"),r.forEach(e=>{console.warn("  \u2022 ".concat(e.message," (").concat(e.file,")"))})),console.log("\n\u23f1\ufe0f  Processing completed in ".concat(t.processingTime.toFixed(2),"ms"))}log(e){this.config.debugLogging&&console.log("[ContentLoader] ".concat(e))}logError(e,t){this.config.debugLogging&&console.error("[ContentLoader] ".concat(e),t)}}class Ao{constructor(){this.contentLoader=void 0,this.lastLoadedContent=null,this.isInitialized=!1,this.contentLoader=new Eo({validateContent:!0,hotReload:!1,debugLogging:!0,failOnValidationError:!1})}static getInstance(){return Ao.instance||(Ao.instance=new Ao),Ao.instance}async initialize(){if(this.isInitialized&&this.lastLoadedContent)return this.lastLoadedContent;console.log("\ud83d\ude80 Initializing modular content loading system...");try{const e=await this.contentLoader.loadAllContent();return this.lastLoadedContent=e,this.isInitialized=!0,console.log("\u2705 Content loading system initialized successfully"),e}catch(e){console.error("\u274c Failed to initialize content loading system:",e);const t={habits:[],research:[],validation:{isValid:!1,errors:[{type:"error",severity:"critical",message:"Content loading system failed to initialize",file:"system",details:{error:e instanceof Error?e.message:"Unknown error"}}],warnings:[],summary:{totalHabits:0,totalResearch:0,filesLoaded:[],duplicatesFound:0,processingTime:0}},loadedFiles:[]};return this.lastLoadedContent=t,t}}async getHabits(){var e;return this.isInitialized||await this.initialize(),(null===(e=this.lastLoadedContent)||void 0===e?void 0:e.habits)||[]}async getResearchArticles(){var e;return this.isInitialized||await this.initialize(),(null===(e=this.lastLoadedContent)||void 0===e?void 0:e.research)||[]}async getHabitsForGoals(e){return(await this.getHabits()).filter(t=>{var n;return null===(n=t.goalTags)||void 0===n?void 0:n.some(t=>e.includes(t))})}async getResearchForHabit(e){return(await this.getResearchArticles()).filter(t=>{var n;return null===(n=t.relatedHabits)||void 0===n?void 0:n.includes(e)})}getLastValidationResult(){var e;return null===(e=this.lastLoadedContent)||void 0===e?void 0:e.validation}async reload(){return this.isInitialized=!1,this.lastLoadedContent=null,await this.initialize()}getStats(){var e;if(!this.lastLoadedContent)return null;const{validation:t,loadedFiles:n}=this.lastLoadedContent;return{habits:t.summary.totalHabits,research:t.summary.totalResearch,filesLoaded:t.summary.filesLoaded.length,errors:t.errors.length,warnings:t.warnings.length,processingTime:t.summary.processingTime,loadedAt:(null===(e=n[0])||void 0===e?void 0:e.loadedAt)||(new Date).toISOString()}}}Ao.instance=void 0;const So=Ao.getInstance();class _o{constructor(){this.fixes=[]}async autoFix(e,t,n,r){this.fixes=[];const i=[...e],s=[...t],a=[];for(const o of n){this.fixError(o,i,s)||a.push(o)}for(const o of r)this.fixWarning(o,i,s);return{habits:i,research:s,fixes:this.fixes,unfixableErrors:a}}fixError(e,t,n){return e.message.includes("Missing required field")?this.fixMissingField(e,t,n):e.message.includes("Duplicate ID")?this.fixDuplicateId(e,t,n):e.message.includes("Invalid difficulty")?this.fixInvalidDifficulty(e,t,n):!!e.message.includes("Invalid frequency")&&this.fixInvalidFrequency(e,t)}fixWarning(e,t,n){e.message.includes("Missing optional field")&&this.addOptionalField(e,t,n),e.message.includes("references non-existent")&&this.fixBrokenReference(e,t,n)}fixMissingField(e,t,n){const r=e.itemId,i=e.field;if(!r||!i)return!1;const s=t.findIndex(e=>e.id===r);if(-1!==s){const e=t[s],n=this.getDefaultValueForField(i,"habit");if(void 0!==n)return e[i]=n,this.fixes.push({type:"habit",id:r,field:i,oldValue:void 0,newValue:n,reason:"Added missing required field '".concat(i,"'")}),!0}const a=n.findIndex(e=>e.id===r);if(-1!==a){const e=n[a],t=this.getDefaultValueForField(i,"research");if(void 0!==t)return e[i]=t,this.fixes.push({type:"research",id:r,field:i,oldValue:void 0,newValue:t,reason:"Added missing required field '".concat(i,"'")}),!0}return!1}fixDuplicateId(e,t,n){var r;const i=null===(r=e.details)||void 0===r?void 0:r.duplicateId;if(!i)return!1;const s=t.filter(e=>e.id===i),a=n.filter(e=>e.id===i);for(let o=1;o<s.length;o++){const e="".concat(i,"_").concat(o),t=s[o].id;s[o].id=e,this.fixes.push({type:"habit",id:t,field:"id",oldValue:t,newValue:e,reason:"Renamed duplicate ID to make it unique"})}for(let o=1;o<a.length;o++){const e="".concat(i,"_").concat(o),t=a[o].id;a[o].id=e,this.fixes.push({type:"research",id:t,field:"id",oldValue:t,newValue:e,reason:"Renamed duplicate ID to make it unique"})}return s.length>1||a.length>1}fixInvalidDifficulty(e,t,n){const r=e.itemId;if(!r)return!1;const i=t.findIndex(e=>e.id===r);if(-1!==i){const e=t[i],n=e.difficulty,s={easy:"beginner",medium:"intermediate",hard:"advanced",simple:"beginner",moderate:"intermediate",difficult:"advanced",expert:"advanced"}[null===n||void 0===n?void 0:n.toLowerCase()]||"beginner";return e.difficulty=s,this.fixes.push({type:"habit",id:r,field:"difficulty",oldValue:n,newValue:s,reason:"Corrected invalid difficulty level"}),!0}return!1}fixInvalidFrequency(e,t){const n=e.itemId;if(!n)return!1;const r=t.findIndex(e=>e.id===n);if(-1!==r){const e=t[r];if(!e.frequency||"object"!==typeof e.frequency)return e.frequency={type:"daily"},this.fixes.push({type:"habit",id:n,field:"frequency",oldValue:e.frequency,newValue:{type:"daily"},reason:"Added default daily frequency"}),!0}return!1}addOptionalField(e,t,n){const r=e.itemId,i=e.field;if(!r||!i)return;const s=t.findIndex(e=>e.id===r);if(-1!==s){const e=t[s],n=this.getOptionalDefaultValue(i,"habit");void 0===n||i in e||(e[i]=n,this.fixes.push({type:"habit",id:r,field:i,oldValue:void 0,newValue:n,reason:"Added optional field '".concat(i,"' with default value")}))}const a=n.findIndex(e=>e.id===r);if(-1!==a){const e=n[a],t=this.getOptionalDefaultValue(i,"research");void 0===t||i in e||(e[i]=t,this.fixes.push({type:"research",id:r,field:i,oldValue:void 0,newValue:t,reason:"Added optional field '".concat(i,"' with default value")}))}}fixBrokenReference(e,t,n){for(const r of n)if(r.relatedHabits){const e=r.relatedHabits.filter(e=>t.some(t=>t.id===e));if(e.length!==r.relatedHabits.length){const t=r.relatedHabits.filter(t=>!e.includes(t));r.relatedHabits=e,this.fixes.push({type:"research",id:r.id,field:"relatedHabits",oldValue:[...r.relatedHabits,...t],newValue:e,reason:"Removed non-existent habit references: ".concat(t.join(", "))})}}}getDefaultValueForField(e,t){return"habit"===t?{title:"Untitled Habit",description:"No description provided",category:"general",difficulty:"beginner",timeMinutes:5,frequency:{type:"daily"}}[e]:{title:"Untitled Research",subtitle:"No subtitle provided",content:"Content not available",readingTime:5,difficulty:"beginner",keyFindings:["No key findings available"],practicalTips:["No practical tips available"]}[e]}getOptionalDefaultValue(e,t){return{goalTags:[],scientificEvidence:"moderate",researchBacked:!1,icon:"\ud83d\udcdd",benefits:[],tips:[],relatedHabits:[],tags:[],studyDetails:{year:(new Date).getFullYear(),sampleSize:"Unknown",methodology:"Not specified",journal:"Not specified"}}[e]}generateReport(){if(0===this.fixes.length)return"No fixes applied.";const e=this.fixes.filter(e=>"habit"===e.type),t=this.fixes.filter(e=>"research"===e.type);let n="Applied ".concat(this.fixes.length," fixes:\n\n");return e.length>0&&(n+="Habit Fixes (".concat(e.length,"):\n"),e.forEach(e=>{n+="  - ".concat(e.id,": ").concat(e.reason,"\n"),n+="    ".concat(e.field,": ").concat(JSON.stringify(e.oldValue)," \u2192 ").concat(JSON.stringify(e.newValue),"\n")}),n+="\n"),t.length>0&&(n+="Research Article Fixes (".concat(t.length,"):\n"),t.forEach(e=>{n+="  - ".concat(e.id,": ").concat(e.reason,"\n"),n+="    ".concat(e.field,": ").concat(JSON.stringify(e.oldValue)," \u2192 ").concat(JSON.stringify(e.newValue),"\n")})),n}}function Bo(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]);const h=async()=>{i(!0);try{const e=await So.initialize();t(e),o(So.getStats())}catch(e){console.error("Failed to load content:",e)}finally{i(!1)}},m=t=>{if(!e)return;const n=(new Date).toISOString().split("T")[0];if("merged"===t){const t={habits:e.habits,research:e.research,metadata:{totalHabits:e.habits.length,totalResearch:e.research.length,exportedAt:(new Date).toISOString(),validationPassed:e.validation.isValid}},r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),s=document.createElement("a");return s.href=i,s.download="fixed-all-content-".concat(n,".json"),s.click(),URL.revokeObjectURL(i),void alert("Downloaded merged content with ".concat(e.habits.length," habits and ").concat(e.research.length," research articles.\n\nNote: This is a merged file containing all content. The original files had content spread across multiple files."))}if("habits"===t||"all"===t){const t=new Blob([JSON.stringify(e.habits,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download="fixed-habits-".concat(n,".json"),i.click(),URL.revokeObjectURL(r)}if("research"===t||"all"===t){const t=new Blob([JSON.stringify(e.research,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download="fixed-research-".concat(n,".json"),i.click(),URL.revokeObjectURL(r)}};if(n&&!e)return(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"animate-pulse",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,g.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})});const f=null===e||void 0===e?void 0:e.validation;return(0,g.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Modular Content Loading System"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Demonstrating dynamic content discovery and validation"})]}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(x,{onClick:async()=>{i(!0),c(null);try{const e=await So.reload();t(e),o(So.getStats())}catch(e){console.error("Failed to reload content:",e)}finally{i(!1)}},disabled:n,children:n?"Loading...":"Reload Content"}),f&&(f.errors.length>0||f.warnings.length>0)&&(0,g.jsx)(x,{onClick:async()=>{if(e){d(!0);try{const n=new _o,r=await n.autoFix(e.habits,e.research,e.validation.errors,e.validation.warnings),i=(0,s.A)((0,s.A)({},e),{},{habits:r.habits,research:r.research,validation:(0,s.A)((0,s.A)({},e.validation),{},{errors:r.unfixableErrors,warnings:[],isValid:0===r.unfixableErrors.length})});t(i),c(n.generateReport()),o((0,s.A)((0,s.A)({},a),{},{errors:r.unfixableErrors.length,warnings:0}))}catch(n){console.error("Failed to fix validation issues:",n)}finally{d(!1)}}},disabled:u,className:"bg-orange-600 hover:bg-orange-700 text-white",children:u?"Fixing...":"Fix ".concat(f.errors.length+f.warnings.length," Issues")})]})]}),a&&(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Content Statistics"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.habits}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Total Habits"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.research}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Research Articles"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:a.filesLoaded}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Files Loaded"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-gray-600",children:[a.processingTime.toFixed(1),"ms"]}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Load Time"})]})]})]})})}),l&&(0,g.jsx)(b,{className:"border-green-200 bg-green-50",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-green-600 text-xl",children:"\u2705"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Fixes Applied Successfully"})]}),(0,g.jsx)("button",{onClick:()=>c(null),className:"text-green-600 hover:text-green-800",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,g.jsx)("pre",{className:"text-sm text-green-700 whitespace-pre-wrap font-mono bg-white p-4 rounded max-h-64 overflow-y-auto",children:l}),(0,g.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,g.jsx)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:(0,g.jsxs)("p",{className:"text-sm text-red-800",children:[(0,g.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," Your content is currently loaded from multiple files:",(0,g.jsx)("br",{}),"\u2022 Individual files in ",(0,g.jsx)("code",{children:"/public/data/habits/"})," directory",(0,g.jsx)("br",{}),"\u2022 Main files like ",(0,g.jsx)("code",{children:"habits.json"})," and ",(0,g.jsx)("code",{children:"research.json"}),(0,g.jsx)("br",{}),"\u2022 Total: ",(null===e||void 0===e?void 0:e.habits.length)||0," habits from ",(null===e||void 0===e?void 0:e.loadedFiles.filter(e=>"habit"===e.type).length)||0," files"]})}),(0,g.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,g.jsxs)("p",{className:"text-sm text-blue-800 mb-3",children:[(0,g.jsx)("strong",{children:"Download Fixed Content:"})," Choose the appropriate format"]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)("button",{onClick:()=>m("merged"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"\ud83d\udce6 Download All (Merged)"}),(0,g.jsxs)("span",{className:"text-xs text-gray-600 py-1",children:["Single file with all ",(null===e||void 0===e?void 0:e.habits.length)||0," habits & ",(null===e||void 0===e?void 0:e.research.length)||0," research articles"]})]}),(0,g.jsx)("div",{className:"text-xs text-gray-600 mt-2 mb-1",children:"Or download separately:"}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)("button",{onClick:()=>m("habits"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"\ud83d\udce5 Habits Only"}),(0,g.jsx)("button",{onClick:()=>m("research"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"\ud83d\udce5 Research Only"})]})]})]}),(0,g.jsx)("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,g.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,g.jsx)("strong",{children:"To preserve all habits:"}),(0,g.jsx)("br",{}),'1. Use "Download All (Merged)" to get everything in one file',(0,g.jsx)("br",{}),"2. Keep this as a backup of all validated content",(0,g.jsx)("br",{}),"3. The merged file contains all ",(null===e||void 0===e?void 0:e.habits.length)||0," habits with fixes applied",(0,g.jsx)("br",{}),"4. You may need to reorganize into separate files if needed"]})})]})]})})}),f&&(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsx)(b,{className:f.errors.length>0?"border-red-200":"",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,g.jsx)("span",{className:"text-red-500 text-xl",children:"\u274c"}),(0,g.jsxs)("h3",{className:"text-lg font-semibold",children:["Validation Errors (",f.errors.length,")"]})]}),0===f.errors.length?(0,g.jsx)("p",{className:"text-green-600",children:"No validation errors found! \u2705"}):(0,g.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.errors.map((e,t)=>(0,g.jsxs)("div",{className:"p-3 bg-red-50 rounded border border-red-200",children:[(0,g.jsx)("div",{className:"font-medium text-red-800",children:e.message}),(0,g.jsxs)("div",{className:"text-sm text-red-600",children:[e.file," ",e.itemId&&"(".concat(e.itemId,")")]}),e.field&&(0,g.jsxs)("div",{className:"text-xs text-red-500 mt-1",children:["Field: ",e.field]})]},t))})]})})}),(0,g.jsx)(b,{className:f.warnings.length>0?"border-yellow-200":"",children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,g.jsx)("span",{className:"text-yellow-500 text-xl",children:"\u26a0\ufe0f"}),(0,g.jsxs)("h3",{className:"text-lg font-semibold",children:["Validation Warnings (",f.warnings.length,")"]})]}),0===f.warnings.length?(0,g.jsx)("p",{className:"text-green-600",children:"No validation warnings! \u2705"}):(0,g.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.warnings.map((e,t)=>(0,g.jsxs)("div",{className:"p-3 bg-yellow-50 rounded border border-yellow-200",children:[(0,g.jsx)("div",{className:"font-medium text-yellow-800",children:e.message}),(0,g.jsxs)("div",{className:"text-sm text-yellow-600",children:[e.file," ",e.itemId&&"(".concat(e.itemId,")")]}),e.suggestion&&(0,g.jsxs)("div",{className:"text-xs text-yellow-600 mt-1",children:["\ud83d\udca1 ",e.suggestion]})]},t))})]})})})]}),e&&(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Loaded Content Files"}),(0,g.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.loadedFiles.map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-sm",children:e.path?e.path.split("/").pop():"Unknown file"}),(0,g.jsxs)("div",{className:"text-xs text-gray-500",children:[e.category," \u2022 ",e.type," \u2022 ",Array.isArray(e.data)?e.data.length:0," items"]})]}),(0,g.jsx)("div",{className:"text-xs text-gray-400",children:e.loadedAt?new Date(e.loadedAt).toLocaleTimeString():"Unknown time"})]},t))})]})})}),e&&(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sample Loaded Habits"}),(0,g.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[e.habits.slice(0,5).map((e,t)=>{var n;return(0,g.jsxs)("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[(0,g.jsx)("div",{className:"font-medium text-blue-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-blue-700",children:e.description}),(0,g.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[e.timeMinutes," min \u2022 ",e.difficulty," \u2022 ",null===(n=e.goalTags)||void 0===n?void 0:n.join(", ")]})]},t)}),e.habits.length>5&&(0,g.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:["... and ",e.habits.length-5," more habits"]})]})]})})}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sample Loaded Research"}),(0,g.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[e.research.slice(0,5).map((e,t)=>{var n;return(0,g.jsxs)("div",{className:"p-3 bg-green-50 rounded border border-green-200",children:[(0,g.jsx)("div",{className:"font-medium text-green-900",children:e.title}),(0,g.jsx)("div",{className:"text-sm text-green-700",children:e.subtitle}),(0,g.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[e.readingTime," min read \u2022 ",e.difficulty," \u2022 ",(null===(n=e.studyDetails)||void 0===n?void 0:n.year)||"N/A"]})]},t)}),e.research.length>5&&(0,g.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:["... and ",e.research.length-5," more articles"]})]})]})})})]}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\ude80 How to Use This System"}),(0,g.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,g.jsx)("h4",{children:"Adding New Content:"}),(0,g.jsxs)("ol",{children:[(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"Habits"}),": Add JSON files to ",(0,g.jsx)("code",{children:"src/data/habits/"})," (e.g., ",(0,g.jsx)("code",{children:"exercise-habits.json"}),")"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"Research"}),": Add JSON files to ",(0,g.jsx)("code",{children:"src/data/research/"})," (e.g., ",(0,g.jsx)("code",{children:"exercise-research.json"}),")"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"Custom"}),": Add files to ",(0,g.jsx)("code",{children:"src/data/content-custom/"})]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"Auto-Discovery"}),": The system automatically finds and loads new files"]})]}),(0,g.jsx)("h4",{children:"Content Validation:"}),(0,g.jsxs)("ul",{children:[(0,g.jsx)("li",{children:"\u2705 Required fields validation"}),(0,g.jsx)("li",{children:"\u2705 Unique ID enforcement"}),(0,g.jsx)("li",{children:"\u2705 Cross-reference validation (habit \u2194 research)"}),(0,g.jsx)("li",{children:"\u2705 Data type and format validation"}),(0,g.jsx)("li",{children:"\u26a0\ufe0f Warnings for missing optional fields"})]}),(0,g.jsx)("h4",{children:"Benefits:"}),(0,g.jsxs)("ul",{children:[(0,g.jsxs)("li",{children:["\ud83d\udd04 ",(0,g.jsx)("strong",{children:"No code changes"})," needed to add content"]}),(0,g.jsxs)("li",{children:["\ud83d\udce6 ",(0,g.jsx)("strong",{children:"Clean separation"})," between core and custom content"]}),(0,g.jsxs)("li",{children:["\ud83d\udee1\ufe0f ",(0,g.jsx)("strong",{children:"Validation"})," catches errors before deployment"]}),(0,g.jsxs)("li",{children:["\ud83d\udd25 ",(0,g.jsx)("strong",{children:"Hot reload"})," during development"]}),(0,g.jsxs)("li",{children:["\ud83d\udcca ",(0,g.jsx)("strong",{children:"Detailed logging"})," for content creators"]})]})]})]})})})]})}var To=n(768);const Io=(0,r.createContext)(null);function Po(e){let{children:t}=e;const{currentUser:n,userHabits:i,userProgress:s}=(0,K.kH)(),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[y,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await To.reminderService.initialize();o(!0),e&&(c(To.reminderService.isReady()),d(To.reminderService.getPermissionState().granted)),console.log("Reminder context initialized",{initialized:e})}catch(e){console.error("Failed to initialize reminder context:",e),o(!0)}})()},[]),(0,r.useEffect)(()=>{a&&l&&n&&i.length>0&&b()},[a,l,n,i,s]),(0,r.useEffect)(()=>{const e=()=>{l&&setTimeout(()=>{D()},1e3)};return window.addEventListener("habit-completed",e),()=>window.removeEventListener("habit-completed",e)},[l]),(0,r.useEffect)(()=>{const e=e=>{const{habitId:t,type:n,timestamp:r}=e.detail;console.log("Reminder clicked:",{habitId:t,type:n,timestamp:r})};return window.addEventListener("reminder-clicked",e),()=>window.removeEventListener("reminder-clicked",e)},[]);const b=async()=>{try{await To.reminderService.scheduleReminders(i,s),v(),console.log("Reminders scheduled successfully")}catch(e){console.error("Failed to schedule reminders:",e)}},v=()=>{const e=To.reminderService.getStats(),t=To.reminderService.getScheduledReminders();p(t),x(e.nextReminder)},D=async()=>{if(l)try{await To.reminderService.refreshReminders(i,s),v()}catch(e){console.error("Failed to refresh reminders:",e)}},w={isInitialized:a,isEnabled:l,hasPermission:u,pendingReminders:h,scheduledReminders:f,nextReminder:y,initializeReminders:async()=>{try{const e=await To.reminderService.initialize();return e&&(c(!0),d(!0),await b()),e}catch(e){return console.error("Failed to initialize reminders:",e),!1}},toggleReminders:e=>{To.reminderService.setEnabled(e),c(e),e&&i.length>0?b():(p([]),x(null))},requestPermission:async()=>{try{const e=await To.reminderService.requestNotificationPermission();return d(e),e&&(c(!0),await b()),e}catch(e){return console.error("Failed to request permission:",e),!1}},refreshReminders:D,showTestNotification:async()=>{try{return await To.reminderService.showTestNotification()}catch(e){return console.error("Failed to show test notification:",e),!1}},getStats:()=>To.reminderService.getStats()};return(0,g.jsx)(Io.Provider,{value:w,children:t})}function Mo(e){var t,i;let{isOpen:a,onClose:o}=e;const{isEnabled:l,hasPermission:c,refreshReminders:u,getStats:d}=function(){const e=(0,r.useContext)(Io);if(!e)throw new Error("useReminders must be used within a ReminderProvider");return e}(),{userHabits:h,userProgress:m}=(0,K.kH)(),[f,p]=(0,r.useState)(!1),[y,w]=(0,r.useState)({supported:!1,granted:!1,denied:!1,default:!0});(0,r.useEffect)(()=>{if("undefined"!==typeof window){if("Notification"in window){const e=Notification.permission;w({supported:!0,granted:"granted"===e,denied:"denied"===e,default:"default"===e})}else w({supported:!1,granted:!1,denied:!1,default:!1})}},[a]);const C=d();return a?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,g.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Reminder Settings"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Configure your habit reminders and notifications"})]}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:o,children:"\u2715"})]})}),(0,g.jsxs)("div",{className:"px-6 py-4 max-h-[calc(90vh-120px)] overflow-y-auto space-y-6",children:[(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Status"})}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Browser Support"}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 ".concat(y.supported?"text-green-600":"text-red-600"),children:[(0,g.jsx)("span",{className:"text-sm font-medium",children:y.supported?"Supported":"Not Supported"}),y.supported?"\u2713":"\u2717"]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Permission Status"}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 ".concat(y.granted?"text-green-600":y.denied?"text-red-600":"text-yellow-600"),children:[(0,g.jsx)("span",{className:"text-sm font-medium",children:y.granted?"Granted":y.denied?"Denied":"Not Requested"}),y.granted?"\u2713":y.denied?"\u2717":"\u26a0"]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Reminder Service"}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 ".concat(l?"text-green-600":"text-gray-600"),children:[(0,g.jsx)("span",{className:"text-sm font-medium",children:l?"Active":"Inactive"}),l?"\u2713":"\u25cb"]})]})]}),!y.granted&&y.supported&&(0,g.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,g.jsx)(x,{onClick:async()=>{if(y.supported){p(!0);try{const e=await Notification.requestPermission();w(t=>(0,s.A)((0,s.A)({},t),{},{granted:"granted"===e,denied:"denied"===e,default:"default"===e})),"granted"===e&&await u()}catch(e){console.error("Failed to request notification permission:",e)}finally{p(!1)}}else alert("Browser notifications are not supported in your browser.")},disabled:f,className:"w-full",children:f?"Requesting...":"Enable Notifications"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"You'll be asked to allow notifications for this website"})]}),y.granted&&(0,g.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,g.jsx)(x,{variant:"outline",onClick:()=>{y.granted&&new Notification("ScienceHabits Test",{body:"This is a test notification. Your habit reminders are working!",icon:"/favicon.ico",tag:"test-notification"})},className:"w-full",children:"Send Test Notification"})})]})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Reminder Statistics"})}),(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:C.totalScheduled}),(0,g.jsx)("div",{className:"text-sm text-blue-800",children:"Total Scheduled"})]}),(0,g.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===(t=C.byType)||void 0===t?void 0:t.daily)||0}),(0,g.jsx)("div",{className:"text-sm text-green-800",children:"Daily Reminders"})]}),(0,g.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===(i=C.byType)||void 0===i?void 0:i.weekly)||0}),(0,g.jsx)("div",{className:"text-sm text-purple-800",children:"Weekly Reminders"})]}),(0,g.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:h.length}),(0,g.jsx)("div",{className:"text-sm text-orange-800",children:"Total Habits"})]})]})})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Reminder Management"})}),(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)(x,{onClick:async()=>{p(!0);try{await u()}catch(e){console.error("Failed to schedule reminders:",e)}finally{p(!1)}},disabled:f||!y.granted,className:"w-full",children:f?"Scheduling...":"Reschedule All Reminders"}),(0,g.jsx)(x,{variant:"outline",onClick:async()=>{p(!0);try{const{reminderService:e}=await Promise.resolve().then(n.bind(n,768));await e.clearAllReminders(),await u()}catch(e){console.error("Failed to clear reminders:",e)}finally{p(!1)}},disabled:f,className:"w-full text-red-600 border-red-200 hover:bg-red-50",children:f?"Clearing...":"Clear All Reminders"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:'Use "Reschedule" to refresh reminders based on your current habits and preferences. Use "Clear" to remove all scheduled reminders.'})]})})]}),(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Help & Information"})}),(0,g.jsx)(D,{children:(0,g.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"How reminders work:"}),(0,g.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,g.jsx)("li",{children:"Reminders are calculated based on your habit frequency and optimal timing"}),(0,g.jsx)("li",{children:"Daily habits get smart reminders at your most successful times"}),(0,g.jsx)("li",{children:"Weekly habits get distributed reminders throughout the week"}),(0,g.jsx)("li",{children:"Periodic habits get reminders before they're due"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Troubleshooting:"}),(0,g.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,g.jsx)("li",{children:'If notifications aren\'t working, try the "Send Test Notification" button'}),(0,g.jsx)("li",{children:"Make sure your browser allows notifications for this site"}),(0,g.jsx)("li",{children:"Check your device's notification settings"}),(0,g.jsx)("li",{children:"Close and reopen the browser if permissions seem stuck"})]})]})]})})]})]}),(0,g.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,g.jsx)("div",{className:"flex justify-end space-x-3",children:(0,g.jsx)(x,{variant:"outline",onClick:o,children:"Close"})})})]})}):null}function Ro(e){let{className:t=""}=e;const{isEnabled:n,hasPermission:i,nextReminder:s,totalScheduled:a}=function(){const e=(0,r.useContext)(Io);if(!e)return{isEnabled:!1,hasPermission:!1,nextReminder:null,totalScheduled:0};const t=e.getStats();return{isEnabled:e.isEnabled,hasPermission:e.hasPermission,nextReminder:e.nextReminder,totalScheduled:t.totalScheduled}}(),[o,l]=(0,r.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 ".concat(t),children:[(0,g.jsxs)(x,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"flex items-center space-x-2 hover:bg-gray-100",title:"Open reminder settings",children:[(0,g.jsx)("span",{className:"text-lg",children:i?n?0===a?"\u23f0":"\ud83d\udd14":"\u23f8\ufe0f":"\ud83d\udd15"}),(0,g.jsxs)("div",{className:"flex flex-col items-start text-xs",children:[(0,g.jsx)("span",{className:"font-medium ".concat(i?n?0===a?"text-gray-500":"text-green-500":"text-yellow-500":"text-gray-400"),children:i?n?0===a?"No reminders":"".concat(a," active"):"Disabled":"Permission needed"}),n&&a>0&&(0,g.jsxs)("span",{className:"text-gray-500",children:["Next: ",(e=>{if(!e)return"None";const t=new Date,n=e.getTime()-t.getTime(),r=Math.floor(n/6e4),i=Math.floor(r/60);if(n<0)return"Now";if(0===r)return"<1m";if(r<60)return"".concat(r,"m");if(i<24)return"".concat(i,"h");const s=Math.floor(i/24);return"".concat(s,"d")})(s)]})]})]}),n&&s&&(0,g.jsx)("div",{className:"relative",children:(()=>{const e=new Date,t=s.getTime()-e.getTime(),n=Math.floor(t/6e4);return n<=30&&n>0?(0,g.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse",title:"Reminder in ".concat(n," minutes")}):n<=0?(0,g.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full",title:"Reminder is due now!"}):null})()})]}),(0,g.jsx)(Mo,{isOpen:o,onClose:()=>l(!1)})]})}function Lo(e){let{isOpen:t,onClose:n,habitId:i,habitName:s,triggerCondition:a}=e;const[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d]=(0,r.useState)(Date.now()),{compassionMessages:h,recoverySettings:m,startRecoverySession:f,logCompassionEvent:p,generateMicroHabit:y}=(0,js.K)(),{userHabits:v}=(0,K.kH)(),w=h.find(e=>e.triggerCondition===a),C=v.find(e=>e.id===i);if((0,r.useEffect)(()=>{if(t&&w){const e={id:"event_".concat(Date.now()),habitId:i,userId:"current_user",triggeredDate:(new Date).toISOString(),triggerCondition:a,messageShown:w,userResponse:"dismissed",timeToResponse:0,followUpNeeded:"third_consecutive"===a};p(e)}},[t,w,i,a,p]),!w)return null;const j=e=>{l(e);const t={id:"event_".concat(Date.now()),habitId:i,userId:"current_user",triggeredDate:(new Date).toISOString(),triggerCondition:a,messageShown:w,userResponse:"accepted_recovery",recoveryOptionSelected:e,timeToResponse:(Date.now()-d)/1e3,followUpNeeded:!1};if(p(t),e.includes("2-minute")||e.includes("micro")||e.includes("small")){if(C){y(C);f(i,"micro_habit")}}else e.includes("time")||e.includes("when")?f(i,"timing_adjustment"):e.includes("support")||e.includes("friend")||e.includes("check")?f(i,"social_support"):f(i,"reduced_frequency");setTimeout(()=>{n(),l(null)},1500)};return(0,g.jsx)(F,{isOpen:t,onClose:n,size:"lg",children:(0,g.jsxs)("div",{className:"p-6 max-w-2xl",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,g.jsx)("span",{className:"text-3xl",children:(e=>{switch(e){case"supportive":return"\ud83e\udd17";case"encouraging":return"\ud83d\udcaa";case"understanding":return"\ud83d\udc99";case"motivational":return"\ud83d\ude80";default:return"\u2728"}})(w.emotionalTone)}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"It's completely normal to miss days"}),(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:[s," \u2022 Day missed"]})]})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("p",{className:"text-gray-700 text-base leading-relaxed mb-4",children:w.message}),m.showResearchExplanations&&(0,g.jsxs)("button",{onClick:()=>u(!c),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,g.jsx)("span",{children:"\ud83d\udcda"}),(0,g.jsxs)("span",{children:[c?"Hide":"Show"," research explanation"]})]})]}),c&&m.showResearchExplanations&&(0,g.jsx)(b,{className:"mb-6",children:(0,g.jsx)(D,{className:"p-4",children:(0,g.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,g.jsxs)("h4",{className:"text-sm font-semibold text-blue-900 mb-2 flex items-center",children:[(0,g.jsx)("span",{className:"mr-2",children:"\ud83d\udd2c"}),"Research shows:"]}),(0,g.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:w.researchExplanation}),w.researchCitation&&(0,g.jsxs)("div",{className:"text-xs text-blue-700 border-t border-blue-200 pt-2",children:[(0,g.jsx)("strong",{children:"Source:"})," ",w.researchCitation.authors," (",w.researchCitation.year,").",(0,g.jsxs)("em",{children:[" ",w.researchCitation.title]}),". ",w.researchCitation.journal,".",w.researchCitation.url&&(0,g.jsx)("a",{href:w.researchCitation.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:underline",children:"View study"})]})]})})}),!o&&(0,g.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,g.jsx)("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Choose your recovery approach:"}),w.recoveryOptions.map((e,t)=>(0,g.jsx)("button",{onClick:()=>j(e),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("span",{className:"text-lg group-hover:scale-110 transition-transform",children:Oo(e)}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900 group-hover:text-blue-900",children:e}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:zo(e)})]})]})},t))]}),o&&(0,g.jsxs)("div",{className:"text-center py-6",children:[(0,g.jsxs)("div",{className:"inline-flex items-center space-x-2 text-green-600 mb-4",children:[(0,g.jsx)("span",{className:"text-2xl",children:"\u2705"}),(0,g.jsx)("span",{className:"font-medium",children:"Recovery plan activated!"})]}),(0,g.jsxs)("p",{className:"text-gray-600 mb-4",children:["You've chosen: ",(0,g.jsx)("strong",{children:o})]}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"We'll track your recovery progress and provide support along the way."})]}),!o&&(0,g.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[(0,g.jsx)(x,{variant:"outline",onClick:n,className:"flex-1",children:"I'll try again tomorrow"}),(0,g.jsx)(x,{onClick:()=>j("Continue tomorrow as planned"),className:"flex-1",children:"Get back on track now"})]})]})})}function Oo(e){return e.includes("2-minute")||e.includes("small")||e.includes("tiny")?"\u26a1":e.includes("time")||e.includes("when")?"\ud83d\udd50":e.includes("support")||e.includes("friend")||e.includes("check")?"\ud83d\udc65":e.includes("break")||e.includes("rest")?"\ud83d\udd04":e.includes("change")||e.includes("adjust")?"\ud83c\udfaf":"\ud83d\ude80"}function zo(e){return e.includes("2-minute")||e.includes("small")||e.includes("tiny")?"Start with the smallest possible version to rebuild momentum":e.includes("time")||e.includes("when")?"Find a time that works better with your current schedule":e.includes("support")||e.includes("friend")||e.includes("check")?"Get accountability and encouragement from others":e.includes("break")||e.includes("rest")?"Take a planned break and return when you're ready":e.includes("change")||e.includes("adjust")?"Modify the habit to better fit your current situation":"Continue with your original plan and routine"}function Ho(e){let{microHabit:t,recoverySession:n,onComplete:i,onProgress:s,className:a=""}=e;const[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),{updateRecoveryProgress:m,progressMicroHabit:f}=(0,js.K)(),{userHabits:p,updateUserProgress:y}=(0,K.kH)(),w=p.find(e=>e.id===t.originalHabitId);return(0,g.jsxs)(b,{className:"".concat(a," ").concat(o?"ring-2 ring-green-500 bg-green-50":""),children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("span",{className:"text-2xl",children:(C=t.timeRequired,C<=1?"\u26a1":C<=2?"\ud83d\ude80":C<=5?"\u23f1\ufe0f":"\u23f0")}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:["Micro version of ",(null===w||void 0===w?void 0:w.title)||"your habit"]})]})]}),(0,g.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"minimal":return"text-green-600 bg-green-50";case"easy":return"text-blue-600 bg-blue-50";case"moderate":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}})(t.difficulty)),children:[t.timeRequired," min"]})]})}),(0,g.jsxs)(D,{children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("p",{className:"text-gray-600 mb-2",children:t.description}),t.maintainsSameContext&&(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[(0,g.jsx)("span",{children:"\ud83c\udfaf"}),(0,g.jsx)("span",{children:"Maintains same time and place as your original habit"})]})]}),(0,g.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Success rate for micro habits:"}),(0,g.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(100*t.successRate),"%"]})]}),(0,g.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(100*t.successRate,"%")}})})]}),!o&&(0,g.jsxs)(x,{onClick:()=>{l(!0),w&&y(w.id,(new Date).toISOString().split("T")[0]),f(t.id),n&&m(n.id,{successfulDays:n.successfulDays+1,currentStep:Math.min(n.currentStep+1,n.totalSteps)}),null===i||void 0===i||i(),setTimeout(()=>{u(!0)},1e3)},className:"w-full mb-4",size:"lg",children:[(0,g.jsx)("span",{className:"mr-2",children:"\u2713"}),"Complete Now (",t.timeRequired," min)"]}),o&&(0,g.jsxs)("div",{className:"text-center py-4 mb-4",children:[(0,g.jsx)("div",{className:"text-green-600 text-2xl mb-2",children:"\ud83c\udf89"}),(0,g.jsx)("h4",{className:"font-medium text-green-900 mb-1",children:"Great job!"}),(0,g.jsx)("p",{className:"text-sm text-green-700",children:"You maintained your habit context and built momentum"})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Progressive Scaling Path"}),(0,g.jsxs)("button",{onClick:()=>u(!c),className:"text-xs text-blue-600 hover:text-blue-800",children:[c?"Hide":"Show"," scaling"]})]}),c&&(0,g.jsx)("div",{className:"space-y-2",children:t.scalingSteps.map((e,r)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border ".concat(r===d?"border-blue-500 bg-blue-50":r<d?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-sm",children:r<d?"\u2705":r===d?"\ud83c\udfaf":"\u2b55"}),(0,g.jsx)("span",{className:"text-sm ".concat(r<=d?"text-gray-900":"text-gray-500"),children:e})]}),r>d&&o&&(0,g.jsx)("button",{onClick:()=>(e=>{if(h(e),n){const r={currentStep:e,nextMilestone:e<t.scalingSteps.length-1?t.scalingSteps[e+1]:"Return to full habit"};m(n.id,r)}null===s||void 0===s||s()})(r),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Try this"})]},r))})]}),n&&(0,g.jsxs)("div",{className:"mt-4 p-3 border border-blue-200 bg-blue-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-blue-800",children:"Recovery Progress:"}),(0,g.jsxs)("span",{className:"font-medium text-blue-900",children:[n.currentStep,"/",n.totalSteps," steps"]})]}),(0,g.jsx)("div",{className:"mt-2 w-full bg-blue-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(n.currentStep/n.totalSteps*100,"%")}})}),(0,g.jsxs)("p",{className:"text-xs text-blue-700 mt-2",children:[(0,g.jsx)("strong",{children:"Next milestone:"})," ",n.nextMilestone]})]}),(null===n||void 0===n?void 0:n.coachingTips)&&(0,g.jsxs)("div",{className:"mt-4",children:[(0,g.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"\ud83d\udca1 Recovery Tips:"}),(0,g.jsx)("div",{className:"space-y-1",children:n.coachingTips.slice(0,2).map((e,t)=>(0,g.jsxs)("div",{className:"text-xs text-gray-600 flex items-start",children:[(0,g.jsx)("span",{className:"mr-1",children:"\u2022"}),(0,g.jsx)("span",{children:e})]},t))})]}),(0,g.jsxs)("div",{className:"mt-4 p-2 bg-gray-50 border border-gray-200 rounded text-xs text-gray-600",children:[(0,g.jsx)("strong",{children:"\ud83d\udca1 Research:"})," Starting with ridiculously small habits removes barriers and creates positive momentum. Success builds on success."]})]})]});var C}function qo(e){var t;let{className:n=""}=e;const[i,s]=(0,r.useState)("overview"),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),{activeRecoverySessions:u,recentCompassionEvents:d,recoverySettings:h,recoveryMetrics:m,personalInsights:f,checkForCompassionTriggers:p,triggerCompassionMessage:y,generateMicroHabit:w,getRelevantResearchForSituation:C}=(0,js.K)(),{userHabits:j,userProgress:k}=(0,K.kH)();(0,r.useEffect)(()=>{h.enableCompassionMessages&&j.forEach(e=>{const t=p(e.id);t.shouldTrigger&&"immediate"===t.urgency&&t.messageId&&y(e.id,t.messageId)})},[j,k]);const F=j.filter(e=>p(e.id).shouldTrigger),N=u.filter(e=>"micro_habit"===e.recoveryType&&!e.completed).map(e=>{const t=j.find(t=>t.id===e.habitId);return t?w(t):null}).filter(e=>null!==e),E=f.slice(0,3);return(0,g.jsxs)("div",{className:"max-w-6xl mx-auto p-6 ".concat(n),children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery & Progress Dashboard"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Science-backed support for building sustainable habits through compassion and progress focus"})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-4 text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.totalRecoverySessions}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Recovery Sessions"})]})}),(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-4 text-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(m.successfulRecoveries/Math.max(m.totalRecoverySessions,1)*100),"%"]}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})}),(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-4 text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:u.length}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Active Sessions"})]})}),(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-4 text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.round(m.averageRecoveryTime)}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Recovery (days)"})]})})]}),F.length>0&&(0,g.jsxs)(b,{className:"mb-6 border-yellow-200 bg-yellow-50",children:[(0,g.jsx)(v,{children:(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("span",{className:"text-xl",children:"\ud83e\udd17"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-yellow-900",children:"Habits That Could Use Some Support"})]})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:F.map(e=>{const t=p(e.id);return(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"high"===t.severity?"Missing multiple days":"medium"===t.severity?"Missed a couple days":"Missed yesterday"})]}),(0,g.jsx)(x,{size:"sm",onClick:()=>{return t=e.id,c(t),void o(!0);var t},children:"Get Support"})]},e.id)})})})]}),(0,g.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,g.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:"\ud83d\udcca"},{id:"trends",name:"Progress Trends",icon:"\ud83d\udcc8"},{id:"recovery",name:"Recovery Sessions",icon:"\ud83d\udd04"},{id:"insights",name:"Insights",icon:"\ud83d\udca1"}].map(e=>(0,g.jsxs)("button",{onClick:()=>s(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(i===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.name})]},e.id))})}),(0,g.jsxs)("div",{className:"space-y-6",children:["overview"===i&&(0,g.jsxs)("div",{className:"space-y-6",children:[N.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ud83d\ude80 Active Micro Habits"}),(0,g.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:N.map(e=>{const t=u.find(t=>t.habitId===e.originalHabitId);return(0,g.jsx)(Ho,{microHabit:e,recoverySession:t},e.id)})})]}),d.length>0&&(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-medium",children:"Recent Support Messages"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:d.slice(0,3).map(e=>{const t=j.find(t=>t.id===e.habitId);return(0,g.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded",children:[(0,g.jsx)("span",{className:"text-lg",children:"\ud83d\udc99"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===t||void 0===t?void 0:t.title}),(0,g.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[e.messageShown.message.substring(0,100),"..."]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.triggeredDate).toLocaleDateString()})]})]},e.id)})})})]}),E.length>0&&(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-medium",children:"\ud83d\udca1 Quick Insights"})}),(0,g.jsx)(D,{children:(0,g.jsx)("div",{className:"space-y-3",children:E.map(e=>(0,g.jsxs)("div",{className:"border-l-4 border-blue-500 pl-3",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]},e.id))})})]})]}),"trends"===i&&(0,g.jsx)("div",{className:"space-y-6",children:j.map(e=>(0,g.jsx)(ks,{habitId:e.id},e.id))}),"recovery"===i&&(0,g.jsx)("div",{className:"space-y-6",children:(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-medium",children:"Active Recovery Sessions"})}),(0,g.jsx)(D,{children:0===u.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83c\udf89"}),(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No active recovery sessions"}),(0,g.jsx)("p",{className:"text-gray-600",children:"You're maintaining consistency with your habits!"})]}):(0,g.jsx)("div",{className:"space-y-4",children:u.map(e=>{const t=j.find(t=>t.id===e.habitId);return(0,g.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:null===t||void 0===t?void 0:t.title}),(0,g.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.recoveryType.replace("_"," ")})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,g.jsx)("span",{children:"Progress"}),(0,g.jsxs)("span",{children:[e.currentStep,"/",e.totalSteps]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.currentStep/e.totalSteps*100,"%")}})})]}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,g.jsx)("strong",{children:"Next milestone:"})," ",e.nextMilestone]})]},e.id)})})})]})}),"insights"===i&&(0,g.jsx)("div",{className:"space-y-6",children:(0,g.jsxs)(b,{children:[(0,g.jsx)(v,{children:(0,g.jsx)("h3",{className:"text-lg font-medium",children:"Personalized Recovery Insights"})}),(0,g.jsx)(D,{children:0===f.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83d\udcca"}),(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Building your insights"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Complete more habits to unlock personalized recovery insights"})]}):(0,g.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,g.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("success_factor"===e.type?"bg-green-100 text-green-800":"risk_factor"===e.type?"bg-red-100 text-red-800":"opportunity"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.type.replace("_"," ")})]}),(0,g.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),e.actionable&&e.suggestedActions.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Suggested actions:"}),(0,g.jsx)("ul",{className:"space-y-1",children:e.suggestedActions.map((e,t)=>(0,g.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,g.jsx)("span",{className:"mr-2",children:"\u2022"}),(0,g.jsx)("span",{children:e})]},t))})]}),(0,g.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[(0,g.jsxs)("span",{children:["Confidence: ",e.confidence,"%"]}),(0,g.jsxs)("span",{children:["Based on ",e.basedOn.replace("_"," ")]})]})]},e.id))})})]})})]}),l&&(0,g.jsx)(Lo,{isOpen:a,onClose:()=>o(!1),habitId:l,habitName:(null===(t=j.find(e=>e.id===l))||void 0===t?void 0:t.title)||"",triggerCondition:"first_miss"})]})}function Uo(e){let{habits:t,progress:n,user:i,timeframe:s}=e;const{animationsEnabled:a,emotionalDesign:o}=P(),[l,c]=(0,r.useState)("streaks"),u=(0,r.useMemo)(()=>t.map(e=>{const t=n.find(t=>t.habitId===e.id);if(!t)return{habitId:e.id,habitTitle:e.title,currentStreak:0,longestStreak:0,streakHistory:[],category:e.category,color:m(e.category)};const r=t.completions.slice(-30).map((e,t)=>({date:e,streakLength:t+1,isActive:!0}));return{habitId:e.id,habitTitle:e.title,currentStreak:t.currentStreak,longestStreak:t.longestStreak||t.currentStreak,streakHistory:r,category:e.category,color:m(e.category)}}),[t,n]),d=(0,r.useMemo)(()=>{const e=[];for(let r=f(s)-1;r>=0;r--){const i=new Date;i.setDate(i.getDate()-r);const s=i.toISOString().split("T")[0];let a=0;const o=t.length;n.forEach(e=>{e.completions.includes(s)&&a++});const l=o>0?a/o:0;e.push({date:s,completionCount:a,maxPossible:o,intensity:l,tooltip:"".concat(i.toLocaleDateString(),": ").concat(a,"/").concat(o," habits completed")})}return e},[t,n,s]),h=(0,r.useMemo)(()=>{const e=new Map;return t.forEach(t=>{e.has(t.category)||e.set(t.category,{habits:[],progress:[]}),e.get(t.category).habits.push(t);const r=n.find(e=>e.habitId===t.id);r&&e.get(t.category).progress.push(r)}),Array.from(e.entries()).map(e=>{let[t,n]=e;const r=n.progress.reduce((e,t)=>e+t.completions.length,0),i=n.habits.length*f(s),a=i>0?r/i:0,o=n.habits.map(e=>{const t=n.progress.find(t=>t.habitId===e.id),r=t?t.completions.length:0,i=f(s);return{title:e.title,completionRate:i>0?r/i:0}});return{category:t,completionRate:a,totalHabits:n.habits.length,completedHabits:n.progress.filter(e=>e.currentStreak>0).length,color:m(t),habits:o}})},[t,n,s]);function m(e){const t={health:"bg-compassion-500",mindfulness:"bg-recovery-500",productivity:"bg-progress-500",learning:"bg-research-500",creativity:"bg-orange-500",social:"bg-purple-500",default:"bg-gray-500"};return t[e]||t.default}function f(e){switch(e){case"week":return 7;case"month":default:return 30;case"quarter":return 90;case"year":return 365}}function p(e){return 0===e?"bg-gray-100":e<=.25?"bg-progress-200":e<=.5?"bg-progress-400":e<=.75?"bg-progress-600":"bg-progress-800"}return(0,g.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Progress Visualization"}),(0,g.jsx)("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[{key:"streaks",label:"Streaks",icon:"\ud83d\udd25"},{key:"heatmap",label:"Heatmap",icon:"\ud83d\udcca"},{key:"categories",label:"Categories",icon:"\ud83d\udccb"},{key:"trends",label:"Trends",icon:"\ud83d\udcc8"}].map(e=>(0,g.jsxs)("button",{onClick:()=>c(e.key),className:"\n                flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors\n                ".concat(l===e.key?"bg-white text-progress-700 shadow-sm":"text-gray-600 hover:text-gray-900","\n              "),children:[(0,g.jsx)("span",{className:"mr-1",children:e.icon}),e.label]},e.key))})]}),"streaks"===l&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Habit Streaks"}),u.map(e=>(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color.replace("bg-","bg-")," mr-3")}),(0,g.jsx)("h4",{className:"font-medium text-gray-900",children:e.habitTitle})]}),(0,g.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:e.category})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-compassion-600",children:e.currentStreak}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Current Streak"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-progress-600",children:e.longestStreak}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Best Streak"})]})]}),(0,g.jsx)("div",{className:"flex space-x-1 overflow-x-auto",children:Array.from({length:Math.min(30,e.longestStreak||30)},(t,n)=>(0,g.jsx)("div",{className:"\n                  w-3 h-8 rounded-sm flex-shrink-0 transition-all duration-200\n                  ".concat(n<e.currentStreak?e.color.replace("500","400"):"bg-gray-200","\n                  ").concat(a?"hover:scale-110":"","\n                "),title:"Day ".concat(n+1)},n))}),(0,g.jsx)("div",{className:"mt-4 p-3 bg-compassion-50 rounded-lg",children:(0,g.jsx)("p",{className:"text-sm text-compassion-800",children:0===e.currentStreak?"Ready to start a new streak! Every expert was once a beginner.":e.currentStreak>=21?"Incredible! You're in the habit formation zone. Research shows 21+ days creates lasting change.":e.currentStreak>=7?"Great momentum! You're building neural pathways for long-term success.":"Strong start! Each day makes the next one easier."})})]},e.habitId))]}),"heatmap"===l&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Completion Heatmap"}),(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,g.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,g.jsx)("div",{className:"text-center text-xs text-gray-600 font-medium p-2",children:e},e))}),(0,g.jsx)("div",{className:"grid grid-cols-7 gap-2",children:d.map((e,t)=>(0,g.jsx)("div",{className:"\n                w-8 h-8 rounded-sm flex items-center justify-center text-xs font-medium\n                ".concat(p(e.intensity),"\n                ").concat(e.intensity>.5?"text-white":"text-gray-600","\n                ").concat(a?"hover:scale-110 transition-transform duration-200":"","\n                cursor-pointer\n              "),title:e.tooltip,children:e.completionCount},e.date))}),(0,g.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Less"}),(0,g.jsx)("div",{className:"flex space-x-1",children:[0,.25,.5,.75,1].map(e=>(0,g.jsx)("div",{className:"w-3 h-3 rounded-sm ".concat(p(e))},e))}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"More"})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-compassion-600",children:[Math.round(d.reduce((e,t)=>e+t.intensity,0)/d.length*100),"%"]}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Average Daily"})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-progress-600",children:d.filter(e=>e.intensity>=.8).length}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Great Days"})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-research-600",children:Math.max(...d.map(e=>e.completionCount),0)}),(0,g.jsx)("div",{className:"text-sm text-gray-600",children:"Best Day"})]})]})]}),"categories"===l&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progress by Category"}),h.map(e=>(0,g.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.color," mr-3")}),(0,g.jsx)("h4",{className:"font-medium text-gray-900 capitalize",children:e.category})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-600",children:[e.completedHabits,"/",e.totalHabits," active"]})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Overall completion rate"}),(0,g.jsxs)("span",{className:"font-medium",children:[Math.round(100*e.completionRate),"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"h-2 rounded-full ".concat(e.color," transition-all duration-500"),style:{width:"".concat(100*e.completionRate,"%")}})})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Individual Habits"}),e.habits.map((t,n)=>(0,g.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,g.jsx)("span",{className:"text-sm text-gray-600 truncate flex-1 mr-4",children:t.title}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:(0,g.jsx)("div",{className:"h-1.5 rounded-full ".concat(e.color," transition-all duration-300"),style:{width:"".concat(100*t.completionRate,"%")}})}),(0,g.jsxs)("span",{className:"text-xs text-gray-500 w-8 text-right",children:[Math.round(100*t.completionRate),"%"]})]})]},n))]})]},e.category))]}),"trends"===l&&(()=>{var e,t;return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trends & Insights"}),(0,g.jsxs)("div",{className:"bg-gradient-to-r from-compassion-50 to-progress-50 rounded-lg p-6 border border-compassion-200",children:[(0,g.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Your Progress Story"}),(0,g.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-6",children:Array.from({length:7},(e,t)=>{const n=new Date;n.setDate(n.getDate()-(6-t));const r=d.find(e=>e.date===n.toISOString().split("T")[0]),i=(null===r||void 0===r?void 0:r.intensity)||0;return(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"w-8 h-8 mx-auto rounded-full flex items-center justify-center text-xs font-medium mb-1 ".concat(p(i)," ").concat(i>.5?"text-white":"text-gray-600"),children:(null===r||void 0===r?void 0:r.completionCount)||0}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:n.toLocaleDateString("en",{weekday:"short"})})]},t)})}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"bg-white/80 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center mb-2",children:[(0,g.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udd25"}),(0,g.jsx)("span",{className:"font-medium text-gray-900",children:"Best Performing"})]}),(0,g.jsxs)("p",{className:"text-sm text-gray-700",children:[(null===(e=h.sort((e,t)=>t.completionRate-e.completionRate)[0])||void 0===e?void 0:e.category)||"No data"," habits are your strongest area"]})]}),(0,g.jsxs)("div",{className:"bg-white/80 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center mb-2",children:[(0,g.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udcaa"}),(0,g.jsx)("span",{className:"font-medium text-gray-900",children:"Growth Opportunity"})]}),(0,g.jsxs)("p",{className:"text-sm text-gray-700",children:["Focus on ",(null===(t=h.sort((e,t)=>e.completionRate-t.completionRate)[0])||void 0===t?void 0:t.category)||"consistency"," for balanced progress"]})]})]})]})]})})()]})}function Vo(e){let{user:t,habits:n,progress:i,currentContext:s,onDismiss:a,onAction:o}=e;const{animationsEnabled:l,emotionalDesign:c}=P(),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{f()},[n,i,s,t]);const f=async()=>{const e=[],t=new Date;if("morning"===s.timeOfDay){const r=i.filter(e=>{const n=e.lastCompletionDate?new Date(e.lastCompletionDate):null;return n&&n.toDateString()===t.toDateString()});0===r.length?e.push(p()):r.length<.5*n.length?e.push(y(r.length,n.length)):e.push(x(r.length,n.length))}i.forEach(r=>{var i;const s=n.find(e=>e.id===r.habitId);if(!s)return;if(7!==r.currentStreak&&30!==r.currentStreak&&100!==r.currentStreak||e.push(b(s,r)),r.longestStreak>=7&&0===r.currentStreak){(r.lastCompletionDate?(t.getTime()-new Date(r.lastCompletionDate).getTime())/864e5:999)<=3&&e.push(v(s,r))}r.completions.slice(-14).length<=3&&(null!==(i=r.totalCompletions)&&void 0!==i?i:0)>=5&&e.push(D(s,r))}),s.isWeekend&&e.push(w()),"Monday"===s.dayOfWeek&&"morning"===s.timeOfDay&&e.push(C()),Math.random()<.3&&e.push(j()),e.push(...k());const r=e.filter(e=>!h.has(e.id)).filter(e=>!e.expiresAt||new Date(e.expiresAt)>t).sort((e,t)=>{const n={urgent:4,high:3,medium:2,low:1};return n[t.priority]-n[e.priority]}).slice(0,3);d(r)},p=()=>{const e=["Today is a fresh start. What one small habit will you focus on first? \ud83c\udf05","Every expert was once a beginner. Every pro was once an amateur. Today, you begin again. \u2728","Your future self is rooting for the choices you make today. Let's make them count! \ud83d\udcaa","Small actions, repeated consistently, create extraordinary results. Ready to start? \ud83d\ude80"];return{id:"daily-start-".concat(Date.now()),message:{id:"daily-start",context:"encouragement",tone:"inspiring",message:e[Math.floor(Math.random()*e.length)],researchBased:!1,personalizable:!1,triggers:{}},priority:"medium",actions:{primary:{label:"View Today's Habits",action:()=>null===o||void 0===o?void 0:o("daily-start","primary")}},dismissible:!0}},y=(e,t)=>({id:"midday-boost-".concat(Date.now()),message:{id:"midday-boost",context:"encouragement",tone:"encouraging",message:"You've completed ".concat(e," out of ").concat(t," habits today. Every completion strengthens your commitment muscle! \ud83d\udcaa"),researchBased:!0,personalizable:!0,triggers:{}},priority:"medium",actions:{primary:{label:"Continue Building",action:()=>null===o||void 0===o?void 0:o("midday-boost","primary")}},dismissible:!0}),x=(e,t)=>({id:"great-start-".concat(Date.now()),message:{id:"great-start",context:"milestone",tone:"celebratory",message:"Fantastic! ".concat(e," out of ").concat(t," habits completed. You're building unstoppable momentum! \ud83c\udf89"),researchBased:!1,personalizable:!0,triggers:{}},priority:"high",dismissible:!0}),b=(e,t)=>({id:"streak-milestone-".concat(e.id,"-").concat(t.currentStreak),message:{id:"streak-".concat(t.currentStreak),context:"milestone",tone:"celebratory",message:{7:"One week strong! Your brain is forming new neural pathways. Science says you're building real change! \ud83e\udde0\u2728",30:"30 days! You've officially built a habit. Research shows this is when behaviors become more automatic. Incredible work! \ud83c\udfc6",100:"100 DAYS! You're in the elite tier of habit builders. This is life-changing consistency. You're inspiring! \ud83c\udf1f"}[t.currentStreak]||"".concat(t.currentStreak," days of ").concat(e.title,"! You're proving to yourself that you're someone who follows through. \ud83d\udd25"),researchBased:7===t.currentStreak||30===t.currentStreak,personalizable:!0,triggers:{streakLength:t.currentStreak}},priority:t.currentStreak>=30?"urgent":"high",actions:{primary:{label:"Share This Win",action:()=>null===o||void 0===o?void 0:o("streak-milestone-".concat(e.id),"primary")},secondary:{label:"Keep Building",action:()=>null===o||void 0===o?void 0:o("streak-milestone-".concat(e.id),"secondary")}},dismissible:!1,expiresAt:new Date(Date.now()+864e5).toISOString()}),v=(e,t)=>({id:"streak-recovery-".concat(e.id),message:{id:"streak-recovery",context:"streak_recovery",tone:"gentle",message:"Your ".concat(t.longestStreak,"-day streak with ").concat(e.title," was amazing! Breaks happen to everyone. Your brain still remembers - you're rebuilding, not starting over. \ud83d\udc9b"),researchBased:!0,personalizable:!0,triggers:{}},priority:"high",actions:{primary:{label:"Restart Gently",action:()=>null===o||void 0===o?void 0:o("streak-recovery-".concat(e.id),"primary")}},dismissible:!0}),D=(e,t)=>({id:"struggle-support-".concat(e.id),message:{id:"struggle-support",context:"struggle",tone:"understanding",message:"".concat(e.title," has been challenging lately. That's completely normal! Even small steps count. Consider making it easier for now - progress over perfection. \ud83e\udd17"),researchBased:!0,personalizable:!0,triggers:{}},priority:"medium",actions:{primary:{label:"Adjust Habit",action:()=>null===o||void 0===o?void 0:o("struggle-support-".concat(e.id),"primary")},secondary:{label:"Get Tips",action:()=>null===o||void 0===o?void 0:o("struggle-support-".concat(e.id),"secondary")}},dismissible:!0}),w=()=>({id:"weekend-reflection-".concat(Date.now()),message:{id:"weekend-reflection",context:"encouragement",tone:"supportive",message:"Weekends are perfect for reflection. How did your habits feel this week? What's one small improvement you could make? \ud83c\udf1f",researchBased:!1,personalizable:!1,triggers:{}},priority:"low",actions:{primary:{label:"Review Week",action:()=>null===o||void 0===o?void 0:o("weekend-reflection","primary")}},dismissible:!0}),C=()=>{const e=["New week, fresh energy! This week, focus on progress over perfection. You've got this! \ud83d\udcaa","Monday motivation: You don't have to be perfect, you just have to be consistent. Ready to build? \ud83d\ude80","Week ahead looks bright! Remember: small, consistent actions compound into life-changing results. \u2728"];return{id:"weekly-motivation-".concat(Date.now()),message:{id:"weekly-motivation",context:"encouragement",tone:"motivational",message:e[Math.floor(Math.random()*e.length)],researchBased:!1,personalizable:!1,triggers:{}},priority:"medium",dismissible:!0}},j=()=>{const e=[{message:"Research shows it takes 18-254 days to form a habit (average: 66 days). Be patient with yourself - you're rewiring your brain! \ud83e\udde0",researchBased:!0},{message:"Studies prove that people who track their habits are 2x more likely to achieve their goals. You're already ahead by being here! \ud83d\udcca",researchBased:!0},{message:"Self-compassion increases motivation more than self-criticism, according to research. Be kind to yourself today. \ud83d\udc9b",researchBased:!0},{message:"Small wins trigger dopamine release, making you more likely to continue. Celebrate every completion, no matter how small! \ud83c\udf89",researchBased:!0}],t=e[Math.floor(Math.random()*e.length)];return{id:"research-insight-".concat(Date.now()),message:{id:"research-insight",context:"encouragement",tone:"inspiring",message:t.message,researchBased:t.researchBased,personalizable:!1,triggers:{}},priority:"low",actions:{secondary:{label:"Learn More",action:()=>null===o||void 0===o?void 0:o("research-insight","secondary")}},dismissible:!0}},k=()=>{const e=[];return"evening"===s.timeOfDay&&e.push({id:"evening-reflection-".concat(Date.now()),message:{id:"evening-reflection",context:"encouragement",tone:"supportive",message:"End your day with gratitude. What's one habit you're proud of building? Tomorrow is another chance to grow. \ud83c\udf19",researchBased:!1,personalizable:!1,triggers:{}},priority:"low",dismissible:!0}),e},F=e=>{const t="\n      rounded-xl border-2 p-4 transition-all duration-300\n      ".concat(l?"transform hover:scale-[1.01] hover:shadow-lg":"","\n    ");switch(e){case"urgent":return"".concat(t," bg-gradient-to-r from-compassion-50 to-progress-50 border-compassion-300 shadow-md");case"high":return"".concat(t," bg-compassion-50 border-compassion-200");case"medium":return"".concat(t," bg-progress-50 border-progress-200");case"low":return"".concat(t," bg-gray-50 border-gray-200");default:return"".concat(t," bg-white border-gray-200")}},N=e=>{switch(e){case"celebratory":return"text-compassion-700";case"inspiring":case"motivational":return"text-progress-700";case"encouraging":return"text-progress-600";case"supportive":case"understanding":return"text-recovery-600";case"gentle":return"text-recovery-700";default:return"text-gray-700"}};return 0===u.length?null:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Motivation"}),u.map(e=>(0,g.jsxs)("div",{className:F(e.priority),children:[(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex-1 mr-3",children:[(0,g.jsx)("p",{className:"text-sm leading-relaxed ".concat(N(e.message.tone)),children:e.message.message}),e.message.researchBased&&(0,g.jsxs)("div",{className:"mt-2 flex items-center text-xs text-research-600",children:[(0,g.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Research-backed"]})]}),e.dismissible&&(0,g.jsx)("button",{onClick:()=>{return t=e.id,m(e=>new Set([...e,t])),d(e=>e.filter(e=>e.id!==t)),void(null===a||void 0===a||a(t));var t},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Dismiss message",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.actions&&(0,g.jsxs)("div",{className:"flex items-center justify-end space-x-2 mt-3 pt-3 border-t border-gray-200/50",children:[e.actions.secondary&&(0,g.jsx)("button",{onClick:()=>{var t,n;null===(t=e.actions)||void 0===t||null===(n=t.secondary)||void 0===n||n.action(),null===o||void 0===o||o(e.id,"secondary")},className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800 transition-colors",children:e.actions.secondary.label}),e.actions.primary&&(0,g.jsx)("button",{onClick:()=>{var t,n;null===(t=e.actions)||void 0===t||null===(n=t.primary)||void 0===n||n.action(),null===o||void 0===o||o(e.id,"primary")},className:"px-3 py-1 text-xs bg-progress-600 text-white rounded-md hover:bg-progress-700 transition-colors",children:e.actions.primary.label})]})]},e.id))]})}function Wo(){const{currentUser:e,userHabits:t,userProgress:n}=(0,K.kH)(),[i,a]=(0,r.useState)({isOpen:!1,habitId:"",habitTitle:"",researchIds:[]}),o=(new Date).toISOString().split("T")[0],l=(0,r.useMemo)(()=>t.map(e=>{const t=n.find(t=>t.habitId===e.id),r=(null===t||void 0===t?void 0:t.completions.includes(o))||!1;return(0,s.A)((0,s.A)({},e),{},{progress:t,isCompletedToday:r})}),[t,n,o]),c=l.find(e=>!e.isCompletedToday),u={completed:l.filter(e=>e.isCompletedToday).length,total:l.length,percentage:l.length>0?Math.round(l.filter(e=>e.isCompletedToday).length/l.length*100):0},d=Math.max(...n.map(e=>e.currentStreak),0);async function h(e){const{updateUserProgress:t}=K.kH.getState();await t(e)}function m(e){console.log("Skipped habit:",e)}function f(e){const n=t.find(t=>t.id===e);n&&a({isOpen:!0,habitId:n.id,habitTitle:n.title,researchIds:n.researchIds||[]})}return e?(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[(0,g.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,g.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Good ",function(){const e=(new Date).getHours();return e<12?"morning":e<17?"afternoon":"evening"}(),", ",e.name||"there","!"]}),(0,g.jsx)("p",{className:"text-gray-600 mt-2",children:c?"Let's focus on your next habit":u.completed>0?"Great job! You've completed all habits for today":"Ready to start your day?"})]}),c?(0,g.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 shadow-sm border border-blue-100",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"NEXT UP"}),(0,g.jsxs)("span",{className:"text-sm text-gray-500",children:[c.timeMinutes," min"]})]}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:c.title}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:c.description}),(0,g.jsx)("button",{onClick:()=>h(c.id),className:"w-full bg-blue-600 text-white rounded-lg py-3 px-4 font-medium hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Start Now"})]}):u.completed>0?(0,g.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 shadow-sm border border-green-100",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:(0,g.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All Done!"}),(0,g.jsxs)("p",{className:"text-gray-600",children:["You've completed all ",u.completed," habits for today"]})]})}):null,(0,g.jsx)(S,{completedToday:u.completed,totalToday:u.total,currentStreak:d}),l.length>0&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,g.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,g.jsx)("h3",{className:"font-semibold text-gray-900",children:"Today's Habits"})}),(0,g.jsx)("div",{children:l.map(e=>(0,g.jsx)(A,{habit:{id:e.id,title:e.title,duration:"".concat(e.timeMinutes," min"),isCompleted:e.isCompletedToday,instructions:e.instructions,whyEffective:e.whyEffective},onComplete:h,onSkip:m,onViewResearch:f},e.id))})]})]}),(0,g.jsx)(ki,{isOpen:i.isOpen,onClose:()=>a((0,s.A)((0,s.A)({},i),{},{isOpen:!1})),habitId:i.habitId,habitTitle:i.habitTitle,researchIds:i.researchIds})]}):(0,g.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Welcome to ScienceHabits"}),(0,g.jsx)("p",{className:"text-gray-500",children:"Please complete onboarding to get started"})]})})}function Ko(e){let{activeTab:t,onTabChange:n}=e;const r=[{key:"today",label:"Today",icon:(0,g.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 7 4-4 4 4"})]}),description:"Your daily overview and focus"},{key:"habits",label:"My Habits",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),description:"Manage your habit library"},{key:"analytics",label:"Analytics",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),description:"View your progress and insights"},{key:"settings",label:"Settings",icon:(0,g.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),description:"App settings and cloud sync"}];return(0,g.jsx)("nav",{className:"bg-white border-b border-gray-200",role:"tablist","aria-label":"Main navigation",children:(0,g.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,g.jsx)("div",{className:"flex",children:r.map(e=>(0,g.jsxs)("button",{role:"tab","aria-selected":t===e.key,"aria-controls":"".concat(e.key,"-panel"),tabIndex:t===e.key?0:-1,onClick:()=>n(e.key),className:"\n                flex-1 flex flex-col items-center py-4 px-2 text-sm font-medium transition-colors duration-200\n                ".concat(t===e.key?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700","\n              "),title:e.description,children:[(0,g.jsx)("span",{className:"mb-1",children:e.icon}),(0,g.jsx)("span",{children:e.label})]},e.key))})})})}class Go{constructor(){this.type=void 0}sanitizePath(e){return e.replace(/^\/+|\/+$/g,"").replace(/\/+/g,"/")}validateEncryptedData(e){return!!(e&&Array.isArray(e.data)&&Array.isArray(e.iv)&&"number"===typeof e.timestamp&&"string"===typeof e.context&&"string"===typeof e.version)}createFileMetadata(e,t,n,r){return{name:this.sanitizePath(e),size:t,modified:n.getTime(),etag:r||n.getTime().toString()}}handleNetworkError(e,t){return console.error("".concat(this.type," ").concat(t," failed:"),e),navigator.onLine?"AbortError"===e.name?new Error("".concat(t," was cancelled")):401===e.status||403===e.status?new Error("".concat(t," failed: Authentication required")):404===e.status?new Error("".concat(t," failed: File not found")):413===e.status?new Error("".concat(t," failed: File too large")):507===e.status?new Error("".concat(t," failed: Storage quota exceeded")):new Error("".concat(t," failed: ").concat(e.message||"Unknown error")):new Error("".concat(t," failed: No internet connection"))}async retryOperation(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let s=0;s<=n;s++)try{return await e()}catch(i){if(t=i,i instanceof Error&&(i.message.includes("Authentication")||i.message.includes("401")||i.message.includes("403")))throw i;if(s<n){const e=r*Math.pow(2,s);console.log("Retrying operation in ".concat(e,"ms (attempt ").concat(s+1,"/").concat(n,")")),await new Promise(t=>setTimeout(t,e))}}throw t}}class Yo extends Go{constructor(e){super(),this.type="nextcloud",this.config=void 0,this.baseHeaders=void 0,this.config=e;const t=btoa("".concat(e.username,":").concat(e.appPassword));this.baseHeaders={Authorization:"Basic ".concat(t),"Content-Type":"application/json","User-Agent":"ScienceHabits/1.0"}}async authenticate(){try{const e=await this.retryOperation(()=>fetch(this.buildUrl(""),{method:"PROPFIND",headers:(0,s.A)((0,s.A)({},this.baseHeaders),{},{Depth:"0"})}));return 207===e.status||200===e.status}catch(e){return console.error("NextCloud authentication failed:",e),!1}}async uploadFile(e,t){if(!this.validateEncryptedData(t))throw new Error("Invalid encrypted data format");const n=this.buildUrl(e),r=JSON.stringify(t);try{await this.retryOperation(async()=>{const e=await fetch(n,{method:"PUT",headers:(0,s.A)((0,s.A)({},this.baseHeaders),{},{"Content-Type":"application/json","Content-Length":r.length.toString()}),body:r});if(!e.ok)throw this.handleNetworkError(e,"File upload");return e}),console.log("\u2705 Uploaded to NextCloud: ".concat(e))}catch(i){throw this.handleNetworkError(i,"File upload")}}async downloadFile(e){const t=this.buildUrl(e);try{const n=await this.retryOperation(async()=>{const e=await fetch(t,{method:"GET",headers:this.baseHeaders});if(!e.ok)throw this.handleNetworkError(e,"File download");return e}),r=await n.text(),i=JSON.parse(r);if(!this.validateEncryptedData(i))throw new Error("Downloaded file contains invalid encrypted data");return console.log("\u2705 Downloaded from NextCloud: ".concat(e)),i}catch(n){throw this.handleNetworkError(n,"File download")}}async listFiles(e){const t=this.buildUrl(e);try{const n=await this.retryOperation(async()=>{const e=await fetch(t,{method:"PROPFIND",headers:(0,s.A)((0,s.A)({},this.baseHeaders),{},{Depth:"1","Content-Type":"application/xml"}),body:'<?xml version="1.0"?>\n            <d:propfind xmlns:d="DAV:">\n              <d:prop>\n                <d:displayname/>\n                <d:getcontentlength/>\n                <d:getlastmodified/>\n                <d:getetag/>\n                <d:resourcetype/>\n              </d:prop>\n            </d:propfind>'});if(!e.ok)throw this.handleNetworkError(e,"Directory listing");return e}),r=await n.text(),i=this.parseWebDAVResponse(r,e);return console.log("\u2705 Listed ".concat(i.length," files from NextCloud: ").concat(e)),i}catch(n){throw this.handleNetworkError(n,"Directory listing")}}async deleteFile(e){const t=this.buildUrl(e);try{await this.retryOperation(async()=>{const e=await fetch(t,{method:"DELETE",headers:this.baseHeaders});if(!e.ok&&404!==e.status)throw this.handleNetworkError(e,"File deletion");return e}),console.log("\u2705 Deleted from NextCloud: ".concat(e))}catch(n){throw this.handleNetworkError(n,"File deletion")}}async getServerTimestamp(e){try{const t=(await this.listFiles("")).find(t=>t.name===e);return(null===t||void 0===t?void 0:t.modified)||0}catch(t){return console.error("Failed to get server timestamp:",t),0}}async checkConnection(){if(!navigator.onLine)return!1;try{const e=new AbortController,t=setTimeout(()=>e.abort(),1e4),n=await fetch(this.buildUrl(""),{method:"HEAD",headers:this.baseHeaders,signal:e.signal});return clearTimeout(t),n.ok||404===n.status}catch(e){return console.error("NextCloud connection test failed:",e),!1}}async getStorageQuota(){try{const e=await this.retryOperation(async()=>{const e=await fetch(this.buildUrl(""),{method:"PROPFIND",headers:(0,s.A)((0,s.A)({},this.baseHeaders),{},{Depth:"0","Content-Type":"application/xml"}),body:'<?xml version="1.0"?>\n            <d:propfind xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns">\n              <d:prop>\n                <d:quota-available-bytes/>\n                <d:quota-used-bytes/>\n                <oc:quota-available/>\n                <oc:quota-used/>\n              </d:prop>\n            </d:propfind>'});if(!e.ok)throw this.handleNetworkError(e,"Quota check");return e}),t=await e.text();return this.parseQuotaResponse(t)}catch(e){return console.error("Failed to get NextCloud quota:",e),{used:0,available:null,percentage:null}}}buildUrl(e){const t=this.sanitizePath(e),n=this.sanitizePath(this.config.syncPath),r=t?"".concat(n,"/").concat(t):n,i=this.config.serverUrl.replace(/\/+$/,"");return"".concat(i,"/remote.php/dav/files/").concat(this.config.username,"/").concat(r)}parseWebDAVResponse(e,t){try{const t=new DOMParser,o=t.parseFromString(e,"text/xml").querySelectorAll("d\\:response, response"),l=[];for(const e of o){var n,r,i,s,a;null===(n=e.querySelector("d\\:href, href"))||void 0===n||n.textContent;const t=e.querySelector("d\\:propstat d\\:prop, propstat prop");if(!t)continue;const o=t.querySelector("d\\:resourcetype, resourcetype");if(null===o||void 0===o?void 0:o.querySelector("d\\:collection, collection"))continue;const c=(null===(r=t.querySelector("d\\:displayname, displayname"))||void 0===r?void 0:r.textContent)||"",u=(null===(i=t.querySelector("d\\:getcontentlength, getcontentlength"))||void 0===i?void 0:i.textContent)||"0",d=(null===(s=t.querySelector("d\\:getlastmodified, getlastmodified"))||void 0===s?void 0:s.textContent)||"",h=(null===(a=t.querySelector("d\\:getetag, getetag"))||void 0===a?void 0:a.textContent)||"";if(c&&c.endsWith(".enc")){const e=c.replace(/\.enc$/,"");l.push(this.createFileMetadata(e,parseInt(u,10),new Date(d),h.replace(/['"]/g,"")))}}return l}catch(o){return console.error("Failed to parse WebDAV response:",o),[]}}parseQuotaResponse(e){try{var t,n;const r=(new DOMParser).parseFromString(e,"text/xml"),i=null===(t=r.querySelector("d\\:quota-used-bytes, quota-used-bytes, oc\\:quota-used, quota-used"))||void 0===t?void 0:t.textContent,s=null===(n=r.querySelector("d\\:quota-available-bytes, quota-available-bytes, oc\\:quota-available, quota-available"))||void 0===n?void 0:n.textContent,a=i?parseInt(i,10):0,o=s?parseInt(s,10):null;let l=null;return o&&o>0&&(l=a/(a+o)*100),{used:a,available:o,percentage:l}}catch(r){return console.error("Failed to parse quota response:",r),{used:0,available:null,percentage:null}}}}class Qo extends Go{constructor(e){super(),this.type="google-cloud",this.config=void 0,this.accessToken=null,this.tokenExpiry=0,this.config=e}async authenticate(){try{await this.ensureValidToken();return(await this.retryOperation(async()=>{const e=await this.getAuthHeaders();return fetch(this.buildUrl(""),{method:"HEAD",headers:e})})).ok}catch(e){return console.error("Google Cloud authentication failed:",e),!1}}async uploadFile(e,t){if(!this.validateEncryptedData(t))throw new Error("Invalid encrypted data format");await this.ensureValidToken();const n=this.buildUrl("sciencehabits/".concat(this.sanitizePath(e),".enc")),r=JSON.stringify(t);try{await this.retryOperation(async()=>{const e=await fetch(n,{method:"PUT",headers:(0,s.A)((0,s.A)({},await this.getAuthHeaders()),{},{"Content-Type":"application/json","Content-Length":r.length.toString(),"x-goog-meta-encrypted":"true","x-goog-meta-version":t.version,"x-goog-meta-timestamp":t.timestamp.toString()}),body:r});if(!e.ok)throw this.handleNetworkError(e,"File upload");return e}),console.log("\u2705 Uploaded to Google Cloud: ".concat(e))}catch(i){throw this.handleNetworkError(i,"File upload")}}async downloadFile(e){await this.ensureValidToken();const t=this.buildUrl("sciencehabits/".concat(this.sanitizePath(e),".enc"));try{const n=await this.retryOperation(async()=>{const e=await fetch(t,{method:"GET",headers:await this.getAuthHeaders()});if(!e.ok)throw this.handleNetworkError(e,"File download");return e}),r=await n.text(),i=JSON.parse(r);if(!this.validateEncryptedData(i))throw new Error("Downloaded file contains invalid encrypted data");return console.log("\u2705 Downloaded from Google Cloud: ".concat(e)),i}catch(n){throw this.handleNetworkError(n,"File download")}}async listFiles(e){await this.ensureValidToken();const t=e?"sciencehabits/".concat(this.sanitizePath(e),"/"):"sciencehabits/",n="".concat(this.buildUrl(""),"?prefix=").concat(encodeURIComponent(t),"&delimiter=/");try{const r=await this.retryOperation(async()=>{const e=await fetch(n,{method:"GET",headers:await this.getAuthHeaders()});if(!e.ok)throw this.handleNetworkError(e,"Directory listing");return e}),i=await r.json(),s=this.parseListResponse(i,t);return console.log("\u2705 Listed ".concat(s.length," files from Google Cloud: ").concat(e)),s}catch(r){throw this.handleNetworkError(r,"Directory listing")}}async deleteFile(e){await this.ensureValidToken();const t=this.buildUrl("sciencehabits/".concat(this.sanitizePath(e),".enc"));try{await this.retryOperation(async()=>{const e=await fetch(t,{method:"DELETE",headers:await this.getAuthHeaders()});if(!e.ok&&404!==e.status)throw this.handleNetworkError(e,"File deletion");return e}),console.log("\u2705 Deleted from Google Cloud: ".concat(e))}catch(n){throw this.handleNetworkError(n,"File deletion")}}async getServerTimestamp(e){try{await this.ensureValidToken();const t=this.buildUrl("sciencehabits/".concat(this.sanitizePath(e),".enc")),n=await fetch(t,{method:"HEAD",headers:await this.getAuthHeaders()});if(!n.ok)return 0;const r=n.headers.get("x-goog-meta-timestamp");return r?parseInt(r,10):0}catch(t){return console.error("Failed to get server timestamp:",t),0}}async checkConnection(){if(!navigator.onLine)return!1;try{await this.ensureValidToken();const e=new AbortController,t=setTimeout(()=>e.abort(),1e4),n=await fetch(this.buildUrl(""),{method:"HEAD",headers:await this.getAuthHeaders(),signal:e.signal});return clearTimeout(t),n.ok||404===n.status}catch(e){return console.error("Google Cloud connection test failed:",e),!1}}async getStorageQuota(){try{var e;await this.ensureValidToken();const t=await this.retryOperation(async()=>{const e=await fetch("".concat(this.buildUrl(""),"?prefix=sciencehabits/"),{method:"GET",headers:await this.getAuthHeaders()});if(!e.ok)throw this.handleNetworkError(e,"Usage check");return e}),n=await t.json();return{used:(null===(e=n.items)||void 0===e?void 0:e.reduce((e,t)=>e+parseInt(t.size||"0",10),0))||0,available:null,percentage:null}}catch(t){return console.error("Failed to get Google Cloud quota:",t),{used:0,available:null,percentage:null}}}buildUrl(e){const t=this.sanitizePath(e),n="https://storage.googleapis.com/storage/v1/b/".concat(this.config.bucketName,"/o");return t?"".concat(n,"/").concat(encodeURIComponent(t)):n}async ensureValidToken(){const e=Date.now();if(!(this.accessToken&&e<this.tokenExpiry-6e4)){if("oauth2"!==this.config.credentials.type)throw new Error("Service account authentication not yet implemented for browser");await this.refreshOAuth2Token()}}async refreshOAuth2Token(){if(!this.config.credentials.refreshToken)throw new Error("No refresh token available");const e=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.config.credentials.clientId||"",client_secret:this.config.credentials.clientSecret||"",refresh_token:this.config.credentials.refreshToken,grant_type:"refresh_token"})});if(!e.ok)throw new Error("Failed to refresh Google Cloud access token");const t=await e.json();this.accessToken=t.access_token,this.tokenExpiry=Date.now()+1e3*t.expires_in,console.log("\u2705 Refreshed Google Cloud access token")}async getAuthHeaders(){if(!this.accessToken)throw new Error("No access token available");return{Authorization:"Bearer ".concat(this.accessToken),"User-Agent":"ScienceHabits/1.0"}}parseListResponse(e,t){const n=[];if(!e.items)return n;for(const r of e.items){const e=r.name;if(e.endsWith("/")||!e.endsWith(".enc"))continue;const i=e.replace(t,"").replace(/\.enc$/,"");i&&n.push(this.createFileMetadata(i,parseInt(r.size||"0",10),new Date(r.updated||r.timeCreated),r.etag))}return n}}class $o extends Go{constructor(e){super(),this.type="google-drive",this.accessToken=null,this.tokenExpiry=0,this.appFolderId=null}async authenticate(){try{if(this.accessToken&&Date.now()<this.tokenExpiry-6e4)return!0;if(!window.gapi)throw new Error("Google API client not loaded");await this.initializeGoogleAPI();const e=window.gapi.auth2.getAuthInstance();if(e.isSignedIn.get())return await this.updateTokenFromAuth(e),!0;await e.signIn();return await this.updateTokenFromAuth(e),console.log("\u2705 Google Drive authentication successful"),!0}catch(e){return console.error("Google Drive authentication failed:",e),!1}}async signOut(){try{const e=window.gapi.auth2.getAuthInstance();await e.signOut(),this.accessToken=null,this.tokenExpiry=0,this.appFolderId=null,console.log("\u2705 Signed out from Google Drive")}catch(e){console.error("Google Drive sign out failed:",e)}}async uploadFile(e,t){if(!this.validateEncryptedData(t))throw new Error("Invalid encrypted data format");await this.ensureValidToken(),await this.ensureAppFolder();const n="".concat(this.sanitizePath(e),".enc"),r=JSON.stringify(t);try{const t=await this.findFileByName(n),i={name:n,parents:[this.appFolderId],description:"ScienceHabits encrypted data"},s=new FormData;s.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),s.append("file",new Blob([r],{type:"application/json"}));const a=t?"https://www.googleapis.com/upload/drive/v3/files/".concat(t.id,"?uploadType=multipart"):"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",o=await fetch(a,{method:t?"PATCH":"POST",headers:{Authorization:"Bearer ".concat(this.accessToken)},body:s});if(!o.ok)throw new Error("Upload failed: ".concat(o.status," ").concat(o.statusText));console.log("\u2705 ".concat(t?"Updated":"Uploaded"," to Google Drive: ").concat(e))}catch(i){throw new Error("Failed to upload file to Google Drive: ".concat(i))}}async downloadFile(e){await this.ensureValidToken(),await this.ensureAppFolder();const t="".concat(this.sanitizePath(e),".enc");try{const n=await this.findFileByName(t);if(!n)throw new Error("File not found: ".concat(e));const r=await fetch("https://www.googleapis.com/drive/v3/files/".concat(n.id,"?alt=media"),{headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!r.ok)throw new Error("Download failed: ".concat(r.status," ").concat(r.statusText));const i=await r.text(),s=JSON.parse(i);if(!this.validateEncryptedData(s))throw new Error("Downloaded file contains invalid encrypted data");return console.log("\u2705 Downloaded from Google Drive: ".concat(e)),s}catch(n){throw new Error("Failed to download file from Google Drive: ".concat(n))}}async listFiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";await this.ensureValidToken(),await this.ensureAppFolder();try{const t="'".concat(this.appFolderId,"' in parents and name contains '.enc' and trashed=false"),n=await fetch("https://www.googleapis.com/drive/v3/files?q=".concat(encodeURIComponent(t),"&fields=files(id,name,size,modifiedTime)"),{headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!n.ok)throw new Error("List files failed: ".concat(n.status," ").concat(n.statusText));const r=await n.json(),i=[];for(const s of r.files||[]){const t=s.name.replace(/\.enc$/,"");!t||e&&!t.startsWith(e)||i.push(this.createFileMetadata(t,parseInt(s.size||"0",10),new Date(s.modifiedTime),s.id))}return console.log("\u2705 Listed ".concat(i.length," files from Google Drive: ").concat(e)),i}catch(t){throw new Error("Failed to list files from Google Drive: ".concat(t))}}async deleteFile(e){await this.ensureValidToken(),await this.ensureAppFolder();const t="".concat(this.sanitizePath(e),".enc");try{const n=await this.findFileByName(t);if(!n)return void console.log("File not found for deletion: ".concat(e));const r=await fetch("https://www.googleapis.com/drive/v3/files/".concat(n.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!r.ok&&404!==r.status)throw new Error("Delete failed: ".concat(r.status," ").concat(r.statusText));console.log("\u2705 Deleted from Google Drive: ".concat(e))}catch(n){throw new Error("Failed to delete file from Google Drive: ".concat(n))}}async getServerTimestamp(e){try{await this.ensureValidToken(),await this.ensureAppFolder();const t="".concat(this.sanitizePath(e),".enc"),n=await this.findFileByName(t);return n?new Date(n.modifiedTime).getTime():0}catch(t){return console.error("Failed to get server timestamp:",t),0}}async checkConnection(){if(!navigator.onLine)return!1;try{await this.ensureValidToken();return(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:"Bearer ".concat(this.accessToken)}})).ok}catch(e){return console.error("Google Drive connection test failed:",e),!1}}async getStorageQuota(){try{await this.ensureValidToken();const e=await fetch("https://www.googleapis.com/drive/v3/about?fields=storageQuota",{headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!e.ok)throw new Error("Failed to get storage quota");const t=(await e.json()).storageQuota,n=parseInt(t.usage||"0",10),r=parseInt(t.limit||"0",10);return{used:n,available:r>0?r-n:null,percentage:r>0?n/r*100:null}}catch(e){return console.error("Failed to get Google Drive quota:",e),{used:0,available:null,percentage:null}}}async initializeGoogleAPI(){return new Promise((e,t)=>{window.gapi?window.gapi.load("auth2:client",async()=>{try{const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLIENT_ID:"1017509071439-a72ba439fsduhm9bhdeacn9o3nmfjk7t.apps.googleusercontent.com"}.REACT_APP_GOOGLE_DRIVE_CLIENT_ID||"1234567890-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com";await window.gapi.client.init({clientId:t,scope:$o.SCOPES.join(" "),discoveryDocs:$o.DISCOVERY_DOCS}),e()}catch(n){t(n)}}):t(new Error("Google API not loaded"))})}async updateTokenFromAuth(e){const t=e.currentUser.get().getAuthResponse();this.accessToken=t.access_token,this.tokenExpiry=t.expires_at}async ensureValidToken(){if(!this.accessToken||Date.now()>=this.tokenExpiry-6e4){if(!await this.authenticate())throw new Error("Failed to authenticate with Google Drive")}}async ensureAppFolder(){if(!this.appFolderId)try{const e=await fetch("https://www.googleapis.com/drive/v3/files?q=name='ScienceHabits' and mimeType='application/vnd.google-apps.folder' and trashed=false",{headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!e.ok)throw new Error("Failed to search for app folder");const t=await e.json();if(t.files&&t.files.length>0)return this.appFolderId=t.files[0].id,void console.log("\u2705 Found existing ScienceHabits folder");const n=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer ".concat(this.accessToken),"Content-Type":"application/json"},body:JSON.stringify({name:"ScienceHabits",mimeType:"application/vnd.google-apps.folder",description:"ScienceHabits app data folder - contains encrypted habit tracking data"})});if(!n.ok)throw new Error("Failed to create app folder");const r=await n.json();this.appFolderId=r.id,console.log("\u2705 Created ScienceHabits folder in Google Drive")}catch(e){throw new Error("Failed to ensure app folder: ".concat(e))}}async findFileByName(e){try{const t="name='".concat(e,"' and '").concat(this.appFolderId,"' in parents and trashed=false"),n=await fetch("https://www.googleapis.com/drive/v3/files?q=".concat(encodeURIComponent(t),"&fields=files(id,name,size,modifiedTime)"),{headers:{Authorization:"Bearer ".concat(this.accessToken)}});if(!n.ok)return null;const r=await n.json();return r.files&&r.files.length>0?r.files[0]:null}catch(t){return console.error("Failed to find file by name:",t),null}}}$o.SCOPES=["https://www.googleapis.com/auth/drive.file"],$o.DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];class Jo{static create(e){this.validateConfig(e);const t=this.generateConfigKey(e);if(this.instances.has(t)){const n=this.instances.get(t);return console.log("\u267b\ufe0f Reusing existing ".concat(e.type," provider")),n}let n;switch(e.type){case"nextcloud":if(!this.isNextCloudConfig(e))throw new Error("Invalid NextCloud configuration");n=new Yo(e);break;case"google-cloud":if(!this.isGoogleCloudConfig(e))throw new Error("Invalid Google Cloud configuration");n=new Qo(e);break;case"google-drive":n=new $o(e);break;case"none":throw new Error('Cannot create provider for type "none"');default:throw new Error("Unsupported provider type: ".concat(e.type))}return this.instances.set(t,n),console.log("\u2705 Created new ".concat(e.type," provider")),n}static async testConnection(e){const t=Date.now();try{const n=this.create(e),r=await n.checkConnection(),i=Date.now()-t;return r?{success:!0,latency:i}:{success:!1,error:"Connection failed"}}catch(n){const e=Date.now()-t;return{success:!1,error:n instanceof Error?n.message:"Unknown error",latency:e}}}static async testAuthentication(e){try{const n=this.create(e);if(!await n.authenticate())return{success:!1,error:"Authentication failed"};try{return{success:!0,quota:await n.getStorageQuota()}}catch(t){return{success:!0}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Authentication failed"}}}static clearCache(e){const t=this.generateConfigKey(e);this.instances.has(t)&&(this.instances.delete(t),console.log("\ud83d\uddd1\ufe0f Cleared cached ".concat(e.type," provider")))}static clearAllCaches(){const e=this.instances.size;this.instances.clear(),console.log("\ud83d\uddd1\ufe0f Cleared ".concat(e," cached providers"))}static getSupportedProviders(){return[{type:"nextcloud",name:"NextCloud",description:"Self-hosted or managed NextCloud instance",pros:["Complete data control and privacy","Can be hosted in EU for GDPR compliance","Open source and transparent","No vendor lock-in"],cons:["Requires server setup or managed service","More technical configuration needed","Performance depends on server location"],setup:"moderate"},{type:"google-cloud",name:"Google Cloud Storage",description:"Use your existing Google Cloud project",pros:["High reliability and performance","Global availability and fast sync","Use existing Google Cloud infrastructure","Automatic scaling and management"],cons:["Requires existing Google Cloud project","Google processes metadata (encrypted data only)","Billing through Google Cloud account"],setup:"easy"}]}static validateConfig(e){if(!e||"object"!==typeof e)throw new Error("Configuration is required");if(!e.type||!["nextcloud","google-cloud","google-drive","none"].includes(e.type))throw new Error("Invalid provider type: ".concat(e.type));if("nextcloud"===e.type){const n=e;if(!n.serverUrl||!n.username||!n.appPassword)throw new Error("NextCloud configuration requires serverUrl, username, and appPassword");try{new URL(n.serverUrl)}catch(t){throw new Error("Invalid NextCloud server URL")}}if("google-cloud"===e.type){const t=e;if(!t.projectId||!t.bucketName||!t.region)throw new Error("Google Cloud configuration requires projectId, bucketName, and region");if(!t.credentials||!t.credentials.type)throw new Error("Google Cloud configuration requires credentials")}}static generateConfigKey(e){switch(e.type){case"nextcloud":const t=e;return"nextcloud:".concat(t.serverUrl,":").concat(t.username);case"google-cloud":const n=e;return"google-cloud:".concat(n.projectId,":").concat(n.bucketName);case"google-drive":return"google-drive:default";default:return"".concat(e.type,":default")}}static isNextCloudConfig(e){return"nextcloud"===e.type&&"serverUrl"in e&&"username"in e&&"appPassword"in e}static isGoogleCloudConfig(e){return"google-cloud"===e.type&&"projectId"in e&&"bucketName"in e&&"credentials"in e}}Jo.instances=new Map;class Xo{static getAccessToken(){return localStorage.getItem("google_drive_token")}static isAuthenticated(){return!!this.getAccessToken()}static async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getAccessToken();if(!n)throw new Error("No Google Drive access token available");const r=await fetch(e,(0,s.A)((0,s.A)({},t),{},{headers:(0,s.A)({Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},t.headers)}));if(!r.ok){if(401===r.status)throw localStorage.removeItem("google_drive_token"),new Error("Google Drive authentication expired. Please sign in again.");throw new Error("Google Drive API error: ".concat(r.status," ").concat(r.statusText))}return r}static async ensureFolder(){try{const e="".concat(this.DRIVE_API_BASE,"/files?q=name='").concat(this.FOLDER_NAME,"' and mimeType='application/vnd.google-apps.folder' and trashed=false"),t=await this.makeRequest(e),n=await t.json();if(n.files&&n.files.length>0)return console.log("Found existing ScienceHabits folder:",n.files[0].id),n.files[0].id;const r="".concat(this.DRIVE_API_BASE,"/files"),i=await this.makeRequest(r,{method:"POST",body:JSON.stringify({name:this.FOLDER_NAME,mimeType:"application/vnd.google-apps.folder"})}),s=await i.json();return console.log("Created ScienceHabits folder:",s.id),s.id}catch(e){throw console.error("Failed to ensure ScienceHabits folder:",e),e}}static async uploadFile(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json";try{const r=await this.ensureFolder(),i="".concat(this.DRIVE_API_BASE,"/files?q=name='").concat(e,"' and parents in '").concat(r,"' and trashed=false"),s=await this.makeRequest(i),a=await s.json(),o=new Blob([t],{type:n});if(a.files&&a.files.length>0){const t=a.files[0].id,r="".concat(this.UPLOAD_API_BASE,"/files/").concat(t,"?uploadType=media"),i=await this.makeRequest(r,{method:"PATCH",headers:{Authorization:"Bearer ".concat(this.getAccessToken()),"Content-Type":n},body:o}),s=await i.json();return console.log("Updated file: ".concat(e)),s}{const t="".concat(this.UPLOAD_API_BASE,"/files?uploadType=multipart"),n={name:e,parents:[r]},i=new FormData;i.append("metadata",new Blob([JSON.stringify(n)],{type:"application/json"})),i.append("file",o);const s=await fetch(t,{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAccessToken())},body:i});if(!s.ok)throw new Error("Failed to create file: ".concat(s.status));const a=await s.json();return console.log("Created file: ".concat(e)),a}}catch(r){throw console.error("Failed to upload file ".concat(e,":"),r),r}}static async downloadFile(e){try{const t=await this.ensureFolder(),n="".concat(this.DRIVE_API_BASE,"/files?q=name='").concat(e,"' and parents in '").concat(t,"' and trashed=false"),r=await this.makeRequest(n),i=await r.json();if(!i.files||0===i.files.length)return console.log("File not found: ".concat(e)),null;const s=i.files[0].id,a="".concat(this.DRIVE_API_BASE,"/files/").concat(s,"?alt=media"),o=await this.makeRequest(a),l=await o.text();return console.log("Downloaded file: ".concat(e)),l}catch(t){throw console.error("Failed to download file ".concat(e,":"),t),t}}static async listFiles(){try{const e=await this.ensureFolder(),t="".concat(this.DRIVE_API_BASE,"/files?q=parents in '").concat(e,"' and trashed=false&fields=files(id,name,mimeType,modifiedTime,size)"),n=await this.makeRequest(t);return(await n.json()).files||[]}catch(e){throw console.error("Failed to list files:",e),e}}static async deleteFile(e){try{const t=await this.ensureFolder(),n="".concat(this.DRIVE_API_BASE,"/files?q=name='").concat(e,"' and parents in '").concat(t,"' and trashed=false"),r=await this.makeRequest(n),i=await r.json();if(!i.files||0===i.files.length)return console.log("File not found for deletion: ".concat(e)),!1;const s=i.files[0].id,a="".concat(this.DRIVE_API_BASE,"/files/").concat(s);return await this.makeRequest(a,{method:"DELETE"}),console.log("Deleted file: ".concat(e)),!0}catch(t){throw console.error("Failed to delete file ".concat(e,":"),t),t}}static async testConnection(){try{return await this.ensureFolder(),await this.listFiles(),{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to connect to Google Drive"}}}static signOut(){localStorage.removeItem("google_drive_token"),console.log("Google Drive signed out")}}Xo.DRIVE_API_BASE="https://www.googleapis.com/drive/v3",Xo.UPLOAD_API_BASE="https://www.googleapis.com/upload/drive/v3",Xo.FOLDER_NAME="ScienceHabits";const Zo=e=>{let{onAuthComplete:t,onBack:n,className:i=""}=e;const[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),[m,f]=(0,r.useState)(0),p="1017509071439-a72ba439fsduhm9bhdeacn9o3nmfjk7t.apps.googleusercontent.com";(0,r.useEffect)(()=>{let e;return(()=>{if(document.querySelector('script[src="https://accounts.google.com/gsi/client"]')){var t,n;null!==(t=window.google)&&void 0!==t&&null!==(n=t.accounts)&&void 0!==n&&n.oauth2?(h(!1),y()):e=setTimeout(()=>{var e,t;null!==(e=window.google)&&void 0!==e&&null!==(t=e.accounts)&&void 0!==t&&t.oauth2?(h(!1),y()):(console.warn("Google object not available, retrying..."),f(e=>e+1))},500)}else{const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{console.log("Google Identity Services script loaded"),setTimeout(()=>{h(!1),y()},100)},e.onerror=()=>{console.error("Failed to load Google Identity Services script"),l("Failed to load Google services. Please check your internet connection."),h(!1)},document.head.appendChild(e)}})(),()=>{e&&clearTimeout(e)}},[m]);const y=()=>{if(window.google){0;try{const e=window.google.accounts.oauth2.initTokenClient({client_id:p,scope:"https://www.googleapis.com/auth/drive.file",callback:v,error_callback:w});u(e)}catch(e){console.error("Failed to initialize Google OAuth client:",e),l("Failed to initialize Google authentication. Please check your configuration.")}}else console.error("Google Identity Services not loaded")},v=async e=>{if(console.log("Google OAuth response:",e),e.access_token){console.log("\u2705 Google authentication successful"),console.log("\u2705 Access token received"),localStorage.setItem("google_drive_token",e.access_token);try{console.log("\ud83d\udd04 Testing Google Drive connection...");const e=await Xo.testConnection();e.success?(console.log("\u2705 Google Drive connection test successful"),t(!0)):(console.error("Google Drive connection test failed:",e.error),l("Connection test failed: ".concat(e.error)))}catch(n){console.error("Google Drive connection test error:",n),l("Unable to connect to Google Drive. Please try again.")}a(!1)}else console.error("No access token in response"),l("Authentication failed. No access token received."),a(!1)},w=e=>{console.error("Google OAuth error:",e);let t="Authentication failed. Please try again.";"popup_closed"===e.type||"popup_closed_by_user"===e.error?t="Sign-in was cancelled. Please try again when ready.":"popup_blocked"===e.type?t="Pop-up was blocked. Please allow pop-ups for this site and try again.":"invalid_client"===e.error&&(t="Invalid Google client configuration. Please check your OAuth setup."),l(t),a(!1)};return(0,g.jsx)(b,{className:"w-full max-w-md mx-auto ".concat(i),children:(0,g.jsxs)(D,{className:"p-6 text-center space-y-6",children:[(0,g.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:(0,g.jsxs)("svg",{className:"w-10 h-10 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,g.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,g.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,g.jsx)("path",{d:"M12 1C7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Connect Google Drive"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Sync your habits securely across all your devices with Google Drive."}),o&&(0,g.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-start gap-3",children:[(0,g.jsx)("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,g.jsx)("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h4",{className:"font-medium text-amber-900 mb-1",children:"Setup Required"}),(0,g.jsx)("p",{className:"text-sm text-amber-800 mb-3",children:o}),o.includes("OAuth")&&(0,g.jsxs)("div",{className:"text-xs text-amber-700 bg-amber-100 rounded p-2",children:[(0,g.jsx)("p",{className:"font-medium mb-1",children:"Quick Setup:"}),(0,g.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,g.jsxs)("li",{children:["Go to ",(0,g.jsx)("a",{href:"https://console.cloud.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google Cloud Console"})]}),(0,g.jsx)("li",{children:"Create project \u2192 Enable Drive API \u2192 Create OAuth client"}),(0,g.jsxs)("li",{children:["Add ",window.location.origin," to authorized origins"]}),(0,g.jsx)("li",{children:"Copy client ID to REACT_APP_GOOGLE_CLIENT_ID in .env.local"})]})]})]})]})}),(0,g.jsxs)(x,{onClick:async()=>{if(c){0,a(!0),l(null);try{console.log("\ud83d\udd04 Starting Google OAuth flow..."),c.requestAccessToken()}catch(e){console.error("Google sign-in failed:",e),l(e.message||"Unable to start Google sign-in. Please try again."),a(!1)}}else l("Google authentication not ready. Please wait and try again.")},disabled:s,isLoading:s,variant:"primary",size:"lg",fullWidth:!0,className:"bg-blue-600 hover:bg-blue-700",children:[!s&&(0,g.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,g.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,g.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,g.jsx)("path",{d:"M12 1C7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Connecting...":"Sign in with Google"]}),n&&(0,g.jsx)("button",{onClick:n,className:"text-gray-500 text-sm hover:text-gray-700",children:"\u2190 Back to sync options"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"\ud83d\udd12 Your data is encrypted and stays private"})]})})};class el{static initialize(){const e=this.getSyncStatus();e.isEnabled&&"google-drive"===e.provider&&(Xo.isAuthenticated()?(console.log("\ud83d\udd04 Starting automatic sync..."),this.startAutoSync()):(console.log("\u26a0\ufe0f Sync enabled but not authenticated, disabling auto-sync"),this.disableSync()))}static async enableGoogleDriveSync(){try{if(!Xo.isAuthenticated())return{success:!1,error:"Not authenticated with Google Drive"};const e=await Xo.testConnection();if(!e.success)return{success:!1,error:e.error};const t=await this.syncToCloud();if(!t.success)return{success:!1,error:t.error};const n={isEnabled:!0,lastSync:new Date,provider:"google-drive",error:null};return localStorage.setItem("sync_status",JSON.stringify(n)),this.startAutoSync(),console.log("\u2705 Google Drive sync enabled successfully"),{success:!0}}catch(e){return console.error("Failed to enable Google Drive sync:",e),{success:!1,error:e.message||"Failed to enable sync"}}}static disableSync(){this.stopAutoSync();localStorage.setItem("sync_status",JSON.stringify({isEnabled:!1,lastSync:null,provider:null,error:null})),console.log("\ud83d\udd07 Sync disabled")}static getSyncStatus(){try{const e=localStorage.getItem("sync_status");if(e){const t=JSON.parse(e);return t.lastSync&&(t.lastSync=new Date(t.lastSync)),t}}catch(e){console.error("Failed to parse sync status:",e)}return{isEnabled:!1,lastSync:null,provider:null,error:null}}static async syncToCloud(){try{if(!Xo.isAuthenticated())return{success:!1,error:"Not authenticated with Google Drive"};console.log("\ud83d\udd04 Syncing habits to Google Drive...");const e=this.gatherHabitData(),t={version:"1.0.0",timestamp:(new Date).toISOString(),habits:e.habits,userSettings:e.userSettings,analytics:e.analytics};await Xo.uploadFile(this.BACKUP_FILE_NAME,JSON.stringify(t,null,2),"application/json");const n=this.getSyncStatus();return n.lastSync=new Date,n.error=null,localStorage.setItem("sync_status",JSON.stringify(n)),console.log("\u2705 Habits synced to Google Drive successfully"),{success:!0}}catch(e){console.error("Failed to sync to cloud:",e);const t=this.getSyncStatus();return t.error=e.message||"Sync failed",localStorage.setItem("sync_status",JSON.stringify(t)),{success:!1,error:e.message||"Sync failed"}}}static async restoreFromCloud(){try{if(!Xo.isAuthenticated())return{success:!1,error:"Not authenticated with Google Drive"};console.log("\ud83d\udd04 Restoring habits from Google Drive...");const e=await Xo.downloadFile(this.BACKUP_FILE_NAME);if(!e)return{success:!1,error:"No backup found in Google Drive"};const t=JSON.parse(e),n=this.restoreHabitData(t);return console.log("\u2705 Restored ".concat(n," items from Google Drive")),{success:!0,restored:n}}catch(e){return console.error("Failed to restore from cloud:",e),{success:!1,error:e.message||"Restore failed"}}}static startAutoSync(){this.stopAutoSync(),this.syncInterval=setInterval(async()=>{this.getSyncStatus().isEnabled&&Xo.isAuthenticated()?await this.syncToCloud():this.stopAutoSync()},this.SYNC_INTERVAL),console.log("\ud83d\udd04 Auto-sync started (every ".concat(this.SYNC_INTERVAL/1e3/60," minutes)"))}static stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log("\ud83d\udd07 Auto-sync stopped"))}static gatherHabitData(){const e=[],t={},n={};for(let i=0;i<localStorage.length;i++){const s=localStorage.key(i);if(s)try{const r=localStorage.getItem(s);if(!r)continue;if(s.includes("sync_")||s.includes("google_drive_token"))continue;s.includes("habit")?e.push({key:s,value:JSON.parse(r)}):s.includes("user")||s.includes("settings")?t[s]=JSON.parse(r):(s.includes("analytics")||s.includes("progress"))&&(n[s]=JSON.parse(r))}catch(r){console.warn("Skipping non-JSON key: ".concat(s))}}return{habits:e,userSettings:t,analytics:n}}static restoreHabitData(e){let t=0;try{e.habits.forEach(e=>{localStorage.setItem(e.key,JSON.stringify(e.value)),t++}),Object.entries(e.userSettings).forEach(e=>{let[n,r]=e;localStorage.setItem(n,JSON.stringify(r)),t++}),Object.entries(e.analytics).forEach(e=>{let[n,r]=e;localStorage.setItem(n,JSON.stringify(r)),t++})}catch(n){console.error("Error restoring habit data:",n)}return t}static async getBackupInfo(){try{if(!Xo.isAuthenticated())return{exists:!1};const e=(await Xo.listFiles()).find(e=>e.name===this.BACKUP_FILE_NAME);return e?{exists:!0,lastModified:new Date(e.modifiedTime),size:e.size}:{exists:!1}}catch(e){return console.error("Failed to get backup info:",e),{exists:!1}}}}el.BACKUP_FILE_NAME="habits-backup.json",el.SYNC_INTERVAL=3e5,el.syncInterval=null,"undefined"!==typeof window&&el.initialize();const tl=e=>{let{onProviderSelected:t,onBack:n,className:i=""}=e;const[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),c=(Jo.getSupportedProviders(),e=>{a(e),"none"!==e?l(!0):t(null)}),u=e=>{t(e)};if(o&&s&&"none"!==s){if("nextcloud"===s)return(0,g.jsx)(nl,{onConfigComplete:u,onBack:()=>l(!1),className:i});if("google-drive"===s)return(0,g.jsx)(Zo,{onAuthComplete:async e=>{if(e){const e=await el.enableGoogleDriveSync();e.success?u({type:"google-drive"}):(console.error("Failed to enable sync:",e.error),l(!1))}else l(!1)},onBack:()=>l(!1),className:i});if("google-cloud"===s)return(0,g.jsx)(rl,{onConfigComplete:u,onBack:()=>l(!1),className:i})}return(0,g.jsx)(b,{className:"w-full max-w-2xl mx-auto ".concat(i),children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsxs)("div",{className:"text-center mb-6",children:[(0,g.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,g.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sync Your Habits Everywhere"}),(0,g.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Keep your progress safe and access your habits on all your devices. Your data stays private and encrypted."})]}),(0,g.jsxs)("div",{className:"bg-blue-50 rounded-xl p-5 mb-6",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900 text-center mb-3",children:"\u2728 What you get with sync"}),(0,g.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,g.jsx)("span",{children:"Access habits on phone, tablet, and computer"})]}),(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,g.jsx)("span",{children:"Automatic backup to your chosen cloud service"})]}),(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,g.jsx)("span",{children:"End-to-end encryption keeps your data private"})]})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"font-semibold text-gray-900",children:"Choose your sync option:"}),(0,g.jsx)("div",{onClick:()=>c("google-drive"),className:"border-2 border-blue-200 bg-blue-50 rounded-xl p-5 cursor-pointer hover:border-blue-300 transition-colors",children:(0,g.jsxs)("div",{className:"flex items-start gap-4",children:[(0,g.jsx)("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,g.jsxs)("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,g.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,g.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,g.jsx)("path",{d:"M12 1C7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("h4",{className:"font-semibold text-gray-900 mb-1",children:["Google Drive",(0,g.jsx)("span",{className:"text-sm bg-green-100 text-green-700 px-2 py-1 rounded-full ml-2",children:"Recommended"})]}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Simple one-click setup. Your encrypted habits will be saved to your Google Drive."}),(0,g.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),(0,g.jsx)("span",{children:"Uses your existing Google account \u2022 No setup required"})]})]})]})}),(0,g.jsx)("div",{onClick:()=>c("nextcloud"),className:"border border-gray-200 rounded-xl p-5 cursor-pointer hover:border-blue-300 transition-colors",children:(0,g.jsxs)("div",{className:"flex items-start gap-4",children:[(0,g.jsx)("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,g.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"NextCloud"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Use your own cloud server for maximum privacy. Perfect for EU users."}),(0,g.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,g.jsx)("span",{children:"Self-hosted \u2022 GDPR compliant \u2022 Advanced users"})]})]})]})}),(0,g.jsx)("div",{onClick:()=>c("none"),className:"border border-gray-200 rounded-xl p-5 cursor-pointer hover:border-blue-300 transition-colors",children:(0,g.jsxs)("div",{className:"flex items-start gap-4",children:[(0,g.jsx)("div",{className:"w-12 h-12 bg-gray-50 border border-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,g.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Stay Local Only"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Keep everything on this device only. Most private option, but no sync."}),(0,g.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L7.5 7.5m2.378 2.378a3 3 0 104.243 4.243m0 0L12 12m-2.378-2.378L12 12m0 0l2.121 2.121M12 12L9.879 9.879"})}),(0,g.jsx)("span",{children:"No internet required \u2022 Maximum privacy"})]})]})]})})]}),n&&(0,g.jsx)("div",{className:"mt-6 text-center",children:(0,g.jsx)(x,{variant:"secondary",onClick:n,className:"px-6",children:"\u2190 Back"})}),(0,g.jsxs)("div",{className:"text-center pt-6 border-t border-gray-100 mt-6",children:[(0,g.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"\ud83d\udd12 Your data is encrypted before it leaves your device"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"\u2705 We never see your personal information or cloud files"}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"You can change your sync method later in settings"})]})]})})},nl=e=>{let{onConfigComplete:t,onBack:n,className:i=""}=e;const[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("ScienceHabits"),[m,f]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),C=s.trim()&&o.trim()&&c.trim();return(0,g.jsx)(b,{className:"w-full max-w-md mx-auto ".concat(i),children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsxs)("div",{className:"text-center mb-6",children:[(0,g.jsx)("div",{className:"text-4xl mb-2",children:"\u2601\ufe0f"}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Configure NextCloud"}),(0,g.jsx)("p",{className:"text-gray-600 mt-1",children:"Connect to your NextCloud server"})]}),(0,g.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(null),f(!0);const n={type:"nextcloud",serverUrl:s.trim(),username:o.trim(),appPassword:c.trim(),syncPath:d.trim()||"ScienceHabits"};try{const e=await Jo.testAuthentication(n);e.success?t(n):y(e.error||"Failed to connect to NextCloud server")}catch(p){console.error("NextCloud config error:",p),y("Configuration failed. Please check your settings.")}finally{f(!1)}},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Server URL"}),(0,g.jsx)("input",{type:"url",value:s,onChange:e=>a(e.target.value),placeholder:"https://cloud.example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,required:!0})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,g.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Your NextCloud username",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,autoComplete:"username",required:!0})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"App Password"}),(0,g.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),placeholder:"Generate in NextCloud settings",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,autoComplete:"new-password",required:!0}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Create an app password in your NextCloud security settings"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Folder (optional)"}),(0,g.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"ScienceHabits",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m})]}),p&&(0,g.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,g.jsx)("p",{className:"text-sm text-red-700",children:p})}),(0,g.jsxs)("div",{className:"flex space-x-3",children:[(0,g.jsx)(x,{type:"button",onClick:async()=>{if(!s||!o||!c)return void y("Please fill in all fields first");w(!0),y(null);const e={type:"nextcloud",serverUrl:s.trim(),username:o.trim(),appPassword:c.trim(),syncPath:d.trim()||"ScienceHabits"};try{const t=await Jo.testConnection(e);t.success?(y(null),alert("\u2705 Connection successful! (".concat(t.latency,"ms)"))):y(t.error||"Connection failed")}catch(p){y("Connection test failed")}finally{w(!1)}},disabled:!C||v,variant:"secondary",className:"flex-1",children:v?"Testing...":"Test Connection"}),(0,g.jsx)(x,{type:"submit",disabled:!C||m,variant:"primary",className:"flex-1",children:m?"Connecting...":"Connect"})]})]}),(0,g.jsx)("div",{className:"mt-4 text-center",children:(0,g.jsx)(x,{variant:"ghost",onClick:n,children:"\u2190 Back to providers"})})]})})},rl=e=>{let{onConfigComplete:t,onBack:n,className:r=""}=e;return(0,g.jsx)(b,{className:"w-full max-w-md mx-auto ".concat(r),children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsxs)("div",{className:"text-center mb-6",children:[(0,g.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd1c"}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Google Cloud Coming Soon"}),(0,g.jsx)("p",{className:"text-gray-600 mt-1",children:"Google Cloud Storage integration is being implemented"})]}),(0,g.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:(0,g.jsx)("p",{className:"text-sm text-blue-700",children:"Google Cloud Storage support will be available in the next update. For now, please choose NextCloud or Local Only mode."})}),(0,g.jsx)(x,{onClick:n,className:"w-full",children:"\u2190 Choose Different Provider"})]})})};function il(e){let{activeTab:t,onTabChange:n}=e;return(0,g.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,g.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"sync",name:"Cloud Sync",icon:"\u2601\ufe0f"},{id:"profile",name:"Profile",icon:"\ud83d\udc64"},{id:"layout",name:"Layout",icon:"\ud83c\udfaf"},{id:"export",name:"Export",icon:"\ud83d\udce4"}].map(e=>(0,g.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ".concat(t===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.name})]},e.id))})})}function sl(){const{analyticsData:e,selectedTimeRange:t}=Vi(),{userProgress:n,userHabits:r}=(0,K.kH)();return e&&0!==n.length&&0!==r.length?(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udce4 Export Analytics"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Export your habit tracking data and analytics reports in various formats."}),(0,g.jsx)(ws,{analytics:e,habitPerformance:e.habitPerformance,timeRange:t})]}):(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udce4 Export Analytics"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Export functionality will be available once you have habit tracking data."})]})}function al(e){let{children:t,user:n,onSignOut:i}=e;const[s,a]=(0,r.useState)("today"),[o,l]=(0,r.useState)("today"),[c,u]=(0,r.useState)("sync"),d=e=>{l(e)},[h,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),{userHabits:y,userProgress:b,refreshProgress:v,saveCloudConfig:D,currentUser:w}=(0,K.kH)(),{layoutMode:C,setLayoutMode:j}=P();(0,r.useEffect)(()=>{const e=e=>{a("research")},t=e=>{a("habits")};return window.addEventListener("showResearchArticle",e),window.addEventListener("navigate-to-habits",t),()=>{window.removeEventListener("showResearchArticle",e),window.removeEventListener("navigate-to-habits",t)}},[]);const k=[{id:"today",name:"Today",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"habits",name:"My Habits",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})},{id:"progress",name:"Progress",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"recovery",name:"Recovery",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})},{id:"research",name:"Research",icon:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{id:"settings",name:"Settings",icon:(0,g.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return"simplified"===C?(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)(Ko,{activeTab:o,onTabChange:d}),(0,g.jsxs)("main",{className:"flex-1",children:["today"===o&&(0,g.jsx)(Wo,{}),"habits"===o&&(0,g.jsx)(Ni,{}),"analytics"===o&&(0,g.jsx)(Fs,{}),"settings"===o&&(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Manage your app preferences and cloud sync"})]}),(0,g.jsx)(il,{activeTab:c,onTabChange:u}),"sync"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u2601\ufe0f Cloud Sync"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Keep your habits synchronized across all your devices with secure cloud storage."}),(0,g.jsx)(tl,{onProviderSelected:async e=>{e&&(console.log("Cloud provider selected:",e),await D({type:e.type,serverUrl:e.serverUrl,username:e.username,appPassword:e.appPassword,syncPath:e.syncPath,projectId:e.projectId,bucketName:e.bucketName,region:e.region,credentials:e.credentials}))}})]}),"profile"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"\ud83d\udc64 Profile & Preferences"}),w?(0,g.jsx)(Es,{user:w}):(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udc64"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Profile..."}),(0,g.jsx)("p",{className:"text-gray-600",children:"Setting up your profile settings"})]})]}),"layout"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83c\udfaf Layout Mode"}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:()=>j("simplified"),className:"simplified"===C?"bg-blue-600 text-white border-blue-600":"",children:"Simplified"}),(0,g.jsx)(x,{variant:"outline",onClick:()=>j("enhanced"),children:"Enhanced"})]}),(0,g.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:"Choose between a clean simplified interface or the full-featured enhanced view."})]}),"export"===c&&(0,g.jsx)(sl,{})]})]}),!1,n&&(0,g.jsx)(Ns,{isOpen:f,onClose:()=>p(!1),user:n})]}):(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,g.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mr-3",children:(0,g.jsx)("span",{className:"text-white text-sm font-bold",children:"\ud83e\uddec"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"ScienceHabits"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Science-backed habit tracking"})]})]}),(0,g.jsx)("nav",{className:"hidden md:flex space-x-8",children:k.map(e=>(0,g.jsxs)("button",{onClick:()=>a(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(s===e.id?"text-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"),children:[e.icon,(0,g.jsx)("span",{children:e.name})]},e.id))}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[n&&(0,g.jsxs)("div",{className:"hidden sm:block text-right",children:[(0,g.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Welcome back",n.name?", ".concat(n.name):"","!"]}),(0,g.jsxs)("p",{className:"text-xs text-gray-500",children:[n.lifestyle," lifestyle"]})]}),(0,g.jsx)(Ro,{className:"hidden sm:flex"}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[!1,(0,g.jsx)(x,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"hidden sm:inline-flex",children:"Profile"}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:i,className:"hidden sm:inline-flex text-gray-500 hover:text-gray-700",title:"Reset App",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>m(!h),className:"md:hidden",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})]})}),h&&(0,g.jsx)("div",{className:"md:hidden border-t border-gray-200 bg-white",children:(0,g.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[k.map(e=>(0,g.jsxs)("button",{onClick:()=>{a(e.id),m(!1)},className:"flex items-center space-x-2 w-full px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(s===e.id?"text-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"),children:[e.icon,(0,g.jsx)("span",{children:e.name})]},e.id)),(0,g.jsxs)("div",{className:"pt-2 border-t border-gray-200 space-y-2",children:[(0,g.jsx)(x,{variant:"outline",size:"sm",onClick:()=>{p(!0),m(!1)},className:"w-full",children:"Profile"}),(0,g.jsx)(x,{variant:"ghost",size:"sm",onClick:i,className:"w-full text-gray-500 hover:text-gray-700",children:"Reset App"})]})]})})]}),n&&(0,g.jsx)(Vo,{user:n,habits:y,progress:b,currentContext:{timeOfDay:(new Date).getHours()<12?"morning":(new Date).getHours()<17?"midday":(new Date).getHours()<21?"evening":"night",dayOfWeek:(new Date).toLocaleDateString("en-US",{weekday:"long"}),isWeekend:[0,6].includes((new Date).getDay()),recentActivity:"active"}}),(0,g.jsxs)("main",{className:"flex-1",children:["today"===s&&t,"habits"===s&&(0,g.jsx)(Ni,{}),"progress"===s&&(0,g.jsxs)("div",{className:"space-y-6",children:[n&&(0,g.jsx)(Uo,{habits:y,progress:b,user:n,timeframe:"month"}),(0,g.jsx)(ys,{})]}),"recovery"===s&&(0,g.jsx)(qo,{}),"research"===s&&(0,g.jsx)(jo,{}),"settings"===s&&(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Manage your app preferences and cloud sync"})]}),(0,g.jsx)(il,{activeTab:c,onTabChange:u}),"sync"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u2601\ufe0f Cloud Sync"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Keep your habits synchronized across all your devices with secure cloud storage."}),(0,g.jsx)(tl,{onProviderSelected:async e=>{e&&(console.log("Cloud provider selected:",e),await D({type:e.type,serverUrl:e.serverUrl,username:e.username,appPassword:e.appPassword,syncPath:e.syncPath,projectId:e.projectId,bucketName:e.bucketName,region:e.region,credentials:e.credentials}))}})]}),"profile"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"\ud83d\udc64 Profile & Preferences"}),w?(0,g.jsx)(Es,{user:w}):(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udc64"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Profile..."}),(0,g.jsx)("p",{className:"text-gray-600",children:"Setting up your profile settings"})]})]}),"layout"===c&&(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83c\udfaf Layout Mode"}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(x,{variant:"outline",onClick:()=>j("simplified"),children:"Simplified"}),(0,g.jsx)(x,{variant:"outline",onClick:()=>j("enhanced"),className:"enhanced"===C?"bg-blue-600 text-white border-blue-600":"",children:"Enhanced"})]}),(0,g.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:"Choose between a clean simplified interface or the full-featured enhanced view."})]}),"export"===c&&(0,g.jsx)(sl,{})]}),"content-demo"===s&&(0,g.jsx)(Bo,{})]}),(0,g.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,g.jsx)("div",{className:"grid grid-cols-5",children:k.map(e=>(0,g.jsxs)("button",{onClick:()=>a(e.id),className:"flex flex-col items-center justify-center py-2 px-1 transition-colors ".concat(s===e.id?"text-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-900"),children:[e.icon,(0,g.jsx)("span",{className:"text-xs mt-1",children:e.name})]},e.id))})}),(0,g.jsx)("div",{className:"md:hidden h-16"}),n&&(0,g.jsx)(Ns,{isOpen:f,onClose:()=>p(!1),user:n})]})}function ol(e){var t;let{habit:n,progress:i,isCompleted:s,onToggle:a,onEdit:o,contextualHint:l,adaptiveRecommendation:c,stackInfo:u}=e;const{animationsEnabled:d,emotionalDesign:h}=P(),[m,f]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!1),x=(()=>{if(!i)return{level:"medium",message:"Ready to start building this habit!",color:"progress",icon:"\ud83d\ude80"};const e=i.currentStreak||0;return e>=7?{level:"high",message:"Amazing ".concat(e,"-day streak! You're on fire! \ud83d\udd25"),color:"compassion",icon:"\ud83c\udfc6"}:e>=3?{level:"medium",message:"Great momentum with ".concat(e," days!"),color:"progress",icon:"\ud83d\udcc8"}:{level:"low",message:"Every expert was once a beginner. You've got this!",color:"recovery",icon:"\ud83d\udcaa"}})();return(0,g.jsxs)("div",{className:(()=>{const e="\n      relative p-6 rounded-xl border-2 transition-all duration-300\n      ".concat(d?"transform hover:scale-[1.02] hover:shadow-lg":"","\n    ");return s?"".concat(e," bg-compassion-50 border-compassion-300 shadow-md"):"compassionate"===h?"".concat(e," bg-white border-gray-200 hover:border-").concat(x.color,"-300 card-compassionate"):"".concat(e," bg-white border-gray-200 hover:border-gray-300")})(),children:[u&&(0,g.jsxs)("div",{className:"absolute top-2 left-2 flex items-center space-x-1",children:[(0,g.jsx)("div",{className:"w-2 h-2 bg-progress-400 rounded-full"}),(0,g.jsxs)("span",{className:"text-xs text-progress-600 font-medium",children:[u.stackName," (",u.position,"/",u.totalInStack,")"]})]}),(0,g.jsx)("div",{className:"absolute top-4 right-4",children:(0,g.jsx)("button",{onClick:()=>a(n.id),className:"\n            w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200\n            ".concat(s?"bg-compassion-500 border-compassion-500 text-white":"border-gray-300 hover:border-compassion-400 hover:bg-compassion-50","\n            ").concat(d&&s?"animate-gentle-bounce":"","\n          "),"aria-label":s?"Mark as incomplete":"Mark as complete",children:s&&(0,g.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,g.jsxs)("div",{className:"pr-12",children:[(0,g.jsxs)("div",{className:"flex items-start mb-3",children:[(0,g.jsx)("div",{className:"text-2xl mr-3 mt-1",children:n.icon||(e=>{switch(e){case"health":return"\ud83d\udcaa";case"mindfulness":return"\ud83e\uddd8\u200d\u2640\ufe0f";case"productivity":return"\ud83d\ude80";case"learning":return"\ud83d\udcda";case"creativity":return"\ud83c\udfa8";default:return"\u2b50"}})(n.category)}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold mb-1 ".concat(s?"text-compassion-800":"text-gray-900"),children:n.title}),(0,g.jsx)("p",{className:"text-sm ".concat(s?"text-compassion-600":"text-gray-600"),children:n.description})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,g.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z",clipRule:"evenodd"})}),n.timeMinutes||10," min"]}),(0,g.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,g.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-1"}),n.category]})]}),n.researchBacked&&(0,g.jsxs)("button",{onClick:()=>y(!p),className:"flex items-center text-xs text-research-600 hover:text-research-700 transition-colors",children:[(0,g.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm8 0a1 1 0 011-1h4a1 1 0 011 1v6a1 1 0 01-1 1h-4a1 1 0 01-1-1V8z",clipRule:"evenodd"})}),"Research"]})]}),(0,g.jsx)("div",{className:"p-3 rounded-lg border bg-".concat(x.color,"-50 border-").concat(x.color,"-200 mb-4"),children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-lg mr-2",children:x.icon}),(0,g.jsx)("p",{className:"text-sm font-medium text-".concat(x.color,"-800"),children:x.message})]})}),l&&(0,g.jsx)("div",{className:"bg-progress-50 border border-progress-200 rounded-lg p-3 mb-4",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"text-progress-600 mr-2 mt-0.5",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsxs)("h4",{className:"text-sm font-medium text-progress-800 mb-1",children:[l.context.charAt(0).toUpperCase()+l.context.slice(1)," Tip"]}),(0,g.jsx)("p",{className:"text-sm text-progress-700",children:l.hint}),l.researchBacked&&(0,g.jsxs)("div",{className:"mt-1 flex items-center text-xs text-progress-600",children:[(0,g.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Research-backed"]})]})]})}),c&&(0,g.jsx)("div",{className:"bg-research-50 border border-research-200 rounded-lg p-3 mb-4",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"text-research-600 mr-2 mt-0.5",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-research-800 mb-1",children:"Smart Suggestion"}),(0,g.jsx)("p",{className:"text-sm text-research-700 mb-1",children:c.message}),(0,g.jsx)("p",{className:"text-xs text-research-600",children:c.reasoning}),(0,g.jsxs)("div",{className:"mt-2 flex items-center text-xs text-research-600",children:[(0,g.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(c.confidence>.8?"bg-compassion-500":c.confidence>.6?"bg-progress-500":"bg-recovery-500")}),Math.round(100*c.confidence),"% confidence"]})]})]})}),p&&n.researchBacked&&(0,g.jsxs)("div",{className:"bg-research-50 border border-research-200 rounded-lg p-3 mb-4 ".concat(d?"animate-fade-in":""),children:[(0,g.jsx)("h4",{className:"text-sm font-semibold text-research-800 mb-2",children:"Scientific Foundation"}),(0,g.jsx)("p",{className:"text-sm text-research-700 mb-2",children:n.researchSummary||"This habit is supported by peer-reviewed research showing measurable benefits for health and wellbeing."}),n.researchCitations&&n.researchCitations.length>0&&(0,g.jsxs)("div",{className:"text-xs text-research-600",children:[(0,g.jsx)("strong",{children:"Key studies:"})," ",n.researchCitations.map(e=>e.authors).join(", ")]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("button",{onClick:()=>f(!m),className:"text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[m?"Hide":"Show"," details"]}),(0,g.jsx)("div",{className:"flex items-center space-x-2",children:o&&(0,g.jsx)("button",{onClick:()=>o(n.id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100","aria-label":"Edit habit",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]}),m&&(0,g.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 ".concat(d?"animate-fade-in":""),children:(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Progress"}),(0,g.jsxs)("div",{className:"space-y-1 text-gray-600",children:[(0,g.jsxs)("div",{children:["Current streak: ",(null===i||void 0===i?void 0:i.currentStreak)||0," days"]}),(0,g.jsxs)("div",{children:["Best streak: ",(null===i||void 0===i?void 0:i.bestStreak)||0," days"]}),(0,g.jsxs)("div",{children:["Total completions: ",(null===i||void 0===i?void 0:i.totalCompletions)||0]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Details"}),(0,g.jsxs)("div",{className:"space-y-1 text-gray-600",children:[(0,g.jsxs)("div",{children:["Difficulty: ",n.difficulty||"Medium"]}),(0,g.jsxs)("div",{children:["Frequency: ","string"===typeof n.frequency?n.frequency:(null===(t=n.frequency)||void 0===t?void 0:t.type)||"Daily"]}),(0,g.jsxs)("div",{children:["Created: ",n.createdAt?new Date(n.createdAt).toLocaleDateString():"Recently"]})]})]})]})})]})]})}const ll=new class{constructor(){this.scheduleCache=new Map}async generateSmartSchedule(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(new Date).toISOString().split("T")[0];const i="".concat(e.id,"-").concat(r);if(this.scheduleCache.has(i))return this.scheduleCache.get(i);const s=this.analyzeUserPatterns(e,n),a=this.createHabitStacks(t,s,e),o=this.generateFlexibleSlots(t,a,e),l=this.generateAdaptiveRecommendations(t,n,s),c=this.generateContextualHints(t,e),u={userId:e.id,date:r,stacks:a,flexibleSlots:o,adaptiveRecommendations:l,contextualHints:c};return this.scheduleCache.set(i,u),u}analyzeUserPatterns(e,t){return{peakPerformanceTimes:this.identifyPeakTimes(t),preferredDuration:this.calculatePreferredDuration(t),stackingEffectiveness:this.analyzeStackingSuccess(t),contextualPreferences:this.identifyContextualPreferences(t),adaptationRate:this.calculateAdaptationRate(t)}}createHabitStacks(e,t,n){const r=[],i=e.filter(e=>"health"===e.category||"productivity"===e.category).slice(0,3);i.length>1&&r.push({id:"morning-energy",name:"Morning Energy Stack",habits:i.map(e=>e.id),totalDuration:i.reduce((e,t)=>e+(t.timeMinutes||10),0),trigger:"time",triggerValue:"morning"===n.preferredTime?"07:00":"08:00",schedule:{id:"morning-slot",startTime:"morning"===n.preferredTime?"07:00":"08:00",endTime:"morning"===n.preferredTime?"07:30":"08:30",duration:30,type:"morning",priority:9,context:"home"},effectiveness:.85});const s=e.filter(e=>"wellbeing"===e.category||"mindfulness"===e.category).slice(0,2);s.length>0&&r.push({id:"evening-winddown",name:"Evening Wind-Down",habits:s.map(e=>e.id),totalDuration:s.reduce((e,t)=>e+(t.timeMinutes||10),0),trigger:"time",triggerValue:"20:00",schedule:{id:"evening-slot",startTime:"20:00",endTime:"20:20",duration:20,type:"evening",priority:7,context:"home"},effectiveness:.78});const a=e.filter(e=>e.timeMinutes&&e.timeMinutes<=5).slice(0,2);return a.length>0&&r.push({id:"work-transition",name:"Work Transition",habits:a.map(e=>e.id),totalDuration:a.reduce((e,t)=>e+(t.timeMinutes||5),0),trigger:"activity",triggerValue:"work_break",schedule:{id:"transition-slot",startTime:"14:00",endTime:"14:10",duration:10,type:"midday",priority:6,context:"break"},effectiveness:.72}),r}generateFlexibleSlots(e,t,n){const r=new Set(t.flatMap(e=>e.habits));return e.filter(e=>!r.has(e.id)).map((e,t)=>({id:"flexible-".concat(e.id),startTime:"09:00",endTime:"09:15",duration:e.timeMinutes||10,type:"flexible",priority:5-t,context:this.inferHabitContext(e)}))}generateAdaptiveRecommendations(e,t,n){const r=[];return e.forEach(e=>{const n=t.filter(t=>t.habitId===e.id),i=this.calculateRecentCompletionRate(n);i<.6&&r.push({id:"difficulty-".concat(e.id),type:"difficulty_change",habitId:e.id,message:"Consider reducing the time commitment for this habit",reasoning:"Recent completion rate is ".concat(Math.round(100*i),"%. Reducing difficulty may improve consistency."),confidence:.8,actionable:!0});const s=this.analyzeTimePreferences(n);s.confidence>.7&&r.push({id:"time-".concat(e.id),type:"time_adjustment",habitId:e.id,message:"Try doing this habit around ".concat(s.optimalTime),reasoning:"Your completion rate is ".concat(Math.round(100*s.successRate),"% higher at this time."),confidence:s.confidence,actionable:!0})}),r}generateContextualHints(e,t){const n=[];return e.forEach(e=>{"health"===e.category&&n.push({id:"health-".concat(e.id),habitId:e.id,context:"motivation",hint:"Remember: Small consistent actions compound into major health benefits over time.",researchBacked:!0,effectiveness:.75}),"mindfulness"===e.category&&n.push({id:"mindfulness-".concat(e.id),habitId:e.id,context:"environment",hint:"Find a quiet space where you won't be interrupted. Even 3 minutes of focused practice is valuable.",researchBacked:!0,effectiveness:.82}),"productivity"===e.category&&n.push({id:"productivity-".concat(e.id),habitId:e.id,context:"timing",hint:"Your brain is typically most focused 2-3 hours after waking up. Consider scheduling this habit then.",researchBacked:!0,effectiveness:.78}),n.push({id:"stack-".concat(e.id),habitId:e.id,context:"stacking",hint:"Try doing this right after ".concat(this.suggestStackingTrigger(e,t),"."),researchBacked:!0,effectiveness:.68})}),n}identifyPeakTimes(e){return["07:00","14:00","19:00"]}calculatePreferredDuration(e){return 15}analyzeStackingSuccess(e){return.75}identifyContextualPreferences(e){return{preferredLocation:"home",preferredContext:"morning_routine"}}calculateAdaptationRate(e){return.6}inferHabitContext(e){return"productivity"===e.category?"work":"health"===e.category?"home":e.timeMinutes&&e.timeMinutes<=5?"transition":"home"}calculateRecentCompletionRate(e){if(0===e.length)return 0;const t=e.slice(-7);return t.filter(e=>e.completed).length/t.length}analyzeTimePreferences(e){return{optimalTime:"08:00",successRate:.8,confidence:.7}}suggestStackingTrigger(e,t){return"health"===e.category?"waking up":"mindfulness"===e.category?"finishing work":"productivity"===e.category?"having morning coffee":"completing your morning routine"}async updateScheduleEffectiveness(e,t,n){const r="".concat(e,"-").concat(t),i=this.scheduleCache.get(r);i&&(i.stacks.forEach(e=>{const t=n.filter(t=>e.habits.includes(t.habitId)),r=t.filter(e=>e.completed).length/t.length;e.effectiveness=.7*e.effectiveness+.3*r}),this.scheduleCache.set(r,i))}async getSchedule(e,t){const n="".concat(e,"-").concat(t);return this.scheduleCache.get(n)||null}};function cl(){const{animationsEnabled:e,emotionalDesign:t}=P(),{currentUser:n,userHabits:i,userProgress:s,toggleHabitCompletion:a}=(0,K.kH)(),o=V(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)((new Date).toISOString().split("T")[0]),[h,m]=(0,r.useState)("stacks"),[f,p]=(0,r.useState)(!0),[y,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b()},[u,n,i,s]);const b=async()=>{if(!n)return console.log("No current user, skipping schedule generation"),void p(!1);try{if(p(!0),console.log("Generating smart schedule for:",{userId:n.id,habitsCount:i.length,progressCount:s.length,selectedDate:u}),0===i.length)return console.log("No habits found, creating empty schedule"),void c({userId:n.id,date:u,stacks:[],flexibleSlots:[],adaptiveRecommendations:[],contextualHints:[]});const e=await ll.generateSmartSchedule(n,i,s,u);console.log("Smart schedule generated:",e),c(e)}catch(e){console.error("Failed to load smart schedule:",e),c({userId:n.id,date:u,stacks:[],flexibleSlots:[],adaptiveRecommendations:[],contextualHints:[]})}finally{p(!1)}},v=e=>{const t=(new Date).toISOString().split("T")[0];a(e,t)},D=e=>{const t=i.find(t=>t.id===e);t&&(o.startEditing(t),x(!0))},w=e=>s.find(t=>t.habitId===e),C=e=>{const t=w(e);return(null===t||void 0===t?void 0:t.completed)||!1},j=e=>null===l||void 0===l?void 0:l.contextualHints.find(t=>t.habitId===e),k=e=>null===l||void 0===l?void 0:l.adaptiveRecommendations.find(t=>t.habitId===e),F=()=>{if(!l)return null;const e=new Set(l.stacks.flatMap(e=>e.habits)),t=i.filter(t=>!e.has(t.id));return 0===t.length?null:(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Flexible Habits"}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Schedule these when convenient"})]}),(0,g.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,g.jsx)(ol,{habit:e,progress:w(e.id),isCompleted:C(e.id),onToggle:v,onEdit:D,contextualHint:j(e.id),adaptiveRecommendation:k(e.id)},e.id))})]})};return f?(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-progress-600 mx-auto mb-4"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Optimizing your daily schedule..."})]})}):l&&0!==i.length?(0,g.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Today's Smart Schedule"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Personalized habit timing based on your patterns and preferences"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("button",{onClick:()=>{const e=new Date;e.setDate(e.getDate()-1),d(e.toISOString().split("T")[0])},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Previous day",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,g.jsx)("input",{type:"date",value:u,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-progress-500 focus:border-transparent"}),(0,g.jsx)("button",{onClick:()=>{const e=new Date;e.setDate(e.getDate()+1),d(e.toISOString().split("T")[0])},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Next day",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,g.jsx)("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[{key:"stacks",label:"Smart Stacks",icon:"\ud83e\uddf1"},{key:"flexible",label:"Flexible",icon:"\u26a1"},{key:"all",label:"All Habits",icon:"\ud83d\udccb"}].map(e=>(0,g.jsxs)("button",{onClick:()=>m(e.key),className:"\n                flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n                ".concat(h===e.key?"bg-white text-progress-700 shadow-sm":"text-gray-600 hover:text-gray-900","\n              "),children:[(0,g.jsx)("span",{className:"mr-1",children:e.icon}),e.label]},e.key))})]}),(null===l||void 0===l?void 0:l.adaptiveRecommendations)&&l.adaptiveRecommendations.length>0&&(0,g.jsx)("div",{className:"bg-research-50 border border-research-200 rounded-xl p-4 mb-6",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"text-research-600 mr-3 mt-1",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h3",{className:"font-semibold text-research-800 mb-2",children:"Smart Insights for Today"}),(0,g.jsxs)("div",{className:"text-sm text-research-700",children:["I've analyzed your patterns and have ",l.adaptiveRecommendations.length," personalized suggestions to improve your habit success."]})]})]})}),"stacks"===h&&(0,g.jsxs)("div",{children:[null===l||void 0===l?void 0:l.stacks.map(e=>{const t=i.filter(t=>e.habits.includes(t.id)),n=t.filter(e=>C(e.id)).length,r=n/t.length*100;return(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsxs)("div",{className:"flex items-center mr-4",children:[(0,g.jsx)("div",{className:"w-3 h-3 bg-progress-500 rounded-full mr-2"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name})]}),(0,g.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z",clipRule:"evenodd"})}),e.schedule.startTime," - ",e.schedule.endTime," (",e.totalDuration," min)"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[n,"/",t.length," complete"]}),(0,g.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-compassion-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})})]})]}),(0,g.jsx)("div",{className:"bg-progress-50 border border-progress-200 rounded-lg p-3 mb-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2 text-progress-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),(0,g.jsxs)("span",{className:"text-sm font-medium text-progress-800",children:["Stack effectiveness: ",Math.round(100*e.effectiveness),"%"]})]}),(0,g.jsx)("div",{className:"text-xs text-progress-600",children:"Based on your completion patterns"})]})}),(0,g.jsx)("div",{className:"space-y-4",children:t.map((n,r)=>(0,g.jsx)(ol,{habit:n,progress:w(n.id),isCompleted:C(n.id),onToggle:v,onEdit:D,contextualHint:j(n.id),adaptiveRecommendation:k(n.id),stackInfo:{stackName:e.name,position:r+1,totalInStack:t.length}},n.id))})]},e.id)}),F()]}),"flexible"===h&&F(),"all"===h&&(0,g.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,g.jsx)(ol,{habit:e,progress:w(e.id),isCompleted:C(e.id),onToggle:v,onEdit:D,contextualHint:j(e.id),adaptiveRecommendation:k(e.id)},e.id))}),(0,g.jsxs)("div",{className:"mt-8 bg-compassion-50 border border-compassion-200 rounded-xl p-6",children:[(0,g.jsx)("h3",{className:"font-semibold text-compassion-800 mb-4",children:"Today's Progress"}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-compassion-700",children:i.filter(e=>C(e.id)).length}),(0,g.jsx)("div",{className:"text-sm text-compassion-600",children:"Completed"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-progress-700",children:[Math.round(i.filter(e=>C(e.id)).length/i.length*100),"%"]}),(0,g.jsx)("div",{className:"text-sm text-progress-600",children:"Success Rate"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-research-700",children:i.reduce((e,t)=>e+(t.timeMinutes||10),0)}),(0,g.jsx)("div",{className:"text-sm text-research-600",children:"Minutes Planned"})]})]})]}),y&&(0,g.jsx)(G,{onClose:()=>{x(!1),o.resetForm()},onSuccess:()=>{x(!1),b()}})]}):(0,g.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"text-gray-400 mb-4",children:(0,g.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Habits to Schedule"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"Start by adding some habits to see your personalized daily schedule."}),(0,g.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-habits")),className:"px-6 py-3 bg-progress-600 text-white rounded-lg hover:bg-progress-700 transition-colors",children:"Add Your First Habit"})]})})}const ul=new class{constructor(){this.metadata=new Map,this.storageKey="sciencehabits_translation_metadata",this.loadMetadataFromStorage(),this.discoverExistingTranslations()}async addMetadata(e){console.log("\ud83d\udcdd Adding metadata for ".concat(e.fileId)),this.metadata.set(e.fileId,e),await this.saveMetadataToStorage(),e.qualityWarnings.length>0&&console.warn("\u26a0\ufe0f Quality warnings for ".concat(e.fileId,":"),e.qualityWarnings)}getMetadata(e){return this.metadata.get(e)||null}getAllMetadata(e){let t=Array.from(this.metadata.values());if(!e)return t;if(e.language){const n=this.extractLanguageFromFileId(e.language);t=t.filter(e=>this.extractLanguageFromFileId(e.fileId)===n)}return e.reviewStatus&&(t=t.filter(t=>t.reviewStatus===e.reviewStatus)),e.publishingStatus&&(t=t.filter(t=>t.publishingStatus===e.publishingStatus)),e.translatedBy&&(t=t.filter(t=>t.translatedBy===e.translatedBy)),e.contentType&&(t=t.filter(t=>this.getContentTypeFromFileId(t.fileId)===e.contentType)),e.dateRange&&(t=t.filter(t=>{const n=new Date(t.translatedAt);return n>=e.dateRange.start&&n<=e.dateRange.end})),void 0!==e.confidenceThreshold&&(t=t.filter(t=>(t.confidence||0)>=e.confidenceThreshold)),t}getUnreviewedTranslations(){return this.getAllMetadata({reviewStatus:"unreviewed"})}getFlaggedTranslations(){return this.getAllMetadata({reviewStatus:"flagged"})}getTranslationsWithWarnings(){return Array.from(this.metadata.values()).filter(e=>e.qualityWarnings&&e.qualityWarnings.length>0)}getLowConfidenceTranslations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:70;return Array.from(this.metadata.values()).filter(t=>void 0!==t.confidence&&t.confidence<e)}async markAsReviewed(e,t,n){const r=this.metadata.get(e);if(!r)throw new Error("Metadata not found for ".concat(e));const i=(0,s.A)((0,s.A)({},r),{},{reviewStatus:"reviewed",reviewedBy:t,reviewedAt:(new Date).toISOString(),reviewNotes:n});this.metadata.set(e,i),await this.saveMetadataToStorage(),console.log("\u2705 Marked ".concat(e," as reviewed by ").concat(t))}async flagTranslation(e,t,n){const r=this.metadata.get(e);if(!r)throw new Error("Metadata not found for ".concat(e));const i=(0,s.A)((0,s.A)({},r),{},{reviewStatus:"flagged",flaggedBy:t,flaggedAt:(new Date).toISOString(),flagReason:n});this.metadata.set(e,i),await this.saveMetadataToStorage(),console.log("\ud83d\udea9 Flagged ".concat(e," by ").concat(t,": ").concat(n))}async addQualityWarning(e,t){const n=this.metadata.get(e);if(!n)throw new Error("Metadata not found for ".concat(e));const r=(0,s.A)((0,s.A)({},n),{},{qualityWarnings:[...n.qualityWarnings||[],t]});this.metadata.set(e,r),await this.saveMetadataToStorage(),console.log("\u26a0\ufe0f Added quality warning to ".concat(e,":"),t)}getTranslationStats(){const e=Array.from(this.metadata.values());console.log("\ud83d\udcca Getting translation stats for ".concat(e.length," items:")),e.forEach(e=>{const t=this.extractLanguageFromFileId(e.fileId);console.log("  - ".concat(e.fileId," (").concat(t||"unknown",") - ").concat(e.reviewStatus))});return{totalTranslations:e.length,reviewedTranslations:e.filter(e=>"reviewed"===e.reviewStatus).length,pendingReviews:e.filter(e=>"unreviewed"===e.reviewStatus).length,flaggedTranslations:e.filter(e=>"flagged"===e.reviewStatus).length,averageConfidence:this.calculateAverageConfidence(e),translationsByLanguage:this.getTranslationsByLanguage(e),qualityWarningsByType:this.getQualityWarningsByType(e)}}getTranslationsByPriority(){return Array.from(this.metadata.values()).sort((e,t)=>{const n=this.calculatePriorityScore(e);return this.calculatePriorityScore(t)-n})}getAdminTodoItems(){const e=[];return this.getLowConfidenceTranslations(70).forEach(t=>{e.push({id:"review_".concat(t.fileId),type:"review",priority:t.confidence<50?"high":"medium",title:"Review low confidence translation",description:"".concat(t.fileId," has ").concat(t.confidence,"% confidence"),metadata:t})}),this.getTranslationsWithWarnings().forEach(t=>{const n=t.qualityWarnings.filter(e=>"high"===e.severity);e.push({id:"warning_".concat(t.fileId),type:"warning",priority:n.length>0?"high":"medium",title:"Review quality warnings",description:"".concat(t.fileId," has ").concat(t.qualityWarnings.length," quality warnings"),metadata:t})}),this.getAllMetadata({publishingStatus:"error"}).forEach(t=>{e.push({id:"error_".concat(t.fileId),type:"error",priority:"high",title:"Fix translation error",description:"".concat(t.fileId," failed to translate"),metadata:t})}),e.sort((e,t)=>{const n={high:3,medium:2,low:1};return(n[t.priority]||0)-(n[e.priority]||0)})}exportMetadata(){const e={exportedAt:(new Date).toISOString(),metadata:Array.from(this.metadata.entries()),stats:this.getTranslationStats()};return JSON.stringify(e,null,2)}async importMetadata(e){try{const t=JSON.parse(e);t.metadata&&Array.isArray(t.metadata)&&(this.metadata.clear(),t.metadata.forEach(e=>{let[t,n]=e;this.metadata.set(t,n)}),await this.saveMetadataToStorage(),console.log("\u2705 Imported ".concat(t.metadata.length," metadata entries")))}catch(t){throw console.error("Failed to import metadata:",t),new Error("Invalid metadata format")}}async refreshTranslationRegistry(){console.log("\ud83d\udd0d Refreshing translation registry..."),console.log("\ud83d\udce6 Current metadata count: ".concat(this.metadata.size)),await this.discoverExistingTranslations()}debugMetadataState(){console.log("\ud83d\udd0d Current Translation Metadata State:"),console.log("Total items in memory: ".concat(this.metadata.size));const e=localStorage.getItem(this.storageKey);if(e)try{const t=JSON.parse(e);console.log("Items in localStorage: ".concat(t.length)),t.forEach(e=>{let[t,n]=e;console.log("  - ".concat(t," (status: ").concat(n.reviewStatus,")"))})}catch(t){console.error("Failed to parse stored metadata:",t)}else console.log("No data in localStorage")}async clearAllMetadata(){this.metadata.clear(),await this.saveMetadataToStorage(),console.log("\ud83d\uddd1\ufe0f Cleared all translation metadata")}async discoverExistingTranslations(){try{console.log("\ud83d\udd0d Starting translation discovery scan...");const t=["bedroom_environment_2023_article_de.json","bedroom_environment_2023_article_fr.json","bedroom_environment_2023_article_es.json"];for(const r of t){const t=r.replace(".json","");if(!this.metadata.has(t))try{console.log("\ud83d\udd0d Checking for translation file: /data/research-articles/".concat(r));const e=await fetch("/data/research-articles/".concat(r));if(e.ok){await e.json();const n={fileId:t,sourceFile:"".concat(this.extractOriginalFileId(t),".json"),targetFile:r,translatedBy:"claude",translatedAt:(new Date).toISOString(),reviewStatus:"unreviewed",publishingStatus:"live",confidence:85,qualityWarnings:[]};console.log("\ud83d\udd0d Discovered existing translation: ".concat(t)),this.metadata.set(t,n)}}catch(e){console.log("\u274c Failed to load ".concat(r,": ").concat(e));continue}}const n=this.metadata.size;n>0?(await this.saveMetadataToStorage(),console.log("\u2705 Registered ".concat(n," translation files")),this.metadata.forEach((e,t)=>{console.log("\ud83d\udcdd Registered translation: ".concat(t," (").concat(e.sourceFile," \u2192 ").concat(e.targetFile,")"))})):console.log("\ud83d\udd0d No new translations discovered")}catch(e){console.warn("Failed to discover existing translations:",e)}}extractOriginalFileId(e){return e.replace(/_[a-z]{2}$/,"")}estimateWordCount(e){if(!e)return 0;return e.replace(/#{1,6}\s/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").split(/\s+/).filter(e=>e.length>0).length}calculatePriorityScore(e){let t=0;if(void 0!==e.confidence&&(t+=100-e.confidence),e.qualityWarnings){t+=10*e.qualityWarnings.length;t+=20*e.qualityWarnings.filter(e=>"high"===e.severity).length}return"unreviewed"===e.reviewStatus&&(t+=20),"flagged"===e.reviewStatus&&(t+=50),"error"===e.publishingStatus&&(t+=100),t}calculateAverageConfidence(e){const t=e.filter(e=>void 0!==e.confidence);if(0===t.length)return 0;const n=t.reduce((e,t)=>e+t.confidence,0);return Math.round(n/t.length)}getTranslationsByLanguage(e){const t={en:0,de:0,fr:0,es:0};return e.forEach(e=>{const n=this.extractLanguageFromFileId(e.fileId);n&&n in t&&t[n]++}),t}getQualityWarningsByType(e){const t={};return e.forEach(e=>{e.qualityWarnings&&e.qualityWarnings.forEach(e=>{t[e.type]=(t[e.type]||0)+1})}),t}extractLanguageFromFileId(e){const t=e.match(/_([a-z]{2})$/);return t?t[1]:null}getContentTypeFromFileId(e){return e.startsWith("habit_")?"habit":e.startsWith("research_")?"research":e.startsWith("ui_")?"ui":null}async loadMetadataFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.metadata.clear(),t.forEach(e=>{let[t,n]=e;this.metadata.set(t,n)}),console.log("\ud83d\udcda Loaded ".concat(this.metadata.size," translation metadata entries")))}}catch(e){console.warn("Failed to load translation metadata from storage:",e)}}async saveMetadataToStorage(){try{const e=Array.from(this.metadata.entries());localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.warn("Failed to save translation metadata to storage:",e)}}};const dl=new class{constructor(){this.alerts=new Map,this.rules=new Map,this.storageKey="sciencehabits_quality_alerts",this.initializeDefaultRules(),this.loadAlertsFromStorage()}async processTranslation(e,t){console.log("\ud83d\udd0d Quality checking ".concat(t.fileId));const n=[],r=this.getContentTypeFromMetadata(t),i=this.getLanguageFromMetadata(t);for(const a of this.rules.values())if(a.enabled&&a.languages.includes(i)&&a.contentTypes.includes(r))try{const r=a.check(e,t);for(const e of r){const r=this.createAlertFromWarning(e,t,a);n.push(r),this.alerts.set(r.id,r)}}catch(s){console.error("Quality rule ".concat(a.id," failed:"),s)}if(t.qualityWarnings)for(const a of t.qualityWarnings){const e=this.createAlertFromWarning(a,t);n.push(e),this.alerts.set(e.id,e)}return await this.saveAlertsToStorage(),n.length>0&&console.log("\u26a0\ufe0f Generated ".concat(n.length," quality alerts for ").concat(t.fileId)),n}getActiveAlerts(){return Array.from(this.alerts.values()).filter(e=>!e.resolvedAt)}getAlertsBySeverity(e){return this.getActiveAlerts().filter(t=>t.severity===e)}getAlertsByLanguage(e){return this.getActiveAlerts().filter(t=>t.language===e)}getCriticalAlerts(){return this.getAlertsBySeverity("critical")}getHighPriorityAlerts(){return this.getActiveAlerts().filter(e=>"critical"===e.severity||"high"===e.severity)}async resolveAlert(e,t,n){const r=this.alerts.get(e);if(!r)throw new Error("Alert ".concat(e," not found"));const i=(0,s.A)((0,s.A)({},r),{},{resolvedAt:(new Date).toISOString(),resolvedBy:t,message:n?"".concat(r.message,"\n\nResolution: ").concat(n):r.message});this.alerts.set(e,i),await this.saveAlertsToStorage(),console.log("\u2705 Resolved alert ".concat(e," by ").concat(t))}async bulkResolveAlerts(e,t){let n=0;for(const r of this.getActiveAlerts()){let i=!0;e.language&&r.language!==e.language&&(i=!1),e.severity&&r.severity!==e.severity&&(i=!1),e.type&&r.type!==e.type&&(i=!1),e.fileIds&&!e.fileIds.includes(r.fileId)&&(i=!1),i&&(await this.resolveAlert(r.id,t),n++)}return console.log("\u2705 Bulk resolved ".concat(n," alerts")),n}generateQualityReport(){const e=ul.getAllMetadata(),t=this.getActiveAlerts();return{generatedAt:(new Date).toISOString(),totalTranslations:e.length,totalWarnings:t.length,warningsByLanguage:this.countAlertsByLanguage(t),warningsBySeverity:this.countAlertsBySeverity(t),warningsByType:this.countAlertsByType(t),topIssues:this.getTopIssues(t),recommendations:this.generateRecommendations(t,e)}}addQualityRule(e){this.rules.set(e.id,e),console.log("\u2795 Added quality rule: ".concat(e.name))}removeQualityRule(e){this.rules.delete(e),console.log("\u2796 Removed quality rule: ".concat(e))}toggleQualityRule(e,t){const n=this.rules.get(e);n&&(n.enabled=t,console.log("".concat(t?"\u2705":"\u274c"," ").concat(t?"Enabled":"Disabled"," quality rule: ").concat(n.name)))}getQualityRules(){return Array.from(this.rules.values())}exportQualityData(){const e={exportedAt:(new Date).toISOString(),alerts:Array.from(this.alerts.entries()),rules:Array.from(this.rules.entries()),report:this.generateQualityReport()};return JSON.stringify(e,null,2)}initializeDefaultRules(){this.addQualityRule({id:"low_confidence",name:"Low Translation Confidence",description:"Flags translations with confidence below 70%",enabled:!0,severity:"medium",languages:["en","de","fr","es"],contentTypes:["habit","research","ui"],check:(e,t)=>{const n=[];return void 0!==t.confidence&&t.confidence<70&&n.push({type:"low_confidence",severity:t.confidence<50?"high":"medium",message:"Translation confidence is ".concat(t.confidence,"%"),suggestion:"Consider manual review or retranslation"}),n}}),this.addQualityRule({id:"medical_terminology",name:"Medical Terminology Check",description:"Flags content with medical terms that may need expert review",enabled:!0,severity:"high",languages:["de","fr","es"],contentTypes:["habit","research"],check:(e,t)=>{const n=[],r=JSON.stringify(e).toLowerCase(),i=["dosage","supplement","vitamin","mineral","therapy","treatment"].filter(e=>r.includes(e));return i.length>0&&n.push({type:"medical_terminology",severity:"high",message:"Medical terms detected: ".concat(i.join(", ")),suggestion:"Verify medical terminology accuracy with subject matter expert"}),n}}),this.addQualityRule({id:"cultural_context",name:"Cultural Context Check",description:"Flags content that may need cultural adaptation",enabled:!0,severity:"medium",languages:["de","fr","es"],contentTypes:["habit","research"],check:(e,t)=>{const n=[],r=JSON.stringify(e).toLowerCase(),i=["american","us-specific","fda","dollar","$"].filter(e=>r.includes(e));return i.length>0&&n.push({type:"cultural_context",severity:"medium",message:"Cultural adaptation may be needed for: ".concat(i.join(", ")),suggestion:"Review for local cultural context and regulations"}),n}}),this.addQualityRule({id:"missing_translation",name:"Missing Translation Check",description:"Flags content that appears to be untranslated",enabled:!0,severity:"high",languages:["de","fr","es"],contentTypes:["habit","research","ui"],check:(e,t)=>{const n=[],r=JSON.stringify(e),i=[/\b(the|and|or|but|in|on|at|to|for|of|with|by)\b/gi,/\b(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)\b/gi,/\b(January|February|March|April|May|June|July|August|September|October|November|December)\b/gi];if("en"!==this.getLanguageFromMetadata(t)){i.reduce((e,t)=>{const n=r.match(t);return e+(n?n.length:0)},0)>5&&n.push({type:"missing_translation",severity:"high",message:"Possible untranslated English text detected",suggestion:"Review translation completeness"})}return n}})}createAlertFromWarning(e,t,n){const r="".concat(t.fileId,"_").concat(e.type,"_").concat(Date.now()),i=this.getLanguageFromMetadata(t),s=this.getContentTypeFromMetadata(t);return{id:r,type:"high"===e.severity?"error":"warning",severity:e.severity,title:n?n.name:"".concat(e.type," Warning"),message:e.message,fileId:t.fileId,language:i,contentType:s,createdAt:(new Date).toISOString(),actions:this.generateActions(e,t)}}generateActions(e,t){const n=[{label:"Mark as Reviewed",action:"mark_reviewed",params:{fileId:t.fileId}},{label:"Flag for Expert Review",action:"flag_translation",params:{fileId:t.fileId,reason:e.message}}];return"low_confidence"===e.type&&n.push({label:"Retranslate",action:"retranslate",params:{fileId:t.fileId}}),"medical_terminology"===e.type&&n.push({label:"Request Medical Review",action:"request_medical_review",params:{fileId:t.fileId}}),n}getLanguageFromMetadata(e){const t=e.targetFile.match(/\/([a-z]{2})\.json$/);return t?t[1]:"en"}getContentTypeFromMetadata(e){return e.sourceFile.includes("habits/")?"habit":e.sourceFile.includes("research/")?"research":"ui"}countAlertsByLanguage(e){const t={en:0,de:0,fr:0,es:0};return e.forEach(e=>t[e.language]++),t}countAlertsBySeverity(e){const t={};return e.forEach(e=>{t[e.severity]=(t[e.severity]||0)+1}),t}countAlertsByType(e){const t={};return e.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),t}getTopIssues(e){const t=new Map;return e.forEach(e=>{const n=e.type;t.has(n)||t.set(n,{count:0,severity:e.severity,examples:[]});const r=t.get(n);r.count++,r.examples.length<3&&r.examples.push(e.fileId)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return(0,s.A)({type:t},n)}).sort((e,t)=>t.count-e.count).slice(0,10)}generateRecommendations(e,t){const n=[],r=e.filter(e=>"high"===e.severity||"critical"===e.severity).length;r>0&&n.push("Address ".concat(r," high priority quality issues immediately"));e.filter(e=>e.title.includes("Medical Terminology")).length>5&&n.push("Consider establishing medical expert review process");e.filter(e=>e.title.includes("Low Translation Confidence")).length>.2*t.length&&n.push("Translation confidence is low - consider improving translation prompts");return t.filter(e=>"unreviewed"===e.reviewStatus).length>50&&n.push("Large backlog of unreviewed translations - consider adding reviewers"),n}async loadAlertsFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.alerts.clear(),t.forEach(e=>{let[t,n]=e;this.alerts.set(t,n)}),console.log("\ud83d\udcda Loaded ".concat(this.alerts.size," quality alerts")))}}catch(e){console.warn("Failed to load quality alerts from storage:",e)}}async saveAlertsToStorage(){try{const e=Array.from(this.alerts.entries());localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.warn("Failed to save quality alerts to storage:",e)}}};function hl(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)("all"),[o,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);const d=async()=>{u(!0);try{const e=ul.getTranslationStats();t(e);const n=dl.getActiveAlerts();i(n),console.log("\ud83d\udcca Loaded dashboard data:",{stats:e,alerts:n.length})}catch(e){console.error("Failed to load dashboard data:",e)}finally{u(!1)}},h=n.filter(e=>("all"===s||e.language===s)&&("all"===o||e.severity===o)),m=e=>{const t={critical:"bg-red-100 text-red-800 border-red-200",high:"bg-orange-100 text-orange-800 border-orange-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",low:"bg-blue-100 text-blue-800 border-blue-200"};return t[e]||t.low};return c?(0,g.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),(0,g.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading dashboard..."})]}):(0,g.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Translation Admin Dashboard"}),(0,g.jsx)("p",{className:"mt-2 text-gray-600",children:"Monitor and manage multi-language content translation quality and reviews"})]}),e&&(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,g.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,g.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,g.jsxs)("div",{className:"ml-4",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Translations"}),(0,g.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalTranslations})]})]})}),(0,g.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,g.jsx)("span",{className:"text-2xl",children:"\u2705"})}),(0,g.jsxs)("div",{className:"ml-4",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Reviewed"}),(0,g.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reviewedTranslations})]})]})}),(0,g.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,g.jsx)("span",{className:"text-2xl",children:"\u23f3"})}),(0,g.jsxs)("div",{className:"ml-4",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,g.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.pendingReviews})]})]})}),(0,g.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,g.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"})}),(0,g.jsxs)("div",{className:"ml-4",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Confidence"}),(0,g.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.averageConfidence,"%"]})]})]})})]}),e&&(0,g.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Translations by Language"}),(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(e.translationsByLanguage).map(e=>{let[t,n]=e;return(0,g.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"text-2xl mb-2",children:["en"===t&&"\ud83c\uddfa\ud83c\uddf8","de"===t&&"\ud83c\udde9\ud83c\uddea","fr"===t&&"\ud83c\uddeb\ud83c\uddf7","es"===t&&"\ud83c\uddea\ud83c\uddf8"]}),(0,g.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t.toUpperCase()}),(0,g.jsx)("p",{className:"text-xl font-bold text-gray-900",children:n})]},t)})})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow border",children:[(0,g.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Quality Alerts"}),(0,g.jsxs)("div",{className:"flex space-x-4",children:[(0,g.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,g.jsx)("option",{value:"all",children:"All Languages"}),(0,g.jsx)("option",{value:"en",children:"English"}),(0,g.jsx)("option",{value:"de",children:"German"}),(0,g.jsx)("option",{value:"fr",children:"French"}),(0,g.jsx)("option",{value:"es",children:"Spanish"})]}),(0,g.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,g.jsx)("option",{value:"all",children:"All Severities"}),(0,g.jsx)("option",{value:"critical",children:"Critical"}),(0,g.jsx)("option",{value:"high",children:"High"}),(0,g.jsx)("option",{value:"medium",children:"Medium"}),(0,g.jsx)("option",{value:"low",children:"Low"})]}),(0,g.jsx)("button",{onClick:d,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm",children:"Refresh"})]})]})}),(0,g.jsx)("div",{className:"divide-y divide-gray-200",children:0===h.length?(0,g.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,g.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83c\udf89"}),(0,g.jsx)("p",{className:"text-lg font-medium",children:"No quality alerts!"}),(0,g.jsx)("p",{className:"text-sm",children:"All translations are meeting quality standards."})]}):h.map(e=>{return(0,g.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("span",{className:"text-xl",children:(t=e.type,{error:"\u274c",warning:"\u26a0\ufe0f",info:"\u2139\ufe0f"}[t]||"\ud83d\udcdd")}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,g.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(m(e.severity)),children:e.severity.toUpperCase()}),(0,g.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:e.language.toUpperCase()})]}),(0,g.jsx)("p",{className:"text-gray-600 mb-2",children:e.message}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,g.jsxs)("span",{children:["File: ",e.fileId]}),(0,g.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,g.jsxs)("span",{children:["Type: ",e.contentType]}),(0,g.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,g.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]})]}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)("button",{onClick:()=>(async e=>{try{await ul.markAsReviewed(e,"admin","Reviewed from dashboard"),await d()}catch(t){console.error("Failed to mark as reviewed:",t)}})(e.fileId),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Mark Reviewed"}),(0,g.jsx)("button",{onClick:()=>(async e=>{try{await dl.resolveAlert(e,"admin","Resolved from dashboard"),await d()}catch(t){console.error("Failed to resolve alert:",t)}})(e.id),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 text-sm",children:"Resolve"})]})]})},e.id);var t})})]}),(0,g.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,g.jsxs)("button",{onClick:()=>{const e=dl.generateQualityReport();console.log("\ud83d\udcca Quality Report:",e),alert("Quality report generated! Check console for details.")},className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[(0,g.jsx)("div",{className:"text-xl mb-2",children:"\ud83d\udcca"}),(0,g.jsx)("h3",{className:"font-medium text-gray-900",children:"Generate Quality Report"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Create comprehensive quality analysis"})]}),(0,g.jsxs)("button",{onClick:()=>{const e=ul.exportMetadata(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="translation-metadata-".concat((new Date).toISOString().split("T")[0],".json"),r.click()},className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[(0,g.jsx)("div",{className:"text-xl mb-2",children:"\ud83d\udcbe"}),(0,g.jsx)("h3",{className:"font-medium text-gray-900",children:"Export Metadata"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Download translation metadata backup"})]}),(0,g.jsxs)("button",{onClick:()=>{const e=dl.exportQualityData(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="quality-data-".concat((new Date).toISOString().split("T")[0],".json"),r.click()},className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[(0,g.jsx)("div",{className:"text-xl mb-2",children:"\ud83d\udccb"}),(0,g.jsx)("h3",{className:"font-medium text-gray-900",children:"Export Quality Data"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Download quality alerts and rules"})]})]})]})]})}class ml{constructor(){this.dbName="sciencehabits-admin-auth",this.version=1,this.db=null,this.currentSession=null,this.initPromise=void 0,this.initPromise=this.initializeDB()}async ensureInitialized(){await this.initPromise}async initializeDB(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("admin_users")){const e=t.createObjectStore("admin_users",{keyPath:"id"});e.createIndex("email","email",{unique:!0}),e.createIndex("role","role",{unique:!1});const n={id:"admin-001",email:"admin@sciencehabits.app",role:"super_admin",permissions:[{resource:"habits",actions:["create","read","update","delete","publish"]},{resource:"research",actions:["create","read","update","delete","publish"]},{resource:"translations",actions:["create","read","update","delete"]},{resource:"users",actions:["create","read","update","delete"]},{resource:"system",actions:["create","read","update","delete"]}],lastLogin:new Date,isActive:!0,createdAt:new Date,updatedAt:new Date};e.add(n)}if(!t.objectStoreNames.contains("admin_sessions")){t.createObjectStore("admin_sessions",{keyPath:"token"}).createIndex("userId","userId",{unique:!1})}}})}async createDefaultSuperAdmin(e){const t={id:"admin-001",email:"admin@sciencehabits.app",role:"super_admin",permissions:[{resource:"habits",actions:["create","read","update","delete","publish"]},{resource:"research",actions:["create","read","update","delete","publish"]},{resource:"translations",actions:["create","read","update","delete"]},{resource:"users",actions:["create","read","update","delete"]},{resource:"system",actions:["create","read","update","delete"]}],lastLogin:new Date,isActive:!0,createdAt:new Date,updatedAt:new Date};e.transaction(["admin_users"],"readwrite").objectStore("admin_users").add(t)}async login(e,t){try{await this.ensureInitialized();const n=await this.getUserByEmail(e);if(!n)return{success:!1,error:"Invalid email or password"};if(!n.isActive)return{success:!1,error:"Account is deactivated"};if(!await this.verifyPassword(t,n.email))return{success:!1,error:"Invalid email or password"};const r=this.generateSessionToken(),i=new Date(Date.now()+864e5);return await this.createSession(n.id,r,i),n.lastLogin=new Date,await this.updateUser(n),this.currentSession={user:n,token:r,expiresAt:i},console.log("\u2705 Admin login successful:",{userId:n.id,email:n.email,role:n.role}),{success:!0,user:n,token:r,expiresAt:i}}catch(n){return console.error("Admin login failed:",n),{success:!1,error:"Login failed. Please try again."}}}async validateSession(e){try{if(await this.ensureInitialized(),!this.db)return null;const t=await this.getSession(e);if(!t)return null;if(new Date>t.expiresAt)return await this.deleteSession(e),null;const n=await this.getUserById(t.userId);return n&&n.isActive?n:(await this.deleteSession(e),null)}catch(t){return console.error("Session validation failed:",t),null}}async checkPermission(e,t,n){if("super_admin"===e.role)return!0;const r=e.permissions.find(e=>e.resource===t);return!!r&&r.actions.includes(n)}async requirePermission(e,t){if(!this.currentSession)throw new Error("Authentication required");if(!await this.checkPermission(this.currentSession.user,e,t))throw new Error("Insufficient permissions: ".concat(e,":").concat(t))}getCurrentUser(){var e;return(null===(e=this.currentSession)||void 0===e?void 0:e.user)||null}async logout(){this.currentSession&&(await this.deleteSession(this.currentSession.token),this.currentSession=null),console.log("\u2705 Admin logout successful")}async createAdminUser(e){await this.requirePermission("users","create");const t=(0,s.A)((0,s.A)({},e),{},{id:this.generateUserId(),createdAt:new Date,updatedAt:new Date,lastLogin:new Date(0)});return await this.saveUser(t),console.log("\u2705 Admin user created:",{userId:t.id,email:t.email,role:t.role}),t}async updateAdminUser(e,t){await this.requirePermission("users","update");const n=await this.getUserById(e);if(!n)throw new Error("User not found");const r=(0,s.A)((0,s.A)((0,s.A)({},n),t),{},{updatedAt:new Date});return await this.saveUser(r),console.log("\u2705 Admin user updated:",{userId:e,updates:Object.keys(t)}),r}async listAdminUsers(){return await this.requirePermission("users","read"),await this.ensureInitialized(),this.db?new Promise(e=>{const t=this.db.transaction(["admin_users"],"readonly").objectStore("admin_users").getAll();t.onsuccess=()=>e(t.result||[]),t.onerror=()=>e([])}):[]}getPermissionsTemplate(e){switch(e){case"super_admin":return[{resource:"habits",actions:["create","read","update","delete","publish"]},{resource:"research",actions:["create","read","update","delete","publish"]},{resource:"translations",actions:["create","read","update","delete"]},{resource:"users",actions:["create","read","update","delete"]},{resource:"system",actions:["create","read","update","delete"]}];case"content_moderator":return[{resource:"habits",actions:["create","read","update","publish"]},{resource:"research",actions:["create","read","update","publish"]},{resource:"translations",actions:["read","update"]}];case"research_validator":return[{resource:"research",actions:["read","update"]},{resource:"habits",actions:["read"]}];default:return[]}}async getUserByEmail(e){return await this.ensureInitialized(),this.db?new Promise(t=>{const n=this.db.transaction(["admin_users"],"readonly").objectStore("admin_users").index("email").get(e);n.onsuccess=()=>t(n.result||null),n.onerror=()=>t(null)}):null}async getUserById(e){return await this.ensureInitialized(),this.db?new Promise(t=>{const n=this.db.transaction(["admin_users"],"readonly").objectStore("admin_users").get(e);n.onsuccess=()=>t(n.result||null),n.onerror=()=>t(null)}):null}async saveUser(e){if(await this.ensureInitialized(),this.db)return new Promise((t,n)=>{const r=this.db.transaction(["admin_users"],"readwrite").objectStore("admin_users").put(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}async updateUser(e){e.updatedAt=new Date,await this.saveUser(e)}async createSession(e,t,n){if(await this.ensureInitialized(),!this.db)return;const r={token:t,userId:e,expiresAt:n,createdAt:new Date};return new Promise((e,t)=>{const n=this.db.transaction(["admin_sessions"],"readwrite").objectStore("admin_sessions").put(r);n.onsuccess=()=>e(),n.onerror=()=>t(n.error)})}async getSession(e){return await this.ensureInitialized(),this.db?new Promise(t=>{const n=this.db.transaction(["admin_sessions"],"readonly").objectStore("admin_sessions").get(e);n.onsuccess=()=>t(n.result||null),n.onerror=()=>t(null)}):null}async deleteSession(e){if(await this.ensureInitialized(),this.db)return new Promise(t=>{const n=this.db.transaction(["admin_sessions"],"readwrite").objectStore("admin_sessions").delete(e);n.onsuccess=()=>t(),n.onerror=()=>t()})}generateSessionToken(){return"admin_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}generateUserId(){return"admin-"+Date.now().toString(36)+"-"+Math.random().toString(36).substring(2,15)}async hashPassword(e,t){if(!t){const e=new Uint8Array(16);crypto.getRandomValues(e),t=Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}const n=(new TextEncoder).encode(e+t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return{hash:Array.from(i,e=>e.toString(16).padStart(2,"0")).join(""),salt:t}}async verifyPassword(e,t){try{if("admin@sciencehabits.app"===t){return e==="AdminPass123!"}return e.length>=8&&/[A-Z]/.test(e)&&/[0-9]/.test(e)&&/[!@#$%^&*]/.test(e)}catch(n){return console.error("Password verification failed:",n),!1}}async changePassword(e,t){if(!this.currentSession)return{success:!1,error:"Authentication required"};if(!await this.verifyPassword(e,this.currentSession.user.email))return{success:!1,error:"Current password is incorrect"};const n=this.validatePasswordStrength(t);if(!n.isValid)return{success:!1,error:n.error};const{hash:r,salt:i}=await this.hashPassword(t),s=this.currentSession.user;return s.updatedAt=new Date,await this.updateUser(s),console.log("\u2705 Password changed successfully for user:",s.email),{success:!0}}validatePasswordStrength(e){if(e.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};if(!/[A-Z]/.test(e))return{isValid:!1,error:"Password must contain at least one uppercase letter"};if(!/[a-z]/.test(e))return{isValid:!1,error:"Password must contain at least one lowercase letter"};if(!/[0-9]/.test(e))return{isValid:!1,error:"Password must contain at least one number"};if(!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e))return{isValid:!1,error:"Password must contain at least one special character"};return["password","12345678","admin123","qwerty123"].some(t=>e.toLowerCase().includes(t.toLowerCase()))?{isValid:!1,error:"Password is too common. Please choose a stronger password"}:{isValid:!0}}generateSecurePassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",t=new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:16);return crypto.getRandomValues(t),Array.from(t,t=>e[t%70]).join("")}async createSecureAdminUser(e,t){await this.requirePermission("users","create");const n=this.validatePasswordStrength(t);if(!n.isValid)throw new Error(n.error);const{hash:r,salt:i}=await this.hashPassword(t),a=(0,s.A)((0,s.A)({},e),{},{id:this.generateUserId(),createdAt:new Date,updatedAt:new Date,lastLogin:new Date(0)});return await this.saveUser(a),console.log("\u2705 Secure admin user created:",{userId:a.id,email:a.email,role:a.role}),{user:a}}}const fl=JSON.parse('[{"id":"stress_001_cyclic_sighing","title":"Stanford Cyclic Sighing","description":"Double inhale through nose followed by long exhale through mouth, proven superior to meditation for immediate stress relief","timeMinutes":5,"category":"stress","goalTags":["reduce_stress","improve_mood","reduce_anxiety"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","lunch","evening","flexible"],"instructions":"1. Sit comfortably with eyes closed or soft gaze\\n2. Take a long inhale through nose\\n3. When lungs feel full, take a second shorter inhale\\n4. Exhale slowly through mouth with pursed lips\\n5. Repeat for 5 minutes, returning attention to breath when mind wanders","researchIds":["stanford_huberman_2023","breathing_stress_meta_2022"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_002_box_breathing","title":"4-4-4-4 Box Breathing","description":"Equal-count breathing pattern that activates parasympathetic nervous system for immediate calm","timeMinutes":3,"category":"stress","goalTags":["reduce_stress","improve_focus","reduce_anxiety"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Inhale for 4 counts through nose\\n2. Hold breath for 4 counts\\n3. Exhale for 4 counts through mouth\\n4. Hold empty for 4 counts\\n5. Repeat cycle 6-8 times\\n6. Can be done anywhere, including meetings","researchIds":["breathing_autonomic_2021","workplace_stress_pmr_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_003_desk_body_scan","title":"3-Minute Desk Body Scan","description":"Office-friendly mindfulness practice that reduces tension without requiring movement or closing eyes","timeMinutes":3,"category":"stress","goalTags":["reduce_stress","improve_focus","muscle_tension_relief"],"lifestyleTags":["professional"],"timeTags":["morning","lunch","flexible"],"instructions":"1. Sit normally at desk, maintain soft gaze at screen\\n2. Notice feet on floor, weight in chair\\n3. Mentally scan from toes up to head\\n4. Notice tension without trying to change it\\n5. Breathe normally, return attention when mind wanders\\n6. Can appear like normal work to others","researchIds":["workplace_mindfulness_meta_2019","body_scan_stress_2018"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_004_five_senses_grounding","title":"5-4-3-2-1 Sensory Grounding","description":"Anxiety interruption technique using immediate sensory awareness to break stress spirals","timeMinutes":3,"category":"stress","goalTags":["reduce_anxiety","improve_focus","emotional_regulation"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Name 5 things you can see\\n2. Name 4 things you can touch\\n3. Name 3 things you can hear\\n4. Name 2 things you can smell\\n5. Name 1 thing you can taste\\n6. Take three deep breaths\\n7. Notice how your anxiety has shifted","researchIds":["grounding_anxiety_2022","sensory_awareness_stress_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_005_family_breathing_buddies","title":"Family Breathing Buddies","description":"Parent-child co-regulation using stuffed animals to make breathing exercises engaging for families","timeMinutes":5,"category":"stress","goalTags":["reduce_stress","family_bonding","emotional_regulation"],"lifestyleTags":["parent"],"timeTags":["evening","flexible"],"instructions":"1. Each person chooses a stuffed animal \'breathing buddy\'\\n2. Lie down with buddy on chest\\n3. Breathe slowly, watching buddy rise and fall\\n4. Count breaths together: in for 3, out for 4\\n5. If child\'s mind wanders, gently return focus to buddy\\n6. End with gratitude for calm time together","researchIds":["family_stress_reduction_2021","child_breathing_2019"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"stress_006_progressive_muscle_micro","title":"Micro Progressive Muscle Relaxation","description":"Shortened PMR focusing on shoulders, jaw, and hands - areas where stress accumulates most","timeMinutes":5,"category":"stress","goalTags":["reduce_stress","muscle_tension_relief","improve_sleep"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening","flexible"],"instructions":"1. Sit or lie comfortably\\n2. Tense shoulders toward ears for 5 seconds, release\\n3. Clench jaw muscles for 5 seconds, release and let jaw drop\\n4. Make fists for 5 seconds, release and spread fingers\\n5. Notice the contrast between tension and relaxation\\n6. Take 3 deep breaths focusing on the relaxed feeling","researchIds":["pmr_workplace_2020","pmr_stress_meta_2024"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_007_workplace_micro_retreat","title":"Workplace Micro-Retreat","description":"Strategic 2-minute break between meetings to reset nervous system and prevent stress accumulation","timeMinutes":2,"category":"stress","goalTags":["reduce_stress","improve_focus","prevent_burnout"],"lifestyleTags":["professional"],"timeTags":["flexible"],"instructions":"1. Close laptop/turn away from screen\\n2. Take 5 deep breaths, exhaling stress from last meeting\\n3. Set intention for next meeting in one word (calm, focused, creative)\\n4. Roll shoulders back, sit up straight\\n5. Drink water mindfully\\n6. Brief positive self-talk: \'I\'m prepared and capable\'","researchIds":["meeting_transition_stress_2022","workplace_breaks_2021"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_008_cognitive_reframe_quick","title":"Quick Cognitive Reframe","description":"Evidence-based thought restructuring technique for immediate stress situations","timeMinutes":3,"category":"stress","goalTags":["reduce_stress","improve_mood","emotional_regulation"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Notice the stressful thought\\n2. Ask: \'Is this thought helpful right now?\'\\n3. Ask: \'What would I tell a good friend in this situation?\'\\n4. Reframe with 3 alternatives: What else could this mean?\\n5. Choose the most balanced, realistic perspective\\n6. Take action based on new perspective","researchIds":["cognitive_reframing_stress_2023","workplace_cbt_2021"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"stress_009_gratitude_micro","title":"2-Minute Gratitude Reset","description":"Rapid gratitude practice that shifts brain chemistry toward positive emotion","timeMinutes":2,"category":"stress","goalTags":["improve_mood","reduce_stress","increase_positivity"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","evening","flexible"],"instructions":"1. Identify 3 specific things you\'re grateful for right now\\n2. Focus on WHY you\'re grateful for each (not just what)\\n3. Notice the physical sensation of gratitude in your body\\n4. Send mental appreciation to one person who helped you today\\n5. Set intention to notice one new thing to appreciate","researchIds":["gratitude_stress_2020","positive_psychology_workplace_2022"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"stress_010_nature_visualization","title":"Nature Visualization Escape","description":"Mental imagery technique using nature scenes to activate relaxation response","timeMinutes":5,"category":"stress","goalTags":["reduce_stress","improve_mood","attention_restoration"],"lifestyleTags":["professional","parent","student"],"timeTags":["lunch","evening","flexible"],"instructions":"1. Close eyes and imagine a peaceful natural place\\n2. Engage all senses: What do you see, hear, smell, feel?\\n3. Imagine breathing in the fresh air\\n4. Feel your body relaxing in this safe space\\n5. Stay here for 5 minutes, returning when mind wanders\\n6. Before opening eyes, set intention to carry this calm forward","researchIds":["nature_imagery_stress_2021","attention_restoration_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"productivity_001_three_priority_evening","title":"3-Priority Evening Write-Down","description":"Handwritten goal-setting practice that increases achievement by 33% according to research","timeMinutes":5,"category":"productivity","goalTags":["improve_focus","goal_achievement","reduce_mental_clutter"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Use pen and paper (not digital)\\n2. Write tomorrow\'s date at top\\n3. List 3 most important tasks for tomorrow\\n4. Write WHY each task matters\\n5. Identify potential obstacles for each\\n6. Plan specific start time for priority #1\\n7. Review briefly, then close notebook","researchIds":["written_goals_achievement_2018","planning_productivity_2020"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"productivity_002_pomodoro_nature","title":"Pomodoro with Nature Breaks","description":"25-minute focused work sessions with 5-minute nature-viewing breaks for optimal attention restoration","timeMinutes":30,"category":"productivity","goalTags":["improve_focus","attention_restoration","productivity"],"lifestyleTags":["professional","student"],"timeTags":["morning","flexible"],"instructions":"1. Set timer for 25 minutes of focused work\\n2. Remove all distractions and work on single task\\n3. When timer rings, take 5-minute break looking at nature\\n4. Options: window view, outdoor walk, nature photos/videos\\n5. Avoid screens during break\\n6. Repeat cycle 3-4 times, then take longer break","researchIds":["attention_restoration_kaplan_2009","pomodoro_effectiveness_2018"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"productivity_003_email_batching","title":"Strategic Email Batching","description":"Process emails 3x daily to reduce stress and improve focus, based on UC Irvine research","timeMinutes":20,"category":"productivity","goalTags":["reduce_stress","improve_focus","time_management"],"lifestyleTags":["professional"],"timeTags":["morning","lunch","evening"],"instructions":"1. Check email only 3 times: 9am, 1pm, 5pm\\n2. Turn off all email notifications between sessions\\n3. During each session: Delete, Delegate, Do (2-min rule), or Defer\\n4. Respond to urgent items first\\n5. Use templates for common responses\\n6. Set auto-responder explaining response timeline","researchIds":["email_stress_kushlev_2016","batching_productivity_2021"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"productivity_004_walking_meetings","title":"Walking Meetings","description":"Move meetings outdoors to boost creativity by 60% and energy simultaneously","timeMinutes":30,"category":"productivity","goalTags":["increase_creativity","improve_focus","increase_energy"],"lifestyleTags":["professional"],"timeTags":["morning","lunch","flexible"],"instructions":"1. Suggest walking meetings for brainstorming/1-on-1s\\n2. Choose safe, familiar route with minimal street crossings\\n3. Bring phone/notepad for key points\\n4. Start with 5-minute indoor brief if needed\\n5. Walk side-by-side at comfortable pace\\n6. Summarize decisions before returning","researchIds":["walking_creativity_stanford_2014","movement_cognition_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"productivity_005_digital_sunset","title":"Digital Sunset Ritual","description":"30-minute screen shutdown before bed to improve sleep quality and next-day focus","timeMinutes":30,"category":"productivity","goalTags":["improve_sleep","improve_focus","reduce_blue_light"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Set all devices to \'Do Not Disturb\' 30 minutes before bed\\n2. Plug devices into charging station outside bedroom\\n3. Use this time for: reading, journaling, gentle stretching\\n4. Dim lights to 50% or less\\n5. Prepare for tomorrow (clothes, keys, etc.)\\n6. Practice gratitude or reflection","researchIds":["blue_light_sleep_2020","digital_detox_productivity_2021"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"productivity_006_meeting_prep_ritual","title":"2-Minute Meeting Prep","description":"Brief preparation ritual that improves meeting effectiveness and reduces anxiety","timeMinutes":2,"category":"productivity","goalTags":["improve_focus","reduce_anxiety","meeting_effectiveness"],"lifestyleTags":["professional"],"timeTags":["flexible"],"instructions":"1. Review agenda and your goals for the meeting\\n2. Write 1-2 key points you want to contribute\\n3. Take 3 deep breaths\\n4. Set positive intention (listen actively, contribute value)\\n5. Gather materials needed\\n6. Arrive 2 minutes early to settle in","researchIds":["meeting_preparation_effectiveness_2020","workplace_anxiety_2021"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"productivity_007_deep_work_blocks","title":"90-Minute Deep Work Block","description":"Align work sessions with natural ultradian rhythms for maximum cognitive performance","timeMinutes":90,"category":"productivity","goalTags":["improve_focus","deep_work","cognitive_performance"],"lifestyleTags":["professional","student"],"timeTags":["morning","flexible"],"instructions":"1. Block 90 minutes for most important work\\n2. Choose your peak energy time (often morning)\\n3. Eliminate all distractions: phone, notifications, interruptions\\n4. Work on single, cognitively demanding task\\n5. Take 20-minute break after session\\n6. Limit to 2 deep work blocks per day maximum","researchIds":["ultradian_rhythms_performance_2019","deep_work_newport_2016"],"isCustom":false,"difficulty":"advanced","equipment":"none"},{"id":"productivity_008_task_switching_prevention","title":"Task Switching Prevention","description":"Systematic approach to reduce 40% productivity loss from multitasking","timeMinutes":5,"category":"productivity","goalTags":["improve_focus","reduce_mental_fatigue","productivity"],"lifestyleTags":["professional","student"],"timeTags":["flexible"],"instructions":"1. Before starting work, write current task at top of page\\n2. When urge to switch tasks arises, write it down instead\\n3. Set specific times to check this \'later list\'\\n4. Use physical or mental cue to return to main task\\n5. Celebrate completing one task before starting next\\n6. Review patterns weekly to improve focus","researchIds":["task_switching_costs_2020","multitasking_productivity_2019"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"productivity_009_energy_based_scheduling","title":"Energy-Based Task Scheduling","description":"Match tasks to natural energy patterns for 25% productivity improvement","timeMinutes":10,"category":"productivity","goalTags":["increase_energy","productivity","time_management"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Track energy levels hourly for one week\\n2. Identify your peak, good, and low energy times\\n3. Schedule cognitively demanding work during peak times\\n4. Use low energy times for routine tasks (email, filing)\\n5. Plan breaks before energy crashes\\n6. Adjust schedule weekly based on patterns","researchIds":["circadian_productivity_2021","energy_management_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"productivity_010_weekly_review_ritual","title":"Weekly Review Ritual","description":"Systematic weekly reflection that improves goal achievement and reduces overwhelm","timeMinutes":20,"category":"productivity","goalTags":["goal_achievement","reduce_overwhelm","continuous_improvement"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Review past week: what worked well, what didn\'t\\n2. Clear all inboxes (email, notes, tasks)\\n3. Update project status and next actions\\n4. Plan upcoming week\'s priorities\\n5. Identify potential obstacles and solutions\\n6. Set 1-3 main goals for next week","researchIds":["weekly_review_productivity_2019","reflection_performance_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"health_001_stair_sprint_snack","title":"Stair Sprint Exercise Snack","description":"Vigorous stair climbing for 2 minutes improves cardiovascular fitness by 5% in 6 weeks","timeMinutes":2,"category":"health","goalTags":["cardiovascular_fitness","increase_energy","quick_exercise"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","lunch","flexible"],"instructions":"1. Find staircase with at least 2 flights\\n2. Warm up: walk up stairs normally once\\n3. Sprint up stairs as fast as safely possible\\n4. Walk down slowly to recover\\n5. Repeat 3-4 times total\\n6. Cool down with normal walking for 30 seconds","researchIds":["exercise_snacks_mcmaster_2021","stair_climbing_fitness_2019"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"health_002_microwave_movement","title":"Microwave Movement Circuit","description":"Kitchen-based exercises during food preparation to accumulate daily activity","timeMinutes":3,"category":"health","goalTags":["increase_daily_movement","improve_strength","habit_stacking"],"lifestyleTags":["professional","parent"],"timeTags":["flexible"],"instructions":"1. While food heats, start movement circuit\\n2. 30 seconds each: counter push-ups, calf raises, standing marches\\n3. 30 seconds: arm circles and shoulder rolls\\n4. 30 seconds: bodyweight squats or wall sits\\n5. 30 seconds: gentle spinal twists\\n6. Time should match microwave cooking time","researchIds":["incidental_exercise_2020","kitchen_fitness_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_003_hourly_posture_reset","title":"Hourly Posture Reset","description":"Systematic muscle releases prevent 72% of workplace musculoskeletal pain","timeMinutes":2,"category":"health","goalTags":["reduce_back_pain","improve_posture","prevent_injury"],"lifestyleTags":["professional"],"timeTags":["flexible"],"instructions":"1. Set hourly reminder on phone/computer\\n2. Stand and reach arms overhead, stretch spine\\n3. Roll shoulders backward 5 times\\n4. Turn head gently left and right\\n5. Do 5 gentle neck stretches (ear to shoulder)\\n6. Take 3 deep breaths before sitting","researchIds":["workplace_ergonomics_2021","posture_pain_prevention_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_004_family_dance_break","title":"Family Dance Break","description":"Joyful movement with dual parent-child benefits for fitness and bonding","timeMinutes":4,"category":"health","goalTags":["family_bonding","cardiovascular_fitness","improve_mood"],"lifestyleTags":["parent"],"timeTags":["evening","flexible"],"instructions":"1. Choose upbeat song everyone likes\\n2. Clear safe space in living room\\n3. Dance freely - no choreography needed\\n4. Encourage silly moves and laughter\\n5. High-five everyone at the end\\n6. Make it a daily tradition (after dinner works well)","researchIds":["family_physical_activity_2021","dance_mood_benefits_2020"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"health_005_walking_back_burpees","title":"Walking-Back Burpees","description":"Joint-friendly modification that maintains cardiovascular benefits while reducing impact","timeMinutes":5,"category":"health","goalTags":["cardiovascular_fitness","full_body_strength","joint_friendly"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","flexible"],"instructions":"1. Start standing, step back into plank position\\n2. Do push-up (modify on knees if needed)\\n3. Step feet forward one at a time\\n4. Stand up and reach arms overhead\\n5. Repeat for 5 minutes, focusing on form\\n6. Rest 30 seconds every minute if needed","researchIds":["low_impact_hiit_2020","bodyweight_exercise_2019"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"health_006_desk_yoga_flow","title":"Desk Yoga Flow","description":"Chair-based yoga sequence that improves flexibility and reduces tension","timeMinutes":8,"category":"health","goalTags":["improve_flexibility","reduce_tension","stress_relief"],"lifestyleTags":["professional"],"timeTags":["lunch","flexible"],"instructions":"1. Seated spinal twist: hold each side 30 seconds\\n2. Seated forward fold: reach toward floor\\n3. Seated backbend: hands behind head, open chest\\n4. Neck rolls: 5 in each direction\\n5. Shoulder blade squeezes: 10 repetitions\\n6. Ankle circles: 10 each direction\\n7. End with 3 deep breaths","researchIds":["workplace_yoga_2020","desk_stretching_benefits_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_007_walking_meeting_prep","title":"Pre-Meeting Walking Warm-up","description":"5-minute walk before important meetings to boost cognitive performance","timeMinutes":5,"category":"health","goalTags":["improve_focus","increase_energy","meeting_preparation"],"lifestyleTags":["professional"],"timeTags":["flexible"],"instructions":"1. Walk briskly for 5 minutes before important meetings\\n2. Focus on rhythmic breathing\\n3. Use time to mentally prepare talking points\\n4. Swing arms naturally to increase circulation\\n5. Return 2 minutes before meeting starts\\n6. Notice improved alertness and confidence","researchIds":["walking_cognition_2020","pre_meeting_preparation_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_008_wall_push_intervals","title":"Wall Push-Up Intervals","description":"Office-friendly strength exercise that can be done in professional attire","timeMinutes":3,"category":"health","goalTags":["improve_strength","quick_exercise","office_friendly"],"lifestyleTags":["professional"],"timeTags":["flexible"],"instructions":"1. Stand arm\'s length from wall\\n2. Place palms flat against wall, shoulder-width apart\\n3. Do push-ups against wall for 30 seconds\\n4. Rest 30 seconds\\n5. Repeat 3 times total\\n6. Gradually increase difficulty by stepping further from wall","researchIds":["wall_exercise_effectiveness_2020","office_strength_training_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_009_breathing_core_activation","title":"Breathing Core Activation","description":"Combine deep breathing with core engagement for posture and stability","timeMinutes":5,"category":"health","goalTags":["improve_posture","core_strength","breathing_improvement"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","flexible"],"instructions":"1. Lie on back or sit tall in chair\\n2. Place one hand on chest, one on belly\\n3. Breathe in slowly, expanding belly (not chest)\\n4. As you exhale, gently draw belly button toward spine\\n5. Hold core engagement for 5 seconds\\n6. Repeat 10 times, focusing on control","researchIds":["core_breathing_connection_2020","diaphragmatic_breathing_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"health_010_lunch_walk_ritual","title":"Lunch Walk Ritual","description":"Daily 15-minute walk during lunch break for physical and mental health benefits","timeMinutes":15,"category":"health","goalTags":["increase_daily_movement","improve_mood","attention_restoration"],"lifestyleTags":["professional"],"timeTags":["lunch"],"instructions":"1. Block 15 minutes of lunch break for walking\\n2. Choose pleasant route with greenery if possible\\n3. Leave phone behind or on silent\\n4. Walk at moderate pace, focusing on surroundings\\n5. Practice gratitude or mindfulness while walking\\n6. Return feeling refreshed for afternoon work","researchIds":["lunch_break_walking_2021","nature_workplace_wellness_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"energy_001_nasa_power_nap","title":"NASA Power Nap Protocol","description":"26-minute scientifically optimized nap improves performance 34% and alertness 54%","timeMinutes":26,"category":"energy","goalTags":["increase_alertness","improve_performance","energy_restoration"],"lifestyleTags":["professional","parent"],"timeTags":["lunch","flexible"],"instructions":"1. Find quiet, dark space or use eye mask\\n2. Set alarm for exactly 26 minutes\\n3. Lie down or recline comfortably\\n4. Focus on breathing, don\'t force sleep\\n5. Even resting without sleeping provides benefits\\n6. Upon waking, expose yourself to bright light","researchIds":["nasa_nap_study_1995","power_nap_performance_2020"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"energy_002_morning_light_exposure","title":"Morning Light Exposure","description":"5-15 minutes of morning light within 60 minutes of waking optimizes circadian rhythm","timeMinutes":10,"category":"energy","goalTags":["circadian_optimization","increase_energy","improve_sleep"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning"],"instructions":"1. Go outside within 30-60 minutes of waking\\n2. Face east (toward sunrise) without sunglasses\\n3. Don\'t stare directly at sun - general direction is enough\\n4. 5 minutes on bright days, 10-15 on cloudy days\\n5. Can be combined with morning walk or coffee\\n6. Maintain routine even on weekends","researchIds":["circadian_light_therapy_2021","morning_light_sleep_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"energy_003_cold_shower_protocol","title":"Cold Shower Energy Protocol","description":"30-90 seconds of cold water provides energy boost and reduces sick days by 29%","timeMinutes":2,"category":"energy","goalTags":["increase_energy","improve_immune_function","stress_resilience"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning"],"instructions":"1. Start with normal warm shower\\n2. Gradually turn water to cold over 30 seconds\\n3. Stay under cold water for 30-90 seconds\\n4. Focus on controlled breathing, don\'t hyperventilate\\n5. End shower or return to warm water\\n6. Notice energy boost that lasts hours","researchIds":["cold_shower_study_plos_2016","cold_exposure_energy_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"energy_004_strategic_hydration","title":"Strategic Hydration Protocol","description":"Timed water intake to maintain optimal hydration and energy throughout day","timeMinutes":1,"category":"energy","goalTags":["increase_energy","improve_cognitive_function","prevent_fatigue"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Drink 500ml (16oz) water immediately upon waking\\n2. Drink 250ml (8oz) every 90 minutes throughout day\\n3. Stop drinking 2 hours before bedtime\\n4. Add pinch of sea salt if sweating heavily\\n5. Monitor urine color - aim for pale yellow\\n6. Increase intake on hot days or with exercise","researchIds":["hydration_cognitive_performance_2020","water_energy_levels_2019"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"energy_005_afternoon_energy_rescue","title":"Afternoon Energy Rescue","description":"5-minute protocol to combat the natural 2-4pm energy dip","timeMinutes":5,"category":"energy","goalTags":["overcome_afternoon_fatigue","improve_alertness","productivity"],"lifestyleTags":["professional","parent","student"],"timeTags":["lunch"],"instructions":"1. Step outside or near bright window\\n2. Do 20 jumping jacks or marching in place\\n3. Take 10 deep breaths of fresh air\\n4. Drink 8oz cold water\\n5. Splash cold water on wrists and face\\n6. Set intention for productive afternoon","researchIds":["circadian_alertness_2020","afternoon_fatigue_solutions_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"energy_006_caffeine_timing_optimization","title":"Caffeine Timing Optimization","description":"Strategic caffeine consumption aligned with cortisol patterns for maximum energy","timeMinutes":5,"category":"energy","goalTags":["optimize_caffeine_effects","improve_sleep","sustained_energy"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning","lunch"],"instructions":"1. Wait 90-120 minutes after waking before first caffeine\\n2. Have caffeine during cortisol dips: 9:30-11:30am, 1:30-5pm\\n3. Avoid caffeine 8-10 hours before bedtime\\n4. Limit to 400mg daily (about 4 cups coffee)\\n5. Have last caffeine by 2pm for 10pm bedtime\\n6. Monitor sleep quality and adjust timing","researchIds":["caffeine_circadian_timing_2021","coffee_sleep_research_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"energy_007_breathing_energy_boost","title":"Energizing Breath Protocol","description":"Rapid breathing technique for immediate energy without caffeine","timeMinutes":3,"category":"energy","goalTags":["increase_alertness","natural_energy_boost","oxygen_optimization"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Sit or stand with straight spine\\n2. Take 30 rapid, shallow breaths through nose\\n3. Breathe in and out quickly like panting dog\\n4. After 30 breaths, take deep breath and hold 15 seconds\\n5. Exhale slowly and breathe normally\\n6. Notice increased alertness and energy","researchIds":["breathing_alertness_2021","hyperventilation_energy_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"energy_008_micro_meditation_energy","title":"Micro-Meditation for Energy","description":"Brief mindfulness practice that restores mental energy without drowsiness","timeMinutes":5,"category":"energy","goalTags":["mental_energy_restoration","improve_focus","reduce_fatigue"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Sit with eyes open, soft gaze downward\\n2. Focus on breath without changing it\\n3. When mind wanders, gently return to breath\\n4. Notice energy in your body\\n5. Visualize energy flowing from core to extremities\\n6. End by setting intention for next activity","researchIds":["mindfulness_energy_2020","meditation_alertness_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"energy_009_posture_energy_connection","title":"Posture-Energy Reset","description":"Improve posture to increase energy and confidence through embodied cognition","timeMinutes":2,"category":"energy","goalTags":["increase_energy","improve_confidence","better_posture"],"lifestyleTags":["professional","parent","student"],"timeTags":["flexible"],"instructions":"1. Stand against wall with back flat\\n2. Pull shoulder blades down and back\\n3. Lengthen neck, chin slightly tucked\\n4. Engage core, feel energy rising through spine\\n5. Step away from wall, maintain posture\\n6. Notice increased alertness and confidence","researchIds":["posture_energy_connection_2020","embodied_cognition_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"energy_010_vitamin_d_sunlight","title":"Vitamin D Sunlight Exposure","description":"Strategic sun exposure for vitamin D synthesis and energy optimization","timeMinutes":15,"category":"energy","goalTags":["vitamin_d_synthesis","improve_mood","increase_energy"],"lifestyleTags":["professional","parent","student"],"timeTags":["lunch","flexible"],"instructions":"1. Expose arms and legs to direct sunlight\\n2. 10-15 minutes for fair skin, 20-30 for darker skin\\n3. Before 10am or after 4pm to avoid burning\\n4. Don\'t use sunscreen during this brief exposure\\n5. Combine with outdoor lunch or walking\\n6. Supplement with vitamin D in winter months","researchIds":["vitamin_d_energy_2021","sunlight_mood_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"sleep_001_four_seven_eight_breathing","title":"4-7-8 Breathing for Sleep","description":"Activates parasympathetic nervous system for faster sleep onset","timeMinutes":5,"category":"sleep","goalTags":["improve_sleep_onset","reduce_anxiety","relaxation"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Lie in bed in comfortable position\\n2. Exhale completely through mouth\\n3. Inhale through nose for 4 counts\\n4. Hold breath for 7 counts\\n5. Exhale through mouth for 8 counts\\n6. Repeat cycle 4 times total","researchIds":["478_breathing_sleep_2020","breathing_sleep_onset_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"sleep_002_temperature_optimization","title":"Precision Temperature Control","description":"Optimize bedroom temperature - research shows 0.06% sleep efficiency decrease per degree above 68\xb0F","timeMinutes":5,"category":"sleep","goalTags":["improve_sleep_quality","optimize_sleep_environment","temperature_regulation"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Set bedroom temperature to 65-68\xb0F (18-20\xb0C)\\n2. Use breathable bedding materials\\n3. Take warm shower 1-2 hours before bed to trigger cooling\\n4. Use fan for air circulation\\n5. Wear minimal, loose clothing\\n6. Keep feet slightly warm with socks if needed","researchIds":["sleep_temperature_research_2020","bedroom_climate_study_2019"],"isCustom":false,"difficulty":"beginner","equipment":"minimal"},{"id":"sleep_003_blue_light_elimination","title":"Blue Light Elimination Protocol","description":"Complete device shutdown prevents 30+ minute delay in sleep onset","timeMinutes":30,"category":"sleep","goalTags":["reduce_blue_light","improve_sleep_onset","circadian_optimization"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Install blue light filters on all devices\\n2. Switch to red/amber lighting 1 hour before bed\\n3. No screens 30 minutes before sleep\\n4. Use analog alarm clock instead of phone\\n5. Read physical books or practice relaxation\\n6. Keep bedroom completely dark with blackout curtains","researchIds":["blue_light_sleep_disruption_2020","screen_time_circadian_2021"],"isCustom":false,"difficulty":"intermediate","equipment":"minimal"},{"id":"sleep_004_progressive_muscle_sleep","title":"Progressive Muscle Relaxation for Sleep","description":"Systematic muscle relaxation technique with consistent sleep improvement across studies","timeMinutes":15,"category":"sleep","goalTags":["improve_sleep_quality","reduce_tension","relaxation"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Lie in bed, start with toes\\n2. Tense each muscle group for 5 seconds, then release\\n3. Progress: feet, calves, thighs, glutes, abdomen, hands, arms, shoulders, face\\n4. Notice contrast between tension and relaxation\\n5. End with whole body tension for 5 seconds, then complete relaxation\\n6. Focus on heavy, relaxed feeling throughout body","researchIds":["pmr_sleep_improvement_2024","muscle_relaxation_insomnia_2020"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"sleep_005_family_wind_down","title":"Family Synchronized Wind-Down","description":"Dose-dependent benefits for all family members with coordinated evening routine","timeMinutes":30,"category":"sleep","goalTags":["family_sleep_routine","improve_sleep_quality","family_bonding"],"lifestyleTags":["parent"],"timeTags":["evening"],"instructions":"1. Start routine same time nightly (8pm for young kids)\\n2. Dim all lights throughout house\\n3. Turn off all screens family-wide\\n4. Quiet activities: reading, puzzles, gentle music\\n5. Each person shares one good thing from day\\n6. End with brief gratitude or relaxation practice","researchIds":["family_bedtime_routines_2021","child_sleep_consistency_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"sleep_006_sleep_hygiene_checklist","title":"Sleep Hygiene Optimization","description":"Evidence-based environmental and behavioral changes for better sleep","timeMinutes":10,"category":"sleep","goalTags":["improve_sleep_quality","optimize_sleep_environment","sleep_consistency"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Same bedtime and wake time daily (within 30 minutes)\\n2. No caffeine after 2pm\\n3. No large meals 3 hours before bed\\n4. Exercise earlier in day, not before bed\\n5. Use bedroom only for sleep and intimacy\\n6. If can\'t sleep within 20 minutes, get up and do quiet activity","researchIds":["sleep_hygiene_meta_analysis_2021","sleep_consistency_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"sleep_007_gratitude_sleep_practice","title":"Gratitude Sleep Practice","description":"Positive emotion before sleep improves sleep quality and next-day mood","timeMinutes":5,"category":"sleep","goalTags":["improve_sleep_quality","increase_gratitude","positive_emotions"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Lie in bed, close eyes\\n2. Think of 3 specific things you\'re grateful for from today\\n3. Focus on WHY you\'re grateful (not just what)\\n4. Feel the emotion of gratitude in your body\\n5. Send appreciation to people who helped you\\n6. End with appreciation for your bed and rest","researchIds":["gratitude_sleep_quality_2020","positive_emotion_sleep_2019"],"isCustom":false,"difficulty":"beginner","equipment":"none"},{"id":"sleep_008_caffeine_cutoff_protocol","title":"Strategic Caffeine Cutoff","description":"Precise timing to prevent sleep disruption while maintaining daytime alertness","timeMinutes":2,"category":"sleep","goalTags":["improve_sleep_quality","optimize_caffeine","circadian_optimization"],"lifestyleTags":["professional","parent","student"],"timeTags":["lunch"],"instructions":"1. Calculate bedtime minus 8-10 hours for caffeine cutoff\\n2. For 10pm bedtime: no caffeine after 12-2pm\\n3. Track sleep quality vs. caffeine timing for one week\\n4. Adjust cutoff time based on personal sensitivity\\n5. Replace afternoon caffeine with water, light, or movement\\n6. Consider green tea for gentler afternoon energy","researchIds":["caffeine_sleep_timing_2021","caffeine_half_life_research_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"},{"id":"sleep_009_bedroom_sanctuary_setup","title":"Bedroom Sanctuary Setup","description":"Environmental optimization based on sleep research for deep, restorative sleep","timeMinutes":15,"category":"sleep","goalTags":["optimize_sleep_environment","improve_sleep_quality","sleep_sanctuary"],"lifestyleTags":["professional","parent","student"],"timeTags":["evening"],"instructions":"1. Remove all electronic devices except alarm clock\\n2. Install blackout curtains or eye mask\\n3. Use white noise machine or earplugs\\n4. Keep room temperature 65-68\xb0F\\n5. Invest in comfortable mattress and pillows\\n6. Add calming scents like lavender (optional)","researchIds":["sleep_environment_optimization_2021","bedroom_setup_research_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"specific"},{"id":"sleep_010_morning_routine_sleep_prep","title":"Morning Routine for Better Sleep","description":"Morning behaviors that improve sleep quality 12-16 hours later","timeMinutes":10,"category":"sleep","goalTags":["circadian_optimization","improve_sleep_quality","morning_routine"],"lifestyleTags":["professional","parent","student"],"timeTags":["morning"],"instructions":"1. Wake up same time daily (within 30 minutes)\\n2. Get sunlight exposure within 30 minutes of waking\\n3. Avoid snooze button - get up immediately\\n4. Eat protein-rich breakfast within 2 hours\\n5. Exercise or move body within 4 hours of waking\\n6. Avoid long naps (limit to 20-26 minutes if needed)","researchIds":["morning_routine_sleep_2021","circadian_rhythm_optimization_2020"],"isCustom":false,"difficulty":"intermediate","equipment":"none"}]'),pl=JSON.parse('[{"id":"research-1","title":"The Science of Deep Breathing: How Controlled Breathing Reduces Stress","authors":["Dr. Sarah Johnson","Dr. Michael Chen"],"journal":"Journal of Stress Research","year":2023,"summary":"This comprehensive study examines the physiological and psychological effects of controlled breathing exercises on stress reduction. The research demonstrates significant improvements in stress markers and overall well-being.","tags":["stress","breathing","mindfulness","anxiety"],"difficulty":"beginner","readingTime":8,"url":"https://example.com/research/breathing-stress-reduction","keyFindings":["Controlled breathing activates the parasympathetic nervous system","Significant reduction in cortisol levels after 4 weeks of practice","Improved heart rate variability in 85% of participants"],"practicalApplications":["4-7-8 breathing technique for immediate stress relief","Box breathing for sustained focus","Belly breathing for general wellness"],"relatedHabits":["breathing-exercise","meditation","mindfulness"]},{"id":"research-2","title":"Progressive Muscle Relaxation: A Meta-Analysis of Clinical Effectiveness","authors":["Dr. Lisa Wang","Dr. Robert Taylor"],"journal":"Clinical Psychology Review","year":2023,"summary":"A comprehensive meta-analysis of 45 studies examining the effectiveness of progressive muscle relaxation techniques in treating anxiety, insomnia, and chronic stress.","tags":["stress","relaxation","muscle-tension","anxiety","sleep"],"difficulty":"intermediate","readingTime":12,"url":"https://example.com/research/progressive-muscle-relaxation","keyFindings":["78% reduction in anxiety symptoms across studies","Significant improvement in sleep quality","Effective for both acute and chronic stress management"],"practicalApplications":["15-20 minute daily PMR sessions","Focus on major muscle groups in sequence","Combine with deep breathing for enhanced effects"],"relatedHabits":["muscle-relaxation","stress-management","sleep-routine"]},{"id":"research-3","title":"The Neuroscience of Habit Formation: Building Sustainable Wellness Routines","authors":["Dr. Amanda Rodriguez","Dr. Kevin Park"],"journal":"Neuroscience & Behavioral Health","year":2023,"summary":"This study explores the neurological mechanisms behind habit formation and provides evidence-based strategies for creating sustainable wellness routines.","tags":["habits","neuroscience","behavior-change","wellness"],"difficulty":"advanced","readingTime":15,"url":"https://example.com/research/neuroscience-habits","keyFindings":["Habit formation involves specific neural pathways in the basal ganglia","Consistency is more important than duration for habit establishment","Environmental cues play a crucial role in habit maintenance"],"practicalApplications":["Start with micro-habits (2-5 minutes)","Use consistent environmental triggers","Track progress for neural reinforcement"],"relatedHabits":["any-habit","goal-setting","routine-building"]}]');class gl{constructor(e){this.dbName="sciencehabits-cms-cache",this.version=1,this.db=null,this.adminAuth=void 0,this.cacheExpiry=864e5,this.currentLanguage="en",this.adminAuth=e||new ml,this.initializeDB()}async initializeDB(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("cms_habits")){const e=t.createObjectStore("cms_habits",{keyPath:"id"});e.createIndex("status","status",{unique:!1}),e.createIndex("category","category",{unique:!1})}if(!t.objectStoreNames.contains("cms_research")){const e=t.createObjectStore("cms_research",{keyPath:"id"});e.createIndex("status","status",{unique:!1}),e.createIndex("category","category",{unique:!1})}t.objectStoreNames.contains("content_metadata")||t.createObjectStore("content_metadata",{keyPath:"key"})}})}async loadHabitsFromCMS(){try{const e=await this.getCachedContent("cms_habits");return e.length>0&&!this.isCacheExpired("habits")?(console.log("\u2705 Loaded ".concat(e.length," habits from CMS cache")),this.convertCMSHabitsToLegacyFormat(e)):(console.log("\ud83d\udcc1 Falling back to static habits.json"),await this.cacheStaticContent(),fl)}catch(e){return console.error("Failed to load habits from CMS:",e),fl}}async loadResearchFromCMS(){try{const e=await this.getCachedContent("cms_research");return e.length>0&&!this.isCacheExpired("research")?(console.log("\u2705 Loaded ".concat(e.length," research studies from CMS cache")),this.convertCMSResearchToLegacyFormat(e)):(console.log("\ud83d\udcc1 Falling back to static research_articles.json"),await this.cacheStaticContent(),pl)}catch(e){return console.error("Failed to load research from CMS:",e),pl}}async loadLocalizedContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";this.currentLanguage=e;try{const[t,n]=await Promise.all([this.getCachedContent("cms_habits"),this.getCachedContent("cms_research")]);return{habits:t,research:n,untranslatedContent:this.findUntranslatedContent([...t,...n],e),metadata:{language:e,version:"1.0.0",lastUpdated:new Date,translationCompleteness:this.calculateTranslationCompleteness([...t,...n],e)}}}catch(t){return console.error("Failed to load localized content:",t),this.createFallbackLocalizedContent()}}async getUntranslatedWarnings(e){return(await this.loadLocalizedContent(e)).untranslatedContent.map(e=>({contentType:e.contentType,contentId:e.contentId,missingFields:e.missingFields,fallbackUsed:!0,originalLanguage:"en"}))}async subscribeToCMSUpdates(){setInterval(async()=>{try{await this.checkForContentUpdates()}catch(e){console.warn("Failed to check for content updates:",e)}},3e5)}async syncContentUpdates(){try{console.log("\ud83d\udd04 Syncing content updates from CMS..."),await this.updateCacheMetadata("habits",new Date),await this.updateCacheMetadata("research",new Date),console.log("\u2705 Content sync completed")}catch(e){throw console.error("Content sync failed:",e),e}}async searchContent(e,t,n){await this.adminAuth.requirePermission(e,"read");const r="habits"===e?"cms_habits":"cms_research",i=await this.getCachedContent(r);let s=i;if(t){const e=t.toLowerCase();s=i.filter(t=>this.extractSearchableText(t).toLowerCase().includes(e))}return n&&(s=this.applyContentFilters(s,n)),{items:s,total:s.length,facets:this.generateSearchFacets(i)}}async getContentById(e,t){const n="habits"===e?"cms_habits":"cms_research";return this.db?new Promise(e=>{const r=this.db.transaction([n],"readonly").objectStore(n).get(t);r.onsuccess=()=>e(r.result||null),r.onerror=()=>e(null)}):null}async cacheStaticContent(){try{const e=this.convertLegacyHabitsToCMSFormat(fl),t=this.convertLegacyResearchToCMSFormat(pl);await Promise.all([this.setCachedContent("cms_habits",e),this.setCachedContent("cms_research",t),this.updateCacheMetadata("habits",new Date),this.updateCacheMetadata("research",new Date)]),console.log("\u2705 Static content cached successfully")}catch(e){console.error("Failed to cache static content:",e)}}async getCachedContent(e){return this.db?new Promise(t=>{const n=this.db.transaction([e],"readonly").objectStore(e).getAll();n.onsuccess=()=>t(n.result||[]),n.onerror=()=>t([])}):[]}async setCachedContent(e,t){if(this.db)return new Promise((n,r)=>{const i=this.db.transaction([e],"readwrite"),s=i.objectStore(e);s.clear(),t.forEach(e=>s.add(e)),i.oncomplete=()=>n(),i.onerror=()=>r(i.error)})}async updateCacheMetadata(e,t){if(this.db)return new Promise((n,r)=>{const i=this.db.transaction(["content_metadata"],"readwrite").objectStore("content_metadata"),s={key:"".concat(e,"_metadata"),lastUpdated:t,version:"1.0.0"},a=i.put(s);a.onsuccess=()=>n(),a.onerror=()=>r(a.error)})}isCacheExpired(e){return!1}async checkForContentUpdates(){console.log("\ud83d\udd0d Checking for content updates...")}convertCMSHabitsToLegacyFormat(e){return e.filter(e=>"published"===e.status).map(e=>({id:e.id,title:this.getLocalizedText(e.title),description:this.getLocalizedText(e.description),instructions:this.getLocalizedText(e.instructions),timeMinutes:e.timeMinutes,category:e.category,goalTags:e.goalTags,lifestyleTags:[],timeTags:[],researchIds:e.researchStudies,isCustom:!1,difficulty:"beginner",equipment:"none",frequency:{type:"daily"},reminders:{enabled:!1,periodicReminderDays:7}}))}convertCMSResearchToLegacyFormat(e){return e.filter(e=>"published"===e.status).map(e=>({id:e.id,title:e.title,authors:e.authors,year:e.year,journal:e.journal,summary:this.getLocalizedText(e.summary),finding:this.getLocalizedText(e.finding),sampleSize:100,studyType:"observational",category:e.category,fullCitation:e.citation}))}convertLegacyHabitsToCMSFormat(e){return e.map(e=>({id:e.id,title:{en:e.title},description:{en:e.description},instructions:{en:e.instructions},timeMinutes:e.timeMinutes,category:e.category,goalTags:e.goalTags,researchStudies:e.researchIds||[],status:"published",isVerified:!0,createdAt:new Date,updatedAt:new Date,createdBy:"system",lastModifiedBy:"system",version:1}))}convertLegacyResearchToCMSFormat(e){return e.map(e=>({id:e.id,title:e.title,authors:e.authors,year:e.year,journal:e.journal,citation:e.fullCitation||"",summary:{en:e.summary},finding:{en:e.finding},category:e.category,evidenceLevel:"observational",qualityScore:75,validatedAt:new Date,citationStatus:"valid",relatedStudies:[],status:"published",createdAt:new Date,updatedAt:new Date,createdBy:"system",lastModifiedBy:"system",version:1}))}getLocalizedText(e){return"string"===typeof e?e:e&&"object"===typeof e&&(e[this.currentLanguage]||e.en)||""}findUntranslatedContent(e,t){if("en"===t)return[];const n=[];return e.forEach(e=>{const r=[];["title","description","instructions","summary","finding"].forEach(n=>{const i=e[n];i&&"object"===typeof i&&!i[t]&&r.push(n)}),r.length>0&&n.push({contentType:"title"in e?"habit":"research",contentId:e.id,title:this.getLocalizedText(e.title),missingFields:r,priority:r.length>2?"high":"medium"})}),n}calculateTranslationCompleteness(e,t){if("en"===t)return 100;const n=this.findUntranslatedContent(e,t),r=e.length,i=r-n.length;return r>0?Math.round(i/r*100):100}createFallbackLocalizedContent(){return{habits:this.convertLegacyHabitsToCMSFormat(fl),research:this.convertLegacyResearchToCMSFormat(pl),untranslatedContent:[],metadata:{language:"en",version:"1.0.0",lastUpdated:new Date,translationCompleteness:100}}}extractSearchableText(e){return["title","description","instructions","summary","finding","authors"].map(t=>this.getLocalizedText(e[t])||e[t]||"").join(" ")}applyContentFilters(e,t){return e.filter(e=>{if(t.status&&!t.status.includes(e.status))return!1;if(t.category&&!t.category.includes(e.category))return!1;if(t.dateRange){const n=new Date(e.createdAt);if(n<t.dateRange.start||n>t.dateRange.end)return!1}return!0})}generateSearchFacets(e){const t=new Map,n=new Map,r=new Map;return e.forEach(e=>{const i=e.category;i&&t.set(i,(t.get(i)||0)+1);const s=e.status;s&&n.set(s,(n.get(s)||0)+1);const a=e.authors;a&&r.set(a,(r.get(a)||0)+1)}),{categories:Array.from(t.entries()).map(e=>{let[t,n]=e;return{name:t,count:n}}),statuses:Array.from(n.entries()).map(e=>{let[t,n]=e;return{name:t,count:n}}),authors:Array.from(r.entries()).map(e=>{let[t,n]=e;return{name:t,count:n}})}}}class yl{constructor(e,t){this.dbName="sciencehabits-json-workflow",this.version=1,this.db=null,this.adminAuth=void 0,this.contentManager=void 0,this.adminAuth=e,this.contentManager=t,this.initializeDB()}async initializeDB(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("upload_history")){const e=t.createObjectStore("upload_history",{keyPath:"uploadId"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("contentType","contentType",{unique:!1})}if(!t.objectStoreNames.contains("content_snapshots")){t.createObjectStore("content_snapshots",{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}t.objectStoreNames.contains("duplicate_cache")||t.createObjectStore("duplicate_cache",{keyPath:"key"})}})}async uploadFile(e,t){try{await this.adminAuth.requirePermission(t,"create");const r=this.generateUploadId();console.log("\ud83d\udce4 Starting JSON upload: ".concat(e.name," (").concat(t,")"));const i=await this.readFileContent(e);let s;try{s=JSON.parse(i)}catch(n){return{success:!1,uploadId:r,fileName:e.name,recordCount:0,errors:[{message:"Invalid JSON format: "+n.message,severity:"error"}],warnings:[]}}const a=await this.validateJSONStructure(s,t);if(!a.success)return{success:!1,uploadId:r,fileName:e.name,recordCount:Array.isArray(s)?s.length:0,errors:a.errors,warnings:a.warnings};const o=await this.detectDuplicates(s,t);return await this.saveUploadRecord(r,e.name,t,s,o),console.log("\u2705 JSON upload validated: ".concat(s.length," records, ").concat(o.exactDuplicates.length," exact duplicates")),{success:!0,uploadId:r,fileName:e.name,recordCount:s.length,errors:a.errors,warnings:a.warnings,duplicates:o}}catch(n){return console.error("JSON upload failed:",n),{success:!1,uploadId:"",fileName:e.name,recordCount:0,errors:[{message:"Upload failed: "+n.message,severity:"error"}],warnings:[]}}}async validateJSONStructure(e,t){const n=[],r=[];return Array.isArray(e)?(e.forEach((e,i)=>{"habits"===t?this.validateHabitRecord(e,i,n,r):this.validateResearchRecord(e,i,n,r)}),{success:0===n.length,errors:n,warnings:r}):(n.push({message:"JSON must contain an array of objects",severity:"error"}),{success:!1,errors:n,warnings:r})}async detectDuplicates(e,t){const n="habits"===t?await this.contentManager.getCachedContent("cms_habits"):await this.contentManager.getCachedContent("cms_research"),r=[],i=[],s=[],a=[];return e.forEach((e,o)=>{n.forEach(n=>{const l=this.compareItems(e,n,o,t);if(l){switch(l.matchType){case"exact":r.push(l);break;case"likely":i.push(l);break;case"suspicious":s.push(l)}const t=this.findConflicts(e,n);a.push(...t)}})}),{exactDuplicates:r,likelyDuplicates:i,suspiciousMatches:s,conflicts:a}}async previewChanges(e){const t=await this.getUploadRecord(e);if(!t)throw new Error("Upload record not found");const{data:n,duplicates:r}=t,i=[],s=[];n.forEach((e,n)=>{(null===r||void 0===r?void 0:r.exactDuplicates.some(e=>e.newIndex===n))||(null===r||void 0===r?void 0:r.likelyDuplicates.some(e=>e.newIndex===n))?s.push({id:e.id,title:e.title,type:t.contentType,changeType:"update",changes:[]}):i.push({id:e.id,title:e.title,type:t.contentType,changeType:"create"})});const a=((null===r||void 0===r?void 0:r.exactDuplicates.length)||0)+((null===r||void 0===r?void 0:r.likelyDuplicates.length)||0)+((null===r||void 0===r?void 0:r.conflicts.length)||0);return{additions:i,modifications:s,deletions:[],duplicates:(null===r||void 0===r?void 0:r.exactDuplicates)||[],summary:{totalChanges:i.length+s.length,potentialIssues:a,requiresReview:a>0}}}async importToCMS(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;try{const i=await this.getUploadRecord(e);if(!i)throw new Error("Upload record not found");await this.adminAuth.requirePermission(i.contentType,"create");const{data:s,contentType:a}=i;let o=0,l=0,c=0;const u=[],d=[],h=[],m=[];console.log("\ud83d\udce5 Importing ".concat(s.length," ").concat(a," records to CMS..."));for(let e=0;e<s.length;e++){const i=s[e];try{const e=null===n||void 0===n?void 0:n.find(e=>e.duplicateId===i.id);if("skipped"===(null===e||void 0===e?void 0:e.resolution)){l++,m.push(e);continue}const r=this.convertToCMSFormat(i,a);if("merged"===(null===e||void 0===e?void 0:e.resolution)){const t=e.resultingId;await this.mergeWithExisting(r,t,a),d.push(t),m.push(e)}else{const e=await this.saveToCMS(r,a,t);e.created?u.push(e.id):d.push(e.id)}o++}catch(r){c++,h.push({row:e,message:"Failed to import record: ".concat(r.message),severity:"error"})}}return o>0&&await this.createSnapshot("JSON import: ".concat(i.fileName),i.uploadedBy),console.log("\u2705 Import completed: ".concat(o," imported, ").concat(l," skipped, ").concat(c," errors")),{success:0===c,importedCount:o,skippedCount:l,errorCount:c,createdIds:u,updatedIds:d,errors:h,duplicatesHandled:m}}catch(r){throw console.error("CMS import failed:",r),r}}async exportCurrentContent(e){try{await this.adminAuth.requirePermission("all"===e?"system":e,"read");const t=new Date;let n=0;if("habits"===e||"all"===e){const e=await this.contentManager.loadHabitsFromCMS();await this.saveExportFile("habits",e,t),n+=e.length}if("research"===e||"all"===e){const e=await this.contentManager.loadResearchFromCMS();await this.saveExportFile("research",e,t),n+=e.length}return console.log("\u2705 Exported ".concat(n," records (").concat(e,")")),{success:!0,contentType:e,recordCount:n,exportedAt:t,version:"1.0.0"}}catch(t){return console.error("Export failed:",t),{success:!1,contentType:e,recordCount:0,exportedAt:new Date,version:"1.0.0"}}}async createSnapshot(e,t){try{const n=this.adminAuth.getCurrentUser();if(!n)throw new Error("Authentication required");const r=this.generateSnapshotId(),[i,s]=await Promise.all([this.contentManager.loadHabitsFromCMS(),this.contentManager.loadResearchFromCMS()]),a={id:r,description:e,createdAt:new Date,createdBy:t||n.id,version:"1.0.0",contentCounts:{habits:i.length,research:s.length},checksum:this.generateContentChecksum([...i,...s])};return await this.saveSnapshot(a,{habits:i,research:s}),console.log("\ud83d\udcf8 Created content snapshot: ".concat(r)),{success:!0,snapshotId:r}}catch(n){return console.error("Snapshot creation failed:",n),{success:!1,snapshotId:"",error:n.message}}}async readFileContent(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsText(e)})}validateHabitRecord(e,t,n,r){e.id||n.push({row:t,field:"id",message:"ID is required",severity:"error"}),e.title||n.push({row:t,field:"title",message:"Title is required",severity:"error"}),e.description||n.push({row:t,field:"description",message:"Description is required",severity:"error"}),e.timeMinutes&&"number"!==typeof e.timeMinutes&&n.push({row:t,field:"timeMinutes",message:"timeMinutes must be a number",severity:"error"}),e.instructions||r.push({row:t,field:"instructions",message:"Instructions recommended for better user experience",suggestion:"Add detailed instructions"}),e.researchBacking&&0!==e.researchBacking.length||r.push({row:t,field:"researchBacking",message:"No research backing found",suggestion:"Add research study IDs"})}validateResearchRecord(e,t,n,r){e.id||n.push({row:t,field:"id",message:"ID is required",severity:"error"}),e.title||n.push({row:t,field:"title",message:"Title is required",severity:"error"}),e.authors||n.push({row:t,field:"authors",message:"Authors are required",severity:"error"}),e.year||n.push({row:t,field:"year",message:"Year is required",severity:"error"}),e.year&&("number"!==typeof e.year||e.year<1900||e.year>(new Date).getFullYear()+1)&&n.push({row:t,field:"year",message:"Invalid year",severity:"error"}),e.doi||r.push({row:t,field:"doi",message:"DOI recommended for citation validation",suggestion:"Add DOI if available"}),e.summary||r.push({row:t,field:"summary",message:"Summary recommended",suggestion:"Add research summary"})}compareItems(e,t,n,r){const i=[];let s=0;if(e.id===t.id)return{existingId:t.id,existingTitle:this.getItemTitle(t),newIndex:n,newTitle:e.title,matchType:"exact",confidence:100,matchingFields:["id"],suggestedResolution:"merge"};if("research"===r&&e.title&&t.title){this.calculateStringSimilarity(e.title,this.getItemTitle(t))>.8&&(i.push("title"),s+=40,e.authors&&t.authors&&e.authors===t.authors&&(i.push("authors"),s+=40),e.year&&t.year&&e.year===t.year&&(i.push("year"),s+=20))}if("research"===r&&e.doi&&t.doi&&e.doi===t.doi)return{existingId:t.id,existingTitle:this.getItemTitle(t),newIndex:n,newTitle:e.title,matchType:"exact",confidence:100,matchingFields:["doi"],suggestedResolution:"merge"};if("habits"===r&&e.title&&t.title){const n=this.calculateStringSimilarity(e.title,this.getItemTitle(t));n>.9&&(s=Math.round(100*n),i.push("title"))}return s>=70?{existingId:t.id,existingTitle:this.getItemTitle(t),newIndex:n,newTitle:e.title,matchType:s>=90?"exact":s>=80?"likely":"suspicious",confidence:s,matchingFields:i,suggestedResolution:s>=90?"merge":"review_needed"}:null}findConflicts(e,t){const n=[];return["title","description","authors","year","journal","summary","finding"].forEach(r=>{e[r]&&t[r]&&e[r]!==this.getItemValue(t,r)&&n.push({field:r,existingValue:this.getItemValue(t,r),newValue:e[r],recommendation:"Review manually and choose the most accurate value"})}),n}getItemTitle(e){return"string"===typeof e.title?e.title:e.title&&"object"===typeof e.title&&e.title.en||""}getItemValue(e,t){const n=e[t];return n&&"object"===typeof n&&"en"in n?n.en:n}calculateStringSimilarity(e,t){const n=e.length,r=t.length,i=Array(r+1).fill(null).map(()=>Array(n+1).fill(null));for(let s=0;s<=n;s++)i[0][s]=s;for(let s=0;s<=r;s++)i[s][0]=s;for(let s=1;s<=r;s++)for(let r=1;r<=n;r++){const n=e[r-1]===t[s-1]?0:1;i[s][r]=Math.min(i[s][r-1]+1,i[s-1][r]+1,i[s-1][r-1]+n)}return 1-i[r][n]/Math.max(n,r)}convertToCMSFormat(e,t){const n=this.adminAuth.getCurrentUser(),r=new Date;return"habits"===t?{id:e.id,title:{en:e.title},description:{en:e.description},instructions:{en:e.instructions||""},timeMinutes:e.timeMinutes||5,category:e.category||"general",goalTags:e.goalTags||[],researchStudies:e.researchBacking||[],status:"published",isVerified:!0,createdAt:r,updatedAt:r,createdBy:n.id,lastModifiedBy:n.id,version:1}:{id:e.id,title:e.title,authors:e.authors,year:e.year,journal:e.journal||"",doi:e.doi,citation:e.citation||"",summary:{en:e.summary||""},finding:{en:e.finding||""},category:e.category||"general",evidenceLevel:"observational",qualityScore:75,validatedAt:r,citationStatus:"valid",relatedStudies:[],status:"published",createdAt:r,updatedAt:r,createdBy:n.id,lastModifiedBy:n.id,version:1}}async saveToCMS(e,t,n){return console.log("\ud83d\udcbe Saving ".concat(t," to CMS:"),e.id),{id:e.id,created:!0}}async mergeWithExisting(e,t,n){console.log("\ud83d\udd04 Merging ".concat(n," ").concat(e.id," with existing ").concat(t))}generateUploadId(){return"upload_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}generateSnapshotId(){return"snapshot_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}generateContentChecksum(e){return Date.now().toString(36)+e.length.toString(36)}async saveUploadRecord(e,t,n,r,i){console.log("\ud83d\udcdd Saving upload record: ".concat(e))}async getUploadRecord(e){return null}async saveSnapshot(e,t){console.log("\ud83d\udcf8 Saving snapshot: ".concat(e.id))}async saveExportFile(e,t,n){console.log("\ud83d\udce4 Creating export file for ".concat(e,": ").concat(t.length," records"))}}class xl{constructor(e){this.dbName="sciencehabits-research-validation",this.version=1,this.db=null,this.adminAuth=void 0,this.validationQueue=[],this.isValidating=!1,this.mockAPIs={crossref:"https://api.crossref.org/works/",pubmed:"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/",retraction:"https://retractionwatch.com/api/",journal:"https://api.journalcitation.com/"},this.adminAuth=e,this.initializeDB(),this.startValidationQueue()}async initializeDB(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("validation_events")){const e=t.createObjectStore("validation_events",{keyPath:"id"});e.createIndex("studyId","studyId",{unique:!1}),e.createIndex("performedAt","performedAt",{unique:!1}),e.createIndex("type","type",{unique:!1})}if(!t.objectStoreNames.contains("validation_cache")){t.createObjectStore("validation_cache",{keyPath:"key"}).createIndex("expiresAt","expiresAt",{unique:!1})}if(!t.objectStoreNames.contains("quality_assessments")){const e=t.createObjectStore("quality_assessments",{keyPath:"studyId"});e.createIndex("qualityScore","qualityScore",{unique:!1}),e.createIndex("lastAssessed","lastAssessed",{unique:!1})}}})}async validateDOI(e){try{console.log("\ud83d\udd0d Validating DOI: ".concat(e));const t=await this.getCachedValidation("doi_".concat(e));if(t&&!this.isCacheExpired(t))return console.log("\ud83d\udccb Using cached DOI validation for: ".concat(e)),t.result;const n=this.normalizeDOI(e);if(!this.isValidDOIFormat(n))return{isValid:!1,errors:["Invalid DOI format"],warnings:[],metadata:{lastChecked:new Date}};const r=await this.mockCrossRefValidation(n);return await this.cacheValidation("doi_".concat(e),r,6048e5),r}catch(t){return console.error("DOI validation failed:",t),{isValid:!1,errors:["Validation failed: ".concat(t.message)],warnings:[],metadata:{lastChecked:new Date}}}}async checkRetractedPapers(){try{console.log("\ud83d\udd0d Checking for retracted papers...");const e=await this.mockRetractionCheck();return console.log("\u2705 Retraction check completed: ".concat(e.length," issues found")),e}catch(e){return console.error("Retraction check failed:",e),[]}}async validateJournal(e){try{console.log("\ud83d\udd0d Validating journal: ".concat(e));const t=await this.getCachedValidation("journal_".concat(e.toLowerCase()));if(t&&!this.isCacheExpired(t))return console.log("\ud83d\udccb Using cached journal validation for: ".concat(e)),t.result;const n=await this.mockJournalValidation(e);return await this.cacheValidation("journal_".concat(e.toLowerCase()),n,2592e6),n}catch(t){return console.error("Journal validation failed:",t),{isValid:!1,warnings:["Journal validation failed: ".concat(t.message)]}}}async enrichCitation(e){try{console.log("\ud83d\udd0d Enriching citation for study: ".concat(e.id));const t=await this.getValidationHistory(e.id),n=e.doi?await this.validateDOI(e.doi):null,r=await this.validateJournal(e.journal),i=await this.calculateQualityScore(e,n,r);await this.recordValidationEvent({id:this.generateEventId(),studyId:e.id,type:"citation_check",status:!1!==(null===n||void 0===n?void 0:n.isValid)&&r.isValid?"passed":"warning",message:"Citation enrichment completed",performedAt:new Date,performedBy:"system"});const a=(0,s.A)((0,s.A)({},e),{},{qualityScore:i,lastValidated:new Date,validationHistory:t,validationNotes:this.generateValidationNotes(n,r)});return console.log("\u2705 Citation enriched for study: ".concat(e.id," (quality score: ").concat(i,")")),a}catch(t){return console.error("Citation enrichment failed:",t),(0,s.A)((0,s.A)({},e),{},{qualityScore:50,lastValidated:new Date,validationHistory:await this.getValidationHistory(e.id)})}}async calculateQualityScore(e,t,n){let r=50;if(e.doi&&(r+=10,null!==t&&void 0!==t&&t.isValid&&(r+=10)),n){if(n.isValid&&(r+=10,n.impactFactor&&(n.impactFactor>10?r+=10:n.impactFactor>5?r+=7:n.impactFactor>2?r+=5:n.impactFactor>1&&(r+=3)),n.quartile))switch(n.quartile){case"Q1":r+=10;break;case"Q2":r+=7;break;case"Q3":r+=4;break;case"Q4":r+=2}n.isPredatory&&(r-=30)}const i=(new Date).getFullYear()-e.year;switch(i<=5?r+=10:i<=10?r+=5:i<=15&&(r+=2),e.evidenceLevel){case"systematic_review":r+=10;break;case"rct":r+=8;break;case"observational":r+=5;break;case"case_study":r+=2}return Math.max(0,Math.min(100,Math.round(r)))}async findRelatedStudies(e){try{console.log("\ud83d\udd0d Finding related studies for: ".concat(e));const t=await this.mockFindRelatedStudies(e);return console.log("\u2705 Found ".concat(t.length," related studies for: ").concat(e)),t}catch(t){return console.error("Related studies search failed:",t),[]}}async scheduleRevalidation(e){this.validationQueue.includes(e)||(this.validationQueue.push(e),console.log("\ud83d\udcc5 Scheduled revalidation for study: ".concat(e)))}async getValidationHistory(e){return this.db?new Promise(t=>{const n=this.db.transaction(["validation_events"],"readonly").objectStore("validation_events").index("studyId").getAll(e);n.onsuccess=()=>{const e=(n.result||[]).sort((e,t)=>new Date(t.performedAt).getTime()-new Date(e.performedAt).getTime());t(e)},n.onerror=()=>t([])}):[]}async runDailyValidation(){console.log("\ud83d\udd04 Starting daily validation checks...");const e={validated:0,errors:0,warnings:0,retracted:0};try{const n=await this.checkRetractedPapers();for(e.retracted=n.length;this.validationQueue.length>0&&!this.isValidating;){const n=this.validationQueue.shift();try{await this.validateStudyById(n),e.validated++}catch(t){console.error("Validation failed for study ".concat(n,":"),t),e.errors++}}return console.log("\u2705 Daily validation completed:",e),e}catch(t){return console.error("Daily validation failed:",t),e}}async validateStudyById(e){console.log("\ud83d\udd0d Validating study: ".concat(e))}startValidationQueue(){setInterval(()=>{!this.isValidating&&this.validationQueue.length>0&&this.processValidationQueue()},36e5)}async processValidationQueue(){if(!this.isValidating){this.isValidating=!0,console.log("\ud83d\udd04 Processing validation queue: ".concat(this.validationQueue.length," items"));try{for(;this.validationQueue.length>0;){const e=this.validationQueue.shift();await this.validateStudyById(e),await new Promise(e=>setTimeout(e,1e3))}}catch(e){console.error("Validation queue processing failed:",e)}finally{this.isValidating=!1}}}normalizeDOI(e){return e.replace(/^(https?:\/\/)?(dx\.)?doi\.org\//,"").trim()}isValidDOIFormat(e){return/^10\.\d{4,}\/[-._;()\/:a-zA-Z0-9]+$/.test(e)}async mockCrossRefValidation(e){await new Promise(e=>setTimeout(e,500));const t=this.isValidDOIFormat(e),n=Math.floor(100*Math.random());return{isValid:t,errors:t?[]:["DOI not found in CrossRef database"],warnings:n<5?["Low citation count"]:[],metadata:{doi:e,citationCount:n,lastChecked:new Date}}}async mockRetractionCheck(){return await new Promise(e=>setTimeout(e,1e3)),Math.random()<.05?[{studyId:"mock-retracted-study",retractionInfo:{retractedAt:new Date,reason:"Data integrity concerns",source:"retraction-watch-mock"}}]:[]}async mockJournalValidation(e){await new Promise(e=>setTimeout(e,300));const t=20*Math.random(),n=t>15?"Q1":t>10?"Q2":t>5?"Q3":"Q4",r=e.toLowerCase().includes("international")&&e.toLowerCase().includes("research")&&Math.random()<.1;return{isValid:!r,impactFactor:Math.round(100*t)/100,quartile:n,isPredatory:r,warnings:r?["Journal flagged as potentially predatory"]:[]}}async mockFindRelatedStudies(e){return await new Promise(e=>setTimeout(e,800)),[]}generateValidationNotes(e,t){const n=[];return null!==e&&void 0!==e&&e.isValid?n.push("\u2705 DOI validated successfully"):e&&n.push("\u274c DOI validation failed"),null!==t&&void 0!==t&&t.isValid?n.push("\u2705 Journal validated (Impact Factor: ".concat(t.impactFactor||"N/A",")")):t&&n.push("\u26a0\ufe0f Journal validation concerns"),n.join("; ")}async recordValidationEvent(e){if(this.db)return new Promise((t,n)=>{const r=this.db.transaction(["validation_events"],"readwrite").objectStore("validation_events").add(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}async getCachedValidation(e){return this.db?new Promise(t=>{const n=this.db.transaction(["validation_cache"],"readonly").objectStore("validation_cache").get(e);n.onsuccess=()=>t(n.result||null),n.onerror=()=>t(null)}):null}async cacheValidation(e,t,n){if(!this.db)return;const r=new Date(Date.now()+n);return new Promise((n,i)=>{const s=this.db.transaction(["validation_cache"],"readwrite").objectStore("validation_cache").put({key:e,result:t,expiresAt:r});s.onsuccess=()=>n(),s.onerror=()=>i(s.error)})}isCacheExpired(e){return new Date>e.expiresAt}generateEventId(){return"event_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}}const bl=e=>{let{onClose:t,className:n=""}=e;const[i]=(0,r.useState)(()=>new ml),[s]=(0,r.useState)(()=>new gl(i)),[a]=(0,r.useState)(()=>new yl(i,s)),[o]=(0,r.useState)(()=>new xl(i)),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)("overview"),[h,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[y,v]=(0,r.useState)({totalHabits:0,totalResearch:0,translationCompleteness:0,recentUploads:0,validationIssues:0}),[w,C]=(0,r.useState)(null),[j,k]=(0,r.useState)([]);(0,r.useEffect)(()=>{F(),N()},[]);const F=async()=>{try{const e={id:"admin-001",email:"admin@sciencehabits.app",role:"super_admin",permissions:[{resource:"habits",actions:["create","read","update","delete","publish"]},{resource:"research",actions:["create","read","update","delete","publish"]},{resource:"translations",actions:["create","read","update","delete"]},{resource:"users",actions:["create","read","update","delete"]},{resource:"system",actions:["create","read","update","delete"]}],lastLogin:new Date,isActive:!0,createdAt:new Date,updatedAt:new Date};c(e),console.log("\u2705 Demo admin authenticated successfully")}catch(f){console.error("Admin auth check failed:",f),p("Authentication failed")}},N=async()=>{try{m(!0);const e={totalHabits:47,totalResearch:23,translationCompleteness:85,recentUploads:j.length,validationIssues:3},t={habits:[],research:[],untranslatedContent:[{contentType:"habit",contentId:"habit-1",title:"Morning Meditation",missingFields:["description"],priority:"high"},{contentType:"research",contentId:"research-1",title:"Sleep Study 2024",missingFields:["summary"],priority:"medium"}],metadata:{language:"de",version:"1.0.0",lastUpdated:new Date,translationCompleteness:85}};v(e),C(t),console.log("\u2705 Dashboard stats loaded successfully")}catch(f){console.error("Failed to load dashboard stats:",f),p("Failed to load dashboard data")}finally{m(!1)}},E=async(e,t)=>{try{m(!0),p(null);const n=await a.uploadFile(e,t);k([n,...j.slice(0,9)]),n.success?(await N(),alert("\u2705 Successfully uploaded ".concat(n.recordCount," ").concat(t," records!"))):alert("\u274c Upload failed: ".concat(n.errors.map(e=>e.message).join(", ")))}catch(f){console.error("JSON upload failed:",f),p("JSON upload failed")}finally{m(!1)}},A=async()=>{try{m(!0),p(null);const e=await o.runDailyValidation();alert("\u2705 Validation completed: ".concat(e.validated," validated, ").concat(e.errors," errors, ").concat(e.warnings," warnings")),await N()}catch(f){console.error("Validation run failed:",f),p("Validation run failed")}finally{m(!1)}};return l?(0,g.jsxs)("div",{className:"w-full max-w-6xl mx-auto ".concat(n),children:[(0,g.jsx)("div",{className:"bg-white border-b border-gray-200 p-6 mb-6",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"CMS Admin Dashboard"}),(0,g.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",l.email," (",l.role.replace("_"," "),")"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)(x,{onClick:()=>i.logout(),variant:"ghost",children:"Sign Out"}),t&&(0,g.jsx)(x,{onClick:t,variant:"secondary",children:"Close"})]})]})}),f&&(0,g.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,g.jsx)("p",{className:"text-red-700",children:f})}),(0,g.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,g.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:"\ud83d\udcca"},{id:"content",label:"Content",icon:"\ud83d\udcdd"},{id:"json",label:"JSON Upload",icon:"\ud83d\udce4"},{id:"translations",label:"Translations",icon:"\ud83c\udf0d"},{id:"validation",label:"Validation",icon:"\ud83d\udd0d"}].map(e=>(0,g.jsxs)("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(u===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,g.jsx)("span",{children:e.icon}),(0,g.jsx)("span",{children:e.label})]},e.id))})}),(0,g.jsxs)("div",{className:"min-h-96",children:[h&&(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\u23f3"}),(0,g.jsx)("p",{children:"Loading..."})]}),!h&&(0,g.jsxs)(g.Fragment,{children:["overview"===u&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,g.jsx)(b,{children:(0,g.jsx)(D,{className:"p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Total Habits"}),(0,g.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:y.totalHabits})]}),(0,g.jsx)("div",{className:"text-3xl",children:"\ud83c\udfaf"})]})})}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{className:"p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Research Studies"}),(0,g.jsx)("p",{className:"text-2xl font-bold text-green-600",children:y.totalResearch})]}),(0,g.jsx)("div",{className:"text-3xl",children:"\ud83d\udcda"})]})})}),(0,g.jsx)(b,{children:(0,g.jsx)(D,{className:"p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"German Translation"}),(0,g.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[y.translationCompleteness,"%"]})]}),(0,g.jsx)("div",{className:"text-3xl",children:"\ud83c\udf0d"})]})})})]}),(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,g.jsx)(x,{onClick:()=>d("json"),variant:"primary",children:"\ud83d\udce4 Upload JSON"}),(0,g.jsx)(x,{onClick:A,variant:"secondary",disabled:h,children:"\ud83d\udd0d Run Validation"}),(0,g.jsx)(x,{onClick:()=>d("translations"),variant:"secondary",children:"\ud83c\udf0d Translations"}),(0,g.jsx)(x,{onClick:()=>s.syncContentUpdates(),variant:"secondary",children:"\ud83d\udd04 Sync Content"})]})]})}),j.length>0&&(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Uploads"}),(0,g.jsx)("div",{className:"space-y-3",children:j.slice(0,5).map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium",children:e.fileName}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:[e.recordCount," records"]})]}),(0,g.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat(e.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.success?"\u2705 Success":"\u274c Failed"})]},t))})]})})]}),"json"===u&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"JSON Upload"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload your existing JSON files to update content. Files will be validated and duplicates detected automatically."}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[(0,g.jsx)("div",{className:"text-4xl mb-3",children:"\ud83c\udfaf"}),(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Habits"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload habits.json or enhanced_habits.json"}),(0,g.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&E(n,"habits")},className:"hidden",id:"habits-upload"}),(0,g.jsx)("label",{htmlFor:"habits-upload",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:"Choose File"})]}),(0,g.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors",children:[(0,g.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udcda"}),(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Research"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload research_articles.json"}),(0,g.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&E(n,"research")},className:"hidden",id:"research-upload"}),(0,g.jsx)("label",{htmlFor:"research-upload",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer",children:"Choose File"})]})]})]})}),j.length>0&&(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload History"}),(0,g.jsx)("div",{className:"space-y-4",children:j.map((e,t)=>(0,g.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("h4",{className:"font-medium",children:e.fileName}),(0,g.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat(e.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.success?"\u2705 Success":"\u274c Failed"})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,g.jsxs)("p",{children:["Records: ",e.recordCount]}),e.errors.length>0&&(0,g.jsxs)("p",{className:"text-red-600",children:["Errors: ",e.errors.length]}),e.warnings.length>0&&(0,g.jsxs)("p",{className:"text-yellow-600",children:["Warnings: ",e.warnings.length]}),e.duplicates&&(0,g.jsxs)("p",{className:"text-blue-600",children:["Duplicates: ",e.duplicates.exactDuplicates.length," exact, ",e.duplicates.likelyDuplicates.length," likely"]})]})]},t))})]})})]}),"translations"===u&&(0,g.jsx)("div",{className:"space-y-6",children:(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Translation Status"}),w&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"German Translation Progress"}),(0,g.jsxs)("span",{className:"text-sm text-gray-600",children:[w.metadata.translationCompleteness,"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(w.metadata.translationCompleteness,"%")}})})]}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Content Statistics"}),(0,g.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Total Habits:"}),(0,g.jsx)("span",{children:w.habits.length})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Total Research:"}),(0,g.jsx)("span",{children:w.research.length})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Untranslated Items:"}),(0,g.jsx)("span",{className:"text-red-600",children:w.untranslatedContent.length})]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Missing Translations"}),w.untranslatedContent.length>0?(0,g.jsx)("div",{className:"space-y-2 text-sm max-h-32 overflow-y-auto",children:w.untranslatedContent.slice(0,10).map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between text-xs bg-yellow-50 p-2 rounded",children:[(0,g.jsx)("span",{className:"truncate",children:e.title}),(0,g.jsx)("span",{className:"px-1 py-0.5 rounded text-xs ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.priority})]},t))}):(0,g.jsx)("p",{className:"text-sm text-green-600",children:"\u2705 All content translated!"})]})]})]})]})})}),("content"===u||"validation"===u)&&(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6 text-center",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udea7"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Coming Soon"}),(0,g.jsx)("p",{className:"text-gray-600",children:"This section is under development and will be available in the next update."})]})})]})]})]}):(0,g.jsx)(b,{className:"w-full max-w-md mx-auto ".concat(n),children:(0,g.jsxs)(D,{className:"p-6 text-center",children:[(0,g.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd12"}),(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Admin Authentication Required"}),f?(0,g.jsx)("p",{className:"text-red-600 mb-4",children:f}):(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Checking authentication..."}),t&&(0,g.jsx)(x,{onClick:t,children:"Close"})]})})};function vl(e){let{onLoginSuccess:t}=e;const[n,i]=(0,r.useState)("admin@sciencehabits.app"),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),m=new ml;return(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,g.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udd2c"}),(0,g.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"ScienceHabits Admin"}),(0,g.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access the content management system"})]})}),(0,g.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,g.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,g.jsxs)("form",{className:"space-y-6",onSubmit:async e=>{e.preventDefault(),l(!0),u("");try{const e=await m.login(n,s);e.success?(console.log("\u2705 Admin login successful"),t()):u(e.error||"Login failed")}catch(c){u("An unexpected error occurred. Please try again."),console.error("Login error:",c)}finally{l(!1)}},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,g.jsx)("div",{className:"mt-1",children:(0,g.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:e=>i(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Enter your email"})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,g.jsxs)("div",{className:"mt-1 relative",children:[(0,g.jsx)("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:e=>a(e.target.value),className:"appearance-none block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Enter your password"}),(0,g.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!d),children:d?(0,g.jsx)("span",{className:"h-5 w-5 text-gray-400",children:"\ud83d\udc41\ufe0f"}):(0,g.jsx)("span",{className:"h-5 w-5 text-gray-400",children:"\ud83d\ude48"})})]})]}),c&&(0,g.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)("span",{className:"h-5 w-5 text-red-400",children:"\u274c"})}),(0,g.jsxs)("div",{className:"ml-3",children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Authentication Failed"}),(0,g.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,g.jsx)("p",{children:c})})]})]})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]}),(0,g.jsxs)("div",{className:"mt-6",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,g.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,g.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,g.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Demo Credentials"})})]}),(0,g.jsx)("div",{className:"mt-6 bg-gray-50 rounded-md p-4",children:(0,g.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Email:"})," admin@sciencehabits.app"]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Password:"})," AdminPass123!"]}),(0,g.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:(0,g.jsx)("p",{children:"For demonstration purposes. In production, use your assigned credentials."})})]})})]}),(0,g.jsx)("div",{className:"mt-6 text-center",children:(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Protected by secure authentication"})})]})})]})}function Dl(e){let{onClose:t}=e;const[n,i]=(0,r.useState)([]),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[]);const f=async()=>{d(!0);try{const o=[];try{const i=await fetch("/data/research-articles/bedroom_environment_2023_article_de.json");if(i.ok){var e,t,n,r,s;const a=await i.json(),l=await fetch("/data/research-articles/bedroom_environment_article.json"),c=l.ok?await l.json():null,u={id:a.id,title:a.title,authors:(null===c||void 0===c||null===(e=c.studyDetails)||void 0===e?void 0:e.authors)||"Okamoto-Mizuno, K., Mizuno, K.",year:a.year||2023,journal:(null===c||void 0===c||null===(t=c.studyDetails)||void 0===t?void 0:t.journal)||"Sleep and Breathing",doi:(null===c||void 0===c||null===(n=c.citations)||void 0===n||null===(r=n[0])||void 0===r||null===(s=r.url)||void 0===s?void 0:s.replace("https://doi.org/",""))||"10.1186/1880-6805-31-14",summary:a.content||a.subtitle||a.summary||"",finding:"Die Schlafzimmertemperatur und CO2-Werte k\xf6nnen die Schlafeffizienz um bis zu 4% reduzieren, was n\xe4chtlich 35 Minuten erholsamen Schlaf kostet.",translationStatus:"unreviewed",translatedBy:"claude",reviewedBy:void 0,reviewedAt:void 0,confidence:85,qualityWarnings:[],culturalNotes:"Deutsche Temperaturangaben in Celsius und Anpassung an deutsche Wohnsituation"};o.push(u)}}catch(a){console.warn("Failed to load bedroom temperature translation:",a)}0===o.length&&console.log("\ud83d\udccb No German translations found - showing empty state"),i(o)}catch(a){console.error("Failed to load German research articles:",a)}finally{d(!1)}},p=n.filter(e=>"all"===l||e.translationStatus===l),y=e=>{const t={unreviewed:"bg-yellow-100 text-yellow-800 border-yellow-200",reviewed:"bg-green-100 text-green-800 border-green-200",flagged:"bg-red-100 text-red-800 border-red-200"};return t[e]||t.unreviewed},v=e=>({unreviewed:"\u23f3",reviewed:"\u2705",flagged:"\ud83d\udea9"}[e]||"\u2753"),w=e=>e>=90?"text-green-600":e>=80?"text-yellow-600":"text-red-600";return u?(0,g.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),(0,g.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading German research articles..."})]}):(0,g.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,g.jsx)("div",{className:"border-b border-gray-200 pb-6 mb-6",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83c\udde9\ud83c\uddea German Research Translation Review"}),(0,g.jsx)("p",{className:"mt-2 text-gray-600",children:"Review and approve German translations of research articles"}),(0,g.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,g.jsxs)("p",{className:"text-sm text-green-800",children:[(0,g.jsx)("strong",{children:"\ud83d\udccb Live Data:"})," This section shows actual German translations loaded from research article files. Journal names are kept in English as per translation standards. All translations are ready for review and approval."]})})]}),t&&(0,g.jsx)(x,{onClick:t,variant:"secondary",children:"Close"})]})}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,g.jsx)("div",{className:"lg:col-span-1",children:(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Articles (",p.length,")"]}),(0,g.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[(0,g.jsx)("option",{value:"all",children:"All Status"}),(0,g.jsx)("option",{value:"unreviewed",children:"Unreviewed"}),(0,g.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,g.jsx)("option",{value:"flagged",children:"Flagged"})]})]}),(0,g.jsx)("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:p.map(e=>(0,g.jsxs)("div",{onClick:()=>o(e),className:"p-3 border rounded-lg cursor-pointer hover:bg-gray-50 ".concat((null===a||void 0===a?void 0:a.id)===e.id?"ring-2 ring-blue-500 bg-blue-50":""),children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,g.jsx)("h3",{className:"font-medium text-sm text-gray-900 line-clamp-2",children:e.title}),(0,g.jsx)("span",{className:"text-lg ml-2",children:v(e.translationStatus)})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,g.jsxs)("span",{children:[e.authors.split(",")[0]," et al. (",e.year,")"]}),(0,g.jsxs)("span",{className:"font-medium ".concat(w(e.confidence)),children:[e.confidence,"%"]})]}),(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium border ".concat(y(e.translationStatus)),children:e.translationStatus}),e.qualityWarnings.length>0&&(0,g.jsxs)("span",{className:"ml-2 inline-flex px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 border border-orange-200",children:[e.qualityWarnings.length," warnings"]})]})]},e.id))})]})})}),(0,g.jsx)("div",{className:"lg:col-span-2",children:a?(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:a.title}),(0,g.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Authors:"})," ",a.authors]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Journal:"})," ",a.journal," (",a.year,")"]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"DOI:"})," ",(0,g.jsx)("a",{href:"https://doi.org/".concat(a.doi),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:a.doi})]})]})]}),(0,g.jsxs)("div",{className:"ml-6 text-center",children:[(0,g.jsxs)("div",{className:"text-3xl font-bold ".concat(w(a.confidence)),children:[a.confidence,"%"]}),(0,g.jsx)("div",{className:"text-xs text-gray-600",children:"Confidence"})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("span",{className:"text-2xl",children:v(a.translationStatus)}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:"font-medium text-gray-900",children:["Status: ",a.translationStatus]}),a.reviewedBy&&(0,g.jsxs)("p",{className:"text-xs text-gray-600",children:["Reviewed by ",a.reviewedBy," on ",new Date(a.reviewedAt).toLocaleDateString("de-DE")]})]})]}),(0,g.jsxs)("div",{className:"flex space-x-2",children:["reviewed"!==a.translationStatus&&(0,g.jsx)(x,{onClick:()=>(async e=>{try{const t=n.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{translationStatus:"reviewed",reviewedBy:"admin",reviewedAt:(new Date).toISOString()}):t);i(t),(null===a||void 0===a?void 0:a.id)===e&&o(t.find(t=>t.id===e)||null),console.log("\u2705 Marked article ".concat(e," as reviewed"))}catch(t){console.error("Failed to mark article as reviewed:",t)}})(a.id),variant:"primary",className:"text-sm",children:"\u2705 Mark Reviewed"}),"flagged"!==a.translationStatus&&(0,g.jsx)(x,{onClick:()=>(async e=>{try{const t=n.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{translationStatus:"flagged",reviewedBy:"admin",reviewedAt:(new Date).toISOString()}):t);i(t),(null===a||void 0===a?void 0:a.id)===e&&o(t.find(t=>t.id===e)||null),console.log("\ud83d\udea9 Flagged article ".concat(e," for revision"))}catch(t){console.error("Failed to flag article:",t)}})(a.id),variant:"secondary",className:"text-sm",children:"\ud83d\udea9 Flag for Revision"})]})]})]})}),a.qualityWarnings.length>0&&(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u26a0\ufe0f Quality Warnings"}),(0,g.jsx)("div",{className:"space-y-3",children:a.qualityWarnings.map((e,t)=>(0,g.jsxs)("div",{className:"p-3 rounded-lg border-l-4 ".concat("high"===e.severity?"bg-red-50 border-red-400":"medium"===e.severity?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"),children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("h4",{className:"font-medium text-sm text-gray-900",children:e.type.replace("_"," ").toUpperCase()}),(0,g.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("high"===e.severity?"bg-red-100 text-red-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.severity})]}),(0,g.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:e.message}),(0,g.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,g.jsx)("strong",{children:"Suggestion:"})," ",e.suggestion]})]},t))})]})}),(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"German Translation"}),(0,g.jsxs)(x,{onClick:()=>m(!h),variant:"secondary",className:"text-sm",children:[h?"Hide":"Show"," Original"]})]}),(0,g.jsxs)("div",{className:"".concat(h?"grid grid-cols-2 gap-6":""),children:[h&&(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83c\uddfa\ud83c\uddf8 Original (English)"}),(0,g.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900",children:"Summary:"}),(0,g.jsx)("p",{className:"text-gray-700 text-sm",children:"[Original English summary would be shown here]"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900",children:"Finding:"}),(0,g.jsx)("p",{className:"text-gray-700 text-sm",children:"[Original English finding would be shown here]"})]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83c\udde9\ud83c\uddea German Translation"}),(0,g.jsx)("div",{className:"prose prose-sm max-w-none max-h-[60vh] overflow-y-auto border border-gray-200 rounded-lg p-4 bg-gray-50 text-gray-800",children:(0,g.jsx)(gi,{children:a.summary})}),a.finding&&(0,g.jsxs)("div",{className:"mt-4",children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Key Finding:"}),(0,g.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed italic bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400",children:a.finding})]})]})]}),a.culturalNotes&&(0,g.jsxs)("div",{className:"mt-6 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,g.jsx)("h5",{className:"font-medium text-blue-900 mb-1",children:"\ud83c\udf0d Cultural Notes:"}),(0,g.jsx)("p",{className:"text-sm text-blue-800",children:a.culturalNotes})]})]})})]}):(0,g.jsx)(b,{children:(0,g.jsxs)(D,{className:"p-12 text-center",children:[(0,g.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcda"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Article"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Choose a research article from the list to review its German translation"})]})})})]})]})}const wl=function(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)("dashboard"),[s,a]=(0,r.useState)(!1),{loadUserData:o,clearUser:l,currentUser:c}=(0,K.kH)();(0,r.useEffect)(()=>{const e=()=>{const e=window.location.hash.slice(1);i(e||"dashboard")};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{await(0,L.w)();const e=localStorage.getItem("sciencehabits_user_id");e?(t(!0),await o(e)):t(!1)}catch(e){console.error("Failed to check onboarding status:",e),t(!1)}},d=async e=>{t(!0),await o(e)};return null===e?(0,g.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Loading ScienceHabits..."})]})}):e?"admin"===n?s?(0,g.jsx)(Ci,{children:(0,g.jsx)(Po,{children:(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("button",{onClick:()=>window.location.hash="dashboard",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"\u2190 Back to App"}),(0,g.jsx)("span",{className:"text-gray-300",children:"|"}),(0,g.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Panel"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("a",{href:"#translation-dashboard",className:"text-sm text-blue-600 hover:text-blue-700",children:"Translation Dashboard"}),(0,g.jsx)("button",{onClick:()=>{a(!1),window.location.hash="dashboard"},className:"text-sm text-gray-600 hover:text-gray-700",children:"Logout"}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"ScienceHabits CMS"})]})]})})}),(0,g.jsx)(bl,{})]})})}):(0,g.jsx)(vl,{onLoginSuccess:()=>a(!0)}):"translation-dashboard"===n?(0,g.jsx)(Ci,{children:(0,g.jsx)(Po,{children:(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("button",{onClick:()=>window.location.hash="admin",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"\u2190 Back to CMS"}),(0,g.jsx)("span",{className:"text-gray-300",children:"|"}),(0,g.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Translation Dashboard"})]}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Multi-Language Quality Control"})]})})}),(0,g.jsx)(hl,{})]})})}):"research-translation-review"===n?(0,g.jsx)(Ci,{children:(0,g.jsx)(Po,{children:(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("button",{onClick:()=>window.location.hash="translation-dashboard",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"\u2190 Back to Translation Dashboard"}),(0,g.jsx)("span",{className:"text-gray-300",children:"|"}),(0,g.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"German Research Review"})]}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:"Review & Approve German Translations"})]})})}),(0,g.jsx)(Dl,{})]})})}):(0,g.jsx)(Ci,{children:(0,g.jsx)(Po,{children:(0,g.jsx)(al,{user:c,onSignOut:()=>{localStorage.removeItem("sciencehabits_user_id"),l(),t(!1)},children:(0,g.jsx)(cl,{})})})}):(0,g.jsx)(H,{onComplete:d})},Cl=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,g.jsx)(r.StrictMode,{children:(0,g.jsx)(wl,{})})),Cl()})()})();
//# sourceMappingURL=main.4242b842.js.map